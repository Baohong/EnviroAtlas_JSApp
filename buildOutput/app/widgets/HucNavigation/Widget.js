//>>built
require({cache:{"widgets/HucNavigation/List":function(){define("dojo/_base/declare dijit/_WidgetBase dojo/_base/lang dojox/gfx dojo/on dojo/dom-construct dojo/dom-attr dojo/_base/array dojo/dom dojo/query dojo/dom-class dojo/dom-style dojo/Evented esri/symbols/jsonUtils".split(" "),function(u,v,m,l,d,h,g,f,c,a,b,e,t,n){return u([v,t],{"class":"widgets-Search-list",_itemCSS:"search-list-item",_itemSelectedCSS:"search-list-item selected",_itemAltCSS:"search-list-item alt",parentWidget:null,_wrapResults:null,
startup:function(){this.items=[];this.selectedIndex=-1;this._selectedNode=null;this._listContainer=h.create("div");b.add(this._listContainer,"search-list-container");this.own(d(this._listContainer,"click",m.hitch(this,this._onClick)));h.place(this._listContainer,this.domNode)},add:function(a){if(0!==arguments.length){this.items.push(a);var k=h.create("div");g.set(k,"id",this.id.toLowerCase()+a.id);var p=h.create("div");g.set(p,"id",this.id.toLowerCase()+a.id);b.add(p,"iconDiv");h.place(p,k);var q=
h.create("div");h.place(q,k);b.add(q,"removediv");g.set(q,"id",this.id.toLowerCase()+a.id);var c=h.create("div");b.add(c,"removedivImg");h.place(c,q);g.set(c,"id",this.id.toLowerCase()+a.id);g.set(c,"title",a.removeResultMsg);this.own(d(c,"click",m.hitch(this,this._onRemove)));q=h.create("p");g.set(q,"id",this.id.toLowerCase()+a.id);b.add(q,"_title");q.textContent=q.innerText=a.title;h.place(q,k);a.alt?b.add(k,this._itemAltCSS):b.add(k,this._itemCSS);this._wrapResults&&b.add(k,"result-wrap");if(""!==
a.rsltcontent)for(var q=a.rsltcontent.split("\x3cbr\x3e"),t,F,R,C,D,E=q.length,N=0;N<E;N++){c=q[N].split(": ");C=h.create("font");g.set(C,"id",this.id.toLowerCase()+a.id);-1<c[0].toLowerCase().indexOf("\x3cem\x3e")&&e.set(C,"font-style","italic");-1<c[0].toLowerCase().indexOf("\x3cstrong\x3e")&&e.set(C,"font-weight","bold");-1<c[0].toLowerCase().indexOf("\x3cu\x3e")&&e.set(C,"text-decoration","underline");if(t=-1<c[0].toLowerCase().indexOf("\x3cfont color\x3d'")?!0:!1)F=c[0].toLowerCase().indexOf("\x3cfont color\x3d'")+
13,R=c[0].toLowerCase().indexOf("'\x3e",F),t=c[0].substr(F,R-F),e.set(C,"color",t);C.textContent=C.innerText=c[0].replace(/<[\/]{0,1}(em|EM|strong|STRONG|font|FONT|u|U)[^><]*>/g,"");t=h.create("p");g.set(t,"id",this.id.toLowerCase()+a.id);b.add(t,"label");D=h.create("font");-1<c[1].toLowerCase().indexOf("\x3cem\x3e")&&e.set(D,"font-style","italic");-1<c[1].toLowerCase().indexOf("\x3cstrong\x3e")&&e.set(D,"font-weight","bold");-1<c[1].toLowerCase().indexOf("\x3cu\x3e")&&e.set(D,"text-decoration","underline");
if(F=-1<c[1].toLowerCase().indexOf("\x3cfont color\x3d'")?!0:!1)F=c[1].toLowerCase().indexOf("\x3cfont color\x3d'")+13,R=c[1].toLowerCase().indexOf("'\x3e",F),F=c[1].substr(F,R-F),e.set(D,"color",F);D.textContent="null"===c[1]?D.innerText=": ":D.innerText=": "+c[1].replace(/<[\/]{0,1}(em|EM|strong|STRONG|font|FONT|u|U)[^><]*>/g,"");h.place(C,t);h.place(D,t);h.place(t,k)}else q=h.create("p"),b.add(q,"label"),q.textContent=q.innerText=" ",h.place(q,k);if(!document.all||document.addEventListener)p=l.createSurface(p,
40,40),q=n.getShapeDescriptors(a.sym),q.defaultShape&&p.createShape(q.defaultShape).setFill(q.fill).setStroke(q.stroke).applyTransform({dx:20,dy:20});var I;if(a.links&&0<a.links.length||a.showRelate)I=h.create("div"),h.place(I,k),b.add(I,"linksdiv");f.forEach(a.links,function(a){"text"===a.popuptype?(a=h.toDom("\x3cp\x3e\x3ca href\x3d'"+a.link+"' target\x3d'_blank' title\x3d'"+a.alias+"'\x3e"+a.alias+"\x3c/a\x3e\x3c/p\x3e"),h.place(a,I,"before"),b.add(a,"labellink")):(a=h.toDom("\x3ca href\x3d'"+
a.link+"' target\x3d'_blank' title\x3d'"+a.alias+"'\x3e\x3cimg src\x3d'"+a.icon+"' alt\x3d'"+a.alias+"' border\x3d'0' width\x3d'20px' height\x3d'20px'\x3e\x3c/a\x3e"),h.place(a,I),b.add(a,"linkIcon"))});h.place(k,this._listContainer)}},addComplete:function(){this.clearSelection()},remove:function(a){var b=this.items[a];h.destroy(this.id.toLowerCase()+b.id+"");this.items.splice(a,1);0===this.items.length&&this._init();b.id===this._selectedNode&&(this._selectedNode=null);this.clearSelection()},_init:function(){this.selectedIndex=
-1;this._selectedNode=null},clear:function(){this.items.length=0;this._listContainer.innerHTML="";this._init()},_onClick:function(a){if(""!==a.target.id||""!==a.target.parentNode.id){var k=a.target.id.toLowerCase();k||(k=a.target.parentNode.id);if(a=this._getItemById(k)){b.replace(k,this._itemSelectedCSS,a.alt?this._itemAltCSS:this._itemCSS);if(this._selectedNode){var e=this._getItemById(this._selectedNode);e&&b.replace(this._selectedNode,e.alt?this._itemAltCSS:this._itemCSS,this._itemSelectedCSS)}this._selectedNode=
k;this.emit("click",this.selectedIndex,a)}}},_onRemove:function(a){a.stopPropagation();var b=a.target.id.toLowerCase();b||(b=a.target.parentNode.id);if(a=this._getItemById(b))this._selectedNode=b,this.emit("remove",this.selectedIndex,a)},_getItemById:function(a){a=a.replace(this.id.toLowerCase(),"");for(var b=this.items.length,e,q=0;q<b;q++)if(e=this.items[q],e.id===a)return this.selectedIndex=q,e;return null},clearSelection:function(){this._selectedNode=null;this.selectedIndex=-1;a(".search-list-item").forEach(function(a){b.remove(a,
"alt")});f.map(this.items,m.hitch(this,function(a,e){a.alt=0===e%2;a.alt&&b.add(this.id.toLowerCase()+a.id+"","alt")}))},setSelectedItem:function(a){var e=this._getItemById(a);e&&(b.replace(a,this._itemSelectedCSS,e.alt?this._itemAltCSS:this._itemCSS),this._selectedNode&&(e=this._getItemById(this._selectedNode))&&b.replace(this._selectedNode,e.alt?this._itemAltCSS:this._itemCSS,this._itemSelectedCSS),this._selectedNode=a)},getSelectedItem:function(){if(this._selectedNode)return this._getItemById(this._selectedNode)},
hasSelectedItem:function(){return this._selectedNode?!0:!1}})})},"widgets/HucNavigation/Parameters":function(){define("dojo/_base/declare dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dojo/text!./Parameters.html dojo/_base/lang dojo/_base/html dojo/_base/array dojo/on dojo/query dijit/registry ./SingleParameter dojo/Evented".split(" "),function(u,v,m,l,d,h,g,f,c,a,b,e,t){return u([v,m,l],{baseClass:"jimu-widget-search-parameters",templateString:d,nls:null,valuesObj:null,layerInfo:null,
layerUri:null,layerDef:null,layerUniqueCache:null,disableuvcache:!1,selectFilterType:null,postCreate:function(){this.inherited(arguments);this.valuesObj&&this.build(this.valuesObj)},destroy:function(){this.clear();this.inherited(arguments)},getSingleParamValues:function(){var e=[],c=a(".widget-esearch-single-parameter",this.tbody);f.forEach(c,h.hitch(this,function(a){(a=b.byNode(a).getValueObj())?e.push(a):e.push(null)}));return e},setFocusOnFirstParam:function(){var e=a(".widget-esearch-single-parameter",
this.tbody);b.byNode(e[0]).focusValueObj()},setSingleParamValues:function(e,c){c=c.split("|");f.forEach(c,h.hitch(this,function(a,b){-1<a.indexOf("~")?(a=a.split("~"),e[b].valueObj.value1=a[0],e[b].valueObj.value2=a[1]):e[b].valueObj.value=a}));c=a(".widget-esearch-single-parameter",this.tbody);f.forEach(c,h.hitch(this,function(a,c){b.byNode(a).setValueObj(e[c])}))},clear:function(){var e=a(".jimu-widget-search-single-parameter",this.tbody);f.forEach(e,h.hitch(this,function(a){b.byNode(a).destroy()}));
g.empty(this.tbody);this.layerInfo=this.valuesObj=null},build:function(b,c,k,r){this.clear();this.valuesObj=h.mixin({},b);this.layerInfo=h.mixin({},c);this.layerUri=k;this.layerDef=r;var q=0;f.forEach(b,h.hitch(this,function(c){var k=g.create("tr",{innerHTML:"\x3ctd\x3e\x3c/td\x3e"},this.tbody),k=a("td",k)[0],f=this._getFieldInfo(c.fieldObj.name,this.layerInfo),f=new e({nls:this.nls,value:c,fieldInfo:f,layerDetails:this.layerInfo,layerUri:this.layerUri,layerDef:this.layerDef,layerUniqueCache:this.layerUniqueCache,
isValueRequired:c.required||!1,disableuvcache:this.disableuvcache,selectFilterType:this.selectFilterType||"contains"});f.on("sp-ready",h.hitch(this,function(){q++;1!==b.length&&q!==b.length||this.emit("param-ready",{})}));f.placeAt(k);c.spId=f.id;f.on("sp-enter-pressed",h.hitch(this,function(){this.emit("enter-pressed",{})}))}))},_getFieldInfo:function(a,b){b=b.fields;for(var e=0;e<b.length;e++){var c=b[e];if(a===c.name)return h.mixin({},c)}return null}})})},"widgets/HucNavigation/SingleParameter":function(){define("dojo/_base/declare dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dojo/text!./SingleParameter.html dojo/_base/lang dojo/_base/html dojo/_base/array dojo/json dojo/on dojo/query dojo/Deferred dijit/form/FilteringSelect dijit/form/ValidationTextBox dijit/form/DateTextBox dijit/form/Textarea dijit/form/NumberTextBox dojo/store/Memory esri/request ./PagingQueryTask dojo/keys dojo/Evented dijit/focus".split(" "),
function(u,v,m,l,d,h,g,f,c,a,b,e,t,n,p,k,r,q,M,H,F,R,C){return u([v,m,l],{baseClass:"widget-esearch-single-parameter",templateString:d,fieldInfo:null,layerDetails:null,layerUri:null,layerDef:null,value:null,nls:null,isValueRequired:!1,allString:"all",dayInMS:86399E3,_type:-1,layerUniqueCache:null,pagingQueryTask:null,pagingAttempts:0,disableuvcache:!1,pagingWasCanceled:!1,selectFilterType:null,numberwithin:!1,postCreate:function(){this.inherited(arguments);this.fieldInfo&&this.value&&this.build(this.fieldInfo,
this.value)},focusValueObj:function(){var a=this.value.fieldObj.shortType;"string"===a||this.numberwithin?1===this._type?C.focus(this.stringTextBox):2===this._type&&C.focus(this.stringCodedValuesFS):"number"===a?1===this._type?C.focus(this.numberTextBox):2===this._type?C.focus(this.numberCodedValuesFS):3===this._type&&C.focus(this.numberTextBox1):"date"===a&&(1===this._type?C.focus(this.dateTextBox):2===this._type&&C.focus(this.dateTextBox1))},getValueObj:function(){var a=this.value.fieldObj.shortType;
return"string"===a||this.numberwithin?this._getStringValueObj():"number"===a?this._getNumberValueObj():"date"===a?this._getDateValueObj():null},setValueObj:function(a){var b=this.value.fieldObj.shortType;"string"===b||this.numberwithin?1===this._type?this.stringTextBox.set("value",a.valueObj.value):2===this._type&&(b=f.filter(this.stringCodedValuesFS.store.data,h.hitch(this,function(b){return b.code===a.valueObj.value})),0<b.length&&this.stringCodedValuesFS.set("value",b[0].id)):"number"===b?1===
this._type?this.numberTextBox.set("value",a.valueObj.value):2===this._type?(b=f.filter(this.numberCodedValuesFS.store,h.hitch(this,function(b){return b.code===a.valueObj.value})),0<b.length&&this.numberCodedValuesFS.set("value",b[0].id)):3===this._type&&(this.numberTextBox1.set("value",a.valueObj.value1),this.numberTextBox2.set("value",a.valueObj.value2)):"date"===b&&(1===this._type?""===a.valueObj.value?this.dateTextBox.set("value",null):this.dateTextBox.set("value",new Date(a.valueObj.value)):2===
this._type&&(""===a.valueObj.value?(this.dateTextBox1.set("value",null),this.dateTextBox2.set("value",null)):(this.dateTextBox1.set("value",new Date(a.valueObj.value1)),this.dateTextBox2.set("value",new Date(a.valueObj.value2)))))},_getStringValueObj:function(){var a=null;if(1===this._type)a={},a.value=this.stringTextBox.get("value");else if(2===this._type){if(!this.stringCodedValuesFS.validate())return this._showValidationErrorTip(this.stringCodedValuesFS),null;var a={},b=this._getSelectedFilteringItem(this.stringCodedValuesFS);
a.value=b.code}return a},_getNumberValueObj:function(){var a=null;if(1===this._type){if(!this.numberTextBox.validate())return this._showValidationErrorTip(this.numberTextBox),null;a={};a.value=parseFloat(this.numberTextBox.get("value"))}else if(2===this._type){if(!this.numberCodedValuesFS.validate())return this._showValidationErrorTip(this.numberCodedValuesFS),null;var a={},b=this._getSelectedFilteringItem(this.numberCodedValuesFS);a.value="allu"===b.code||"all"===b.code?b.code:parseFloat(b.code)}else if(3===
this._type){if(!this.numberTextBox1.validate())return this._showValidationErrorTip(this.numberTextBox1),null;if(!this.numberTextBox2.validate())return this._showValidationErrorTip(this.numberTextBox2),null;a={};a.value1=parseFloat(this.numberTextBox1.get("value"));a.value2=parseFloat(this.numberTextBox2.get("value"))}return a},_getDateValueObj:function(){var a=null;if(1===this._type){if(!this.dateTextBox.validate())return this._showValidationErrorTip(this.dateTextBox),null;a={};this.dateTextBox.get("value")?
a.value=dojo.date.locale.format(this.dateTextBox.get("value"),{datePattern:"yyyy-MM-dd HH:mm:ss",selector:"date"}):a.value=null}else if(2===this._type){if(!this.dateTextBox1.validate())return this._showValidationErrorTip(this.dateTextBox1),null;if(!this.dateTextBox2.validate())return this._showValidationErrorTip(this.dateTextBox2),null;a={};this.dateTextBox1.get("value")?a.value1=dojo.date.locale.format(this.dateTextBox1.get("value"),{datePattern:"yyyy-MM-dd HH:mm:ss",selector:"date"}):a.value1=null;
this.dateTextBox2.get("value")?a.value2=dojo.date.locale.format(this.dateTextBox2.get("value"),{datePattern:"yyyy-MM-dd HH:mm:ss",selector:"date"}):a.value2=null}return a},formatDate:function(a){var b=dojo.date.locale.format(a,{datePattern:"yyyy-MM-dd",selector:"date"});a=dojo.date.locale.format(a,{selector:"time",timePattern:"HH:mm:ss"});return b+" "+a},addDay:function(a){return new Date(a.getTime()+this.dayInMS)},build:function(b,e){this.numberwithin=!1;this.own(a(this.stringTextBox,"keydown",h.hitch(this,
function(a){13===(void 0!==a.keyCode?a.keyCode:a.which)&&this.emit("sp-enter-pressed",{})})));this.own(a(this.numberTextBox,"keydown",h.hitch(this,function(a){13===(void 0!==a.keyCode?a.keyCode:a.which)&&this.emit("sp-enter-pressed",{})})));this.own(a(this.dateTextBox,"keydown",h.hitch(this,function(a){13===(void 0!==a.keyCode?a.keyCode:a.which)&&this.emit("sp-enter-pressed",{})})));this.fieldInfo=b;this.value=e;e.hasOwnProperty("required")&&e.required?g.setStyle(this.requiredNode,"display",""):g.setStyle(this.requiredNode,
"display","none");this.promptNode.innerHTML=e.prompt||"";this.hintNode.innerHTML=e.textsearchhint||"";var c=this.value.fieldObj.shortType,f=this.value.userlist||null,q=this.value.uniquevalsfromfield||null;if("string"===c)this.stringCodedValuesFS.set("autoComplete",!1),"contains"===this.selectFilterType&&this.stringCodedValuesFS.set("queryExpr","*${0}*"),""===e.prompt?(this.stringCodedValuesFS.set("readOnly",!0),this.stringTextBox.set("readOnly",!0)):(this.stringCodedValuesFS.set("readOnly",!1),this.stringTextBox.set("readOnly",
!1)),f?this._buildString(b,this.value,f):q?this._buildString(b,this.value,null,q):this._buildString(b,this.value);else if("number"===c){""===e.prompt?(this.numberTextBox1.set("readOnly",!0),this.numberTextBox2.set("readOnly",!0),this.numberCodedValuesFS.set("readOnly",!0),this.numberTextBox.set("readOnly",!0)):(this.numberTextBox1.set("readOnly",!1),this.numberTextBox2.set("readOnly",!1),this.numberCodedValuesFS.set("readOnly",!1),this.numberTextBox.set("readOnly",!1));if(0<this.value.sqltext.toLowerCase().indexOf(" in (")){this.numberwithin=
!0;this._buildString(b,this.value);return}f?this._buildNumber(b,this.value,f):q?this._buildNumber(b,this.value,null,q):this._buildNumber(b,this.value)}else"date"===c&&(""===e.prompt?(this.dateTextBox.set("readOnly",!0),this.dateTextBox1.set("readOnly",!0),this.dateTextBox2.set("readOnly",!0)):(this.dateTextBox.set("readOnly",!1),this.dateTextBox1.set("readOnly",!1),this.dateTextBox2.set("readOnly",!1)),this._buildDate(b,this.value));"numberOperatorIsBlank"===e.operation||"numberOperatorIsNotBlank"===
e.operation||"stringOperatorIsBlank"===e.operation||"stringOperatorIsNotBlank"===e.operation||"dateOperatorIsBlank"===e.operation||"dateOperatorIsNotBlank"===e.operation?g.setStyle(this.allValueBoxContainer,"display","none"):g.setStyle(this.allValueBoxContainer,"display","inline-block")},_getCodedValues:function(a){var b=null;(a=a.domain)&&"codedValue"===a.type&&a.codedValues&&0<a.codedValues.length&&(b=a.codedValues);return b},_getSubTypeValues:function(){var a=[];a.push({name:"",code:-1});for(var b=
0;b<this.layerDetails.types.length;b++){var e=this.layerDetails.types[b];a.push({name:e.name,code:e.id})}return a},_buildString:function(b,e,c,k){g.setStyle(this.stringTextBoxContainer,"display","block");g.setStyle(this.numberTextBoxContainer,"display","none");g.setStyle(this.dateTextBoxContainer,"display","none");var p=e.valueObj;if((e=this._getCodedValues(b))||c||k){var r;this._type=2;this._showDijit(this.stringCodedValuesFS);this._hideDijit(this.stringTextBox);this.stringCodedValuesFS.set("displayedValue",
"");var n=new q({data:[]});this.stringCodedValuesFS.set("store",n);if(!e||k||c)if(k){var C;e=this.disableuvcache?null:this.layerUniqueCache[this.layerUri];e||(e={},this.layerUniqueCache[this.layerUri]=e);n=this.layerDef?k+this.layerDef:k;c=[];n in e?(c=e[n],C=new q({data:c}),this.stringCodedValuesFS.set("store",C),p&&(k=f.filter(r,h.hitch(this,function(a){return a.code===p.value})),0<k.length?this.stringCodedValuesFS.set("value",k[0].id):this.stringCodedValuesFS.set("value",c[0].id)),setTimeout(h.hitch(this,
function(){this.emit("sp-ready",{})}),200)):(this.pagingQueryTask=new H,this.own(a(this.uniqueCancelNode,"click",h.hitch(this,function(){this.pagingWasCanceled=this.pagingQueryTask.esc=this.pagingQueryTask.pagingEscaped=!0}))),this.pagingQueryTask.uri=this.layerUri,this.pagingQueryTask.fieldName=k,this.pagingQueryTask.dateFormat="",this.pagingQueryTask.version=this.layerDetails.currentVersion,this.layerDetails.maxRecordCount&&(this.pagingQueryTask.maxRecordCount=this.layerDetails.maxRecordCount),
this.pagingQueryTask.isRequired=this.isValueRequired,this.layerDef&&(this.pagingQueryTask.defExpr=this.layerDef),this.pagingQueryTask.on("pagingComplete",h.hitch(this,function(a){g.setStyle(this.uniqueMessageTR,"display","none");this.uniqueMessageNode.innerHTML="";this.pagingAttempts=0;r=f.map(a,h.hitch(this,function(a,b){a=h.mixin({},a);a.id=b;return a}));if(this._isFieldCoded(b)){var e=b.domain;f.map(r,h.hitch(this,function(a){for(var b=0;b<e.codedValues.length;b++){var k=e.codedValues[b];if(a.code===
k.code){a.name=k.name;break}}}))}this.pagingWasCanceled||(this.layerDef?this.layerUniqueCache[this.layerUri][this.pagingQueryTask.fieldName+this.layerDef]=r:this.layerUniqueCache[this.layerUri][this.pagingQueryTask.fieldName]=r);C=new q({data:r});"undefined"!==typeof this.stringCodedValuesFS&&(this.stringCodedValuesFS.set("store",C),p&&(a=f.filter(r,h.hitch(this,function(a){return a.code===p.value})),0<a.length?this.stringCodedValuesFS.set("value",a[0].id):this.stringCodedValuesFS.set("value",r[0].id)),
setTimeout(h.hitch(this,function(){this.emit("sp-ready",{})}),200))})),this.pagingQueryTask.on("pagingFault",h.hitch(this,function(){this.pagingAttempts++;4>=this.pagingAttempts?(console.warn("pagingQueryTask has been launched again for the "+this.pagingAttempts+" time"),this.pagingQueryTask.startup(),this.pagingQueryTask.execute()):(this._type=1,this._showDijit(this.stringTextBox),this._hideDijit(this.stringCodedValuesFS),this.stringTextBox.set("value",p.value||""),g.setStyle(this.uniqueMessageTR,
"display","none"),this.uniqueMessageNode.innerHTML="",setTimeout(h.hitch(this,function(){this.emit("sp-ready",{})}),200))})),this.pagingQueryTask.startup(),this.pagingQueryTask.execute(),g.setStyle(this.uniqueMessageTR,"display","table-row"),this.uniqueMessageNode.innerHTML=this.nls.uniqueValues,this.pagingQueryTask.on("featuresTotal",h.hitch(this,function(){g.setStyle(this.uniqueMessageTR,"display","table-row");this.uniqueMessageNode.innerHTML=this.nls.processingUnique+this.pagingQueryTask.featuresProcessed+
this.nls.of+this.pagingQueryTask.featuresTotal})),this.pagingQueryTask.on("featuresProcessed",h.hitch(this,function(){g.setStyle(this.uniqueMessageTR,"display","table-row");this.uniqueMessageNode.innerHTML=this.nls.processingUnique+this.pagingQueryTask.featuresProcessed+this.nls.of+this.pagingQueryTask.featuresTotal})))}else-1<c.indexOf("',")?(k=this.trimArray(c.split("',")),k=f.map(k,function(a,b){String(a).indexOf("|'")&&(a=String(a).replace("|'","|"));return a}),c=String(k[k.length-1]),"'"==c.substring(c.length-
1)&&(k[k.length-1]=c.substring(0,c.length-1))):k=this.trimArray(c.split(",")),r=f.map(k,h.hitch(this,function(a,b){var e;e=a;a===this.allString&&(e="all");0>a.indexOf("|")?e=h.mixin({},{name:a,code:e}):(a=a.split("|"),e="all"===e?h.mixin({},{name:a[0],code:e}):h.mixin({},{name:a[0],code:a[1]}));e.id=b;return e})),this.isValueRequired||(k=h.mixin({},{name:"",code:""}),k.id=r.length,r.unshift(k));else r=f.map(e,h.hitch(this,function(a,b){a=h.mixin({},a);a.id=b;return a})),this.isValueRequired||(k=h.mixin({},
{name:"",code:""}),k.id=r.length,r.unshift(k));if(!r)return;k=new q({data:r});this.stringCodedValuesFS.set("store",k);p&&(k=f.filter(r,h.hitch(this,function(a){return a.code===p.value})),0<k.length?this.stringCodedValuesFS.set("value",k[0].id):this.stringCodedValuesFS.set("value",r[0].id))}else k=new q({data:[]}),this.stringCodedValuesFS.set("store",k),this._type=1,this._showDijit(this.stringTextBox),this._hideDijit(this.stringCodedValuesFS),this.stringTextBox.set("value",p?p.value:""),this.isValueRequired&&
this.stringTextBox.set("required",!0);setTimeout(h.hitch(this,function(){this.emit("sp-ready",{})}),200)},trimArray:function(a){for(var b=0;b<a.length;b++)a[b]=a[b].replace(/^\s*/,"").replace(/\s*$/,"");return a},_buildNumber:function(b,e,k,c){g.setStyle(this.stringTextBoxContainer,"display","none");g.setStyle(this.numberTextBoxContainer,"display","block");g.setStyle(this.dateTextBoxContainer,"display","none");var p=e.valueObj,r=e.operation;e=this._getCodedValues(b);var n=parseFloat(p.value);if(r===
this.nls.numberOperatorIsBetween||r===this.nls.numberOperatorIsNotBetween)this._type=3,g.setStyle(this.numberRangeTable,"display","table"),this._hideDijit(this.numberTextBox),this._hideDijit(this.numberCodedValuesFS),c=parseFloat(p.value1),k=parseFloat(p.value2),this.numberTextBox1.set("value",c),this.numberTextBox2.set("value",k),this.isValueRequired&&(this.numberTextBox1.set("required",!0),this.numberTextBox2.set("required",!0)),setTimeout(h.hitch(this,function(){this.emit("sp-ready",{})}),200);
else if(g.setStyle(this.numberRangeTable,"display","none"),this.layerDetails.typeIdField&&this.layerDetails.typeIdField.toUpperCase()===b.name.toUpperCase()){if(c=this._getSubTypeValues()){this._type=2;this._showDijit(this.numberCodedValuesFS);this._hideDijit(this.numberTextBox);c=f.map(c,h.hitch(this,function(a,b){a=h.mixin({},a);a.id=b;return a}));this.isValueRequired||(k=h.mixin({},{name:"",code:""}),k.id=c.length,c.unshift(k));k=new q({data:c});this.numberCodedValuesFS.set("store",k);if(p&&!isNaN(p.value)){var C=
parseFloat(p.value);k=f.filter(c,h.hitch(this,function(a){return parseFloat(a.code)===C}));0<k.length?this.numberCodedValuesFS.set("value",k[0].id):this.numberCodedValuesFS.set("value",c[0].id)}else this.numberCodedValuesFS.set("value",c[0].id);setTimeout(h.hitch(this,function(){this.emit("sp-ready",{})}),200)}}else if(e||k||c){var d;this._type=2;this._showDijit(this.numberCodedValuesFS);this._hideDijit(this.numberTextBox);this.numberCodedValuesFS.set("displayedValue","");r=new q({data:[]});this.numberCodedValuesFS.set("store",
r);if(!e||c||k)if(c){var t;e=this.layerUniqueCache[this.layerUri];e||(e={},this.layerUniqueCache[this.layerUri]=e);k=[];c in e?(k=e[c],t=new q({data:k}),this.numberCodedValuesFS.set("store",t),p&&(c=f.filter(d,h.hitch(this,function(a){return a.code===p.value})),0<c.length?this.numberCodedValuesFS.set("value",c[0].id):this.numberCodedValuesFS.set("value",k[0].id)),setTimeout(h.hitch(this,function(){this.emit("sp-ready",{})}),200)):(this.pagingQueryTask=new H,this.own(a(this.uniqueCancelNode,"click",
h.hitch(this,function(){this.pagingWasCanceled=this.pagingQueryTask.esc=this.pagingQueryTask.pagingEscaped=!0}))),this.pagingQueryTask.uri=this.layerUri,this.pagingQueryTask.fieldName=c,this.pagingQueryTask.dateFormat="",this.pagingQueryTask.version=this.layerDetails.currentVersion,this.pagingQueryTask.maxRecordCount=this.layerDetails.maxRecordCount,this.layerDef&&(this.pagingQueryTask.defExpr=this.layerDef),this.pagingQueryTask.on("pagingComplete",h.hitch(this,function(a){g.setStyle(this.uniqueMessageTR,
"display","none");this.uniqueMessageNode.innerHTML="";this.pagingAttempts=0;d=f.map(a,h.hitch(this,function(a,b){a=h.mixin({},a);a.id=b;return a}));if(this._isFieldCoded(b)){var e=b.domain;f.map(d,h.hitch(this,function(a){for(var b=0;b<e.codedValues.length;b++){var c=e.codedValues[b];if(a.code===c.code){a.name=c.name;break}}}))}this.pagingWasCanceled||(this.layerUniqueCache[this.layerUri][this.pagingQueryTask.fieldName]=d);t=new q({data:d});"undefined"!==typeof this.numberCodedValuesFS&&(this.numberCodedValuesFS.set("store",
t),p&&(a=f.filter(d,h.hitch(this,function(a){return a.code===p.value})),0<a.length?this.numberCodedValuesFS.set("value",a[0].id):this.numberCodedValuesFS.set("value",d[0].id)),setTimeout(h.hitch(this,function(){this.emit("sp-ready",{})}),200))})),this.pagingQueryTask.on("pagingFault",h.hitch(this,function(){this.pagingAttempts++;4>=this.pagingAttempts?(console.warn("pagingQueryTask has been launched again for the "+this.pagingAttempts+" time"),this.pagingQueryTask.startup(),this.pagingQueryTask.execute()):
(this._type=1,this._showDijit(this.numberTextBox),this._hideDijit(this.numberCodedValuesFS),this.numberTextBox.set("value",n),setTimeout(h.hitch(this,function(){this.emit("sp-ready",{})}),200))})),this.pagingQueryTask.startup(),this.pagingQueryTask.execute(),g.setStyle(this.uniqueMessageTR,"display","table-row"),this.uniqueMessageNode.innerHTML=this.nls.uniqueValues,this.pagingQueryTask.on("featuresTotal",h.hitch(this,function(){g.setStyle(this.uniqueMessageTR,"display","table-row");this.uniqueMessageNode.innerHTML=
this.nls.processingUnique+this.pagingQueryTask.featuresProcessed+this.nls.of+this.pagingQueryTask.featuresTotal})),this.pagingQueryTask.on("featuresProcessed",h.hitch(this,function(){g.setStyle(this.uniqueMessageTR,"display","table-row");this.uniqueMessageNode.innerHTML=this.nls.processingUnique+this.pagingQueryTask.featuresProcessed+this.nls.of+this.pagingQueryTask.featuresTotal})))}else c=this.trimArray(k.split(",")),d=f.map(c,h.hitch(this,function(a,b){var e;e=a;a===this.allString&&(e="all");0>
a.indexOf("|")?e=h.mixin({},{name:a,code:e}):(a=a.split("|"),e="all"===e?h.mixin({},{name:a[0],code:e}):h.mixin({},{name:a[0],code:a[1]}));e.id=b;return e})),this.isValueRequired||(k=h.mixin({},{name:"",code:""}),k.id=d.length,d.unshift(k)),c=new q({data:d}),this.numberCodedValuesFS.set("store",c),p&&!isNaN(p.value)?(parseFloat(p.value),c=f.filter(d,h.hitch(this,function(a){return parseFloat(a.code)===N})),0<c.length?this.numberCodedValuesFS.set("value",c[0].id):this.numberCodedValuesFS.set("value",
d[0].id)):this.numberCodedValuesFS.set("value",d[0].id),setTimeout(h.hitch(this,function(){this.emit("sp-ready",{})}),200);else{d=f.map(e,h.hitch(this,function(a,b){a=h.mixin({},a);a.id=b;return a}));this.isValueRequired||(c=h.mixin({},{name:"",code:""}),c.id=d.length,d.unshift(c));c=new q({data:d});this.numberCodedValuesFS.set("store",c);if(p&&!isNaN(p.value)){var N=parseFloat(p.value);c=f.filter(d,h.hitch(this,function(a){return parseFloat(a.code)===N}));0<c.length?this.numberCodedValuesFS.set("value",
c[0].id):this.numberCodedValuesFS.set("value",d[0].id)}else this.numberCodedValuesFS.set("value",d[0].id);setTimeout(h.hitch(this,function(){this.emit("sp-ready",{})}),200)}}else c=new q({data:[]}),this.numberCodedValuesFS.set("store",c),this._type=1,this._showDijit(this.numberTextBox),this._hideDijit(this.numberCodedValuesFS),this.numberTextBox.set("value",n),this.isValueRequired&&this.numberTextBox.set("required",!0),setTimeout(h.hitch(this,function(){this.emit("sp-ready",{})}),200)},_isFieldCoded:function(a){return(a=
a.domain)&&"codedValue"===a.type&&a.codedValues&&0<a.codedValues.length},_buildDate:function(a,b){g.setStyle(this.stringTextBoxContainer,"display","none");g.setStyle(this.numberTextBoxContainer,"display","none");g.setStyle(this.dateTextBoxContainer,"display","block");a=b.valueObj;var e=b.operation;e===this.nls.dateOperatorIsBetween||e===this.nls.dateOperatorIsNotBetween?(this._type=2,g.setStyle(this.dateRangeTable,"display","table"),this._hideDijit(this.dateTextBox),b.date1minus&&(b=parseInt(b.date1minus,
10),b=new Date((new Date).getTime()-this.dayInMS*b),this.dateTextBox1.set("value",b)),"[value]"!==a.value1&&"[value]"!==a.value2&&(this.dateTextBox1.set("value",new Date(a.value1)),this.dateTextBox2.set("value",new Date(a.value2))),this.isValueRequired&&(this.dateTextBox1.set("required",!0),this.dateTextBox2.set("required",!0))):(this._type=1,g.setStyle(this.dateRangeTable,"display","none"),this._showDijit(this.dateTextBox),this.dateTextBox.set("value",new Date(a.value)),this.isValueRequired&&this.dateTextBox.set("required",
!0));setTimeout(h.hitch(this,function(){this.emit("sp-ready",{})}),200)},_getSelectedFilteringItem:function(a){if(a.validate()){var b=a.get("value");if(isNaN(b))this._showValidationErrorTip(a);else if(a=a.store.query({id:b}),0<a.length&&(a=a[0]))return a}else this._showValidationErrorTip(a);return null},_showValidationErrorTip:function(a){!a.validate()&&a.domNode&&a.focusNode&&(a.focusNode.focus(),a.focusNode.blur())},_showDijit:function(a){a&&a.domNode&&g.setStyle(a.domNode,"display","inline-block")},
_hideDijit:function(a){a&&a.domNode&&g.setStyle(a.domNode,"display","none")},_onRangeNumberBlur:function(){if(this.numberTextBox1.validate()&&this.numberTextBox2.validate()){var a=parseFloat(this.numberTextBox1.get("value")),b=parseFloat(this.numberTextBox2.get("value"));a>b&&(this.numberTextBox1.set("value",b),this.numberTextBox2.set("value",a))}},_onRangeDateBlur:function(){if(this.dateTextBox1.validate()&&this.dateTextBox2.validate()){var a=this.dateTextBox1.get("value"),b=a.getTime(),e=this.dateTextBox2.get("value"),
c=e.getTime();b>c&&(this.dateTextBox1.set("value",e),this.dateTextBox2.set("value",a))}}})})},"dijit/form/DateTextBox":function(){define(["dojo/_base/declare","../Calendar","./_DateTimeTextBox"],function(u,v,m){return u("dijit.form.DateTextBox",m,{baseClass:"dijitTextBox dijitComboBox dijitDateTextBox",popupClass:v,_selector:"date",maxHeight:Infinity,value:new Date("")})})},"dijit/Calendar":function(){define("dojo/_base/array dojo/date dojo/date/locale dojo/_base/declare dojo/dom-attr dojo/dom-class dojo/dom-construct dojo/_base/kernel dojo/keys dojo/_base/lang dojo/on dojo/sniff ./CalendarLite ./_Widget ./_CssStateMixin ./_TemplatedMixin ./form/DropDownButton".split(" "),
function(u,v,m,l,d,h,g,f,c,a,b,e,t,n,p,k,r){var q=l("dijit.Calendar",[t,n,p],{baseClass:"dijitCalendar",cssStateNodes:{decrementMonth:"dijitCalendarArrow",incrementMonth:"dijitCalendarArrow",previousYearLabelNode:"dijitCalendarPreviousYear",nextYearLabelNode:"dijitCalendarNextYear"},setValue:function(a){f.deprecated("dijit.Calendar:setValue() is deprecated.  Use set('value', ...) instead.","","2.0");this.set("value",a)},_createMonthWidget:function(){return new q._MonthDropDownButton({id:this.id+"_mddb",
tabIndex:-1,onMonthSelect:a.hitch(this,"_onMonthSelect"),lang:this.lang,dateLocaleModule:this.dateLocaleModule},this.monthNode)},postCreate:function(){this.inherited(arguments);this.own(b(this.domNode,"keydown",a.hitch(this,"_onKeyDown")),b(this.dateRowsNode,"mouseover",a.hitch(this,"_onDayMouseOver")),b(this.dateRowsNode,"mouseout",a.hitch(this,"_onDayMouseOut")),b(this.dateRowsNode,"mousedown",a.hitch(this,"_onDayMouseDown")),b(this.dateRowsNode,"mouseup",a.hitch(this,"_onDayMouseUp")))},_onMonthSelect:function(a){var b=
new this.dateClassObj(this.currentFocus);b.setDate(1);b.setMonth(a);a=this.dateModule.getDaysInMonth(b);var e=this.currentFocus.getDate();b.setDate(Math.min(e,a));this._setCurrentFocusAttr(b)},_onDayMouseOver:function(a){(a=h.contains(a.target,"dijitCalendarDateLabel")?a.target.parentNode:a.target)&&(a.dijitDateValue&&!h.contains(a,"dijitCalendarDisabledDate")||a==this.previousYearLabelNode||a==this.nextYearLabelNode)&&(h.add(a,"dijitCalendarHoveredDate"),this._currentNode=a)},_onDayMouseOut:function(a){!this._currentNode||
a.relatedTarget&&a.relatedTarget.parentNode==this._currentNode||(a="dijitCalendarHoveredDate",h.contains(this._currentNode,"dijitCalendarActiveDate")&&(a+=" dijitCalendarActiveDate"),h.remove(this._currentNode,a),this._currentNode=null)},_onDayMouseDown:function(a){(a=a.target.parentNode)&&a.dijitDateValue&&!h.contains(a,"dijitCalendarDisabledDate")&&(h.add(a,"dijitCalendarActiveDate"),this._currentNode=a)},_onDayMouseUp:function(a){(a=a.target.parentNode)&&a.dijitDateValue&&h.remove(a,"dijitCalendarActiveDate")},
handleKey:function(a){var b=-1,e,k=this.currentFocus;switch(a.keyCode){case c.RIGHT_ARROW:b=1;case c.LEFT_ARROW:e="day";this.isLeftToRight()||(b*=-1);break;case c.DOWN_ARROW:b=1;case c.UP_ARROW:e="week";break;case c.PAGE_DOWN:b=1;case c.PAGE_UP:e=a.ctrlKey||a.altKey?"year":"month";break;case c.END:k=this.dateModule.add(k,"month",1),e="day";case c.HOME:k=new this.dateClassObj(k);k.setDate(1);break;default:return!0}e&&(k=this.dateModule.add(k,e,b));this._setCurrentFocusAttr(k);return!1},_onKeyDown:function(a){this.handleKey(a)||
(a.stopPropagation(),a.preventDefault())},onValueSelected:function(){},onChange:function(a){this.onValueSelected(a)},getClassForDate:function(){}});q._MonthDropDownButton=l("dijit.Calendar._MonthDropDownButton",r,{onMonthSelect:function(){},postCreate:function(){this.inherited(arguments);this.dropDown=new q._MonthDropDown({id:this.id+"_mdd",onChange:this.onMonthSelect})},_setMonthAttr:function(a){var b=this.dateLocaleModule.getNames("months","wide","standAlone",this.lang,a);this.dropDown.set("months",
b);this.containerNode.innerHTML=(6==e("ie")?"":"\x3cdiv class\x3d'dijitSpacer'\x3e"+this.dropDown.domNode.innerHTML+"\x3c/div\x3e")+"\x3cdiv class\x3d'dijitCalendarMonthLabel dijitCalendarCurrentMonthLabel'\x3e"+b[a.getMonth()]+"\x3c/div\x3e"}});q._MonthDropDown=l("dijit.Calendar._MonthDropDown",[n,k,p],{months:[],baseClass:"dijitCalendarMonthMenu dijitMenu",templateString:"\x3cdiv data-dojo-attach-event\x3d'ondijitclick:_onClick'\x3e\x3c/div\x3e",_setMonthsAttr:function(a){this.domNode.innerHTML=
"";u.forEach(a,function(a,b){g.create("div",{className:"dijitCalendarMonthLabel",month:b,innerHTML:a},this.domNode)._cssState="dijitCalendarMonthLabel"},this)},_onClick:function(a){this.onChange(d.get(a.target,"month"))},onChange:function(){}});return q})},"dijit/CalendarLite":function(){define("dojo/_base/array dojo/_base/declare dojo/cldr/supplemental dojo/date dojo/date/locale dojo/date/stamp dojo/dom dojo/dom-class dojo/dom-attr dojo/_base/lang dojo/on dojo/sniff dojo/string ./_WidgetBase ./_TemplatedMixin dojo/text!./templates/Calendar.html ./a11yclick ./hccss".split(" "),
function(u,v,m,l,d,h,g,f,c,a,b,e,t,n,p,k){var r=v("dijit.CalendarLite",[n,p],{templateString:k,dowTemplateString:'\x3cth class\x3d"dijitReset dijitCalendarDayLabelTemplate" role\x3d"columnheader" scope\x3d"col"\x3e\x3cspan class\x3d"dijitCalendarDayLabel"\x3e${d}\x3c/span\x3e\x3c/th\x3e',dateTemplateString:'\x3ctd class\x3d"dijitReset" role\x3d"gridcell" data-dojo-attach-point\x3d"dateCells"\x3e\x3cspan class\x3d"dijitCalendarDateLabel" data-dojo-attach-point\x3d"dateLabels"\x3e\x3c/span\x3e\x3c/td\x3e',
weekTemplateString:'\x3ctr class\x3d"dijitReset dijitCalendarWeekTemplate" role\x3d"row"\x3e${d}${d}${d}${d}${d}${d}${d}\x3c/tr\x3e',value:new Date(""),datePackage:"",dayWidth:"narrow",tabIndex:"0",dayOffset:-1,currentFocus:new Date,_setSummaryAttr:"gridNode",baseClass:"dijitCalendar dijitCalendarLite",_isValidDate:function(a){return a&&!isNaN(a)&&"object"==typeof a&&a.toString()!=this.constructor.prototype.value.toString()},_getValueAttr:function(){var a=this._get("value");if(a&&!isNaN(a)){var b=
new this.dateClassObj(a);b.setHours(0,0,0,0);b.getDate()<a.getDate()&&(b=this.dateModule.add(b,"hour",1));return b}return null},_setValueAttr:function(a,b){"string"==typeof a&&(a=h.fromISOString(a));a=this._patchDate(a);if(this._isValidDate(a)&&!this.isDisabledDate(a,this.lang)){if(this._set("value",a),this.set("currentFocus",a),this._markSelectedDates([a]),this._created&&(b||"undefined"==typeof b))this.onChange(this.get("value"))}else this._set("value",null),this._markSelectedDates([])},_patchDate:function(a){if(a||
0===a)a=new this.dateClassObj(a),a.setHours(1,0,0,0);return a},_setText:function(a,b){for(;a.firstChild;)a.removeChild(a.firstChild);a.appendChild(a.ownerDocument.createTextNode(b))},_populateGrid:function(){var a=new this.dateClassObj(this.currentFocus);a.setDate(1);var a=this._patchDate(a),b=a.getDay(),e=this.dateModule.getDaysInMonth(a),k=this.dateModule.getDaysInMonth(this.dateModule.add(a,"month",-1)),f=new this.dateClassObj,p=0<=this.dayOffset?this.dayOffset:m.getFirstDayOfWeek(this.lang);p>
b&&(p-=7);if(!this.summary){var r=this.dateLocaleModule.getNames("months","wide","standAlone",this.lang,a);this.gridNode.setAttribute("summary",r[a.getMonth()])}this._date2cell={};u.forEach(this.dateCells,function(q,r){var n=r+p,C=new this.dateClassObj(a),h="dijitCalendar",t=0;n<b?(n=k-b+n+1,t=-1,h+="Previous"):n>=b+e?(n=n-b-e+1,t=1,h+="Next"):(n=n-b+1,h+="Current");t&&(C=this.dateModule.add(C,"month",t));C.setDate(n);this.dateModule.compare(C,f,"date")||(h="dijitCalendarCurrentDate "+h);this.isDisabledDate(C,
this.lang)?(h="dijitCalendarDisabledDate "+h,q.setAttribute("aria-disabled","true")):(h="dijitCalendarEnabledDate "+h,q.removeAttribute("aria-disabled"),q.setAttribute("aria-selected","false"));(t=this.getClassForDate(C,this.lang))&&(h=t+" "+h);q.className=h+"Month dijitCalendarDateTemplate";h=C.valueOf();this._date2cell[h]=q;q.dijitDateValue=h;h=C.getDateLocalized?C.getDateLocalized(this.lang):C.getDate();this._setText(this.dateLabels[r],h);c.set(q,"aria-label",d.format(C,{selector:"date",formatLength:"long"}))},
this)},_populateControls:function(){var a=new this.dateClassObj(this.currentFocus);a.setDate(1);this.monthWidget.set("month",a);var b=a.getFullYear()-1,e=new this.dateClassObj;u.forEach(["previous","current","next"],function(a){e.setFullYear(b++);this._setText(this[a+"YearLabelNode"],this.dateLocaleModule.format(e,{selector:"year",locale:this.lang}))},this)},goToToday:function(){this.set("value",new this.dateClassObj)},constructor:function(b){this.dateModule=b.datePackage?a.getObject(b.datePackage,
!1):l;this.dateClassObj=this.dateModule.Date||Date;this.dateLocaleModule=b.datePackage?a.getObject(b.datePackage+".locale",!1):d},_createMonthWidget:function(){return r._MonthWidget({id:this.id+"_mddb",lang:this.lang,dateLocaleModule:this.dateLocaleModule},this.monthNode)},buildRendering:function(){var a=this.dowTemplateString,b=this.dateLocaleModule.getNames("days",this.dayWidth,"standAlone",this.lang),e=0<=this.dayOffset?this.dayOffset:m.getFirstDayOfWeek(this.lang);this.dayCellsHtml=t.substitute([a,
a,a,a,a,a,a].join(""),{d:""},function(){return b[e++%7]});a=t.substitute(this.weekTemplateString,{d:this.dateTemplateString});this.dateRowsHtml=[a,a,a,a,a,a].join("");this.dateCells=[];this.dateLabels=[];this.inherited(arguments);g.setSelectable(this.domNode,!1);a=new this.dateClassObj(this.currentFocus);this.monthWidget=this._createMonthWidget();this.set("currentFocus",a,!1)},postCreate:function(){this.inherited(arguments);this._connectControls()},_connectControls:function(){var e=a.hitch(this,function(e,
c,k){this[e].dojoClick=!0;return b(this[e],"click",a.hitch(this,function(){this._setCurrentFocusAttr(this.dateModule.add(this.currentFocus,c,k))}))});this.own(e("incrementMonth","month",1),e("decrementMonth","month",-1),e("nextYearLabelNode","year",1),e("previousYearLabelNode","year",-1))},_setCurrentFocusAttr:function(a,b){var c=this.currentFocus,k=this._getNodeByDate(c);a=this._patchDate(a);this._set("currentFocus",a);this._date2cell&&0==this.dateModule.difference(c,a,"month")||(this._populateGrid(),
this._populateControls(),this._markSelectedDates([this.value]));a=this._getNodeByDate(a);a.setAttribute("tabIndex",this.tabIndex);(this.focused||b)&&a.focus();k&&k!=a&&(e("webkit")?k.setAttribute("tabIndex","-1"):k.removeAttribute("tabIndex"))},focus:function(){this._setCurrentFocusAttr(this.currentFocus,!0)},_onDayClick:function(a){a.stopPropagation();a.preventDefault();for(a=a.target;a&&!a.dijitDateValue&&0!==a.dijitDateValue;a=a.parentNode);a&&!f.contains(a,"dijitCalendarDisabledDate")&&this.set("value",
a.dijitDateValue)},_getNodeByDate:function(a){return(a=this._patchDate(a))&&this._date2cell?this._date2cell[a.valueOf()]:null},_markSelectedDates:function(b){function e(a,b){f.toggle(b,"dijitCalendarSelectedDate",a);b.setAttribute("aria-selected",a?"true":"false")}u.forEach(this._selectedCells||[],a.partial(e,!1));this._selectedCells=u.filter(u.map(b,this._getNodeByDate,this),function(a){return a});u.forEach(this._selectedCells,a.partial(e,!0))},onChange:function(){},isDisabledDate:function(){},getClassForDate:function(){}});
r._MonthWidget=v("dijit.CalendarLite._MonthWidget",n,{_setMonthAttr:function(a){var b=this.dateLocaleModule.getNames("months","wide","standAlone",this.lang,a),c=6==e("ie")?"":"\x3cdiv class\x3d'dijitSpacer'\x3e"+u.map(b,function(a){return"\x3cdiv\x3e"+a+"\x3c/div\x3e"}).join("")+"\x3c/div\x3e";this.domNode.innerHTML=c+"\x3cdiv class\x3d'dijitCalendarMonthLabel dijitCalendarCurrentMonthLabel'\x3e"+b[a.getMonth()]+"\x3c/div\x3e"}});return r})},"dijit/form/_DateTimeTextBox":function(){define("dojo/date dojo/date/locale dojo/date/stamp dojo/_base/declare dojo/_base/lang ./RangeBoundTextBox ../_HasDropDown dojo/text!./templates/DropDownBox.html".split(" "),
function(u,v,m,l,d,h,g,f){new Date("X");return l("dijit.form._DateTimeTextBox",[h,g],{templateString:f,hasDownArrow:!0,cssStateNodes:{_buttonNode:"dijitDownArrowButton"},_unboundedConstraints:{},pattern:v.regexp,datePackage:"",postMixInProperties:function(){this.inherited(arguments);this._set("type","text")},compare:function(c,a){var b=this._isInvalidDate(c),e=this._isInvalidDate(a);if(b||e)return b&&e?0:b?-1:1;c=this.format(c,this._unboundedConstraints);a=this.format(a,this._unboundedConstraints);
b=this.parse(c,this._unboundedConstraints);e=this.parse(a,this._unboundedConstraints);return c==a?0:u.compare(b,e,this._selector)},autoWidth:!0,format:function(c,a){return c?this.dateLocaleModule.format(c,a):""},parse:function(c,a){return this.dateLocaleModule.parse(c,a)||(this._isEmpty(c)?null:void 0)},serialize:function(c,a){c.toGregorian&&(c=c.toGregorian());return m.toISOString(c,a)},dropDownDefaultValue:new Date,value:new Date(""),_blankValue:null,popupClass:"",_selector:"",constructor:function(c){c=
c||{};this.dateModule=c.datePackage?d.getObject(c.datePackage,!1):u;this.dateClassObj=this.dateModule.Date||Date;this.dateClassObj instanceof Date||(this.value=new this.dateClassObj(this.value));this.dateLocaleModule=c.datePackage?d.getObject(c.datePackage+".locale",!1):v;this._set("pattern",this.dateLocaleModule.regexp);this._invalidDate=this.constructor.prototype.value.toString()},buildRendering:function(){this.inherited(arguments);this.hasDownArrow||(this._buttonNode.style.display="none");this.hasDownArrow||
(this._buttonNode=this.domNode,this.baseClass+=" dijitComboBoxOpenOnClick")},_setConstraintsAttr:function(c){c.selector=this._selector;c.fullYear=!0;var a=m.fromISOString;"string"==typeof c.min&&(c.min=a(c.min),this.dateClassObj instanceof Date||(c.min=new this.dateClassObj(c.min)));"string"==typeof c.max&&(c.max=a(c.max),this.dateClassObj instanceof Date||(c.max=new this.dateClassObj(c.max)));this.inherited(arguments);this._unboundedConstraints=d.mixin({},this.constraints,{min:null,max:null})},_isInvalidDate:function(c){return!c||
isNaN(c)||"object"!=typeof c||c.toString()==this._invalidDate},_setValueAttr:function(c,a,b){void 0!==c&&("string"==typeof c&&(c=m.fromISOString(c)),this._isInvalidDate(c)&&(c=null),c instanceof Date&&!(this.dateClassObj instanceof Date)&&(c=new this.dateClassObj(c)));this.inherited(arguments,[c,a,b]);this.value instanceof Date&&(this.filterString="");!1!==a&&this.dropDown&&this.dropDown.set("value",c,!1)},_set:function(c,a){if("value"==c){a instanceof Date&&!(this.dateClassObj instanceof Date)&&
(a=new this.dateClassObj(a));var b=this._get("value");if(b instanceof this.dateClassObj&&0==this.compare(a,b))return}this.inherited(arguments)},_setDropDownDefaultValueAttr:function(c){this._isInvalidDate(c)&&(c=new this.dateClassObj);this._set("dropDownDefaultValue",c)},openDropDown:function(c){this.dropDown&&this.dropDown.destroy();var a=d.isString(this.popupClass)?d.getObject(this.popupClass,!1):this.popupClass,b=this,e=this.get("value");this.dropDown=new a({onChange:function(a){b.set("value",
a,!0)},id:this.id+"_popup",dir:b.dir,lang:b.lang,value:e,textDir:b.textDir,currentFocus:this._isInvalidDate(e)?this.dropDownDefaultValue:e,constraints:b.constraints,filterString:b.filterString,datePackage:b.datePackage,isDisabledDate:function(a){return!b.rangeCheck(a,b.constraints)}});this.inherited(arguments)},_getDisplayedValueAttr:function(){return this.textbox.value},_setDisplayedValueAttr:function(c,a){this._setValueAttr(this.parse(c,this.constraints),a,c)}})})},"dijit/form/Textarea":function(){define(["dojo/_base/declare",
"dojo/dom-style","./_ExpandingTextAreaMixin","./SimpleTextarea"],function(u,v,m,l){return u("dijit.form.Textarea",[l,m],{baseClass:"dijitTextBox dijitTextArea dijitExpandingTextArea",cols:"",buildRendering:function(){this.inherited(arguments);v.set(this.textbox,{overflowY:"hidden",overflowX:"auto",boxSizing:"border-box",MsBoxSizing:"border-box",WebkitBoxSizing:"border-box",MozBoxSizing:"border-box"})}})})},"dijit/form/_ExpandingTextAreaMixin":function(){define("dojo/_base/declare dojo/dom-construct dojo/has dojo/_base/lang dojo/on dojo/_base/window ../Viewport".split(" "),
function(u,v,m,l,d,h,g){m.add("textarea-needs-help-shrinking",function(){var f=h.body(),c=v.create("textarea",{rows:"5",cols:"20",value:" ",style:{zoom:1,fontSize:"12px",height:"96px",overflow:"hidden",visibility:"hidden",position:"absolute",border:"5px solid white",margin:"0",padding:"0",boxSizing:"border-box",MsBoxSizing:"border-box",WebkitBoxSizing:"border-box",MozBoxSizing:"border-box"}},f,"last"),a=c.scrollHeight>=c.clientHeight;f.removeChild(c);return a});return u("dijit.form._ExpandingTextAreaMixin",
null,{_setValueAttr:function(){this.inherited(arguments);this.resize()},postCreate:function(){this.inherited(arguments);var f=this.textbox;f.style.overflowY="hidden";this.own(d(f,"focus, resize",l.hitch(this,"_resizeLater")))},startup:function(){this.inherited(arguments);this.own(g.on("resize",l.hitch(this,"_resizeLater")));this._resizeLater()},_onInput:function(f){this.inherited(arguments);this.resize()},_estimateHeight:function(){var f=this.textbox;f.rows=(f.value.match(/\n/g)||[]).length+1},_resizeLater:function(){this.defer("resize")},
resize:function(){function f(){var a=!1;""===c.value&&(c.value=" ",a=!0);var b=c.scrollHeight;a&&(c.value="");return b}var c=this.textbox;"hidden"==c.style.overflowY&&(c.scrollTop=0);if(!this.busyResizing){this.busyResizing=!0;if(f()||c.offsetHeight){var a=f()+Math.max(c.offsetHeight-c.clientHeight,0),b=a+"px";b!=c.style.height&&(c.style.height=b,c.rows=1);if(m("textarea-needs-help-shrinking")){var e=f(),d=c.style.minHeight,n=4,p=c.scrollTop;c.style.minHeight=b;for(c.style.height="auto";0<a;){c.style.minHeight=
Math.max(a-n,4)+"px";b=f();e-=b;a-=e;if(e<n)break;e=b;n<<=1}c.style.height=a+"px";c.style.minHeight=d;c.scrollTop=p}c.style.overflowY=f()>c.clientHeight?"auto":"hidden";"hidden"==c.style.overflowY&&(c.scrollTop=0)}else this._estimateHeight();this.busyResizing=!1}}})})},"dijit/form/SimpleTextarea":function(){define(["dojo/_base/declare","dojo/dom-class","dojo/sniff","./TextBox"],function(u,v,m,l){return u("dijit.form.SimpleTextarea",l,{baseClass:"dijitTextBox dijitTextArea",rows:"3",cols:"20",templateString:"\x3ctextarea ${!nameAttrSetting} data-dojo-attach-point\x3d'focusNode,containerNode,textbox' autocomplete\x3d'off'\x3e\x3c/textarea\x3e",
postMixInProperties:function(){!this.value&&this.srcNodeRef&&(this.value=this.srcNodeRef.value);this.inherited(arguments)},buildRendering:function(){this.inherited(arguments);m("ie")&&this.cols&&v.add(this.textbox,"dijitTextAreaCols")},filter:function(d){d&&(d=d.replace(/\r/g,""));return this.inherited(arguments)},_onInput:function(d){if(this.maxLength){var h=parseInt(this.maxLength),g=this.textbox.value.replace(/\r/g,""),h=g.length-h;if(0<h){var f=this.textbox;if(f.selectionStart){var c=f.selectionStart,
a=0;m("opera")&&(a=(this.textbox.value.substring(0,c).match(/\r/g)||[]).length);this.textbox.value=g.substring(0,c-h-a)+g.substring(c-a);f.setSelectionRange(c-h,c-h)}else this.ownerDocument.selection&&(f.focus(),g=this.ownerDocument.selection.createRange(),g.moveStart("character",-h),g.text="",g.select())}}this.inherited(arguments)}})})},"widgets/HucNavigation/PagingQueryTask":function(){define("dojo/_base/declare dojo/Evented dojo/on dojo/_base/lang dojo/_base/html esri/tasks/query esri/tasks/QueryTask esri/tasks/FeatureSet dojo/keys dojo/date/locale".split(" "),
function(u,v,m,l,d,h,g,f,c,a){return u([v],{baseClass:"search-paging-query-task",uri:"",fieldName:"",query:null,queryTask:null,objectIdsArray:[],iStart:0,iMaxRecords:0,isQuerying:!1,featuresProcessed:0,featuresTotal:0,dateFormat:"",useUTC:!0,blankStringExists:!1,allString:"all",defExpr:"",version:0,allValues:[],uniqueValues:[],esc:!1,isRequired:!1,maxRecordCount:250,startup:function(){this.inherited(arguments);this.query=new h},execute:function(){this.uniqueValues=[];this.blankStringExists=!1;this.featuresTotal=
this.featuresProcessed=this.iMaxRecords=this.iStart=0;this.isQuerying=!0;this.query.returnGeometry=!1;this.query.outFields=[this.fieldName];10.11<this.version&&(this.query.orderByFields=[this.fieldName]);this.query.objectIds=null;this.query.where=this.defExpr&&""!==this.defExpr?this.defExpr:"1\x3d1";if(""===this.uri)this.emit("pagingFault");else if(console.info(this.uri),this.queryTask=new g(this.uri),10.1<=this.version){var a=new h;a.where=this.defExpr&&""!==this.defExpr?this.defExpr:"1\x3d1";this.queryTask.executeForCount(a,
l.hitch(this,function(a){this.featuresTotal=a;a<=this.maxRecordCount?(this.allValues=[],this.query.returnDistinctValues=!0,this.queryTask.execute(this.query,l.hitch(this,this.onSearchFinish),l.hitch(this,this.onSearchError))):(delete this.query.orderByFields,this.queryTask.executeForIds(this.query,l.hitch(this,this.onSearchIdsFinish),l.hitch(this,this.onSearchError)))}))}else this.queryTask.executeForIds(this.query,l.hitch(this,this.onSearchIdsFinish),l.hitch(this,this.onSearchError))},onSearchFinish:function(a){this.query.where=
"";this.query.text=null;if(10.1>this.version||this.featuresTotal>this.maxRecordCount)this.featuresProcessed+=a.features.length,this.emit("featuresProcessed",this.featuresProcessed);for(var b=a.features.length,c=0;c<b;c++){var f=a.features[c].attributes,p;for(p in f)f[p]&&this.allValues.push(f[p])}10.1<=this.version&&this.featuresTotal<=this.maxRecordCount?(this.isQuerying=!1,""!==this.dateFormat?this.replaceDatesWithStrings():(this.uniqueValues=this.getDistinctValues(this.allValues),!1===this.isRequired&&
(this.blankStringExists&&(a={code:" ",name:'" "'},this.uniqueValues.splice(0,0,a)),a={code:"",name:""},this.uniqueValues.splice(0,0,a)),this.uniqueValues.push({code:"allu",name:this.allString}),this.emit("pagingComplete",this.uniqueValues))):this.featuresProcessed>=this.objectIdsArray.length?(this.uniqueValues=this.getDistinctValues(this.allValues),""!==this.dateFormat?this.replaceDatesWithStrings():(!1===this.isRequired&&(this.blankStringExists&&(a={code:" ",name:'" "'},this.uniqueValues.splice(0,
0,a)),a={code:"",name:""},this.uniqueValues.splice(0,0,a)),this.uniqueValues.push({code:"allu",name:this.allString}),this.emit("pagingComplete",this.uniqueValues),this.isQuerying=!1)):(0===this.iMaxRecords&&(this.iMaxRecords=this.featuresProcessed,this.iStart+=this.iMaxRecords),this.iStart<this.objectIdsArray.length&&!1===this.esc&&(this.isQuerying=!0,this.query.objectIds=this.objectIdsArray.slice(this.iStart,this.iStart+this.iMaxRecords),this.queryTask.execute(this.query,l.hitch(this,this.onSearchFinish),
l.hitch(this,this.onSearchError)),this.iStart+=this.iMaxRecords),!0===this.esc&&(this.isQuerying=this.esc=!1,this.emit("pagingComplete",this.uniqueValues)),this.uniqueValues=this.getDistinctValues(this.allValues))},_formatDate:function(b,e){this.dateFormat&&(this.dateFormat=this.dateFormat.replace(/D/g,"d").replace(/Y/g,"y"));return a.format(new Date(b),{selector:"date",datePattern:e})},replaceDatesWithStrings:function(){for(var a,e=0;e<this.uniqueValues.length;e++){var c=Number(this.uniqueValues[e].code);
isNaN(c)||(a=this._formatDate(c,this.dateFormat));this.uniqueValues[e].name=a;this.uniqueValues[e].code=a}this.isQuerying=!1;this.emit("pagingComplete",this.uniqueValues)},onSearchError:function(){this.objectIdsArray=[];this.esc=this.isQuerying=!1;this.emit("pagingFault")},onSearchIdsFinish:function(a){0<a.length?(this.allValues=[],this.objectIdsArray=a,this.featuresTotal=this.objectIdsArray.length,this.emit("featuresTotal",this.featuresTotal),this.query.where=null,this.query.text=null,this.query.objectIds=
this.objectIdsArray.slice(0,this.maxRecordCount),this.queryTask.execute(this.query,l.hitch(this,this.onSearchFinish),l.hitch(this,this.onSearchError))):(console.error("onSearchIdsFinish returned zero length"),this.esc=this.isQuerying=!1,this.emit("pagingFault"))},getDistinctValues:function(a){var b=[],c=[],f=a.length,p;for(p=0;p<f;p++)b[a[p]]||(b[a[p]]=!0," "===a[p]?this.blankStringExists=!0:c.push(null===a[p]?{code:"null",name:"null"}:{code:a[p],name:a[p]}));return function(a,b){return a.sort(function(a,
e){a=a[b];e=e[b];"string"==typeof a&&(a=a.toLowerCase().trim(),e=e.toLowerCase().trim());return a<e?-1:a>e?1:0})}(c,"code")}})})},"widgets/HucNavigation/RelateChooser":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/html dojo/on dojo/has ./MobilePopup dojo/dom dojo/dom-construct dojo/dom-style dojo/dom-class dojo/dom-attr dojo/_base/array dojo/Evented dojo/sniff".split(" "),function(u,v,m,l,d,h,g,f,c,a,b,e,t){return u([h,t],{baseClass:"jimu-popup jimu-message",declaredClass:"esearch.dijit.relate.chooser",
type:"message",message:"",autoHeight:!1,relatesArr:null,folderurl:null,maxWidth:400,maxHeight:400,postMixInProperties:function(){this.inherited(arguments)},_dataMixin:function(){this._listContainer=f.create("div");a.add(this._listContainer,"relateLyrUrl-list-container");this.own(l(this._listContainer,"click",v.hitch(this,this._onClick)));f.place(this._listContainer,this.contentContainerNode);e.map(this.relatesArr,v.hitch(this,function(e){var c=f.create("div");b.set(c,"id",e.id);var k=f.create("div");
b.set(k,"id",e.id);a.add(k,"iconDiv");f.place(k,c);var r=f.toDom("\x3cimg src\x3d'"+this.folderurl+"images/i_relate.png' alt\x3d'' border\x3d'0' width\x3d'20px' height\x3d'20px'\x3e");f.place(r,k);k=f.create("p");b.set(k,"id",e.id);a.add(k,"_title");k.textContent=k.innerText=e.name;f.place(k,c);a.add(c,"relate-list-item");f.place(c,this._listContainer)}))},_onClick:function(a){if(""!==a.target.id||""!==a.target.parentNode.id){var b=a.target.id.toLowerCase();b||(b=a.target.parentNode.id);this._selectedNode=
b;this.emit("click",b);this.close()}},_createTitleNode:function(){this.titleLabel&&(this.titleNode=m.create("div",{"class":"title"},this.domNode),this.handleNode=m.create("div",{"class":"handle"},this.titleNode),this.titleLabeNode=m.create("span",{"class":"title-label jimu-float-leading",innerHTML:this.titleLabel||"\x26nbsp"},this.titleNode),this.closeBtnNode=m.create("div",{"class":"close-btn jimu-icon jimu-icon-close jimu-float-trailing"},this.titleNode),this.own(l(this.closeBtnNode,"click",v.hitch(this,
this.close))))},_increaseZIndex:function(){m.setStyle(this.domNode,"zIndex",9999);m.setStyle(this.overlayNode,"zIndex",9998)}})})},"widgets/HucNavigation/MobilePopup":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/html dojo/_base/fx dojo/on dojo/sniff dojo/touch dojo/dom-style dojo/query dojo/dnd/move dijit/_WidgetBase jimu/utils".split(" "),function(u,v,m,l,d,h,g,f,c,a,b,e,t){var n=0;return u(e,{declaredClass:"jimu.dijit.Popup",baseClass:"jimu-popup",titleLabel:"",
content:null,container:null,buttons:[],enabledButtons:[],disabledButtons:[],onClose:null,_fixedHeight:!1,autoHeight:!1,maxHeight:800,maxWidth:1024,constructor:function(){this.buttons=[];this.enabledButtons=[];this.disabledButtons=[];this.pauseKeyHandles=[];this.container=jimuConfig.layoutId},startup:function(){this._dataMixin()},postCreate:function(){this._preProcessing();this.inherited(arguments);this._initDomNode();this._positioning();l.place(this.domNode,this.container);l.setStyle(this.domNode,
"outline","none");setTimeout(v.hitch(this,function(){this._moveToMiddle()}),50);g("event-orientationchange")&&this.own(h(window,"orientationchange",v.hitch(this,function(){this._fixedHeight||this.autoHeight?(this._calculatePosition(),this._moveToMiddle()):this._positioning()})));this.own(h(window,"resize",v.hitch(this,function(){this._fixedHeight||this.autoHeight?(this._calculatePosition(),this._moveToMiddle()):this._positioning()})));this.overlayNode=l.create("div",{"class":"popup-overlay"},this.container);
this._increaseZIndex();this._dataMixin();d.animateProperty({node:this.domNode,properties:{opacity:1},duration:200}).play();this.domNode.focus()},_preProcessing:function(){"number"===typeof this.height&&(this._fixedHeight=!0,this.autoHeight=!1);this.autoHeight&&(this.maxHeight=800)},_createTitleNode:function(){this.titleNode=l.create("div",{"class":"title"},this.domNode);this.titleLabeNode=l.create("span",{"class":"title-label jimu-float-leading",innerHTML:this.titleLabel||"\x26nbsp"},this.titleNode);
this.closeBtnNode=l.create("div",{"class":"close-btn jimu-icon jimu-icon-close jimu-float-trailing"},this.titleNode);var a=null,a="ontouchstart"in document?f.press:"click";this.own(h(this.closeBtnNode,a,v.hitch(this,this.close)))},_initDomNode:function(){this._createTitleNode();this.contentContainerNode=l.create("div",{"class":"content"},this.domNode);this.content&&("string"===typeof this.content?this.contentContainerNode.innerHTML=this.content:this.content.domNode?(this.content.placeAt(this.contentContainerNode),
this.content.popup=this):1===this.content.nodeType&&l.place(this.content,this.contentContainerNode));this.buttonContainer=l.create("div",{"class":"button-container"},this.domNode);0===this.buttons.length&&l.setStyle(this.buttonContainer,"display","none");for(var a=this.buttons.length-1;-1<a;a--)this._createButton(this.buttons[a]),this.buttons[a].disable&&this.disableButton(a)},_limitButtonsMaxWidth:function(){var a=this.enabledButtons.length;if(0!==a){var b=l.getContentBox(this.buttonContainer),e=
l.getMarginExtents(this.enabledButtons[0]),c=l.getPadBorderExtents(this.enabledButtons[0]),f=0,c=8===g("ie")?c.l+c.r:0,f=(b.w-(e.l+e.r+c)*a)/a;0<f&&(m.forEach(this.enabledButtons,v.hitch(this,function(a){l.setStyle(a,"maxWidth",f+"px")})),m.forEach(this.disabledButtons,v.hitch(this,function(a){l.setStyle(a,"maxWidth",f+"px")})))}},_moveableNode:function(a,e){this.moveable&&(this.moveable.destroy(),this.moveable=null);var c=l.getMarginBox(this.container);c.l=c.l-a+e;c.w+=2*(a-e);this.moveable=new b.boxConstrainedMoveable(this.domNode,
{box:c,handle:this.titleNode||this.contentContainerNode,within:!0});this.own(h(this.moveable,"Moving",v.hitch(this,this.onMoving)));this.own(h(this.moveable,"MoveStop",v.hitch(this,this.onMoveStop)))},_getHeaderBox:function(){return 0===a("#header").length?{t:0,l:0,w:0,h:0}:l.getMarginBox("header")},_getFooterBox:function(){return 0===a(".footer",this.container).length?{t:0,l:0,w:0,h:0}:l.getMarginBox(a(".footer",this.container)[0])},_calculatePosition:function(){var a=l.getContentBox(this.container),
b=this._getHeaderBox(),e=this._getFooterBox(),e=a.h-b.h-e.h-40,c=0;c=this._fixedHeight?this.height:this.autoHeight?e-200:this.height=e>this.maxHeight?this.maxHeight:e;e=(e-c)/2+b.h+20;e=e<b.h?b.h:e;this.width=this.width||this.maxWidth;l.setStyle(this.domNode,{left:(a.w-this.width)/2+"px",top:e+"px",width:this.width+"px"})},_calculateHeight:function(){this.autoHeight?(l.setStyle(this.domNode,"height","auto"),l.addClass(this.contentContainerNode,"content-static"),0===this.buttons.length&&l.setStyle(this.contentContainerNode,
{marginBottom:"15px"})):(l.setStyle(this.domNode,"height",this.height+"px"),l.addClass(this.contentContainerNode,"content-absolute"),l.addClass(this.buttonContainer,"button-container-absolute"),0===this.buttons.length&&l.setStyle(this.contentContainerNode,{bottom:"15px"}));this._moveableNode(this.width,100)},_moveToMiddle:function(){if(this.autoHeight){var a=l.getMarginBox(this.domNode),b=l.getContentBox(this.container),e=this._getHeaderBox(),c=this._getFooterBox(),c=b.h-e.h-c.h-40,f=0,f=a.h||c-200,
a=(c-f)/2+e.h+20,a=a<e.h?e.h:a;l.setStyle(this.domNode,{left:(b.w-this.width)/2+"px",top:a+"px",width:this.width+"px"})}},_positioning:function(){this._calculatePosition();this._calculateHeight()},_increaseZIndex:function(){l.setStyle(this.domNode,"zIndex",n+200+1);l.setStyle(this.overlayNode,"zIndex",n+200);n++},setTitleLabel:function(a){this.titleNode.innerHTML=t.stripHTML(a)},onMoving:function(a){l.setStyle(a.node,"opacity",.9)},onMoveStop:function(a){l.setStyle(a.node,"opacity",1)},close:function(){if(!this.onClose||
!1!==this.onClose()){var a=this.domNode.parentNode,b=v.clone(this.domNode);l.setStyle(this.domNode,"display","none");l.destroy(this.overlayNode);this.destroy();this.moveable.destroy();l.place(b,a);d.animateProperty({node:b,properties:{opacity:0},duration:200,onEnd:function(){l.destroy(b)}}).play()}},addButton:function(a){this._createButton(a)},_createButton:function(a){var b=l.create("div",{"class":"jimu-btn jimu-float-trailing jimu-leading-margin1",innerHTML:a.label},this.buttonContainer);this.enabledButtons.unshift(b);
var e=l.create("div",{"class":"jimu-btn jimu-state-disabled jimu-float-trailing jimu-leading-margin1",innerHTML:a.label,style:{display:"none"}},this.buttonContainer);this.disabledButtons.unshift(e);e=null;e="ontouchstart"in document?f.press:"click";this.own(h(b,e,v.hitch(this,function(b){if(a.onClick)a.onClick(b);else this.close()})))},enableButton:function(a){"number"===typeof a?(l.setStyle(this.enabledButtons[a],"display","inline-block"),l.setStyle(this.disabledButtons[a],"display","none")):(m.forEach(this.enabledButtons[a],
v.hitch(this,function(a){l.setStyle(a,"display","inline-block")})),m.forEach(this.disabledButtons[a],v.hitch(this,function(a){l.setStyle(a,"display","none")})))},disableButton:function(a){"number"===typeof a?(l.setStyle(this.disabledButtons[a],"display","inline-block"),l.setStyle(this.enabledButtons[a],"display","none")):(m.forEach(this.disabledButtons,v.hitch(this,function(a){l.setStyle(a,"display","inline-block")})),m.forEach(this.enabledButtons,v.hitch(this,function(a){l.setStyle(a,"display","none")})))}})})},
"esri/tasks/BufferParameters":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/json dojo/has ../kernel ../geometry/Polygon ../geometry/jsonUtils".split(" "),function(u,v,m,l,d,h,g,f){u=u(null,{declaredClass:"esri.tasks.BufferParameters",geometries:null,outSpatialReference:null,bufferSpatialReference:null,distances:null,unit:null,unionResults:!1,geodesic:!1,toJson:function(){var c={unit:this.unit,unionResults:this.unionResults,geodesic:this.geodesic},a=this.distances,
b=this.outSpatialReference,e=this.bufferSpatialReference,d=m.map(this.geometries,function(a){return a="extent"===a.type?g.fromExtent(a):a,a.toJson()},this),n=this.geometries;if(n&&0<n.length){var p="extent"===n[0].type?"esriGeometryPolygon":f.getJsonType(n[0]);c.geometries=l.toJson({geometryType:p,geometries:d});c.inSR=n[0].spatialReference.wkid?n[0].spatialReference.wkid:l.toJson(n[0].spatialReference.toJson())}return a&&(c.distances=a.join(",")),b&&(c.outSR=b.wkid?b.wkid:l.toJson(b.toJson())),e&&
(c.bufferSR=e.wkid?e.wkid:l.toJson(e.toJson())),c}});return d("extend-esri")&&v.setObject("tasks.BufferParameters",u,h),u})},"dijit/ProgressBar":function(){define("require dojo/_base/declare dojo/dom-class dojo/_base/lang dojo/number ./_Widget ./_TemplatedMixin dojo/text!./templates/ProgressBar.html".split(" "),function(u,v,m,l,d,h,g,f){return v("dijit.ProgressBar",[h,g],{progress:"0",value:"",maximum:100,places:0,indeterminate:!1,label:"",name:"",templateString:f,_indeterminateHighContrastImagePath:u.toUrl("./themes/a11y/indeterminate_progress.gif"),
postMixInProperties:function(){this.inherited(arguments);this.params&&"value"in this.params||(this.value=this.indeterminate?Infinity:this.progress)},buildRendering:function(){this.inherited(arguments);this.indeterminateHighContrastImage.setAttribute("src",this._indeterminateHighContrastImagePath.toString());this.update()},_setDirAttr:function(c){var a="rtl"==c.toLowerCase();m.toggle(this.domNode,"dijitProgressBarRtl",a);m.toggle(this.domNode,"dijitProgressBarIndeterminateRtl",this.indeterminate&&
a);this.inherited(arguments)},update:function(c){l.mixin(this,c||{});c=this.internalProgress;var a=this.domNode,b=1;this.indeterminate?a.removeAttribute("aria-valuenow"):(-1!=String(this.progress).indexOf("%")?(b=Math.min(parseFloat(this.progress)/100,1),this.progress=b*this.maximum):(this.progress=Math.min(this.progress,this.maximum),b=this.maximum?this.progress/this.maximum:0),a.setAttribute("aria-valuenow",this.progress));a.setAttribute("aria-labelledby",this.labelNode.id);a.setAttribute("aria-valuemin",
0);a.setAttribute("aria-valuemax",this.maximum);this.labelNode.innerHTML=this.report(b);m.toggle(this.domNode,"dijitProgressBarIndeterminate",this.indeterminate);m.toggle(this.domNode,"dijitProgressBarIndeterminateRtl",this.indeterminate&&!this.isLeftToRight());c.style.width=100*b+"%";this.onChange()},_setValueAttr:function(c){this._set("value",c);Infinity==c?this.update({indeterminate:!0}):this.update({indeterminate:!1,progress:c})},_setLabelAttr:function(c){this._set("label",c);this.update()},_setIndeterminateAttr:function(c){this._set("indeterminate",
c);this.update()},report:function(c){return this.label?this.label:this.indeterminate?"\x26#160;":d.format(c,{type:"percent",places:this.places,locale:this.lang})},onChange:function(){}})})},"dojo/data/ObjectStore":function(){define("../_base/lang ../Evented ../_base/declare ../_base/Deferred ../promise/all ../_base/array ../_base/connect ../regexp".split(" "),function(u,v,m,l,d,h,g,f){function c(a){return"*"==a?".*":"?"==a?".":a}return m("dojo.data.ObjectStore",[v],{objectStore:null,constructor:function(a){this._dirtyObjects=
[];a.labelAttribute&&(a.labelProperty=a.labelAttribute);u.mixin(this,a)},labelProperty:"label",getValue:function(a,b,e){return"function"===typeof a.get?a.get(b):b in a?a[b]:e},getValues:function(a,b){a=this.getValue(a,b);return a instanceof Array?a:void 0===a?[]:[a]},getAttributes:function(a){var b=[],e;for(e in a)!a.hasOwnProperty(e)||"_"==e.charAt(0)&&"_"==e.charAt(1)||b.push(e);return b},hasAttribute:function(a,b){return b in a},containsValue:function(a,b,e){return-1<h.indexOf(this.getValues(a,
b),e)},isItem:function(a){return"object"==typeof a&&a&&!(a instanceof Date)},isItemLoaded:function(a){return a&&"function"!==typeof a.load},loadItem:function(a){var b;"function"===typeof a.item.load?l.when(a.item.load(),function(e){b=e;var c=e instanceof Error?a.onError:a.onItem;c&&c.call(a.scope,e)}):a.onItem&&a.onItem.call(a.scope,a.item);return b},close:function(a){return a&&a.abort&&a.abort()},fetch:function(a){function b(b){a.onError&&a.onError.call(d,b,a)}a=u.delegate(a,a&&a.queryOptions);var e=
this,d=a.scope||e,n=a.query;if("object"==typeof n){var n=u.delegate(n),p;for(p in n){var k=n[p];"string"==typeof k&&(n[p]=RegExp("^"+f.escapeString(k,"*?\\").replace(/\\.|\*|\?/g,c)+"$",a.ignoreCase?"mi":"m"),n[p].toString=function(a){return function(){return a}}(k))}}var r=this.objectStore.query(n,a);l.when(r.total,function(e){l.when(r,function(b){a.onBegin&&a.onBegin.call(d,e||b.length,a);if(a.onItem)for(var c=0;c<b.length;c++)a.onItem.call(d,b[c],a);a.onComplete&&a.onComplete.call(d,a.onItem?null:
b,a);return b},b)},b);a.abort=function(){r.cancel&&r.cancel()};r.observe&&(this.observing&&this.observing.cancel(),this.observing=r.observe(function(a,b,c){if(-1==h.indexOf(e._dirtyObjects,a))if(-1==b)e.onNew(a);else if(-1==c)e.onDelete(a);else for(var k in a)if(k!=e.objectStore.idProperty)e.onSet(a,k,null,a[k])},!0));this.onFetch(r);a.store=this;return a},getFeatures:function(){return{"dojo.data.api.Read":!!this.objectStore.get,"dojo.data.api.Identity":!0,"dojo.data.api.Write":!!this.objectStore.put,
"dojo.data.api.Notification":!0}},getLabel:function(a){if(this.isItem(a))return this.getValue(a,this.labelProperty)},getLabelAttributes:function(a){return[this.labelProperty]},getIdentity:function(a){return this.objectStore.getIdentity?this.objectStore.getIdentity(a):a[this.objectStore.idProperty||"id"]},getIdentityAttributes:function(a){return[this.objectStore.idProperty]},fetchItemByIdentity:function(a){var b;l.when(this.objectStore.get(a.identity),function(e){b=e;a.onItem.call(a.scope,e)},function(b){a.onError.call(a.scope,
b)});return b},newItem:function(a,b){if(b){var e=this.getValue(b.parent,b.attribute,[]),e=e.concat([a]);a.__parent=e;this.setValue(b.parent,b.attribute,e)}this._dirtyObjects.push({object:a,save:!0});this.onNew(a);return a},deleteItem:function(a){this.changing(a,!0);this.onDelete(a)},setValue:function(a,b,e){var c=a[b];this.changing(a);a[b]=e;this.onSet(a,b,c,e)},setValues:function(a,b,e){if(!u.isArray(e))throw Error("setValues expects to be passed an Array object as its value");this.setValue(a,b,
e)},unsetAttribute:function(a,b){this.changing(a);var e=a[b];delete a[b];this.onSet(a,b,e,void 0)},changing:function(a,b){a.__isDirty=!0;for(var e=0;e<this._dirtyObjects.length;e++){var c=this._dirtyObjects[e];if(a==c.object){b&&(c.object=!1,this._saveNotNeeded||(c.save=!0));return}}c=a instanceof Array?[]:{};for(e in a)a.hasOwnProperty(e)&&(c[e]=a[e]);this._dirtyObjects.push({object:!b&&a,old:c,save:!this._saveNotNeeded})},save:function(a){a=a||{};var b,e=[],c=[],f=this,p=this._dirtyObjects;try{g.connect(a,
"onError",function(){if(!1!==a.revertOnError){var b=p;p=c;f.revert();f._dirtyObjects=b}else f._dirtyObjects=p.concat(c)});var k;this.objectStore.transaction&&(k=this.objectStore.transaction());for(var r=0;r<p.length;r++){var h=p[r],M=h.object,H=h.old;delete M.__isDirty;M?(b=this.objectStore.put(M,{overwrite:!!H}),e.push(b)):"undefined"!=typeof H&&(b=this.objectStore.remove(this.getIdentity(H)),e.push(b));c.push(h);p.splice(r--,1)}d(e).then(function(b){a.onComplete&&a.onComplete.call(a.scope,b)},function(b){a.onError&&
a.onError.call(a.scope,b)});k&&k.commit()}catch(F){a.onError.call(a.scope,value)}},revert:function(){for(var a=this._dirtyObjects,b=a.length;0<b;){b--;var e=a[b],c=e.object,e=e.old;if(c&&e){for(var f in e)e.hasOwnProperty(f)&&c[f]!==e[f]&&(this.onSet(c,f,c[f],e[f]),c[f]=e[f]);for(f in c)e.hasOwnProperty(f)||(this.onSet(c,f,c[f]),delete c[f])}else if(e)this.onNew(e);else this.onDelete(c);delete (c||e).__isDirty;a.splice(b,1)}},isDirty:function(a){return a?a.__isDirty:!!this._dirtyObjects.length},onSet:function(){},
onNew:function(){},onDelete:function(){},onFetch:function(a){}})})},"dojox/grid/DataGrid":function(){define("../main dojo/_base/array dojo/_base/lang dojo/_base/json dojo/_base/sniff dojo/_base/declare ./_Grid ./DataSelection dojo/_base/html dojo/has dojo/has!dojo-bidi?./bidi/_BidiMixin".split(" "),function(u,v,m,l,d,h,g,f,c){var a=h("dojox.grid.DataGrid",g,{store:null,query:null,queryOptions:null,fetchText:"...",sortFields:null,updateDelay:1,items:null,_store_connects:null,_by_idty:null,_by_idx:null,
_cache:null,_pages:null,_pending_requests:null,_bop:-1,_eop:-1,_requests:0,rowCount:0,_isLoaded:!1,_isLoading:!1,keepSelection:!1,postCreate:function(){this._pages=[];this._store_connects=[];this._by_idty={};this._by_idx=[];this._cache=[];this._pending_requests={};this._setStore(this.store);this.inherited(arguments)},destroy:function(){this.selection.destroy();this.inherited(arguments)},createSelection:function(){this.selection=new f(this)},get:function(a,e){if(e&&"_item"==this.field&&!this.fields)return e;
if(e&&this.fields){var b=[],c=this.grid.store;v.forEach(this.fields,function(a){b=b.concat(c.getValues(e,a))});return b}return e||"string"!==typeof a?e?this.field?"_item"==this.field?e:this.grid.store.getValue(e,this.field):this.value:this.defaultValue:this.inherited(arguments)},_checkUpdateStatus:function(){if(0<this.updateDelay){var a=!1;this._endUpdateDelay&&(clearTimeout(this._endUpdateDelay),delete this._endUpdateDelay,a=!0);this.updating||(this.beginUpdate(),a=!0);if(a){var e=this;this._endUpdateDelay=
setTimeout(function(){delete e._endUpdateDelay;e.endUpdate()},this.updateDelay)}}},_onSet:function(a,e,c,f){this._checkUpdateStatus();a=this.getItemIndex(a);-1<a&&this.updateRow(a)},_createItem:function(a,e){e=this._hasIdentity?this.store.getIdentity(a):l.toJson(this.query)+":idx:"+e+":sort:"+l.toJson(this.getSortProps());return this._by_idty[e]={idty:e,item:a}},_addItem:function(a,e,c){this._by_idx[e]=this._createItem(a,e);c||this.updateRow(e)},_onNew:function(a,e){this._checkUpdateStatus();e=this.get("rowCount");
this._addingItem=!0;this.updateRowCount(e+1);this._addingItem=!1;this._addItem(a,e);this.showMessage()},_onDelete:function(a){this._checkUpdateStatus();a=this._getItemIndex(a,!0);if(0<=a){this._pages=[];this._eop=this._bop=-1;var b=this._by_idx[a];this._by_idx.splice(a,1);delete this._by_idty[b.idty];this.updateRowCount(this.get("rowCount")-1);0===this.get("rowCount")&&this.showMessage(this.noDataMessage)}this.selection.isSelected(a)&&(this.selection.deselect(a),this.selection.selected.splice(a,1))},
_onRevert:function(){this._refresh()},setStore:function(a,e,c){this._requestsPending(0)||(this._setQuery(e,c),this._setStore(a),this._refresh(!0))},setQuery:function(a,e){this._requestsPending(0)||(this._setQuery(a,e),this._refresh(!0))},setItems:function(a){this.items=a;this._setStore(this.store);this._refresh(!0)},_setQuery:function(a,e){this.query=a;this.queryOptions=e||this.queryOptions},_setStore:function(a){this.store&&this._store_connects&&v.forEach(this._store_connects,this.disconnect,this);
if(this.store=a){a=this.store.getFeatures();var b=[];this._canEdit=!!a["dojo.data.api.Write"]&&!!a["dojo.data.api.Identity"];this._hasIdentity=!!a["dojo.data.api.Identity"];a["dojo.data.api.Notification"]&&!this.items&&(b.push(this.connect(this.store,"onSet","_onSet")),b.push(this.connect(this.store,"onNew","_onNew")),b.push(this.connect(this.store,"onDelete","_onDelete")));this._canEdit&&b.push(this.connect(this.store,"revert","_onRevert"));this._store_connects=b}},_onFetchBegin:function(a,e){this.scroller&&
(this.rowCount!=a&&(e.isRender?(this.scroller.init(a,this.keepRows,this.rowsPerPage),this.rowCount=a,this._setAutoHeightAttr(this.autoHeight,!0),this._skipRowRenormalize=!0,this.prerender(),this._skipRowRenormalize=!1):this.updateRowCount(a)),a?this.showMessage():(this.views.render(),this._resize(),this.showMessage(this.noDataMessage),this.focus.initFocusView()))},_onFetchComplete:function(a,e){this.scroller&&(a&&0<a.length&&(v.forEach(a,function(a,b){this._addItem(a,e.start+b,!0)},this),this.updateRows(e.start,
a.length),e.isRender?(this.setScrollTop(0),this.postrender()):this._lastScrollTop&&this.setScrollTop(this._lastScrollTop),d("ie")&&c.setSelectable(this.domNode,this.selectable)),delete this._lastScrollTop,this._isLoaded||(this._isLoading=!1,this._isLoaded=!0),this._pending_requests[e.start]=!1)},_onFetchError:function(a,e){console.log(a);delete this._lastScrollTop;this._isLoaded||(this._isLoading=!1,this._isLoaded=!0,this.showMessage(this.errorMessage));this._pending_requests[e.start]=!1;this.onFetchError(a,
e)},onFetchError:function(a,e){},_fetch:function(a,e){a=a||0;if(this.store&&!this._pending_requests[a]){this._isLoaded||this._isLoading||(this._isLoading=!0,this.showMessage(this.loadingMessage));this._pending_requests[a]=!0;try{if(this.items){var b=this.items,c=this.store;this.rowsPerPage=b.length;var f={start:a,count:this.rowsPerPage,isRender:e};this._onFetchBegin(b.length,f);var k=0;v.forEach(b,function(a){c.isItemLoaded(a)||k++});if(0===k)this._onFetchComplete(b,f);else{var r=function(a){k--;
0===k&&this._onFetchComplete(b,f)};v.forEach(b,function(a){c.isItemLoaded(a)||c.loadItem({item:a,onItem:r,scope:this})},this)}}else this.store.fetch({start:a,count:this.rowsPerPage,query:this.query,sort:this.getSortProps(),queryOptions:this.queryOptions,isRender:e,onBegin:m.hitch(this,"_onFetchBegin"),onComplete:m.hitch(this,"_onFetchComplete"),onError:m.hitch(this,"_onFetchError")})}catch(q){this._onFetchError(q,{start:a,count:this.rowsPerPage})}}},_clearData:function(){this.updateRowCount(0);this._by_idty=
{};this._by_idx=[];this._pages=[];this._bop=this._eop=-1;this._isLoading=this._isLoaded=!1},getItem:function(a){var b=this._by_idx[a];return!b||b&&!b.item?(this._preparePage(a),null):b.item},getItemIndex:function(a){return this._getItemIndex(a,!1)},_getItemIndex:function(a,e){if(!e&&!this.store.isItem(a))return-1;e=this._hasIdentity?this.store.getIdentity(a):null;for(var b=0,c=this._by_idx.length;b<c;b++){var f=this._by_idx[b];if(f&&(e&&f.idty==e||f.item===a))return b}return-1},filter:function(a,
e){this.query=a;e&&this._clearData();this._fetch()},_getItemAttr:function(a,e){return(a=this.getItem(a))?this.store.getValue(a,e):this.fetchText},_render:function(){this.domNode.parentNode&&(this.scroller.init(this.get("rowCount"),this.keepRows,this.rowsPerPage),this.prerender(),this._fetch(0,!0))},_requestsPending:function(a){return this._pending_requests[a]},_rowToPage:function(a){return this.rowsPerPage?Math.floor(a/this.rowsPerPage):a},_pageToRow:function(a){return this.rowsPerPage?this.rowsPerPage*
a:a},_preparePage:function(a){(a<this._bop||a>=this._eop)&&!this._addingItem&&(a=this._rowToPage(a),this._needPage(a),this._bop=a*this.rowsPerPage,this._eop=this._bop+(this.rowsPerPage||this.get("rowCount")))},_needPage:function(a){this._pages[a]||(this._pages[a]=!0,this._requestPage(a))},_requestPage:function(a){a=this._pageToRow(a);0<Math.min(this.rowsPerPage,this.get("rowCount")-a)&&(this._requests++,this._requestsPending(a)||setTimeout(m.hitch(this,"_fetch",a,!1),1))},getCellName:function(a){return a.field},
_refresh:function(a){this._clearData();this._fetch(0,a)},sort:function(){this.edit.apply();this._lastScrollTop=this.scrollTop;this._refresh()},canSort:function(){return!this._isLoading},getSortProps:function(){var a=this.getCell(this.getSortIndex());if(a){var e=a.sortDesc,c=!(0<this.sortInfo);return[{attribute:a.field,descending:"undefined"==typeof e?c:c?!e:e}]}return this.sortFields?this.sortFields:null},styleRowState:function(a){if(this.store&&this.store.getState){for(var b=this.store.getState(a.index),
c="",f=0,p=["inflight","error","inserting"],k;k=p[f];f++)if(b[k]){c=" dojoxGridRow-"+k;break}a.customClasses+=c}},onStyleRow:function(a){this.styleRowState(a);this.inherited(arguments)},canEdit:function(a,e){return this._canEdit},_copyAttr:function(a,e){a=this.getItem(a);return this.store.getValue(a,e)},doStartEdit:function(a,e){this._cache[e]||(this._cache[e]=this._copyAttr(e,a.field));this.onStartEdit(a,e)},doApplyCellEdit:function(a,e,c){this.store.fetchItemByIdentity({identity:this._by_idx[e].idty,
onItem:m.hitch(this,function(b){var f=this.store.getValue(b,c);"number"==typeof f?a=isNaN(a)?a:parseFloat(a):"boolean"==typeof f?a="true"==a?!0:"false"==a?!1:a:f instanceof Date&&(f=new Date(a),a=isNaN(f.getTime())?a:f);this.store.setValue(b,c,a);this.onApplyCellEdit(a,e,c)})})},doCancelEdit:function(a){this._cache[a]&&(this.updateRow(a),delete this._cache[a]);this.onCancelEdit.apply(this,arguments)},doApplyEdit:function(a,c){this.onApplyEdit(a)},removeSelectedRows:function(){if(this._canEdit){this.edit.apply();
var a=m.hitch(this,function(a){a.length&&(v.forEach(a,this.store.deleteItem,this.store),this.selection.clear())});this.allItemsSelected?this.store.fetch({query:this.query,queryOptions:this.queryOptions,onComplete:a}):a(this.selection.getSelected())}}});a.cell_markupFactory=function(a,e,f){var b=m.trim(c.attr(e,"field")||"");b&&(f.field=b);f.field=f.field||f.name;if(b=m.trim(c.attr(e,"fields")||""))f.fields=b.split(",");a&&a(e,f)};a.markupFactory=function(b,c,f,d){return g.markupFactory(b,c,f,m.partial(a.cell_markupFactory,
d))};return a})},"dojox/grid/_Grid":function(){define("dojo/_base/kernel ../main dojo/_base/declare ./_Events ./_Scroller ./_Layout ./_View ./_ViewManager ./_RowManager ./_FocusManager ./_EditManager ./Selection ./_RowSelector ./util dijit/_Widget dijit/_TemplatedMixin dijit/CheckedMenuItem dojo/text!./resources/_Grid.html dojo/string dojo/_base/array dojo/_base/lang dojo/_base/sniff dojox/html/metrics dojo/_base/html dojo/query dojo/dnd/common dojo/i18n!dijit/nls/loading".split(" "),function(u,v,
m,l,d,h,g,f,c,a,b,e,t,n,p,k,r,q,M,H,F,R,C,D,E){u.isCopyKey||(u.isCopyKey=u.dnd.getCopyKeyState);m=m("dojox.grid._Grid",[p,k,l],{templateString:q,classTag:"dojoxGrid",rowCount:5,keepRows:75,rowsPerPage:25,autoWidth:!1,initialWidth:"",autoHeight:"",rowHeight:0,autoRender:!0,defaultHeight:"15em",height:"",structure:null,elasticView:-1,singleClickEdit:!1,selectionMode:"extended",rowSelector:"",columnReordering:!1,headerMenu:null,placeholderLabel:"GridColumns",selectable:!1,_click:null,loadingMessage:"\x3cspan class\x3d'dojoxGridLoading'\x3e${loadingState}\x3c/span\x3e",
errorMessage:"\x3cspan class\x3d'dojoxGridError'\x3e${errorState}\x3c/span\x3e",noDataMessage:"",escapeHTMLInData:!0,formatterScope:null,editable:!1,summary:"",_setSummaryAttr:"domNode",sortInfo:0,_placeholders:null,_layoutClass:h,buildRendering:function(){this.inherited(arguments);this.domNode.getAttribute("tabIndex")||(this.domNode.tabIndex="0");this.createScroller();this.createLayout();this.createViews();this.createManagers();this.createSelection();this.connect(this.selection,"onSelected","onSelected");
this.connect(this.selection,"onDeselected","onDeselected");this.connect(this.selection,"onChanged","onSelectionChanged");C.initOnFontResize();this.connect(C,"onFontResize","textSizeChanged");n.funnelEvents(this.domNode,this,"doKeyEvent",n.keyEvents);"none"!=this.selectionMode&&this.domNode.setAttribute("aria-multiselectable","single"==this.selectionMode?"false":"true");D.addClass(this.domNode,this.classTag);this.isLeftToRight()||D.addClass(this.domNode,this.classTag+"Rtl");0<this.rowHeight&&D.addClass(this.viewsNode,
this.classTag+"FixedRowHeight")},postMixInProperties:function(){this.inherited(arguments);var a=u.i18n.getLocalization("dijit","loading",this.lang);this.loadingMessage=M.substitute(this.loadingMessage,a);this.errorMessage=M.substitute(this.errorMessage,a);this.srcNodeRef&&this.srcNodeRef.style.height&&(this.height=this.srcNodeRef.style.height);this._setAutoHeightAttr(this.autoHeight,!0);this.lastScrollTop=this.scrollTop=0},postCreate:function(){this._placeholders=[];this._setHeaderMenuAttr(this.headerMenu);
this._setStructureAttr(this.structure);this._click=[];this.inherited(arguments);this.domNode&&this.autoWidth&&this.initialWidth&&(this.domNode.style.width=this.initialWidth);this.domNode&&!this.editable&&D.attr(this.domNode,"aria-readonly","true")},destroy:function(){this.domNode.onReveal=null;this.domNode.onSizeChange=null;delete this._click;this.scroller&&(this.scroller.destroy(),delete this.scroller);this.edit.destroy();delete this.edit;this.views.destroyViews();this.focus&&(this.focus.destroy(),
delete this.focus);this.headerMenu&&this._placeholders.length&&(H.forEach(this._placeholders,function(a){a.unReplace(!0)}),this.headerMenu.unBindDomNode(this.viewsHeaderNode));this.inherited(arguments)},_setAutoHeightAttr:function(a,b){"string"==typeof a&&(a=a&&"false"!=a?"true"==a?!0:window.parseInt(a,10):!1);"number"==typeof a&&(isNaN(a)&&(a=!1),0>a?a=!0:0===a&&(a=!1));this.autoHeight=a;this._autoHeight="boolean"==typeof a?a:"number"==typeof a?a>=this.get("rowCount"):!1;this._started&&!b&&this.render()},
_getRowCountAttr:function(){return this.updating&&this.invalidated&&void 0!=this.invalidated.rowCount?this.invalidated.rowCount:this.rowCount},textSizeChanged:function(){this.render()},sizeChange:function(){this.update()},createManagers:function(){this.rows=new c(this);this.focus=new a(this);this.edit=new b(this)},createSelection:function(){this.selection=new e(this)},createScroller:function(){this.scroller=new d;this.scroller.grid=this;this.scroller.renderRow=F.hitch(this,"renderRow");this.scroller.removeRow=
F.hitch(this,"rowRemoved")},createLayout:function(){this.layout=new this._layoutClass(this);this.connect(this.layout,"moveColumn","onMoveColumn")},onMoveColumn:function(){this.update()},onResizeColumn:function(a){},createViews:function(){this.views=new f(this);this.views.createView=F.hitch(this,"createView")},createView:function(a,b){a=new (F.getObject(a))({grid:this,index:b});this.viewsNode.appendChild(a.domNode);this.viewsHeaderNode.appendChild(a.headerNode);this.views.addView(a);D.attr(this.domNode,
"align",this.isLeftToRight()?"left":"right");return a},buildViews:function(){for(var a=0,b;b=this.layout.structure[a];a++)this.createView(b.type||v._scopeName+".grid._View",a).setStructure(b);this.scroller.setContentNodes(this.views.getContentNodes())},_setStructureAttr:function(a){a&&F.isString(a)&&(u.deprecated("dojox.grid._Grid.set('structure', 'objVar')","use dojox.grid._Grid.set('structure', objVar) instead","2.0"),a=F.getObject(a));this.structure=a;if(!a)if(this.layout.structure)a=this.layout.structure;
else return;this.views.destroyViews();this.focus.focusView=null;a!==this.layout.structure&&this.layout.setStructure(a);this._structureChanged()},setStructure:function(a){u.deprecated("dojox.grid._Grid.setStructure(obj)","use dojox.grid._Grid.set('structure', obj) instead.","2.0");this._setStructureAttr(a)},getColumnTogglingItems:function(){var a,b=[];a=H.map(this.layout.cells,function(a){a.menuItems||(a.menuItems=[]);var c=this,e=new r({label:a.name,checked:!a.hidden,_gridCell:a,onChange:function(a){if(c.layout.setColumnVisibility(this._gridCell.index,
a)){var b=this._gridCell.menuItems;1<b.length&&H.forEach(b,function(b){b!==this&&b.setAttribute("checked",a)},this);a=H.filter(c.layout.cells,function(a){1<a.menuItems.length?H.forEach(a.menuItems,"item.set('disabled', false);"):a.menuItems[0].set("disabled",!1);return!a.hidden});1==a.length&&H.forEach(a[0].menuItems,"item.set('disabled', true);")}},destroy:function(){var a=H.indexOf(this._gridCell.menuItems,this);this._gridCell.menuItems.splice(a,1);delete this._gridCell;r.prototype.destroy.apply(this,
arguments)}});a.menuItems.push(e);a.hidden||b.push(e);return e},this);1==b.length&&b[0].set("disabled",!0);return a},_setHeaderMenuAttr:function(a){this._placeholders&&this._placeholders.length&&(H.forEach(this._placeholders,function(a){a.unReplace(!0)}),this._placeholders=[]);this.headerMenu&&this.headerMenu.unBindDomNode(this.viewsHeaderNode);if(this.headerMenu=a)this.headerMenu.bindDomNode(this.viewsHeaderNode),this.headerMenu.getPlaceholders&&(this._placeholders=this.headerMenu.getPlaceholders(this.placeholderLabel))},
setHeaderMenu:function(a){u.deprecated("dojox.grid._Grid.setHeaderMenu(obj)","use dojox.grid._Grid.set('headerMenu', obj) instead.","2.0");this._setHeaderMenuAttr(a)},setupHeaderMenu:function(){this._placeholders&&this._placeholders.length&&H.forEach(this._placeholders,function(a){a._replaced&&a.unReplace(!0);a.replace(this.getColumnTogglingItems())},this)},_fetch:function(a){this.setScrollTop(0)},getItem:function(a){return null},showMessage:function(a){a?(this.messagesNode.innerHTML=a,this.messagesNode.style.display=
""):(this.messagesNode.innerHTML="",this.messagesNode.style.display="none")},_structureChanged:function(){this.buildViews();this.autoRender&&this._started&&this.render()},hasLayout:function(){return this.layout.cells.length},resize:function(a,b){this._pendingChangeSize=a;this._pendingResultSize=b;this.sizeChange()},_getPadBorder:function(){return this._padBorder=this._padBorder||D._getPadBorderExtents(this.domNode)},_getHeaderHeight:function(){var a=this.viewsHeaderNode.style,b="none"==a.display?
0:this.views.measureHeader();a.height=b+"px";this.views.normalizeHeaderNodeHeight();return b},_resize:function(a,b){a=a||this._pendingChangeSize;b=b||this._pendingResultSize;delete this._pendingChangeSize;delete this._pendingResultSize;if(this.domNode){var c=this.domNode.parentNode;if(c&&1==c.nodeType&&this.hasLayout()&&"hidden"!=c.style.visibility&&"none"!=c.style.display){var e=this._getPadBorder(),f=void 0,k;this._autoHeight?this.domNode.style.height="auto":"number"==typeof this.autoHeight?(k=
f=this._getHeaderHeight(),k+=this.scroller.averageRowHeight*this.autoHeight,this.domNode.style.height=k+"px"):this.domNode.clientHeight<=e.h&&(c==document.body?this.domNode.style.height=this.defaultHeight:this.height?this.domNode.style.height=this.height:this.fitTo="parent");b&&(a=b);!this._autoHeight&&a?(D.marginBox(this.domNode,a),this.height=this.domNode.style.height,delete this.fitTo):"parent"==this.fitTo&&(k=this._parentContentBoxHeight=0<this._parentContentBoxHeight?this._parentContentBoxHeight:
D._getContentBox(c).h,this.domNode.style.height=Math.max(0,k)+"px");a=H.some(this.views.views,function(a){return a.flexCells});this._autoHeight||0!==(k||D._getContentBox(this.domNode).h)?(this.viewsHeaderNode.style.display="block",a||void 0!==f||(f=this._getHeaderHeight())):this.viewsHeaderNode.style.display="none";a&&(f=void 0);this.adaptWidth();this.adaptHeight(f);this.postresize()}}},adaptWidth:function(){var a=!this.initialWidth&&this.autoWidth,b=a?0:this.domNode.clientWidth||this.domNode.offsetWidth-
this._getPadBorder().w,b=this.views.arrange(1,b);this.views.onEach("adaptWidth");a&&(this.domNode.style.width=b+"px")},adaptHeight:function(a){a=void 0===a?this._getHeaderHeight():a;var b=this._autoHeight?-1:Math.max(this.domNode.clientHeight-a,0)||0;this.views.onEach("setSize",[0,b]);this.views.onEach("adaptHeight");if(!this._autoHeight){var c=0,e=0,f=H.filter(this.views.views,function(a){(a=a.hasHScrollbar())?c++:e++;return!a});0<c&&0<e&&H.forEach(f,function(a){a.adaptHeight(!0)})}!0===this.autoHeight||
-1!=b||"number"==typeof this.autoHeight&&this.autoHeight>=this.get("rowCount")?this.scroller.windowHeight=b:this.scroller.windowHeight=Math.max(this.domNode.clientHeight-a,0)},startup:function(){this._started||(this.inherited(arguments),this.autoRender&&this.render())},render:function(){this.domNode&&this._started&&(this.hasLayout()?(this.update=this.defaultUpdate,this._render()):this.scroller.init(0,this.keepRows,this.rowsPerPage))},_render:function(){this.scroller.init(this.get("rowCount"),this.keepRows,
this.rowsPerPage);this.prerender();this.setScrollTop(0);this.postrender()},prerender:function(){this.keepRows=this._autoHeight?0:this.keepRows;this.scroller.setKeepInfo(this.keepRows);this.views.render();this._resize()},postrender:function(){this.postresize();this.focus.initFocusView();D.setSelectable(this.domNode,this.selectable)},postresize:function(){if(this._autoHeight){var a=Math.max(this.views.measureContent())+"px";this.viewsNode.style.height=a}},renderRow:function(a,b){this.views.renderRow(a,
b,this._skipRowRenormalize)},rowRemoved:function(a){this.views.rowRemoved(a)},invalidated:null,updating:!1,beginUpdate:function(){this.invalidated=[];this.updating=!0},endUpdate:function(){this.updating=!1;var a=this.invalidated,b;if(a.all)this.update();else if(void 0!=a.rowCount)this.updateRowCount(a.rowCount);else for(b in a)this.updateRow(Number(b));this.invalidated=[]},defaultUpdate:function(){this.domNode&&(this.updating?this.invalidated.all=!0:(this.lastScrollTop=this.scrollTop,this.prerender(),
this.scroller.invalidateNodes(),this.setScrollTop(this.lastScrollTop),this.postrender()))},update:function(){this.render()},updateRow:function(a){a=Number(a);this.updating?this.invalidated[a]=!0:(this.views.updateRow(a),this.scroller.rowHeightChanged(a))},updateRows:function(a,b){a=Number(a);b=Number(b);var c;if(this.updating)for(c=0;c<b;c++)this.invalidated[c+a]=!0;else{for(c=0;c<b;c++)this.views.updateRow(c+a,this._skipRowRenormalize);this.scroller.rowHeightChanged(a)}},updateRowCount:function(a){this.updating?
this.invalidated.rowCount=a:(this.rowCount=a,this._setAutoHeightAttr(this.autoHeight,!0),this.layout.cells.length&&this.scroller.updateRowCount(a),this._resize(),this.layout.cells.length&&this.setScrollTop(this.scrollTop))},updateRowStyles:function(a){this.views.updateRowStyles(a)},getRowNode:function(a){if(!this.focus.focusView||this.focus.focusView instanceof t)for(var b=0,c;c=this.views.views[b];b++){if(!(c instanceof t))return c.rowNodes[a]}else return this.focus.focusView.rowNodes[a];return null},
rowHeightChanged:function(a){this.views.renormalizeRow(a);this.scroller.rowHeightChanged(a)},fastScroll:!0,delayScroll:!1,scrollRedrawThreshold:R("ie")?100:50,scrollTo:function(a){if(this.fastScroll){var b=Math.abs(this.lastScrollTop-a);this.lastScrollTop=a;if(b>this.scrollRedrawThreshold||this.delayScroll){this.delayScroll=!0;this.scrollTop=a;this.views.setScrollTop(a);this._pendingScroll&&window.clearTimeout(this._pendingScroll);var c=this;this._pendingScroll=window.setTimeout(function(){delete c._pendingScroll;
c.finishScrollJob()},200)}else this.setScrollTop(a)}else this.setScrollTop(a)},finishScrollJob:function(){this.delayScroll=!1;this.setScrollTop(this.scrollTop)},setScrollTop:function(a){this.scroller.scroll(this.views.setScrollTop(a))},scrollToRow:function(a){this.setScrollTop(this.scroller.findScrollTop(a)+1)},styleRowNode:function(a,b){b&&this.rows.styleRowNode(a,b)},_mouseOut:function(a){this.rows.setOverRow(-2)},getCell:function(a){return this.layout.cells[a]},setCellWidth:function(a,b){this.getCell(a).unitWidth=
b},getCellName:function(a){return"Cell "+a.index},canSort:function(a){},sort:function(){},getSortAsc:function(a){a=void 0==a?this.sortInfo:a;return 0<a},getSortIndex:function(a){a=void 0==a?this.sortInfo:a;return Math.abs(a)-1},setSortIndex:function(a,b){var c=a+1;void 0!=b?c*=b?1:-1:this.getSortIndex()==a&&(c=-this.sortInfo);this.setSortInfo(c)},setSortInfo:function(a){this.canSort(a)&&(this.sortInfo=a,this.sort(),this.update())},doKeyEvent:function(a){a.dispatch="do"+a.type;this.onKeyEvent(a)},
_dispatch:function(a,b){return a in this?this[a](b):!1},dispatchKeyEvent:function(a){this._dispatch(a.dispatch,a)},dispatchContentEvent:function(a){this.edit.dispatchEvent(a)||a.sourceView.dispatchContentEvent(a)||this._dispatch(a.dispatch,a)},dispatchHeaderEvent:function(a){a.sourceView.dispatchHeaderEvent(a)||this._dispatch("doheader"+a.type,a)},dokeydown:function(a){this.onKeyDown(a)},doclick:function(a){if(a.cellNode)this.onCellClick(a);else this.onRowClick(a)},dodblclick:function(a){if(a.cellNode)this.onCellDblClick(a);
else this.onRowDblClick(a)},docontextmenu:function(a){if(a.cellNode)this.onCellContextMenu(a);else this.onRowContextMenu(a)},doheaderclick:function(a){if(a.cellNode)this.onHeaderCellClick(a);else this.onHeaderClick(a)},doheaderdblclick:function(a){if(a.cellNode)this.onHeaderCellDblClick(a);else this.onHeaderDblClick(a)},doheadercontextmenu:function(a){if(a.cellNode)this.onHeaderCellContextMenu(a);else this.onHeaderContextMenu(a)},doStartEdit:function(a,b){this.onStartEdit(a,b)},doApplyCellEdit:function(a,
b,c){this.onApplyCellEdit(a,b,c)},doCancelEdit:function(a){this.onCancelEdit(a)},doApplyEdit:function(a){this.onApplyEdit(a)},addRow:function(){this.updateRowCount(this.get("rowCount")+1)},removeSelectedRows:function(){this.allItemsSelected?this.updateRowCount(0):this.updateRowCount(Math.max(0,this.get("rowCount")-this.selection.getSelected().length));this.selection.clear()}});m.markupFactory=function(a,b,c,e){var f=function(a){a=D.attr(a,"width")||"auto";"auto"!=a&&"em"!=a.slice(-2)&&"%"!=a.slice(-1)&&
(a=parseInt(a,10)+"px");return a};a.structure||"table"!=b.nodeName.toLowerCase()||(a.structure=E("\x3e colgroup",b).map(function(a){var b=D.attr(a,"span"),b={noscroll:"true"==D.attr(a,"noscroll")?!0:!1,__span:b?parseInt(b,10):1,cells:[]};D.hasAttr(a,"width")&&(b.width=f(a));return b}),a.structure.length||a.structure.push({__span:Infinity,cells:[]}),E("thead \x3e tr",b).forEach(function(b,c){var k=0,r=0,d,p=null;E("\x3e th",b).map(function(b){p?k>=d+p.__span&&(r++,d+=p.__span,p=a.structure[r]):(d=
0,p=a.structure[0]);var C={name:F.trim(D.attr(b,"name")||b.innerHTML),colSpan:parseInt(D.attr(b,"colspan")||1,10),type:F.trim(D.attr(b,"cellType")||""),id:F.trim(D.attr(b,"id")||"")};k+=C.colSpan;var h=D.attr(b,"rowspan");h&&(C.rowSpan=h);D.hasAttr(b,"width")&&(C.width=f(b));D.hasAttr(b,"relWidth")&&(C.relWidth=window.parseInt(D.attr(b,"relWidth"),10));D.hasAttr(b,"hidden")&&(C.hidden="true"==D.attr(b,"hidden")||!0===D.attr(b,"hidden"));e&&e(b,C);C.type=C.type?F.getObject(C.type):v.grid.cells.Cell;
C.type&&C.type.markupFactory&&C.type.markupFactory(b,C);p.cells[c]||(p.cells[c]=[]);p.cells[c].push(C)})}));return new c(a,b)};return m})},"dojox/grid/_Events":function(){define(["dojo/keys","dojo/dom-class","dojo/_base/declare","dojo/_base/event","dojo/_base/sniff"],function(u,v,m,l,d){return m("dojox.grid._Events",null,{cellOverClass:"dojoxGridCellOver",onKeyEvent:function(d){this.dispatchKeyEvent(d)},onContentEvent:function(d){this.dispatchContentEvent(d)},onHeaderEvent:function(d){this.dispatchHeaderEvent(d)},
onStyleRow:function(d){d.customClasses+=(d.odd?" dojoxGridRowOdd":"")+(d.selected?" dojoxGridRowSelected":"")+(d.over?" dojoxGridRowOver":"");this.focus.styleRow(d);this.edit.styleRow(d)},onKeyDown:function(d){if(!d.altKey&&!d.metaKey){var h;switch(d.keyCode){case u.ESCAPE:this.edit.cancel();break;case u.ENTER:if(!this.edit.isEditing()){h=this.focus.getHeaderIndex();if(0<=h){this.setSortIndex(h);break}else this.selection.clickSelect(this.focus.rowIndex,dojo.isCopyKey(d),d.shiftKey);l.stop(d)}d.shiftKey||
(h=this.edit.isEditing(),this.edit.apply(),h||this.edit.setEditCell(this.focus.cell,this.focus.rowIndex));this.edit.isEditing()||((this.focus.focusView||this.views.views[0]).content.decorateEvent(d),this.onRowClick(d),l.stop(d));break;case u.SPACE:this.edit.isEditing()||(h=this.focus.getHeaderIndex(),0<=h?this.setSortIndex(h):(this.selection.clickSelect(this.focus.rowIndex,dojo.isCopyKey(d),d.shiftKey),this.focus._focusifyCellNode(!0),this.focus.setFocusCell(this.focus.cell,this.focus.rowIndex),l.stop(d)));
break;case u.TAB:this.focus[d.shiftKey?"previousKey":"nextKey"](d);break;case u.LEFT_ARROW:case u.RIGHT_ARROW:if(!this.edit.isEditing()){var f=d.keyCode;l.stop(d);h=this.focus.getHeaderIndex();0<=h&&d.shiftKey&&d.ctrlKey?this.focus.colSizeAdjust(d,h,5*(f==u.LEFT_ARROW?-1:1)):(d=f==u.LEFT_ARROW?1:-1,this.isLeftToRight()&&(d*=-1),this.focus.move(0,d))}break;case u.UP_ARROW:this.edit.isEditing()||0===this.focus.rowIndex||(l.stop(d),this.focus.move(-1,0));break;case u.DOWN_ARROW:this.edit.isEditing()||
this.focus.rowIndex+1==this.rowCount||(l.stop(d),this.focus.move(1,0));break;case u.PAGE_UP:this.edit.isEditing()||0===this.focus.rowIndex||(l.stop(d),this.focus.rowIndex!=this.scroller.firstVisibleRow+1?this.focus.move(this.scroller.firstVisibleRow-this.focus.rowIndex,0):(this.setScrollTop(this.scroller.findScrollTop(this.focus.rowIndex-1)),this.focus.move(this.scroller.firstVisibleRow-this.scroller.lastVisibleRow+1,0)));break;case u.PAGE_DOWN:this.edit.isEditing()||this.focus.rowIndex+1==this.rowCount||
(l.stop(d),this.focus.rowIndex!=this.scroller.lastVisibleRow-1?this.focus.move(this.scroller.lastVisibleRow-this.focus.rowIndex-1,0):(this.setScrollTop(this.scroller.findScrollTop(this.focus.rowIndex+1)),this.focus.move(this.scroller.lastVisibleRow-this.scroller.firstVisibleRow-1,0)))}}},onMouseOver:function(d){-1==d.rowIndex?this.onHeaderCellMouseOver(d):this.onCellMouseOver(d)},onMouseOut:function(d){-1==d.rowIndex?this.onHeaderCellMouseOut(d):this.onCellMouseOut(d)},onMouseDown:function(d){-1==
d.rowIndex?this.onHeaderCellMouseDown(d):this.onCellMouseDown(d)},onMouseOverRow:function(d){this.rows.isOver(d.rowIndex)||(this.rows.setOverRow(d.rowIndex),-1==d.rowIndex?this.onHeaderMouseOver(d):this.onRowMouseOver(d))},onMouseOutRow:function(d){if(this.rows.isOver(-1))this.onHeaderMouseOut(d);else this.rows.isOver(-2)||(this.rows.setOverRow(-2),this.onRowMouseOut(d))},onMouseDownRow:function(d){if(-1!=d.rowIndex)this.onRowMouseDown(d)},onCellMouseOver:function(d){d.cellNode&&v.add(d.cellNode,
this.cellOverClass)},onCellMouseOut:function(d){d.cellNode&&v.remove(d.cellNode,this.cellOverClass)},onCellMouseDown:function(d){},onCellClick:function(d){this._click[0]=this._click[1];this._click[1]=d;this.edit.isEditCell(d.rowIndex,d.cellIndex)||this.focus.setFocusCell(d.cell,d.rowIndex);1<this._click.length&&null==this._click[0]&&this._click.shift();this.onRowClick(d)},onCellDblClick:function(h){var g;g=1<this._click.length&&d("ie")?this._click[1]:1<this._click.length&&this._click[0].rowIndex!=
this._click[1].rowIndex?this._click[0]:h;this.focus.setFocusCell(g.cell,g.rowIndex);this.edit.setEditCell(g.cell,g.rowIndex);this.onRowDblClick(h)},onCellContextMenu:function(d){this.onRowContextMenu(d)},onCellFocus:function(d,g){this.edit.cellFocus(d,g)},onRowClick:function(d){this.edit.rowClick(d);this.selection.clickSelectEvent(d)},onRowDblClick:function(d){},onRowMouseOver:function(d){},onRowMouseOut:function(d){},onRowMouseDown:function(d){},onRowContextMenu:function(d){l.stop(d)},onHeaderMouseOver:function(d){},
onHeaderMouseOut:function(d){},onHeaderCellMouseOver:function(d){d.cellNode&&v.add(d.cellNode,this.cellOverClass)},onHeaderCellMouseOut:function(d){d.cellNode&&v.remove(d.cellNode,this.cellOverClass)},onHeaderCellMouseDown:function(d){},onHeaderClick:function(d){},onHeaderCellClick:function(d){this.setSortIndex(d.cell.index);this.onHeaderClick(d)},onHeaderDblClick:function(d){},onHeaderCellDblClick:function(d){this.onHeaderDblClick(d)},onHeaderCellContextMenu:function(d){this.onHeaderContextMenu(d)},
onHeaderContextMenu:function(d){this.headerMenu||l.stop(d)},onStartEdit:function(d,g){},onApplyCellEdit:function(d,g,f){},onCancelEdit:function(d){},onApplyEdit:function(d){},onCanSelect:function(d){return!0},onCanDeselect:function(d){return!0},onSelected:function(d){this.updateRowStyles(d)},onDeselected:function(d){this.updateRowStyles(d)},onSelectionChanged:function(){}})})},"dojox/grid/_Scroller":function(){define(["dijit/registry","dojo/_base/declare","dojo/_base/lang","./util","dojo/_base/html"],
function(u,v,m,l,d){var h=function(f){f&&dojo.forEach(u.toArray(),function(c){c.domNode&&d.isDescendant(c.domNode,f,!0)&&c.destroy()})},g=function(f,c){for(var a=[],b=0,e;e=f.childNodes[b];){b++;var h=d.byId(e);(h&&h.tagName?h.tagName.toLowerCase():"")==c&&a.push(e)}return a};return v("dojox.grid._Scroller",null,{constructor:function(f){this.setContentNodes(f);this.pageHeights=[];this.pageNodes=[];this.stack=[]},rowCount:0,defaultRowHeight:32,keepRows:100,contentNode:null,scrollboxNode:null,defaultPageHeight:0,
keepPages:10,pageCount:0,windowHeight:0,firstVisibleRow:0,lastVisibleRow:0,averageRowHeight:0,page:0,pageTop:0,init:function(f,c,a){switch(arguments.length){case 3:this.rowsPerPage=a;case 2:this.keepRows=c;case 1:this.rowCount=f}this.defaultPageHeight=(0<this.grid.rowHeight?this.grid.rowHeight:this.defaultRowHeight)*this.rowsPerPage;this.pageCount=this._getPageCount(this.rowCount,this.rowsPerPage);this.setKeepInfo(this.keepRows);this.invalidate();this.scrollboxNode&&(this.scrollboxNode.scrollTop=
0,this.scroll(0),this.scrollboxNode.onscroll=m.hitch(this,"onscroll"))},_getPageCount:function(f,c){return f?Math.ceil(f/c)||1:0},destroy:function(){this.invalidateNodes();delete this.contentNodes;delete this.contentNode;delete this.scrollboxNode},setKeepInfo:function(f){this.keepPages=(this.keepRows=f)?Math.max(Math.ceil(this.keepRows/this.rowsPerPage),2):this.keepPages},setContentNodes:function(f){this.colCount=(this.contentNodes=f)?this.contentNodes.length:0;this.pageNodes=[];for(f=0;f<this.colCount;f++)this.pageNodes[f]=
[]},getDefaultNodes:function(){return this.pageNodes[0]||[]},invalidate:function(){this._invalidating=!0;this.invalidateNodes();this.pageHeights=[];this.height=this.pageCount?(this.pageCount-1)*this.defaultPageHeight+this.calcLastPageHeight():0;this.resize();this._invalidating=!1},updateRowCount:function(f){this.invalidateNodes();this.rowCount=f;f=this.pageCount;0===f&&(this.height=1);this.pageCount=this._getPageCount(this.rowCount,this.rowsPerPage);if(this.pageCount<f)for(--f;f>=this.pageCount;f--)this.height-=
this.getPageHeight(f),delete this.pageHeights[f];else this.pageCount>f&&(this.height+=this.defaultPageHeight*(this.pageCount-f-1)+this.calcLastPageHeight());this.resize()},pageExists:function(f){return!!this.getDefaultPageNode(f)},measurePage:function(f){return this.grid.rowHeight?((f+1)*this.rowsPerPage>this.rowCount?this.rowCount-f*this.rowsPerPage:this.rowsPerPage)*this.grid.rowHeight:(f=this.getDefaultPageNode(f))&&f.innerHTML?f.offsetHeight:void 0},positionPage:function(f,c){for(var a=0;a<this.colCount;a++)this.pageNodes[a][f].style.top=
c+"px"},repositionPages:function(f){for(var c=this.getDefaultNodes(),a=0,b=0;b<this.stack.length;b++)a=Math.max(this.stack[b],a);var e=(b=c[f])?this.getPageNodePosition(b)+this.getPageHeight(f):0;for(f+=1;f<=a;f++){if(b=c[f]){if(this.getPageNodePosition(b)==e)break;this.positionPage(f,e)}e+=this.getPageHeight(f)}},installPage:function(f){for(var c=0;c<this.colCount;c++)this.contentNodes[c].appendChild(this.pageNodes[c][f])},preparePage:function(f,c){c=c?this.popPage():null;for(var a=0;a<this.colCount;a++){var b=
this.pageNodes[a],e=null===c?this.createPageNode():this.invalidatePageNode(c,b);e.pageIndex=f;b[f]=e}},renderPage:function(f){var c=[],a;for(a=0;a<this.colCount;a++)c[a]=this.pageNodes[a][f];a=0;for(f*=this.rowsPerPage;a<this.rowsPerPage&&f<this.rowCount;a++,f++)this.renderRow(f,c)},removePage:function(f){var c=0;for(f*=this.rowsPerPage;c<this.rowsPerPage;c++,f++)this.removeRow(f)},destroyPage:function(f){for(var c=0;c<this.colCount;c++){var a=this.invalidatePageNode(f,this.pageNodes[c]);a&&d.destroy(a)}},
pacify:function(f){},pacifying:!1,pacifyTicks:200,setPacifying:function(f){this.pacifying!=f&&(this.pacifying=f,this.pacify(this.pacifying))},startPacify:function(){this.startPacifyTicks=(new Date).getTime()},doPacify:function(){var f=(new Date).getTime()-this.startPacifyTicks>this.pacifyTicks;this.setPacifying(!0);this.startPacify();return f},endPacify:function(){this.setPacifying(!1)},resize:function(){this.scrollboxNode&&(this.windowHeight=this.scrollboxNode.clientHeight);for(var f=0;f<this.colCount;f++)l.setStyleHeightPx(this.contentNodes[f],
Math.max(1,this.height));f=!this._invalidating;if(!f){var c=this.grid.get("autoHeight");"number"==typeof c&&c<=Math.min(this.rowsPerPage,this.rowCount)&&(f=!0)}f&&this.needPage(this.page,this.pageTop);f=this.page<this.pageCount-1?this.rowsPerPage:this.rowCount%this.rowsPerPage||this.rowsPerPage;c=this.getPageHeight(this.page);this.averageRowHeight=0<c&&0<f?c/f:0},calcLastPageHeight:function(){if(!this.pageCount)return 0;var f=(this.rowCount%this.rowsPerPage||this.rowsPerPage)*this.defaultRowHeight;
return this.pageHeights[this.pageCount-1]=f},updateContentHeight:function(f){this.height+=f;this.resize()},updatePageHeight:function(f,c,a){if(this.pageExists(f)){var b=this.getPageHeight(f),e=this.measurePage(f);void 0===e&&(e=b);this.pageHeights[f]=e;if(b!=e){this.updateContentHeight(e-b);var d=this.grid.get("autoHeight");"number"==typeof d&&d>this.rowCount||!0===d&&!c?a?(c=this.grid.viewsNode.style,c.height=parseInt(c.height)+e-b+"px",this.repositionPages(f)):this.grid.sizeChange():this.repositionPages(f)}return e}return 0},
rowHeightChanged:function(f,c){this.updatePageHeight(Math.floor(f/this.rowsPerPage),!1,c)},invalidateNodes:function(){for(;this.stack.length;)this.destroyPage(this.popPage())},createPageNode:function(){var f=document.createElement("div");d.attr(f,"role","presentation");f.style.position="absolute";f.style[this.grid.isLeftToRight()?"left":"right"]="0";return f},getPageHeight:function(f){f=this.pageHeights[f];return void 0!==f?f:this.defaultPageHeight},pushPage:function(f){return this.stack.push(f)},
popPage:function(){return this.stack.shift()},findPage:function(f){for(var c=0,a=0,b=0;c<this.pageCount&&!(b=this.getPageHeight(c),a+b>=f);c++,a+=b);this.page=c;this.pageTop=a},buildPage:function(f,c,a){this.preparePage(f,c);this.positionPage(f,a);this.installPage(f);this.renderPage(f);this.pushPage(f)},needPage:function(f,c){var a=this.getPageHeight(f);this.pageExists(f)?this.positionPage(f,c):(this.buildPage(f,!this.grid._autoHeight&&this.keepPages&&this.stack.length>=this.keepPages,c),a=this.updatePageHeight(f,
!0));return a},onscroll:function(){this.scroll(this.scrollboxNode.scrollTop)},scroll:function(f){this.grid.scrollTop=f;if(this.colCount){this.startPacify();this.findPage(f);for(var c=this.height,a=this.getScrollBottom(f),b=this.page,e=this.pageTop;b<this.pageCount&&(0>a||e<a);b++)e+=this.needPage(b,e);this.firstVisibleRow=this.getFirstVisibleRow(this.page,this.pageTop,f);this.lastVisibleRow=this.getLastVisibleRow(b-1,e,a);c!=this.height&&this.repositionPages(b-1);this.endPacify()}},getScrollBottom:function(f){return 0<=
this.windowHeight?f+this.windowHeight:-1},processNodeEvent:function(f,c){for(var a=f.target;a&&a!=c&&a.parentNode&&a.parentNode.parentNode!=c;)a=a.parentNode;if(!a||!a.parentNode||a.parentNode.parentNode!=c)return!1;f.topRowIndex=a.parentNode.pageIndex*this.rowsPerPage;c=f.topRowIndex;var b;a:{b=0;for(var e,d=a.parentNode;e=d.childNodes[b++];)if(e==a){--b;break a}b=-1}f.rowIndex=c+b;f.rowTarget=a;return!0},processEvent:function(f){return this.processNodeEvent(f,this.contentNode)},renderRow:function(f,
c){},removeRow:function(f){},getDefaultPageNode:function(f){return this.getDefaultNodes()[f]},positionPageNode:function(f,c){},getPageNodePosition:function(f){return f.offsetTop},invalidatePageNode:function(f,c){var a=c[f];a&&(delete c[f],this.removePage(f,a),h(a),a.innerHTML="");return a},getPageRow:function(f){return f*this.rowsPerPage},getLastPageRow:function(f){return Math.min(this.rowCount,this.getPageRow(f+1))-1},getFirstVisibleRow:function(f,c,a){if(!this.pageExists(f))return 0;var b=this.getPageRow(f),
e=this.getDefaultNodes();f=g(e[f],"div");for(var e=0,d=f.length;e<d&&c<a;e++,b++)c+=f[e].offsetHeight;return b?b-1:b},getLastVisibleRow:function(f,c,a){if(!this.pageExists(f))return 0;var b=this.getDefaultNodes(),e=this.getLastPageRow(f);f=g(b[f],"div");for(b=f.length-1;0<=b&&c>a;b--,e--)c-=f[b].offsetHeight;return e+1},findTopRow:function(f){for(var c=this.getDefaultNodes(),c=g(c[this.page],"div"),a=0,b=c.length,e=this.pageTop,d;a<b;a++)if(d=c[a].offsetHeight,e+=d,e>=f)return this.offset=d-(e-f),
a+this.page*this.rowsPerPage;return-1},findScrollTop:function(f){var c=Math.floor(f/this.rowsPerPage),a=0,b;for(b=0;b<c;b++)a+=this.getPageHeight(b);this.pageTop=a;this.page=c;this.needPage(c,this.pageTop);b=this.getDefaultNodes();var e=g(b[c],"div"),c=f-this.rowsPerPage*c;b=0;for(f=e.length;b<f&&b<c;b++)a+=e[b].offsetHeight;return a},dummy:0})})},"dojox/grid/util":function(){define(["../main","dojo/_base/lang","dojo/dom","dojo/_base/sniff"],function(u,v,m,l){var d=v.getObject("grid.util",!0,u);d.na=
"...";d.rowIndexTag="gridRowIndex";d.gridViewTag="gridView";d.fire=function(d,g,f){function c(a,b){if(null==a)return null;var e=b?"Width":"Height";return a["scroll"+e]>a["client"+e]?a:c(a.parentNode,b)}var a,b,e,h;if(l("webkit")&&"focus"==g){b=d.domNode?d.domNode:d;if(a=c(b,!1))e=a.scrollTop;if(b=c(b,!0))h=b.scrollLeft}var n=d&&g&&d[g];d=n&&(f?n.apply(d,f):d[g]());l("webkit")&&"focus"==g&&(a&&(a.scrollTop=e),b&&(b.scrollLeft=h));return d};d.setStyleHeightPx=function(d,g){if(0<=g){var f=d.style;g+=
"px";d&&f.height!=g&&(f.height=g)}};d.mouseEvents="mouseover mouseout mousedown mouseup click dblclick contextmenu".split(" ");d.keyEvents=["keyup","keydown","keypress"];d.funnelEvents=function(h,g,f,c){c=c?c:d.mouseEvents.concat(d.keyEvents);for(var a=0,b=c.length;a<b;a++)g.connect(h,"on"+c[a],f)};d.removeNode=function(d){(d=m.byId(d))&&d.parentNode&&d.parentNode.removeChild(d);return d};d.arrayCompare=function(d,g){for(var f=0,c=d.length;f<c;f++)if(d[f]!=g[f])return!1;return d.length==g.length};
d.arrayInsert=function(d,g,f){d.length<=g?d[g]=f:d.splice(g,0,f)};d.arrayRemove=function(d,g){d.splice(g,1)};d.arraySwap=function(d,g,f){var c=d[g];d[g]=d[f];d[f]=c};return d})},"dojox/grid/_Layout":function(){define("dojo/_base/kernel ../main dojo/_base/declare dojo/_base/array dojo/_base/lang dojo/dom-geometry ./cells ./_RowSelector".split(" "),function(u,v,m,l,d,h){return m("dojox.grid._Layout",null,{constructor:function(d){this.grid=d},cells:[],structure:null,defaultWidth:"6em",moveColumn:function(d,
f,c,a,b){var e=this.structure[d].cells[0],g=this.structure[f].cells[0],n=null,p=n=0;d=0;for(var k;k=e[d];d++)if(k.index==c){n=d;break}n=e.splice(n,1)[0];n.view=this.grid.views.views[f];d=0;for(k=null;k=g[d];d++)if(k.index==a){p=d;break}b||(p+=1);g.splice(p,0,n);if(c=this.grid.getCell(this.grid.getSortIndex()))c._currentlySorted=this.grid.getSortAsc();this.cells=[];for(d=c=0;f=this.structure[d];d++)for(a=0;b=f.cells[a];a++)for(e=0;k=b[e];e++)k.index=c,this.cells.push(k),"_currentlySorted"in k&&(g=
c+1,g*=k._currentlySorted?1:-1,this.grid.sortInfo=g,delete k._currentlySorted),c++;l.forEach(this.cells,function(a){var b=a.markup[2].split(" ");parseInt(b[1].substring(5))!=a.index&&(b[1]='idx\x3d"'+a.index+'"',a.markup[2]=b.join(" "))});this.grid.setupHeaderMenu()},setColumnVisibility:function(d,f){d=this.cells[d];if(d.hidden==f){d.hidden=!f;f=d.view;var c=f.viewWidth;c&&"auto"!=c&&(f._togglingColumn=h.getMarginBox(d.getHeaderNode()).w||0);f.update();return!0}return!1},addCellDef:function(g,f,c){var a=
this,b=function(b){var c=0;1<b.colSpan?c=0:(c=b.width||a._defaultCellProps.width||a.defaultWidth,isNaN(c)||(c+="em"));return c};g={grid:this.grid,subrow:g,layoutIndex:f,index:this.cells.length};if(c&&c instanceof v.grid.cells._Base)return f=d.clone(c),g.unitWidth=b(f._props),f=d.mixin(f,this._defaultCellProps,c._props,g);f=c.type||c.cellType||this._defaultCellProps.type||this._defaultCellProps.cellType||v.grid.cells.Cell;d.isString(f)&&(f=d.getObject(f));g.unitWidth=b(c);return new f(d.mixin({},this._defaultCellProps,
c,g))},addRowDef:function(d,f){for(var c=[],a=0,b=0,e=!0,g=0,n;n=f[g];g++)n=this.addCellDef(d,g,n),c.push(n),this.cells.push(n),e&&n.relWidth?a+=n.relWidth:n.width&&(n=n.width,"string"==typeof n&&"%"==n.slice(-1)?b+=window.parseInt(n,10):"auto"==n&&(e=!1));a&&e&&l.forEach(c,function(c){c.relWidth&&(c.width=c.unitWidth=c.relWidth/a*(100-b)+"%")});return c},addRowsDef:function(g){var f=[];if(d.isArray(g))if(d.isArrayLike(g[0]))for(var c=0,a;g&&(a=g[c]);c++)f.push(this.addRowDef(c,a));else f.push(this.addRowDef(0,
g));return f},addViewDef:function(g){this._defaultCellProps=g.defaultCell||{};g.width&&"auto"==g.width&&delete g.width;return d.mixin({},g,{cells:this.addRowsDef(g.rows||g.cells)})},setStructure:function(g){this.fieldIndex=0;this.cells=[];var f=this.structure=[];if(this.grid.rowSelector){var c={type:v._scopeName+".grid._RowSelector"};if(d.isString(this.grid.rowSelector)){var a=this.grid.rowSelector;"false"==a?c=null:"true"!=a&&(c.width=a)}else this.grid.rowSelector||(c=null);c&&f.push(this.addViewDef(c))}var b=
function(a){return"name"in a||"field"in a||"get"in a},c=function(a){return d.isArray(a)&&(d.isArray(a[0])||b(a[0]))?!0:!1},a=function(a){return null!==a&&d.isObject(a)&&("cells"in a||"rows"in a||"type"in a&&!b(a))};if(d.isArrayLike(g)){for(var e=!1,h=0,n;n=g[h];h++)if(a(n)){e=!0;break}if(e)for(h=0;n=g[h];h++)c(n)?f.push(this.addViewDef({cells:n})):a(n)&&f.push(this.addViewDef(n));else f.push(this.addViewDef({cells:g}))}else a(g)&&f.push(this.addViewDef(g));this.cellCount=this.cells.length;this.grid.setupHeaderMenu()}})})},
"dojox/grid/cells":function(){define(["../main","./cells/_base"],function(u){return u.grid.cells})},"dojox/grid/cells/_base":function(){define("dojo/_base/kernel dojo/_base/declare dojo/_base/lang dojo/_base/event dojo/_base/connect dojo/_base/array dojo/_base/sniff dojo/dom dojo/dom-attr dojo/dom-construct dijit/_Widget ../util".split(" "),function(u,v,m,l,d,h,g,f,c,a,b,e){var t=v("dojox.grid._DeferredTextWidget",b,{deferred:null,_destroyOnRemove:!0,postCreate:function(){this.deferred&&this.deferred.addBoth(m.hitch(this,
function(a){this.domNode&&(this.domNode.innerHTML=a)}))}}),n=function(){setTimeout(m.hitch.apply(u,arguments),0)},p=v("dojox.grid.cells._Base",null,{styles:"",classes:"",editable:!1,alwaysEditing:!1,formatter:null,defaultValue:"...",value:null,hidden:!1,noresize:!1,draggable:!0,_valueProp:"value",_formatPending:!1,constructor:function(a){this._props=a||{};m.mixin(this,a);void 0===this.draggable&&(this.draggable=!0)},_defaultFormat:function(b,c){var e=this.grid.formatterScope||this,d=this.formatter;
d&&e&&"string"==typeof d&&(d=this.formatter=e[d]);b=b!=this.defaultValue&&d?d.apply(e,c):b;if("undefined"==typeof b)return this.defaultValue;b&&b.addBoth&&(b=new t({deferred:b},a.create("span",{innerHTML:this.defaultValue})));return b&&b.declaredClass&&b.startup?"\x3cdiv class\x3d'dojoxGridStubNode' linkWidget\x3d'"+b.id+"' cellIdx\x3d'"+this.index+"'\x3e"+this.defaultValue+"\x3c/div\x3e":b},format:function(a,b){var c=this.grid.edit.info;(b=this.get?this.get(a,b):this.value||this.defaultValue)&&b.replace&&
this.grid.escapeHTMLInData&&(b=b.replace(/&/g,"\x26amp;").replace(/</g,"\x26lt;"));return this.editable&&(this.alwaysEditing||c.rowIndex==a&&c.cell==this)?this.formatEditing(c.value?c.value:b,a):this._defaultFormat(b,[b,a,this])},formatEditing:function(a,b){},getNode:function(a){return this.view.getCellNode(a,this.index)},getHeaderNode:function(){return this.view.getHeaderCellNode(this.index)},getEditNode:function(a){return(this.getNode(a)||0).firstChild||0},canResize:function(){var a=this.unitWidth;
return a&&"auto"!==a},isFlex:function(){var a=this.unitWidth;return a&&m.isString(a)&&("auto"==a||"%"==a.slice(-1))},applyEdit:function(a,b){this.getNode(b)&&this.grid.edit.applyCellEdit(a,this,b)},cancelEdit:function(a){this.grid.doCancelEdit(a)},_onEditBlur:function(a){this.grid.edit.isEditCell(a,this.index)&&this.grid.edit.apply()},registerOnBlur:function(a,b){this.commitOnBlur&&d.connect(a,"onblur",function(a){setTimeout(m.hitch(this,"_onEditBlur",b),250)})},needFormatNode:function(a,b){this._formatPending=
!0;n(this,"_formatNode",a,b)},cancelFormatNode:function(){this._formatPending=!1},_formatNode:function(a,b){this._formatPending&&(this._formatPending=!1,g("ie")||f.setSelectable(this.grid.domNode,!0),this.formatNode(this.getEditNode(b),a,b))},formatNode:function(a,b,c){g("ie")?n(this,"focus",c,a):this.focus(c,a)},dispatchEvent:function(a,b){if(a in this)return this[a](b)},getValue:function(a){return this.getEditNode(a)[this._valueProp]},setValue:function(a,b){(a=this.getEditNode(a))&&(a[this._valueProp]=
b)},focus:function(a,b){a=b||this.getEditNode(a);try{e.fire(a,"focus"),e.fire(a,"select")}catch(H){}},save:function(a){this.value=this.value||this.getValue(a)},restore:function(a){this.setValue(a,this.value)},_finish:function(a){f.setSelectable(this.grid.domNode,!1);this.cancelFormatNode()},apply:function(a){this.applyEdit(this.getValue(a),a);this._finish(a)},cancel:function(a){this.cancelEdit(a);this._finish(a)}});p.markupFactory=function(a,b){var e=m.trim(c.get(a,"formatter")||"");e&&(b.formatter=
m.getObject(e)||e);if(e=m.trim(c.get(a,"get")||""))b.get=m.getObject(e);e=function(b,e,d){var f=m.trim(c.get(a,b)||"");f&&(e[d||b]="false"!=f.toLowerCase())};e("sortDesc",b);e("editable",b);e("alwaysEditing",b);e("noresize",b);e("draggable",b);if(e=m.trim(c.get(a,"loadingText")||c.get(a,"defaultValue")||""))b.defaultValue=e;e=function(b,e,d){var f=m.trim(c.get(a,b)||"")||void 0;f&&(e[d||b]=f)};e("styles",b);e("headerStyles",b);e("cellStyles",b);e("classes",b);e("headerClasses",b);e("cellClasses",
b)};var k=p.Cell=v("dojox.grid.cells.Cell",p,{constructor:function(){this.keyFilter=this.keyFilter},keyFilter:null,formatEditing:function(a,b){this.needFormatNode(a,b);a&&a.replace&&(a=a.replace(/"/g,"\x26quot;"));return'\x3cinput class\x3d"dojoxGridInput" type\x3d"text" value\x3d"'+a+'"\x3e'},formatNode:function(a,b,c){this.inherited(arguments);this.registerOnBlur(a,c)},doKey:function(a){this.keyFilter&&-1==String.fromCharCode(a.charCode).search(this.keyFilter)&&l.stop(a)},_finish:function(a){this.inherited(arguments);
var b=this.getEditNode(a);try{e.fire(b,"blur")}catch(H){}}});k.markupFactory=function(a,b){p.markupFactory(a,b);if(a=m.trim(c.get(a,"keyFilter")||""))b.keyFilter=new RegExp(a)};(p.RowIndex=v("dojox.grid.cells.RowIndex",k,{name:"Row",postscript:function(){this.editable=!1},get:function(a){return a+1}})).markupFactory=function(a,b){k.markupFactory(a,b)};(p.Select=v("dojox.grid.cells.Select",k,{options:null,values:null,returnIndex:-1,constructor:function(a){this.values=this.values||this.options},formatEditing:function(a,
b){this.needFormatNode(a,b);b=['\x3cselect class\x3d"dojoxGridSelect"\x3e'];for(var c=0,e,d;void 0!==(e=this.options[c])&&void 0!==(d=this.values[c]);c++)d=d.replace?d.replace(/&/g,"\x26amp;").replace(/</g,"\x26lt;"):d,e=e.replace?e.replace(/&/g,"\x26amp;").replace(/</g,"\x26lt;"):e,b.push("\x3coption",a==d?" selected":"",' value\x3d"'+d+'"',"\x3e",e,"\x3c/option\x3e");b.push("\x3c/select\x3e");return b.join("")},_defaultFormat:function(a,b){var c=this.inherited(arguments);if(!this.formatter&&this.values&&
this.options){var e=h.indexOf(this.values,c);0<=e&&(c=this.options[e])}return c},getValue:function(a){var b=this.getEditNode(a);if(b)return a=b.selectedIndex,b=b.options[a],-1<this.returnIndex?a:b.value||b.innerHTML}})).markupFactory=function(a,b){k.markupFactory(a,b);var e=m.trim(c.get(a,"options")||"");if(e){var d=e.split(",");d[0]!=e&&(b.options=d)}if(a=m.trim(c.get(a,"values")||""))e=a.split(","),e[0]!=a&&(b.values=e)};var r=p.AlwaysEdit=v("dojox.grid.cells.AlwaysEdit",k,{alwaysEditing:!0,_formatNode:function(a,
b){this.formatNode(this.getEditNode(b),a,b)},applyStaticValue:function(a){var b=this.grid.edit;b.applyCellEdit(this.getValue(a),this,a);b.start(this,a,!0)}});r.markupFactory=function(a,b){k.markupFactory(a,b)};(p.Bool=v("dojox.grid.cells.Bool",r,{_valueProp:"checked",formatEditing:function(a,b){return'\x3cinput class\x3d"dojoxGridInput" type\x3d"checkbox"'+(a?' checked\x3d"checked"':"")+' style\x3d"width: auto" /\x3e'},doclick:function(a){"INPUT"==a.target.tagName&&this.applyStaticValue(a.rowIndex)}})).markupFactory=
function(a,b){r.markupFactory(a,b)};return p})},"dojox/grid/_RowSelector":function(){define(["dojo/_base/declare","./_View"],function(u,v){return u("dojox.grid._RowSelector",v,{defaultWidth:"2em",noscroll:!0,padBorderWidth:2,buildRendering:function(){this.inherited("buildRendering",arguments);this.scrollboxNode.style.overflow="hidden";this.headerNode.style.visibility="hidden"},getWidth:function(){return this.viewWidth||this.defaultWidth},buildRowContent:function(m,l){l.innerHTML='\x3ctable class\x3d"dojoxGridRowbarTable" style\x3d"width:'+
(this.contentWidth||0)+'px;height:1px;" border\x3d"0" cellspacing\x3d"0" cellpadding\x3d"0" role\x3d"presentation"\x3e\x3ctr\x3e\x3ctd class\x3d"dojoxGridRowbarInner"\x3e\x26nbsp;\x3c/td\x3e\x3c/tr\x3e\x3c/table\x3e'},renderHeader:function(){},updateRow:function(){},resize:function(){this.adaptHeight()},adaptWidth:function(){!("contentWidth"in this)&&this.contentNode&&0<this.contentNode.offsetWidth&&(this.contentWidth=this.contentNode.offsetWidth-this.padBorderWidth)},doStyleRowNode:function(m,l){var d=
["dojoxGridRowbar dojoxGridNonNormalizedCell"];this.grid.rows.isOver(m)&&d.push("dojoxGridRowbarOver");this.grid.selection.isSelected(m)&&d.push("dojoxGridRowbarSelected");l.className=d.join(" ")},domouseover:function(m){this.grid.onMouseOverRow(m)},domouseout:function(m){if(!this.isIntraRowEvent(m))this.grid.onMouseOutRow(m)}})})},"dojox/grid/_View":function(){define("dojo dijit/registry ../main dojo/_base/declare dojo/_base/array dojo/_base/lang dojo/_base/connect dojo/_base/sniff dojo/query dojo/_base/window dojo/text!./resources/View.html dojo/dnd/Source dijit/_Widget dijit/_TemplatedMixin dojox/html/metrics ./util dojo/_base/html ./_Builder dojo/dnd/Avatar dojo/dnd/Manager".split(" "),
function(u,v,m,l,d,h,g,f,c,a,b,e,t,n,p,k,r,q,M,H){b=l("dojox.grid._View",[t,n],{defaultWidth:"18em",viewWidth:"",templateString:b,classTag:"dojoxGrid",marginBottom:0,rowPad:2,_togglingColumn:-1,_headerBuilderClass:q._HeaderBuilder,_contentBuilderClass:q._ContentBuilder,postMixInProperties:function(){this.rowNodes={}},postCreate:function(){this.connect(this.scrollboxNode,"onscroll","doscroll");k.funnelEvents(this.contentNode,this,"doContentEvent","mouseover mouseout click dblclick contextmenu mousedown".split(" "));
k.funnelEvents(this.headerNode,this,"doHeaderEvent","dblclick mouseover mouseout mousemove mousedown click contextmenu".split(" "));this.content=new this._contentBuilderClass(this);this.header=new this._headerBuilderClass(this);this.grid.isLeftToRight()||(this.headerNodeContainer.style.width="")},destroy:function(){r.destroy(this.headerNode);delete this.headerNode;for(var a in this.rowNodes)this._cleanupRowWidgets(this.rowNodes[a]),r.destroy(this.rowNodes[a]);this.rowNodes={};this.source&&this.source.destroy();
this.inherited(arguments)},focus:function(){f("ie")||f("webkit")||f("opera")?this.hiddenFocusNode.focus():this.scrollboxNode.focus()},setStructure:function(a){a=this.structure=a;a.width&&!isNaN(a.width)?this.viewWidth=a.width+"em":this.viewWidth=a.width||(a.noscroll?"auto":this.viewWidth);this._onBeforeRow=a.onBeforeRow||function(){};this._onAfterRow=a.onAfterRow||function(){};if(this.noscroll=a.noscroll)this.scrollboxNode.style.overflow="hidden";this.simpleStructure=1==a.cells.length;this.testFlexCells();
this.updateStructure()},_cleanupRowWidgets:function(a){a&&d.forEach(c("[widgetId]",a).map(v.byNode),function(a){a._destroyOnRemove?(a.destroy(),delete a):a.domNode&&a.domNode.parentNode&&a.domNode.parentNode.removeChild(a.domNode)})},onBeforeRow:function(a,b){this._onBeforeRow(a,b);0<=a&&this._cleanupRowWidgets(this.getRowNode(a))},onAfterRow:function(a,b,e){this._onAfterRow(a,b,e);var f=this.grid;d.forEach(c(".dojoxGridStubNode",e),function(a){if(a&&a.parentNode){var b=a.getAttribute("linkWidget"),
c=window.parseInt(r.attr(a,"cellIdx"),10);f.getCell(c);(b=v.byId(b))?(a.parentNode.replaceChild(b.domNode,a),b._started||b.startup(),u.destroy(a)):a.innerHTML=""}},this)},testFlexCells:function(){this.flexCells=!1;for(var a=0,b;b=this.structure.cells[a];a++)for(var c=0,e;e=b[c];c++)e.view=this,this.flexCells=this.flexCells||e.isFlex();return this.flexCells},updateStructure:function(){this.header.update();this.content.update()},getScrollbarWidth:function(){var a=this.hasVScrollbar(),b=r.style(this.scrollboxNode,
"overflow");this.noscroll||!b||"hidden"==b?a=!1:"scroll"==b&&(a=!0);return a?p.getScrollbar().w:0},getColumnsWidth:function(){var a=this.headerContentNode;return a&&a.firstChild?a.firstChild.offsetWidth||r.style(a.firstChild,"width"):0},setColumnsWidth:function(a){this.headerContentNode.firstChild.style.width=a+"px";this.viewWidth&&(this.viewWidth=a+"px")},getWidth:function(){return this.viewWidth||this.getColumnsWidth()+this.getScrollbarWidth()+"px"},getContentWidth:function(){return Math.max(0,
r._getContentBox(this.domNode).w-this.getScrollbarWidth())+"px"},render:function(){this.scrollboxNode.style.height="";this.renderHeader();0<=this._togglingColumn&&(this.setColumnsWidth(this.getColumnsWidth()-this._togglingColumn),this._togglingColumn=-1);var b=this.grid.layout.cells,c=h.hitch(this,function(a,c){!this.grid.isLeftToRight()&&(c=!c);c=c?-1:1;a=this.header.getCellNodeIndex(a)+c;for(var e=b[a];e&&e.getHeaderNode()&&"none"==e.getHeaderNode().style.display;)a+=c,e=b[a];return e?e.getHeaderNode():
null});if(this.grid.columnReordering&&this.simpleStructure){this.source&&this.source.destroy();this.bottomMarker&&r.destroy(this.bottomMarker);this.bottomMarker=r.byId("dojoxGrid_bottomMarker");this.topMarker&&r.destroy(this.topMarker);this.topMarker=r.byId("dojoxGrid_topMarker");this.bottomMarker||(this.bottomMarker=r.create("div",{id:"dojoxGrid_bottomMarker","class":"dojoxGridColPlaceBottom"},a.body()),this._hide(this.bottomMarker),this.topMarker=r.create("div",{id:"dojoxGrid_topMarker","class":"dojoxGridColPlaceTop"},
a.body()),this._hide(this.topMarker));this.arrowDim=r.contentBox(this.bottomMarker);var d=r.contentBox(this.headerContentNode.firstChild.rows[0]).h;this.source=new e(this.headerContentNode.firstChild.rows[0],{horizontal:!0,accept:["gridColumn_"+this.grid.id],viewIndex:this.index,generateText:!1,onMouseDown:h.hitch(this,function(a){this.header.decorateEvent(a);if((this.header.overRightResizeArea(a)||this.header.overLeftResizeArea(a))&&this.header.canResize(a)&&!this.header.moveable)this.header.beginColumnResize(a);
else{if(this.grid.headerMenu)this.grid.headerMenu.onCancel(!0);a.button===(9>f("ie")?1:0)&&e.prototype.onMouseDown.call(this.source,a)}}),onMouseOver:h.hitch(this,function(a){var b=this.source;b._getChildByEvent(a)&&e.prototype.onMouseOver.apply(b,arguments)}),_markTargetAnchor:h.hitch(this,function(a){var b=this.source;if(b.current!=b.targetAnchor||b.before!=a){b.targetAnchor&&c(b.targetAnchor,b.before)&&b._removeItemClass(c(b.targetAnchor,b.before),b.before?"After":"Before");e.prototype._markTargetAnchor.call(b,
a);var f=a?b.targetAnchor:c(b.targetAnchor,b.before);a=0;f||(f=b.targetAnchor,a=r.contentBox(f).w+this.arrowDim.w/2+2);f=r.position(f,!0);a=Math.floor(f.x-this.arrowDim.w/2+a);r.style(this.bottomMarker,"visibility","visible");r.style(this.topMarker,"visibility","visible");r.style(this.bottomMarker,{left:a+"px",top:d+f.y+"px"});r.style(this.topMarker,{left:a+"px",top:f.y-this.arrowDim.h+"px"});b.targetAnchor&&c(b.targetAnchor,b.before)&&b._addItemClass(c(b.targetAnchor,b.before),b.before?"After":"Before")}}),
_unmarkTargetAnchor:h.hitch(this,function(){var a=this.source;a.targetAnchor&&(a.targetAnchor&&c(a.targetAnchor,a.before)&&a._removeItemClass(c(a.targetAnchor,a.before),a.before?"After":"Before"),this._hide(this.bottomMarker),this._hide(this.topMarker),e.prototype._unmarkTargetAnchor.call(a))}),destroy:h.hitch(this,function(){g.disconnect(this._source_conn);g.unsubscribe(this._source_sub);e.prototype.destroy.call(this.source);this.bottomMarker&&(r.destroy(this.bottomMarker),delete this.bottomMarker);
this.topMarker&&(r.destroy(this.topMarker),delete this.topMarker)}),onDndCancel:h.hitch(this,function(){e.prototype.onDndCancel.call(this.source);this._hide(this.bottomMarker);this._hide(this.topMarker)})});this._source_conn=g.connect(this.source,"onDndDrop",this,"_onDndDrop");this._source_sub=g.subscribe("/dnd/drop/before",this,"_onDndDropBefore");this.source.startup()}},_hide:function(a){r.style(a,{top:"-10000px",visibility:"hidden"})},_onDndDropBefore:function(a,b,c){H.manager().target===this.source&&
(this.source._targetNode=this.source.targetAnchor,this.source._beforeTarget=this.source.before,b=this.grid.views.views,a=b[a.viewIndex],b=b[this.index],b!=a&&(a.convertColPctToFixed(),b.convertColPctToFixed()))},_onDndDrop:function(a,b,c){if(H.manager().target!==this.source)H.manager().source===this.source&&(this._removingColumn=!0);else{this._hide(this.bottomMarker);this._hide(this.topMarker);c=function(a){return a?r.attr(a,"idx"):null};var e=r.marginBox(b[0]).w;if(a.viewIndex!==this.index){var d=
this.grid.views.views,f=d[a.viewIndex],d=d[this.index];f.viewWidth&&"auto"!=f.viewWidth&&f.setColumnsWidth(f.getColumnsWidth()-e);d.viewWidth&&"auto"!=d.viewWidth&&d.setColumnsWidth(d.getColumnsWidth())}e=this.source._targetNode;f=this.source._beforeTarget;!this.grid.isLeftToRight()&&(f=!f);var d=this.grid.layout,k=this.index;delete this.source._targetNode;delete this.source._beforeTarget;d.moveColumn(a.viewIndex,k,c(b[0]),c(e),f)}},renderHeader:function(){this.headerContentNode.innerHTML=this.header.generateHtml(this._getHeaderContent);
this.flexCells&&(this.contentWidth=this.getContentWidth(),this.headerContentNode.firstChild.style.width=this.contentWidth);k.fire(this,"onAfterRow",[-1,this.structure.cells,this.headerContentNode])},_getHeaderContent:function(a){var b=a.name||a.grid.getCellName(a);/^\s+$/.test(b)&&(b="\x26nbsp;");var c=['\x3cdiv class\x3d"dojoxGridSortNode'];a.index!=a.grid.getSortIndex()?c.push('"\x3e'):c=c.concat([" ",0<a.grid.sortInfo?"dojoxGridSortUp":"dojoxGridSortDown",'"\x3e\x3cdiv class\x3d"dojoxGridArrowButtonChar"\x3e',
0<a.grid.sortInfo?"\x26#9650;":"\x26#9660;",'\x3c/div\x3e\x3cdiv class\x3d"dojoxGridArrowButtonNode" role\x3d"presentation"\x3e\x3c/div\x3e','\x3cdiv class\x3d"dojoxGridColCaption"\x3e']);c=c.concat([b,"\x3c/div\x3e\x3c/div\x3e"]);return c.join("")},resize:function(){this.adaptHeight();this.adaptWidth()},hasHScrollbar:function(a){var b=this._hasHScroll||!1;if(void 0==this._hasHScroll||a)this.noscroll?this._hasHScroll=!1:(a=r.style(this.scrollboxNode,"overflow"),this._hasHScroll="hidden"==a?!1:"scroll"==
a?!0:this.scrollboxNode.offsetWidth-this.getScrollbarWidth()<this.contentNode.offsetWidth);b!==this._hasHScroll&&this.grid.update();return this._hasHScroll},hasVScrollbar:function(a){var b=this._hasVScroll||!1;if(void 0==this._hasVScroll||a)this.noscroll?this._hasVScroll=!1:(a=r.style(this.scrollboxNode,"overflow"),this._hasVScroll="hidden"==a?!1:"scroll"==a?!0:this.scrollboxNode.scrollHeight>this.scrollboxNode.clientHeight);b!==this._hasVScroll&&this.grid.update();return this._hasVScroll},convertColPctToFixed:function(){var a=
!1;this.grid.initialWidth="";var b=c("th",this.headerContentNode),e=d.map(b,function(b,c){var e=b.style.width;r.attr(b,"vIdx",c);if(e&&"%"==e.slice(-1))a=!0;else if(e&&"px"==e.slice(-2))return window.parseInt(e,10);return r.contentBox(b).w});return a?(d.forEach(this.grid.layout.cells,function(a,b){if(a.view==this&&(a=a.view.getHeaderCellNode(a.index))&&r.hasAttr(a,"vIdx")){var c=window.parseInt(r.attr(a,"vIdx"));this.setColWidth(b,e[c]);r.removeAttr(a,"vIdx")}},this),!0):!1},adaptHeight:function(a){if(!this.grid._autoHeight){var b=
this.domNode.style.height&&parseInt(this.domNode.style.height.replace(/px/,""),10)||this.domNode.clientHeight;if(!a&&(a=this.noscroll))a:{for(var c=0;c<this.grid.views.views.length;++c)if(a=this.grid.views.views[c],a!==this&&a.hasHScrollbar()){a=!0;break a}a=!1}a&&(b-=p.getScrollbar().h);k.setStyleHeightPx(this.scrollboxNode,b)}this.hasVScrollbar(!0)},adaptWidth:function(){this.flexCells&&(this.contentWidth=this.getContentWidth(),this.headerContentNode.firstChild.style.width=this.contentWidth);var a=
this.scrollboxNode.offsetWidth-this.getScrollbarWidth();this._removingColumn?(a=Math.min(a,this.getColumnsWidth())+"px",this._removingColumn=!1):a=Math.max(a,this.getColumnsWidth())+"px";this.contentNode.style.width=a;this.hasHScrollbar(!0)},setSize:function(a,b){var c=this.domNode.style,e=this.headerNode.style;a&&(c.width=a,e.width=a);c.height=0<=b?b+"px":""},renderRow:function(a){var b=this.createRowNode(a);this.buildRow(a,b);return b},createRowNode:function(a){var b=document.createElement("div");
b.className=this.classTag+"Row";this instanceof m.grid._RowSelector?r.attr(b,"role","presentation"):(r.attr(b,"role","row"),"none"!=this.grid.selectionMode&&b.setAttribute("aria-selected","false"));b[k.gridViewTag]=this.id;b[k.rowIndexTag]=a;return this.rowNodes[a]=b},buildRow:function(a,b){this.buildRowContent(a,b);this.styleRow(a,b)},buildRowContent:function(a,b){b.innerHTML=this.content.generateHtml(a,a);this.flexCells&&this.contentWidth&&(b.firstChild.style.width=this.contentWidth);k.fire(this,
"onAfterRow",[a,this.structure.cells,b])},rowRemoved:function(a){0<=a&&this._cleanupRowWidgets(this.getRowNode(a));this.grid.edit.save(this,a);delete this.rowNodes[a]},getRowNode:function(a){return this.rowNodes[a]},getCellNode:function(a,b){if(a=this.getRowNode(a))return this.content.getCellNode(a,b)},getHeaderCellNode:function(a){if(this.headerContentNode)return this.header.getCellNode(this.headerContentNode,a)},styleRow:function(a,b){var c;c=void 0==b.style.cssText?b.getAttribute("style"):b.style.cssText;
b._style=c;this.styleRowNode(a,b)},styleRowNode:function(a,b){b&&this.doStyleRowNode(a,b)},doStyleRowNode:function(a,b){this.grid.styleRowNode(a,b)},updateRow:function(a){var b=this.getRowNode(a);b&&(b.style.height="",this.buildRow(a,b));return b},updateRowStyles:function(a){this.styleRowNode(a,this.getRowNode(a))},lastTop:0,firstScroll:0,_nativeScroll:!1,doscroll:function(a){if(13<=f("ff")||f("chrome"))this._nativeScroll=!0;a=this.grid.isLeftToRight();if(2>this.firstScroll){if(!a&&1==this.firstScroll||
a&&0===this.firstScroll){var b=r.marginBox(this.headerNodeContainer);f("ie")?this.headerNodeContainer.style.width=b.w+this.getScrollbarWidth()+"px":f("mozilla")&&(this.headerNodeContainer.style.width=b.w-this.getScrollbarWidth()+"px",this.scrollboxNode.scrollLeft=a?this.scrollboxNode.clientWidth-this.scrollboxNode.scrollWidth:this.scrollboxNode.scrollWidth-this.scrollboxNode.clientWidth)}this.firstScroll++}this.headerNode.scrollLeft=this.scrollboxNode.scrollLeft;a=this.scrollboxNode.scrollTop;a!==
this.lastTop&&this.grid.scrollTo(a);this._nativeScroll=!1},setScrollTop:function(a){this.lastTop=a;this._nativeScroll||(this.scrollboxNode.scrollTop=a);return this.scrollboxNode.scrollTop},doContentEvent:function(a){if(this.content.decorateEvent(a))this.grid.onContentEvent(a)},doHeaderEvent:function(a){if(this.header.decorateEvent(a))this.grid.onHeaderEvent(a)},dispatchContentEvent:function(a){return this.content.dispatchEvent(a)},dispatchHeaderEvent:function(a){return this.header.dispatchEvent(a)},
setColWidth:function(a,b){this.grid.setCellWidth(a,b+"px")},update:function(){if(this.domNode){this.content.update();this.grid.update();var a=this.scrollboxNode.scrollLeft;this.scrollboxNode.scrollLeft=a;this.headerNode.scrollLeft=a}}});var F=l("dojox.grid._GridAvatar",M,{construct:function(){var b=a.doc,c=b.createElement("table");c.cellPadding=c.cellSpacing="0";c.className="dojoxGridDndAvatar";c.style.position="absolute";c.style.zIndex=1999;c.style.margin="0px";var e=b.createElement("tbody"),d=b.createElement("tr"),
f=b.createElement("td"),k=b.createElement("td");d.className="dojoxGridDndAvatarItem";k.className="dojoxGridDndAvatarItemImage";k.style.width="16px";var p=this.manager.source;if(p.creator)p=p._normalizedCreator(p.getItem(this.manager.nodes[0].id).data,"avatar").node;else{var p=this.manager.nodes[0].cloneNode(!0),n,B;"tr"==p.tagName.toLowerCase()?(n=b.createElement("table"),B=b.createElement("tbody"),B.appendChild(p),n.appendChild(B),p=n):"th"==p.tagName.toLowerCase()&&(n=b.createElement("table"),B=
b.createElement("tbody"),b=b.createElement("tr"),n.cellPadding=n.cellSpacing="0",b.appendChild(p),B.appendChild(b),n.appendChild(B),p=n)}p.id="";f.appendChild(p);d.appendChild(k);d.appendChild(f);r.style(d,"opacity",.9);e.appendChild(d);c.appendChild(e);this.node=c;c=H.manager();this.oldOffsetY=c.OFFSET_Y;c.OFFSET_Y=1},destroy:function(){H.manager().OFFSET_Y=this.oldOffsetY;this.inherited(arguments)}}),R=H.manager().makeAvatar;H.manager().makeAvatar=function(){return void 0===this.source.viewIndex||
r.hasClass(a.body(),"dijit_a11y")?R.call(H.manager()):new F(this)};return b})},"dojo/dnd/Source":function(){define("../_base/array ../_base/declare ../_base/kernel ../_base/lang ../dom-class ../dom-geometry ../mouse ../ready ../topic ./common ./Selector ./Manager".split(" "),function(u,v,m,l,d,h,g,f,c,a,b,e){m.isAsync||f(0,function(){require(["dojo/dnd/AutoSource","dojo/dnd/Target"])});var t=v("dojo.dnd.Source",b,{isSource:!0,horizontal:!1,copyOnly:!1,selfCopy:!1,selfAccept:!0,skipForm:!1,withHandles:!1,
autoSync:!1,delay:0,accept:["text"],generateText:!0,constructor:function(a,b){l.mixin(this,l.mixin({},b));a=this.accept;if(a.length)for(this.accept={},b=0;b<a.length;++b)this.accept[a[b]]=1;this.mouseDown=this.isDragging=!1;this.targetBox=this.targetAnchor=null;this.before=!0;this._lastY=this._lastX=0;this.sourceState="";this.isSource&&d.add(this.node,"dojoDndSource");this.targetState="";this.accept&&d.add(this.node,"dojoDndTarget");this.horizontal&&d.add(this.node,"dojoDndHorizontal");this.topics=
[c.subscribe("/dnd/source/over",l.hitch(this,"onDndSourceOver")),c.subscribe("/dnd/start",l.hitch(this,"onDndStart")),c.subscribe("/dnd/drop",l.hitch(this,"onDndDrop")),c.subscribe("/dnd/cancel",l.hitch(this,"onDndCancel"))]},checkAcceptance:function(a,b){if(this==a)return!this.copyOnly||this.selfAccept;for(var c=0;c<b.length;++c){for(var e=a.getItem(b[c].id).type,d=!1,f=0;f<e.length;++f)if(e[f]in this.accept){d=!0;break}if(!d)return!1}return!0},copyState:function(a,b){if(a)return!0;2>arguments.length&&
(b=this==e.manager().target);if(b){if(this.copyOnly)return this.selfCopy}else return this.copyOnly;return!1},destroy:function(){t.superclass.destroy.call(this);u.forEach(this.topics,function(a){a.remove()});this.targetAnchor=null},onMouseMove:function(b){if(!this.isDragging||"Disabled"!=this.targetState){t.superclass.onMouseMove.call(this,b);var c=e.manager();if(!this.isDragging&&this.mouseDown&&this.isSource&&(Math.abs(b.pageX-this._lastX)>this.delay||Math.abs(b.pageY-this._lastY)>this.delay)){var d=
this.getSelectedNodes();d.length&&c.startDrag(this,d,this.copyState(a.getCopyKeyState(b),!0))}this.isDragging&&(d=!1,this.current&&(this.targetBox&&this.targetAnchor==this.current||(this.targetBox=h.position(this.current,!0)),d=this.horizontal?b.pageX-this.targetBox.x<this.targetBox.w/2==h.isBodyLtr(this.current.ownerDocument):b.pageY-this.targetBox.y<this.targetBox.h/2),this.current!=this.targetAnchor||d!=this.before)&&(this._markTargetAnchor(d),c.canDrop(!this.current||c.source!=this||!(this.current.id in
this.selection)))}},onMouseDown:function(b){this.mouseDown||!this._legalMouseDown(b)||this.skipForm&&a.isFormElement(b)||(this.mouseDown=!0,this._lastX=b.pageX,this._lastY=b.pageY,t.superclass.onMouseDown.call(this,b))},onMouseUp:function(a){this.mouseDown&&(this.mouseDown=!1,t.superclass.onMouseUp.call(this,a))},onDndSourceOver:function(a){this!==a?(this.mouseDown=!1,this.targetAnchor&&this._unmarkTargetAnchor()):this.isDragging&&(a=e.manager(),a.canDrop("Disabled"!=this.targetState&&(!this.current||
a.source!=this||!(this.current.id in this.selection))))},onDndStart:function(a,b,c){this.autoSync&&this.sync();this.isSource&&this._changeState("Source",this==a?c?"Copied":"Moved":"");b=this.accept&&this.checkAcceptance(a,b);this._changeState("Target",b?"":"Disabled");this==a&&e.manager().overSource(this);this.isDragging=!0},onDndDrop:function(a,b,c,e){if(this==e)this.onDrop(a,b,c);this.onDndCancel()},onDndCancel:function(){this.targetAnchor&&(this._unmarkTargetAnchor(),this.targetAnchor=null);this.before=
!0;this.mouseDown=this.isDragging=!1;this._changeState("Source","");this._changeState("Target","")},onDrop:function(a,b,c){if(this!=a)this.onDropExternal(a,b,c);else this.onDropInternal(b,c)},onDropExternal:function(b,c,e){var d=this._normalizedCreator;this._normalizedCreator=this.creator?function(a,c){return d.call(this,b.getItem(a.id).data,c)}:e?function(c){var e=b.getItem(c.id);c=c.cloneNode(!0);c.id=a.getUniqueId();return{node:c,data:e.data,type:e.type}}:function(a){var c=b.getItem(a.id);b.delItem(a.id);
return{node:a,data:c.data,type:c.type}};this.selectNone();e||this.creator||b.selectNone();this.insertNodes(!0,c,this.before,this.current);!e&&this.creator&&b.deleteSelectedNodes();this._normalizedCreator=d},onDropInternal:function(b,c){var e=this._normalizedCreator;if(!(this.current&&this.current.id in this.selection)){if(c)this._normalizedCreator=this.creator?function(a,b){return e.call(this,this.getItem(a.id).data,b)}:function(b){var c=this.getItem(b.id);b=b.cloneNode(!0);b.id=a.getUniqueId();return{node:b,
data:c.data,type:c.type}};else{if(!this.current)return;this._normalizedCreator=function(a){var b=this.getItem(a.id);return{node:a,data:b.data,type:b.type}}}this._removeSelection();this.insertNodes(!0,b,this.before,this.current);this._normalizedCreator=e}},onDraggingOver:function(){},onDraggingOut:function(){},onOverEvent:function(){t.superclass.onOverEvent.call(this);e.manager().overSource(this);if(this.isDragging&&"Disabled"!=this.targetState)this.onDraggingOver()},onOutEvent:function(){t.superclass.onOutEvent.call(this);
e.manager().outSource(this);if(this.isDragging&&"Disabled"!=this.targetState)this.onDraggingOut()},_markTargetAnchor:function(a){if(this.current!=this.targetAnchor||this.before!=a)this.targetAnchor&&this._removeItemClass(this.targetAnchor,this.before?"Before":"After"),this.targetAnchor=this.current,this.targetBox=null,this.before=a,this.targetAnchor&&this._addItemClass(this.targetAnchor,this.before?"Before":"After")},_unmarkTargetAnchor:function(){this.targetAnchor&&(this._removeItemClass(this.targetAnchor,
this.before?"Before":"After"),this.targetBox=this.targetAnchor=null,this.before=!0)},_markDndStatus:function(a){this._changeState("Source",a?"Copied":"Moved")},_legalMouseDown:function(a){if("touchstart"!=a.type&&!g.isLeft(a))return!1;if(!this.withHandles)return!0;for(a=a.target;a&&a!==this.node;a=a.parentNode){if(d.contains(a,"dojoDndHandle"))return!0;if(d.contains(a,"dojoDndItem")||d.contains(a,"dojoDndIgnore"))break}return!1}});return t})},"dojo/dnd/Selector":function(){define("../_base/array ../_base/declare ../_base/kernel ../_base/lang ../dom ../dom-construct ../mouse ../_base/NodeList ../on ../touch ./common ./Container".split(" "),
function(u,v,m,l,d,h,g,f,c,a,b,e){var t=v("dojo.dnd.Selector",e,{constructor:function(b,e){e||(e={});this.singular=e.singular;this.autoSync=e.autoSync;this.selection={};this.anchor=null;this.simpleSelection=!1;this.events.push(c(this.node,a.press,l.hitch(this,"onMouseDown")),c(this.node,a.release,l.hitch(this,"onMouseUp")))},singular:!1,getSelectedNodes:function(){var a=new f,c=b._empty,e;for(e in this.selection)e in c||a.push(d.byId(e));return a},selectNone:function(){return this._removeSelection()._removeAnchor()},
selectAll:function(){this.forInItems(function(a,b){this._addItemClass(d.byId(b),"Selected");this.selection[b]=1},this);return this._removeAnchor()},deleteSelectedNodes:function(){var a=b._empty,c;for(c in this.selection)if(!(c in a)){var e=d.byId(c);this.delItem(c);h.destroy(e)}this.anchor=null;this.selection={};return this},forInSelectedItems:function(a,c){c=c||m.global;var e=this.selection,d=b._empty,f;for(f in e)f in d||a.call(c,this.getItem(f),f,this)},sync:function(){t.superclass.sync.call(this);
this.anchor&&!this.getItem(this.anchor.id)&&(this.anchor=null);var a=[],c=b._empty,e;for(e in this.selection)e in c||this.getItem(e)||a.push(e);u.forEach(a,function(a){delete this.selection[a]},this);return this},insertNodes:function(a,b,c,e){var d=this._normalizedCreator;this._normalizedCreator=function(b,c){b=d.call(this,b,c);a?(this.anchor?this.anchor!=b.node&&(this._removeItemClass(b.node,"Anchor"),this._addItemClass(b.node,"Selected")):(this.anchor=b.node,this._removeItemClass(b.node,"Selected"),
this._addItemClass(this.anchor,"Anchor")),this.selection[b.node.id]=1):(this._removeItemClass(b.node,"Selected"),this._removeItemClass(b.node,"Anchor"));return b};t.superclass.insertNodes.call(this,b,c,e);this._normalizedCreator=d;return this},destroy:function(){t.superclass.destroy.call(this);this.selection=this.anchor=null},onMouseDown:function(a){this.autoSync&&this.sync();if(this.current)if(!this.singular&&!b.getCopyKeyState(a)&&!a.shiftKey&&this.current.id in this.selection)this.simpleSelection=
!0,g.isLeft(a)&&(a.stopPropagation(),a.preventDefault());else{if(!this.singular&&a.shiftKey){b.getCopyKeyState(a)||this._removeSelection();var c=this.getAllNodes();if(c.length&&(this.anchor||(this.anchor=c[0],this._addItemClass(this.anchor,"Anchor")),this.selection[this.anchor.id]=1,this.anchor!=this.current)){for(var e=0,d;e<c.length&&(d=c[e],d!=this.anchor&&d!=this.current);++e);for(++e;e<c.length;++e){d=c[e];if(d==this.anchor||d==this.current)break;this._addItemClass(d,"Selected");this.selection[d.id]=
1}this._addItemClass(this.current,"Selected");this.selection[this.current.id]=1}}else this.singular?this.anchor==this.current?b.getCopyKeyState(a)&&this.selectNone():(this.selectNone(),this.anchor=this.current,this._addItemClass(this.anchor,"Anchor"),this.selection[this.current.id]=1):b.getCopyKeyState(a)?this.anchor==this.current?(delete this.selection[this.anchor.id],this._removeAnchor()):this.current.id in this.selection?(this._removeItemClass(this.current,"Selected"),delete this.selection[this.current.id]):
(this.anchor&&(this._removeItemClass(this.anchor,"Anchor"),this._addItemClass(this.anchor,"Selected")),this.anchor=this.current,this._addItemClass(this.current,"Anchor"),this.selection[this.current.id]=1):this.current.id in this.selection||(this.selectNone(),this.anchor=this.current,this._addItemClass(this.current,"Anchor"),this.selection[this.current.id]=1);a.stopPropagation();a.preventDefault()}},onMouseUp:function(){this.simpleSelection&&(this.simpleSelection=!1,this.selectNone(),this.current&&
(this.anchor=this.current,this._addItemClass(this.anchor,"Anchor"),this.selection[this.current.id]=1))},onMouseMove:function(){this.simpleSelection=!1},onOverEvent:function(){this.onmousemoveEvent=c(this.node,a.move,l.hitch(this,"onMouseMove"))},onOutEvent:function(){this.onmousemoveEvent&&(this.onmousemoveEvent.remove(),delete this.onmousemoveEvent)},_removeSelection:function(){var a=b._empty,c;for(c in this.selection)if(!(c in a)){var e=d.byId(c);e&&this._removeItemClass(e,"Selected")}this.selection=
{};return this},_removeAnchor:function(){this.anchor&&(this._removeItemClass(this.anchor,"Anchor"),this.anchor=null);return this}});return t})},"dojo/dnd/Container":function(){define("../_base/array ../_base/declare ../_base/kernel ../_base/lang ../_base/window ../dom ../dom-class ../dom-construct ../Evented ../has ../on ../query ../touch ./common".split(" "),function(u,v,m,l,d,h,g,f,c,a,b,e,t,n){v=v("dojo.dnd.Container",c,{skipForm:!1,allowNested:!1,constructor:function(a,c){this.node=h.byId(a);
c||(c={});this.creator=c.creator||null;this.skipForm=c.skipForm;this.parent=c.dropParent&&h.byId(c.dropParent);this.map={};this.current=null;this.containerState="";g.add(this.node,"dojoDndContainer");c&&c._skipStartup||this.startup();this.events=[b(this.node,t.over,l.hitch(this,"onMouseOver")),b(this.node,t.out,l.hitch(this,"onMouseOut")),b(this.node,"dragstart",l.hitch(this,"onSelectStart")),b(this.node,"selectstart",l.hitch(this,"onSelectStart"))]},creator:function(){},getItem:function(a){return this.map[a]},
setItem:function(a,b){this.map[a]=b},delItem:function(a){delete this.map[a]},forInItems:function(a,b){b=b||m.global;var c=this.map,e=n._empty,d;for(d in c)d in e||a.call(b,c[d],d,this);return b},clearItems:function(){this.map={}},getAllNodes:function(){return e((this.allowNested?"":"\x3e ")+".dojoDndItem",this.parent)},sync:function(){var a={};this.getAllNodes().forEach(function(b){if(b.id){var c=this.getItem(b.id);if(c){a[b.id]=c;return}}else b.id=n.getUniqueId();var c=b.getAttribute("dndType"),
e=b.getAttribute("dndData");a[b.id]={data:e||b.innerHTML,type:c?c.split(/\s*,\s*/):["text"]}},this);this.map=a;return this},insertNodes:function(a,b,c){this.parent.firstChild?b?c||(c=this.parent.firstChild):c&&(c=c.nextSibling):c=null;var e;if(c)for(b=0;b<a.length;++b)e=this._normalizedCreator(a[b]),this.setItem(e.node.id,{data:e.data,type:e.type}),c.parentNode.insertBefore(e.node,c);else for(b=0;b<a.length;++b)e=this._normalizedCreator(a[b]),this.setItem(e.node.id,{data:e.data,type:e.type}),this.parent.appendChild(e.node);
return this},destroy:function(){u.forEach(this.events,function(a){a.remove()});this.clearItems();this.node=this.parent=this.current=null},markupFactory:function(a,b,c){a._skipStartup=!0;return new c(b,a)},startup:function(){if(!this.parent&&(this.parent=this.node,"table"==this.parent.tagName.toLowerCase())){var a=this.parent.getElementsByTagName("tbody");a&&a.length&&(this.parent=a[0])}this.defaultCreator=n._defaultCreator(this.parent);this.sync()},onMouseOver:function(a){for(var b=a.relatedTarget;b&&
b!=this.node;)try{b=b.parentNode}catch(r){b=null}b||(this._changeState("Container","Over"),this.onOverEvent());b=this._getChildByEvent(a);this.current!=b&&(this.current&&this._removeItemClass(this.current,"Over"),b&&this._addItemClass(b,"Over"),this.current=b)},onMouseOut:function(a){for(a=a.relatedTarget;a;){if(a==this.node)return;try{a=a.parentNode}catch(k){a=null}}this.current&&(this._removeItemClass(this.current,"Over"),this.current=null);this._changeState("Container","");this.onOutEvent()},onSelectStart:function(a){this.withHandles||
this.skipForm&&n.isFormElement(a)||(a.stopPropagation(),a.preventDefault())},onOverEvent:function(){},onOutEvent:function(){},_changeState:function(a,b){var c="dojoDnd"+a;a=a.toLowerCase()+"State";g.replace(this.node,c+b,c+this[a]);this[a]=b},_addItemClass:function(a,b){g.add(a,"dojoDndItem"+b)},_removeItemClass:function(a,b){g.remove(a,"dojoDndItem"+b)},_getChildByEvent:function(a){if(a=a.target)for(var b=a.parentNode;b;a=b,b=a.parentNode)if((b==this.parent||this.allowNested)&&g.contains(a,"dojoDndItem"))return a;
return null},_normalizedCreator:function(a,b){a=(this.creator||this.defaultCreator).call(this,a,b);l.isArray(a.type)||(a.type=["text"]);a.node.id||(a.node.id=n.getUniqueId());g.add(a.node,"dojoDndItem");return a}});n._createNode=function(a){return a?function(b){return f.create(a,{innerHTML:b})}:n._createSpan};n._createTrTd=function(a){var b=f.create("tr");f.create("td",{innerHTML:a},b);return b};n._createSpan=function(a){return f.create("span",{innerHTML:a})};n._defaultCreatorNodes={ul:"li",ol:"li",
div:"div",p:"div"};n._defaultCreator=function(a){a=a.tagName.toLowerCase();var b="tbody"==a||"thead"==a?n._createTrTd:n._createNode(n._defaultCreatorNodes[a]);return function(a,c){var e=a&&l.isObject(a),d;e&&a.tagName&&a.nodeType&&a.getAttribute?(d=a.getAttribute("dndData")||a.innerHTML,e=(e=a.getAttribute("dndType"))?e.split(/\s*,\s*/):["text"]):(d=e&&a.data?a.data:a,e=e&&a.type?a.type:["text"],a=("avatar"==c?n._createSpan:b)(String(d)));a.id||(a.id=n.getUniqueId());return{node:a,data:d,type:e}}};
return v})},"dojo/dnd/Manager":function(){define("../_base/array ../_base/declare ../_base/lang ../_base/window ../dom-class ../Evented ../has ../keys ../on ../topic ../touch ./common ./autoscroll ./Avatar".split(" "),function(u,v,m,l,d,h,g,f,c,a,b,e,t,n){var p=v("dojo.dnd.Manager",[h],{constructor:function(){this.source=this.avatar=null;this.nodes=[];this.copy=!0;this.target=null;this.canDropFlag=!1;this.events=[]},OFFSET_X:g("touch")?4:16,OFFSET_Y:g("touch")?4:16,overSource:function(b){this.avatar&&
(this.target=b&&"Disabled"!=b.targetState?b:null,this.canDropFlag=!!this.target,this.avatar.update());a.publish("/dnd/source/over",b)},outSource:function(b){this.avatar?this.target==b&&(this.target=null,this.canDropFlag=!1,this.avatar.update(),a.publish("/dnd/source/over",null)):a.publish("/dnd/source/over",null)},startDrag:function(e,f,n){function k(a){a.preventDefault();a.stopPropagation()}t.autoScrollStart(l.doc);this.source=e;this.nodes=f;this.copy=!!n;this.avatar=this.makeAvatar();l.body().appendChild(this.avatar.node);
a.publish("/dnd/start",e,f,this.copy);this.events=[c(l.doc,b.move,m.hitch(this,"onMouseMove")),c(l.doc,b.release,m.hitch(this,"onMouseUp")),c(l.doc,"keydown",m.hitch(this,"onKeyDown")),c(l.doc,"keyup",m.hitch(this,"onKeyUp")),c(l.doc,"dragstart",k),c(l.body(),"selectstart",k)];e="dojoDnd"+(n?"Copy":"Move");d.add(l.body(),e)},canDrop:function(a){a=!(!this.target||!a);this.canDropFlag!=a&&(this.canDropFlag=a,this.avatar.update())},stopDrag:function(){d.remove(l.body(),["dojoDndCopy","dojoDndMove"]);
u.forEach(this.events,function(a){a.remove()});this.events=[];this.avatar.destroy();this.source=this.target=this.avatar=null;this.nodes=[]},makeAvatar:function(){return new n(this)},updateAvatar:function(){this.avatar.update()},onMouseMove:function(a){var b=this.avatar;b&&(t.autoScrollNodes(a),b=b.node.style,b.left=a.pageX+this.OFFSET_X+"px",b.top=a.pageY+this.OFFSET_Y+"px",b=!!this.source.copyState(e.getCopyKeyState(a)),this.copy!=b&&this._setCopyStatus(b));g("touch")&&a.preventDefault()},onMouseUp:function(b){if(this.avatar){if(this.target&&
this.canDropFlag){var c=!!this.source.copyState(e.getCopyKeyState(b));a.publish("/dnd/drop/before",this.source,this.nodes,c,this.target,b);a.publish("/dnd/drop",this.source,this.nodes,c,this.target,b)}else a.publish("/dnd/cancel");this.stopDrag()}},onKeyDown:function(b){if(this.avatar)switch(b.keyCode){case f.CTRL:b=!!this.source.copyState(!0);this.copy!=b&&this._setCopyStatus(b);break;case f.ESCAPE:a.publish("/dnd/cancel"),this.stopDrag()}},onKeyUp:function(a){this.avatar&&a.keyCode==f.CTRL&&(a=
!!this.source.copyState(!1),this.copy!=a&&this._setCopyStatus(a))},_setCopyStatus:function(a){this.copy=a;this.source._markDndStatus(this.copy);this.updateAvatar();d.replace(l.body(),"dojoDnd"+(this.copy?"Copy":"Move"),"dojoDnd"+(this.copy?"Move":"Copy"))}});e._manager=null;p.manager=e.manager=function(){e._manager||(e._manager=new p);return e._manager};return p})},"dojo/dnd/Avatar":function(){define("../_base/declare ../_base/window ../dom ../dom-attr ../dom-class ../dom-construct ../hccss ../query".split(" "),
function(u,v,m,l,d,h,g,f){return u("dojo.dnd.Avatar",null,{constructor:function(c){this.manager=c;this.construct()},construct:function(){var c=h.create("table",{"class":"dojoDndAvatar",style:{position:"absolute",zIndex:"1999",margin:"0px"}}),a=this.manager.source,b,e=h.create("tbody",null,c),d=h.create("tr",null,e),f=h.create("td",null,d),p=Math.min(5,this.manager.nodes.length),k=0;g("highcontrast")&&h.create("span",{id:"a11yIcon",innerHTML:this.manager.copy?"+":"\x3c"},f);h.create("span",{innerHTML:a.generateText?
this._generateText():""},f);for(l.set(d,{"class":"dojoDndAvatarHeader",style:{opacity:.9}});k<p;++k)a.creator?b=a._normalizedCreator(a.getItem(this.manager.nodes[k].id).data,"avatar").node:(b=this.manager.nodes[k].cloneNode(!0),"tr"==b.tagName.toLowerCase()&&(d=h.create("table"),h.create("tbody",null,d).appendChild(b),b=d)),b.id="",d=h.create("tr",null,e),f=h.create("td",null,d),f.appendChild(b),l.set(d,{"class":"dojoDndAvatarItem",style:{opacity:(9-k)/10}});this.node=c},destroy:function(){h.destroy(this.node);
this.node=!1},update:function(){d.toggle(this.node,"dojoDndAvatarCanDrop",this.manager.canDropFlag);if(g("highcontrast")){var c=m.byId("a11yIcon"),a="+";this.manager.canDropFlag&&!this.manager.copy?a="\x3c ":this.manager.canDropFlag||this.manager.copy?this.manager.canDropFlag||(a="x"):a="o";c.innerHTML=a}f("tr.dojoDndAvatarHeader td span"+(g("highcontrast")?" span":""),this.node).forEach(function(a){a.innerHTML=this.manager.source.generateText?this._generateText():""},this)},_generateText:function(){return this.manager.nodes.length.toString()}})})},
"dojox/html/metrics":function(){define("dojo/_base/kernel dojo/_base/lang dojo/_base/sniff dojo/ready dojo/_base/unload dojo/_base/window dojo/dom-geometry".split(" "),function(u,v,m,l,d,h,g){var f=v.getObject("dojox.html.metrics",!0),c=v.getObject("dojox");f.getFontMeasurements=function(){var a={"1em":0,"1ex":0,"100%":0,"12pt":0,"16px":0,"xx-small":0,"x-small":0,small:0,medium:0,large:0,"x-large":0,"xx-large":0},b;m("ie")&&(b=h.doc.documentElement.style.fontSize||"",b||(h.doc.documentElement.style.fontSize=
"100%"));var c=h.doc.createElement("div"),e=c.style;e.position="absolute";e.left="-100px";e.top="0";e.width="30px";e.height="1000em";e.borderWidth="0";e.margin="0";e.padding="0";e.outline="0";e.lineHeight="1";e.overflow="hidden";h.body().appendChild(c);for(var d in a)e.fontSize=d,a[d]=16*Math.round(12*c.offsetHeight/16)/12/1E3;m("ie")&&(h.doc.documentElement.style.fontSize=b);h.body().removeChild(c);c=null;return a};var a=null;f.getCachedFontMeasurements=function(b){if(b||!a)a=f.getFontMeasurements();
return a};var b=null,e={};f.getTextBox=function(a,c,d){var f,k;if(b)f=b;else{f=b=h.doc.createElement("div");f.style.whiteSpace="nowrap";var r=h.doc.createElement("div");r.appendChild(f);k=r.style;k.overflow="scroll";k.position="absolute";k.left="0px";k.top="-10000px";k.width="1px";k.height="1px";k.visibility="hidden";k.borderWidth="0";k.margin="0";k.padding="0";k.outline="0";h.body().appendChild(r)}f.className="";k=f.style;k.borderWidth="0";k.margin="0";k.padding="0";k.outline="0";if(1<arguments.length&&
c)for(var n in c)n in e||(k[n]=c[n]);2<arguments.length&&d&&(f.className=d);f.innerHTML=a;k=g.position(f);k.w=f.parentNode.scrollWidth;return k};var t=16,n=16;f.getScrollbar=function(){return{w:t,h:n}};f._fontResizeNode=null;f.initOnFontResize=function(a){var b=f._fontResizeNode=h.doc.createElement("iframe");a=b.style;a.position="absolute";a.width="5em";a.height="10em";a.top="-10000px";a.display="none";m("ie")?b.onreadystatechange=function(){"complete"==b.contentWindow.document.readyState&&(b.onresize=
b.contentWindow.parent[c._scopeName].html.metrics._fontresize)}:b.onload=function(){b.contentWindow.onresize=b.contentWindow.parent[c._scopeName].html.metrics._fontresize};b.setAttribute("src","javascript:'\x3chtml\x3e\x3chead\x3e\x3cscript\x3eif(\"loadFirebugConsole\" in window){window.loadFirebugConsole();}\x3c/script\x3e\x3c/head\x3e\x3cbody\x3e\x3c/body\x3e\x3c/html\x3e'");h.body().appendChild(b);f.initOnFontResize=function(){}};f.onFontResize=function(){};f._fontresize=function(){f.onFontResize()};
d.addOnUnload(function(){var a=f._fontResizeNode;a&&(m("ie")&&a.onresize?a.onresize=null:a.contentWindow&&a.contentWindow.onresize&&(a.contentWindow.onresize=null),f._fontResizeNode=null)});l(function(){try{var a=h.doc.createElement("div");a.style.cssText="top:0;left:0;width:100px;height:100px;overflow:scroll;position:absolute;visibility:hidden;";h.body().appendChild(a);t=a.offsetWidth-a.clientWidth;n=a.offsetHeight-a.clientHeight;h.body().removeChild(a);delete a}catch(k){}"fontSizeWatch"in u.config&&
u.config.fontSizeWatch&&f.initOnFontResize()});return f})},"dojox/grid/_Builder":function(){define("../main dojo/_base/array dojo/_base/lang dojo/_base/window dojo/_base/event dojo/_base/sniff dojo/_base/connect dojo/dnd/Moveable dojox/html/metrics ./util dojo/_base/html dojo/dom-geometry".split(" "),function(u,v,m,l,d,h,g,f,c,a,b,e){var t=u.grid,n=function(a){return 0<=a.rowIndex?a.rowIndex:v.indexOf(a.parentNode.childNodes,a)},p=function(a,b){return a&&((a.rows||0)[b]||a.childNodes[b])},k=function(a){for(;a&&
"TABLE"!=a.tagName;a=a.parentNode);return a},r=function(a){var b=a.toUpperCase();return function(a){return a.tagName!=b}},q=a.rowIndexTag,M=a.gridViewTag,H=t._Builder=m.extend(function(a){a&&(this.view=a,this.grid=a.grid)},{view:null,_table:'\x3ctable class\x3d"dojoxGridRowTable" border\x3d"0" cellspacing\x3d"0" cellpadding\x3d"0" role\x3d"presentation"',getTableArray:function(){var a=[this._table];this.view.viewWidth&&a.push([' style\x3d"width:',this.view.viewWidth,';"'].join(""));a.push("\x3e");
return a},generateCellMarkup:function(a,b,c,e){var d=[],f;e?(f=a.index!=a.grid.getSortIndex()?"":0<a.grid.sortInfo?'aria-sort\x3d"ascending"':'aria-sort\x3d"descending"',a.id||(a.id=this.grid.id+"Hdr"+a.index),f=['\x3cth tabIndex\x3d"-1" aria-readonly\x3d"true" role\x3d"columnheader"',f,' id\x3d"',a.id,'"']):f=['\x3ctd tabIndex\x3d"-1" role\x3d"gridcell"',this.grid.editable&&!a.editable?'aria-readonly\x3d"true"':""];a.colSpan&&f.push(' colspan\x3d"',a.colSpan,'"');a.rowSpan&&f.push(' rowspan\x3d"',
a.rowSpan,'"');f.push(' class\x3d"dojoxGridCell ');a.classes&&f.push(a.classes," ");c&&f.push(c," ");d.push(f.join(""));d.push("");f=['" idx\x3d"',a.index,'" style\x3d"'];b&&";"!=b[b.length-1]&&(b+=";");f.push(a.styles,b||"",a.hidden?"display:none;":"");a.unitWidth&&f.push("width:",a.unitWidth,";");d.push(f.join(""));d.push("");f=['"'];a.attrs&&f.push(" ",a.attrs);f.push("\x3e");d.push(f.join(""));d.push("");d.push(e?"\x3c/th\x3e":"\x3c/td\x3e");return d},isCellNode:function(a){return!(!a||a==l.doc||
!b.attr(a,"idx"))},getCellNodeIndex:function(a){return a?Number(b.attr(a,"idx")):-1},getCellNode:function(a,b){for(var c=0,e;(e=p(a.firstChild,c))&&e.cells;c++)for(var d=0,f;f=e.cells[d];d++)if(this.getCellNodeIndex(f)==b)return f;return null},findCellTarget:function(a,b){for(;a&&(!this.isCellNode(a)||a.offsetParent&&M in a.offsetParent.parentNode&&a.offsetParent.parentNode[M]!=this.view.id)&&a!=b;)a=a.parentNode;return a!=b?a:null},baseDecorateEvent:function(a){a.dispatch="do"+a.type;a.grid=this.grid;
a.sourceView=this.view;a.cellNode=this.findCellTarget(a.target,a.rowNode);a.cellIndex=this.getCellNodeIndex(a.cellNode);a.cell=0<=a.cellIndex?this.grid.getCell(a.cellIndex):null},findTarget:function(a,b){for(;a&&a!=this.domNode&&(!(b in a)||M in a&&a[M]!=this.view.id);)a=a.parentNode;return a!=this.domNode?a:null},findRowTarget:function(a){return this.findTarget(a,q)},isIntraNodeEvent:function(a){try{return a.cellNode&&a.relatedTarget&&b.isDescendant(a.relatedTarget,a.cellNode)}catch(C){return!1}},
isIntraRowEvent:function(a){try{var b=a.relatedTarget&&this.findRowTarget(a.relatedTarget);return!b&&-1==a.rowIndex||b&&a.rowIndex==b.gridRowIndex}catch(D){return!1}},dispatchEvent:function(a){return a.dispatch in this?this[a.dispatch](a):!1},domouseover:function(a){a.cellNode&&a.cellNode!=this.lastOverCellNode&&(this.lastOverCellNode=a.cellNode,this.grid.onMouseOver(a));this.grid.onMouseOverRow(a)},domouseout:function(a){if(a.cellNode&&a.cellNode==this.lastOverCellNode&&!this.isIntraNodeEvent(a,
this.lastOverCellNode)&&(this.lastOverCellNode=null,this.grid.onMouseOut(a),!this.isIntraRowEvent(a)))this.grid.onMouseOutRow(a)},domousedown:function(a){if(a.cellNode)this.grid.onMouseDown(a);this.grid.onMouseDownRow(a)},_getTextDirStyle:function(a,b,c){return""}});u=t._ContentBuilder=m.extend(function(a){H.call(this,a)},H.prototype,{update:function(){this.prepareHtml()},prepareHtml:function(){for(var a=this.grid.get,b=this.view.structure.cells,c=0,e;e=b[c];c++)for(var d=0,f;f=e[d];d++)f.get=f.get||
void 0==f.value&&a,f.markup=this.generateCellMarkup(f,f.cellStyles,f.cellClasses,!1),!this.grid.editable&&f.editable&&(this.grid.editable=!0)},generateHtml:function(b,c){b=this.getTableArray();var e=this.view.structure.cells,d=this.grid.getItem(c),f;a.fire(this.view,"onBeforeRow",[c,e]);for(var k=0,r;r=e[k];k++)if(!r.hidden&&!r.header){b.push(r.invisible?'\x3ctr class\x3d"dojoxGridInvisible"\x3e':"\x3ctr\x3e");for(var n=0,g,B,h;g=r[n];n++)B=g.markup,f=g.customClasses=[],h=g.customStyles=[],B[5]=g.format(c,
d),B[1]=f.join(" "),B[3]=h.join(";"),(f=g.textDir||this.grid.textDir)&&(B[3]+=this._getTextDirStyle(f,g,c)),b.push.apply(b,B);b.push("\x3c/tr\x3e")}b.push("\x3c/table\x3e");return b.join("")},decorateEvent:function(a){a.rowNode=this.findRowTarget(a.target);if(!a.rowNode)return!1;a.rowIndex=a.rowNode[q];this.baseDecorateEvent(a);a.cell=this.grid.getCell(a.cellIndex);return!0}});var F=t._HeaderBuilder=m.extend(function(a){this.moveable=null;H.call(this,a)},H.prototype,{_skipBogusClicks:!1,overResizeWidth:4,
minColWidth:1,update:function(){this.tableMap?this.tableMap.mapRows(this.view.structure.cells):this.tableMap=new t._TableMap(this.view.structure.cells)},generateHtml:function(b,c){var e,d=this.getTableArray(),f=this.view.structure.cells;a.fire(this.view,"onBeforeRow",[-1,f]);for(var k=0,r;r=f[k];k++)if(!r.hidden){d.push(r.invisible?'\x3ctr class\x3d"dojoxGridInvisible"\x3e':"\x3ctr\x3e");for(var n=0,g,B;g=r[n];n++)g.customClasses=[],g.customStyles=[],this.view.simpleStructure&&(g.draggable&&(g.headerClasses?
-1==g.headerClasses.indexOf("dojoDndItem")&&(g.headerClasses+=" dojoDndItem"):g.headerClasses="dojoDndItem"),g.attrs?-1==g.attrs.indexOf("dndType\x3d'gridColumn_")&&(g.attrs+=" dndType\x3d'gridColumn_"+this.grid.id+"'"):g.attrs="dndType\x3d'gridColumn_"+this.grid.id+"'"),B=this.generateCellMarkup(g,g.headerStyles,g.headerClasses,!0),B[5]=void 0!=c?c:b(g),B[3]=g.customStyles.join(";"),(e=g.textDir||this.grid.textDir)&&(B[3]+=this._getTextDirStyle(e,g,c)),B[1]=g.customClasses.join(" "),d.push(B.join(""));
d.push("\x3c/tr\x3e")}d.push("\x3c/table\x3e");return d.join("")},getCellX:function(a){var b;b=r("th");for(var c=a.target;c&&b(c);c=c.parentNode);(b=c)?(b=e.position(b),a=a.clientX-b.x):a=a.layerX;return a},decorateEvent:function(a){this.baseDecorateEvent(a);a.rowIndex=-1;a.cellX=this.getCellX(a);return!0},prepareResize:function(a,b){do{var c=a.cellIndex;a.cellNode=c?a.cellNode.parentNode.cells[c+b]:null;a.cellIndex=a.cellNode?this.getCellNodeIndex(a.cellNode):-1}while(a.cellNode&&"none"==a.cellNode.style.display);
return!!a.cellNode},canResize:function(a){if(!a.cellNode||1<a.cellNode.colSpan)return!1;a=this.grid.getCell(a.cellIndex);return!a.noresize&&a.canResize()},overLeftResizeArea:function(a){if(b.hasClass(l.body(),"dojoDndMove"))return!1;if(h("ie")){var c=a.target;if(b.hasClass(c,"dojoxGridArrowButtonNode")||b.hasClass(c,"dojoxGridArrowButtonChar")||b.hasClass(c,"dojoxGridColCaption"))return!1}return this.grid.isLeftToRight()?0<a.cellIndex&&0<a.cellX&&a.cellX<this.overResizeWidth&&this.prepareResize(a,
-1):a.cellNode&&0<a.cellX&&a.cellX<this.overResizeWidth},overRightResizeArea:function(a){if(b.hasClass(l.body(),"dojoDndMove"))return!1;if(h("ie")){var c=a.target;if(b.hasClass(c,"dojoxGridArrowButtonNode")||b.hasClass(c,"dojoxGridArrowButtonChar")||b.hasClass(c,"dojoxGridColCaption"))return!1}return this.grid.isLeftToRight()?a.cellNode&&a.cellX>=a.cellNode.offsetWidth-this.overResizeWidth:0<a.cellIndex&&a.cellX>=a.cellNode.offsetWidth-this.overResizeWidth&&this.prepareResize(a,-1)},domousemove:function(a){if(!this.moveable){var c=
this.overRightResizeArea(a)?"dojoxGridColResize":this.overLeftResizeArea(a)?"dojoxGridColResize":"";c&&!this.canResize(a)&&(c="dojoxGridColNoResize");b.toggleClass(a.sourceView.headerNode,"dojoxGridColNoResize","dojoxGridColNoResize"==c);b.toggleClass(a.sourceView.headerNode,"dojoxGridColResize","dojoxGridColResize"==c);c&&d.stop(a)}},domousedown:function(a){this.moveable||((this.overRightResizeArea(a)||this.overLeftResizeArea(a))&&this.canResize(a)?this.beginColumnResize(a):(this.grid.onMouseDown(a),
this.grid.onMouseOverRow(a)))},doclick:function(a){return this._skipBogusClicks?(d.stop(a),!0):!1},colResizeSetup:function(a,e){var d=b.contentBox(a.sourceView.headerNode);if(e){this.lineDiv=document.createElement("div");e=b.position(a.sourceView.headerNode,!0);var f=b.contentBox(a.sourceView.domNode),k=a.pageX;!this.grid.isLeftToRight()&&8>h("ie")&&(k-=c.getScrollbar().w);b.style(this.lineDiv,{top:e.y+"px",left:k+"px",height:f.h+d.h+"px"});b.addClass(this.lineDiv,"dojoxGridResizeColLine");this.lineDiv._origLeft=
k;l.body().appendChild(this.lineDiv)}e=[];for(var f=this.tableMap.findOverlappingNodes(a.cellNode),k=0,r;r=f[k];k++)e.push({node:r,index:this.getCellNodeIndex(r),width:r.offsetWidth});f=a.sourceView;r=this.grid.isLeftToRight()?1:-1;for(var n=a.grid.views.views,k=[],g=f.idx+r,p;p=n[g];g+=r)k.push({node:p.headerNode,left:window.parseInt(p.headerNode.style.left)});r=f.headerContentNode.firstChild;return{scrollLeft:a.sourceView.headerNode.scrollLeft,view:f,node:a.cellNode,index:a.cellIndex,w:b.contentBox(a.cellNode).w,
vw:d.w,table:r,tw:b.contentBox(r).w,spanners:e,followers:k}},beginColumnResize:function(a){this.moverDiv=document.createElement("div");b.style(this.moverDiv,{position:"absolute",left:0});l.body().appendChild(this.moverDiv);b.addClass(this.grid.domNode,"dojoxGridColumnResizing");var c=this.moveable=new f(this.moverDiv),e=this.colResizeSetup(a,!0);c.onMove=m.hitch(this,"doResizeColumn",e);g.connect(c,"onMoveStop",m.hitch(this,function(){this.endResizeColumn(e);e.node.releaseCapture&&e.node.releaseCapture();
this.moveable.destroy();delete this.moveable;this.moveable=null;b.removeClass(this.grid.domNode,"dojoxGridColumnResizing")}));a.cellNode.setCapture&&a.cellNode.setCapture();c.onMouseDown(a)},doResizeColumn:function(a,c,e){var d=e.l,d={deltaX:d,w:a.w+(this.grid.isLeftToRight()?d:-d),vw:a.vw+d,tw:a.tw+d};this.dragRecord={inDrag:a,mover:c,leftTop:e};d.w>=this.minColWidth&&(c?b.style(this.lineDiv,"left",this.lineDiv._origLeft+d.deltaX+"px"):this.doResizeNow(a,d))},endResizeColumn:function(a){if(this.dragRecord){var c=
this.dragRecord.leftTop,c=this.grid.isLeftToRight()?c.l:-c.l,c=c+(Math.max(a.w+c,this.minColWidth)-(a.w+c));h("webkit")&&a.spanners.length&&(c+=b._getPadBorderExtents(a.spanners[0].node).w);this.doResizeNow(a,{deltaX:c,w:a.w+c,vw:a.vw+c,tw:a.tw+c});delete this.dragRecord}b.destroy(this.lineDiv);b.destroy(this.moverDiv);b.destroy(this.moverDiv);delete this.moverDiv;this._skipBogusClicks=!0;a.view.update();this._skipBogusClicks=!1;this.grid.onResizeColumn(a.index)},doResizeNow:function(a,b){a.view.convertColPctToFixed();
if(a.view.flexCells&&!a.view.testFlexCells()){var c=k(a.node);c&&(c.style.width="")}for(var e,d,c=0;e=a.spanners[c];c++)d=e.width+b.deltaX,0<d&&(e.node.style.width=d+"px",a.view.setColWidth(e.index,d));if(this.grid.isLeftToRight()||!h("ie"))for(c=0;e=a.followers[c];c++)d=e.left+b.deltaX,e.node.style.left=d+"px";a.node.style.width=b.w+"px";a.view.setColWidth(a.index,b.w);a.view.headerNode.style.width=b.vw+"px";a.view.setColumnsWidth(b.tw);this.grid.isLeftToRight()||(a.view.headerNode.scrollLeft=a.scrollLeft+
b.deltaX)}});t._TableMap=m.extend(function(a){this.mapRows(a)},{map:null,mapRows:function(a){if(a.length){this.map=[];for(var b,c=0;b=a[c];c++)this.map[c]=[];for(c=0;b=a[c];c++)for(var e=0,d=0,f,k;f=b[e];e++){for(;this.map[c][d];)d++;this.map[c][d]={c:e,r:c};k=f.rowSpan||1;f=f.colSpan||1;for(var r=0;r<k;r++)for(var n=0;n<f;n++)this.map[c+r][d+n]=this.map[c][d];d+=f}}},dumpMap:function(){for(var a=0,b;b=this.map[a];a++)for(var c=0;b[c];c++);},getMapCoords:function(a,b){for(var c=0,e;e=this.map[c];c++)for(var d=
0,f;f=e[d];d++)if(f.c==b&&f.r==a)return{j:c,i:d};return{j:-1,i:-1}},getNode:function(a,b,c){return(a=a&&a.rows[b])&&a.cells[c]},_findOverlappingNodes:function(a,b,c){var e=[];b=this.getMapCoords(b,c);c=0;for(var d;d=this.map[c];c++)c!=b.j&&(d=(d=d[b.i])?this.getNode(a,d.r,d.c):null)&&e.push(d);return e},findOverlappingNodes:function(a){return this._findOverlappingNodes(k(a),n(a.parentNode),0<=a.cellIndex?a.cellIndex:v.indexOf(a.parentNode.cells,a))}});return{_Builder:H,_HeaderBuilder:F,_ContentBuilder:u}})},
"dojox/grid/_ViewManager":function(){define(["dojo/_base/declare","dojo/_base/sniff","dojo/dom-class"],function(u,v,m){return u("dojox.grid._ViewManager",null,{constructor:function(l){this.grid=l},defaultWidth:200,views:[],resize:function(){this.onEach("resize")},render:function(){this.onEach("render")},addView:function(l){l.idx=this.views.length;this.views.push(l)},destroyViews:function(){for(var l=0,d;d=this.views[l];l++)d.destroy();this.views=[]},getContentNodes:function(){for(var l=[],d=0,h;h=
this.views[d];d++)l.push(h.contentNode);return l},forEach:function(l){for(var d=0,h;h=this.views[d];d++)l(h,d)},onEach:function(l,d){d=d||[];for(var h=0,g;g=this.views[h];h++)l in g&&g[l].apply(g,d)},normalizeHeaderNodeHeight:function(){for(var l=[],d=0,h;h=this.views[d];d++)h.headerContentNode.firstChild&&l.push(h.headerContentNode);this.normalizeRowNodeHeights(l)},normalizeRowNodeHeights:function(l){var d=0,h=[];if(this.grid.rowHeight)d=this.grid.rowHeight;else{if(1>=l.length)return;for(var g=0,
f;f=l[g];g++)m.contains(f,"dojoxGridNonNormalizedCell")||(h[g]=f.firstChild.offsetHeight,d=Math.max(d,h[g]));d=0<=d?d:0;(v("mozilla")||8<v("ie"))&&d&&d++}for(g=0;f=l[g];g++)h[g]!=d&&(f.firstChild.style.height=d+"px")},resetHeaderNodeHeight:function(){for(var l=0,d;d=this.views[l];l++)if(d=d.headerContentNode.firstChild)d.style.height=""},renormalizeRow:function(l){for(var d=[],h=0,g,f;(g=this.views[h])&&(f=g.getRowNode(l));h++)f.firstChild.style.height="",d.push(f);this.normalizeRowNodeHeights(d)},
getViewWidth:function(l){return this.views[l].getWidth()||this.defaultWidth},measureHeader:function(){this.resetHeaderNodeHeight();this.forEach(function(d){d.headerContentNode.style.height=""});var l=0;this.forEach(function(d){l=Math.max(d.headerNode.offsetHeight,l)});return l},measureContent:function(){var l=0;this.forEach(function(d){l=Math.max(d.domNode.offsetHeight,l)});return l},findClient:function(l){l=this.grid.elasticView||-1;if(0>l)for(var d=1,h;h=this.views[d];d++)if(h.viewWidth){for(d=
1;h=this.views[d];d++)if(!h.viewWidth){l=d;break}break}0>l&&(l=Math.floor(this.views.length/2));return l},arrange:function(l,d){var h,g,f,c=this.views.length,a=this,b=0>=d?c:this.findClient(),e=function(b,c){var e=b.domNode.style,d=b.headerNode.style;a.grid.isLeftToRight()?(e.left=c+"px",d.left=c+"px"):(e.right=c+"px",4>v("ff")?d.right=c+b.getScrollbarWidth()+"px":d.right=c+"px",v("webkit")||"auto"==d.width||(d.width=parseInt(d.width,10)-b.getScrollbarWidth()+"px"));e.top="0px";d.top=0};for(h=0;(g=
this.views[h])&&h<b;h++)f=this.getViewWidth(h),g.setSize(f,0),e(g,l),f=g.headerContentNode&&g.headerContentNode.firstChild?g.getColumnsWidth()+g.getScrollbarWidth():g.domNode.offsetWidth,l+=f;h++;for(var t=c-1;(g=this.views[t])&&h<=t;t--)f=this.getViewWidth(t),g.setSize(f,0),f=g.domNode.offsetWidth,d-=f,e(g,d);b<c&&(g=this.views[b],f=Math.max(1,d-l),g.setSize(f+"px",0),e(g,l));return l},renderRow:function(l,d,h){for(var g=[],f=0,c,a;(c=this.views[f])&&(a=d[f]);f++)c=c.renderRow(l),a.appendChild(c),
g.push(c);h||this.normalizeRowNodeHeights(g)},rowRemoved:function(l){this.onEach("rowRemoved",[l])},updateRow:function(l,d){for(var h=0,g;g=this.views[h];h++)g.updateRow(l);d||this.renormalizeRow(l)},updateRowStyles:function(l){this.onEach("updateRowStyles",[l])},setScrollTop:function(l){for(var d=l,h=0,g;g=this.views[h];h++)d=g.setScrollTop(l),v("ie")&&g.headerNode&&g.scrollboxNode&&(g.headerNode.scrollLeft=g.scrollboxNode.scrollLeft);return d},getFirstScrollingView:function(){for(var l=0,d;d=this.views[l];l++)if(d.hasHScrollbar()||
d.hasVScrollbar())return d;return null}})})},"dojox/grid/_RowManager":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/dom-class"],function(u,v,m){return u("dojox.grid._RowManager",null,{constructor:function(l){this.grid=l},linesToEms:2,overRow:-2,prepareStylingRow:function(l,d){return{index:l,node:d,odd:!!(l&1),selected:!!this.grid.selection.isSelected(l),over:this.isOver(l),customStyles:"",customClasses:"dojoxGridRow"}},styleRowNode:function(l,d){l=this.prepareStylingRow(l,d);this.grid.onStyleRow(l);
this.applyStyles(l)},applyStyles:function(l){l.node.className=l.customClasses;var d=l.node.style.height,h=l.node,g=l.customStyles+";"+(l.node._style||"");void 0==h.style.cssText?h.setAttribute("style",g):h.style.cssText=g;l.node.style.height=d},updateStyles:function(l){this.grid.updateRowStyles(l)},setOverRow:function(l){var d=this.overRow;this.overRow=l;d!=this.overRow&&(v.isString(d)||0<=d)&&this.updateStyles(d);this.updateStyles(this.overRow)},isOver:function(l){return this.overRow==l&&!m.contains(this.grid.domNode,
"dojoxGridColumnResizing")}})})},"dojox/grid/_FocusManager":function(){define("dojo/_base/array dojo/_base/lang dojo/_base/declare dojo/_base/connect dojo/_base/event dojo/_base/sniff dojo/query ./util dojo/_base/html".split(" "),function(u,v,m,l,d,h,g,f,c){return m("dojox.grid._FocusManager",null,{constructor:function(a){this.grid=a;this.cell=null;this.rowIndex=-1;this._connects=[];this._headerConnects=[];this.headerMenu=this.grid.headerMenu;this._connects.push(l.connect(this.grid.domNode,"onfocus",
this,"doFocus"));this._connects.push(l.connect(this.grid.domNode,"onblur",this,"doBlur"));this._connects.push(l.connect(this.grid.domNode,"mousedown",this,"_mouseDown"));this._connects.push(l.connect(this.grid.domNode,"mouseup",this,"_mouseUp"));this._connects.push(l.connect(this.grid.domNode,"oncontextmenu",this,"doContextMenu"));this._connects.push(l.connect(this.grid.lastFocusNode,"onfocus",this,"doLastNodeFocus"));this._connects.push(l.connect(this.grid.lastFocusNode,"onblur",this,"doLastNodeBlur"));
this._connects.push(l.connect(this.grid,"_onFetchComplete",this,"_delayedCellFocus"));this._connects.push(l.connect(this.grid,"postrender",this,"_delayedHeaderFocus"))},destroy:function(){u.forEach(this._connects,l.disconnect);u.forEach(this._headerConnects,l.disconnect);delete this.grid;delete this.cell},_colHeadNode:null,_colHeadFocusIdx:null,_contextMenuBindNode:null,tabbingOut:!1,focusClass:"dojoxGridCellFocus",focusView:null,initFocusView:function(){this.focusView=this.grid.views.getFirstScrollingView()||
this.focusView||this.grid.views.views[0];this._initColumnHeaders()},isFocusCell:function(a,b){return this.cell==a&&this.rowIndex==b},isLastFocusCell:function(){return this.cell?this.rowIndex==this.grid.rowCount-1&&this.cell.index==this.grid.layout.cellCount-1:!1},isFirstFocusCell:function(){return this.cell?0===this.rowIndex&&0===this.cell.index:!1},isNoFocusCell:function(){return 0>this.rowIndex||!this.cell},isNavHeader:function(){return!!this._colHeadNode},getHeaderIndex:function(){return this._colHeadNode?
u.indexOf(this._findHeaderCells(),this._colHeadNode):-1},_focusifyCellNode:function(a){var b=this.cell&&this.cell.getNode(this.rowIndex);if(b&&(c.toggleClass(b,this.focusClass,a),a)){a=this.scrollIntoView();try{if(h("webkit")||!this.grid.edit.isEditing())f.fire(b,"focus"),a&&(this.cell.view.scrollboxNode.scrollLeft=a)}catch(e){}}},_delayedCellFocus:function(){if(!this.isNavHeader()&&this.grid.focused){var a=this.cell&&this.cell.getNode(this.rowIndex);if(a)try{this.grid.edit.isEditing()||(c.toggleClass(a,
this.focusClass,!0),this._colHeadNode&&this.blurHeader(),f.fire(a,"focus"))}catch(b){}}},_delayedHeaderFocus:function(){this.isNavHeader()&&this.focusHeader()},_initColumnHeaders:function(){u.forEach(this._headerConnects,l.disconnect);this._headerConnects=[];for(var a=this._findHeaderCells(),b=0;b<a.length;b++)this._headerConnects.push(l.connect(a[b],"onfocus",this,"doColHeaderFocus")),this._headerConnects.push(l.connect(a[b],"onblur",this,"doColHeaderBlur"))},_findHeaderCells:function(){for(var a=
g("th",this.grid.viewsHeaderNode),b=[],e=0;e<a.length;e++){var d=a[e],f=c.hasAttr(d,"tabIndex"),h=c.attr(d,"tabIndex");f&&0>h&&b.push(d)}return b},_setActiveColHeader:function(a,b,e){this.grid.domNode.setAttribute("aria-activedescendant",a.id);null!=e&&0<=e&&e!=b&&c.toggleClass(this._findHeaderCells()[e],this.focusClass,!1);c.toggleClass(a,this.focusClass,!0);this._colHeadNode=a;this._colHeadFocusIdx=b;this._scrollHeader(this._colHeadFocusIdx)},scrollIntoView:function(){var a=this.cell?this._scrollInfo(this.cell):
null;if(!a||!a.s)return null;var b=this.grid.scroller.findScrollTop(this.rowIndex);a.n&&a.sr&&(a.n.offsetLeft+a.n.offsetWidth>a.sr.l+a.sr.w?a.s.scrollLeft=a.n.offsetLeft+a.n.offsetWidth-a.sr.w:a.n.offsetLeft<a.sr.l&&(a.s.scrollLeft=a.n.offsetLeft));a.r&&a.sr&&(b+a.r.offsetHeight>a.sr.t+a.sr.h?this.grid.setScrollTop(b+a.r.offsetHeight-a.sr.h):b<a.sr.t&&this.grid.setScrollTop(b));return a.s.scrollLeft},_scrollInfo:function(a,b){if(a){var c=a.view.scrollboxNode,d={w:c.clientWidth,l:c.scrollLeft,t:c.scrollTop,
h:c.clientHeight},f=a.view.getRowNode(this.rowIndex);return{c:a,s:c,sr:d,n:b?b:a.getNode(this.rowIndex),r:f}}return null},_scrollHeader:function(a){var b=null;if(this._colHeadNode){var c=this.grid.getCell(a);if(!c)return;b=this._scrollInfo(c,c.getNode(0))}b&&b.s&&b.sr&&b.n&&(b.n.offsetLeft+b.n.offsetWidth>b.sr.l+b.sr.w?b.s.scrollLeft=b.n.offsetLeft+b.n.offsetWidth-b.sr.w:b.n.offsetLeft<b.sr.l?b.s.scrollLeft=b.n.offsetLeft:7>=h("ie")&&c&&c.view.headerNode&&(c.view.headerNode.scrollLeft=b.s.scrollLeft))},
_isHeaderHidden:function(){var a=this.focusView;if(!a)for(var b=0,e;e=this.grid.views.views[b];b++)if(e.headerNode){a=e;break}return a&&"none"==c.getComputedStyle(a.headerNode).display},colSizeAdjust:function(a,b,c){var e=this._findHeaderCells(),d=this.focusView;if(!d||!d.header.tableMap.map)for(var f=0,k;k=this.grid.views.views[f];f++)if(k.header.tableMap.map){d=k;break}f=e[b];!d||b==e.length-1&&0===b||(d.content.baseDecorateEvent(a),a.cellNode=f,a.cellIndex=d.content.getCellNodeIndex(a.cellNode),
a.cell=0<=a.cellIndex?this.grid.getCell(a.cellIndex):null,d.header.canResize(a)&&(b={l:c},a=d.header.colResizeSetup(a,!1),d.header.doResizeColumn(a,null,b),d.update()))},styleRow:function(a){},setFocusIndex:function(a,b){this.setFocusCell(this.grid.getCell(b),a)},setFocusCell:function(a,b){a&&!this.isFocusCell(a,b)&&(this.tabbingOut=!1,this._colHeadNode&&this.blurHeader(),this._colHeadNode=this._colHeadFocusIdx=null,this.focusGridView(),this._focusifyCellNode(!1),this.cell=a,this.rowIndex=b,this._focusifyCellNode(!0));
if(h("opera"))setTimeout(v.hitch(this.grid,"onCellFocus",this.cell,this.rowIndex),1);else this.grid.onCellFocus(this.cell,this.rowIndex)},next:function(){if(this.cell){var a=this.rowIndex,b=this.cell.index+1,c=this.grid.layout.cellCount-1,d=this.grid.rowCount-1;b>c&&(b=0,a++);a>d&&(b=c,a=d);if(this.grid.edit.isEditing()&&(c=this.grid.getCell(b),!this.isLastFocusCell()&&(!c.editable||this.grid.canEdit&&!this.grid.canEdit(c,a)))){this.cell=c;this.rowIndex=a;this.next();return}this.setFocusIndex(a,b)}},
previous:function(){if(this.cell){var a=this.rowIndex||0,b=(this.cell.index||0)-1;0>b&&(b=this.grid.layout.cellCount-1,a--);0>a&&(b=a=0);if(this.grid.edit.isEditing()){var c=this.grid.getCell(b);if(!this.isFirstFocusCell()&&!c.editable){this.cell=c;this.rowIndex=a;this.previous();return}}this.setFocusIndex(a,b)}},move:function(a,b){var e=0>b?-1:1;if(this.isNavHeader()){a=this._findHeaderCells();var d=currentIdx=u.indexOf(a,this._colHeadNode);for(currentIdx+=b;0<=currentIdx&&currentIdx<a.length&&"none"==
a[currentIdx].style.display;)currentIdx+=e;0<=currentIdx&&currentIdx<a.length&&this._setActiveColHeader(a[currentIdx],currentIdx,d)}else if(this.cell){var f=this.grid.scroller,d=this.rowIndex,g=this.grid.rowCount-1,k=Math.min(g,Math.max(0,d+a));a&&(0<a?k>f.getLastPageRow(f.page)&&this.grid.setScrollTop(this.grid.scrollTop+f.findScrollTop(k)-f.findScrollTop(d)):0>a&&k<=f.getPageRow(f.page)&&this.grid.setScrollTop(this.grid.scrollTop-f.findScrollTop(d)-f.findScrollTop(k)));for(var f=this.grid.layout.cellCount-
1,r=this.cell.index,h=Math.min(f,Math.max(0,r+b)),l=this.grid.getCell(h);0<=h&&h<f&&l&&!0===l.hidden;)h+=e,l=this.grid.getCell(h);l&&!0!==l.hidden||(h=r);e=l.getNode(k);!e&&a?0<=k+a&&k+a<=g&&this.move(0<a?++a:--a,b):e&&"none"!==c.style(e,"display")||!b?(this.setFocusIndex(k,h),a&&this.grid.updateRow(d)):0<=h+b&&h+b<=f&&this.move(a,0<b?++b:--b)}},previousKey:function(a){this.grid.edit.isEditing()?(d.stop(a),this.previous()):this.isNavHeader()||this._isHeaderHidden()?(this.tabOut(this.grid.domNode),
null!=this._colHeadFocusIdx&&(c.toggleClass(this._findHeaderCells()[this._colHeadFocusIdx],this.focusClass,!1),this._colHeadFocusIdx=null),this._focusifyCellNode(!1)):(this.grid.domNode.focus(),d.stop(a))},nextKey:function(a){a.target===this.grid.domNode&&null==this._colHeadFocusIdx?(this.focusHeader(),d.stop(a)):this.isNavHeader()?(this.blurHeader(),this.findAndFocusGridCell()||this.tabOut(this.grid.lastFocusNode),this._colHeadNode=this._colHeadFocusIdx=null):this.grid.edit.isEditing()?(d.stop(a),
this.next()):this.tabOut(this.grid.lastFocusNode)},tabOut:function(a){this.tabbingOut=!0;a.focus()},focusGridView:function(){f.fire(this.focusView,"focus")},focusGrid:function(a){this.focusGridView();this._focusifyCellNode(!0)},findAndFocusGridCell:function(){var a=!0,b=0===this.grid.rowCount;this.isNoFocusCell()&&!b?(b=0,this.grid.getCell(b).hidden&&(b=this.isNavHeader()?this._colHeadFocusIdx:0),this.setFocusIndex(0,b)):this.cell&&!b?(this.focusView&&!this.focusView.rowNodes[this.rowIndex]&&this.grid.scrollToRow(this.rowIndex),
this.focusGrid()):a=!1;this._colHeadNode=this._colHeadFocusIdx=null;return a},focusHeader:function(){var a=this._findHeaderCells(),b=this._colHeadFocusIdx;this._isHeaderHidden()?this.findAndFocusGridCell():this._colHeadFocusIdx||(this.isNoFocusCell()?this._colHeadFocusIdx=0:this._colHeadFocusIdx=this.cell.index);for(this._colHeadNode=a[this._colHeadFocusIdx];this._colHeadNode&&0<=this._colHeadFocusIdx&&this._colHeadFocusIdx<a.length&&"none"==this._colHeadNode.style.display;)this._colHeadFocusIdx++,
this._colHeadNode=a[this._colHeadFocusIdx];this._colHeadNode&&"none"!=this._colHeadNode.style.display?(this.headerMenu&&this._contextMenuBindNode!=this.grid.domNode&&(this.headerMenu.unBindDomNode(this.grid.viewsHeaderNode),this.headerMenu.bindDomNode(this.grid.domNode),this._contextMenuBindNode=this.grid.domNode),this._setActiveColHeader(this._colHeadNode,this._colHeadFocusIdx,b),this._scrollHeader(this._colHeadFocusIdx),this._focusifyCellNode(!1)):this.findAndFocusGridCell()},blurHeader:function(){c.removeClass(this._colHeadNode,
this.focusClass);c.removeAttr(this.grid.domNode,"aria-activedescendant");if(this.headerMenu&&this._contextMenuBindNode==this.grid.domNode){var a=this.grid.viewsHeaderNode;this.headerMenu.unBindDomNode(this.grid.domNode);this.headerMenu.bindDomNode(a);this._contextMenuBindNode=a}},doFocus:function(a){a&&a.target!=a.currentTarget?d.stop(a):this._clickFocus||(this.tabbingOut||this.focusHeader(),this.tabbingOut=!1,d.stop(a))},doBlur:function(a){d.stop(a)},doContextMenu:function(a){this.headerMenu||d.stop(a)},
doLastNodeFocus:function(a){this.tabbingOut?this._focusifyCellNode(!1):0<this.grid.rowCount?(this.isNoFocusCell()&&this.setFocusIndex(0,0),this._focusifyCellNode(!0)):this.focusHeader();this.tabbingOut=!1;d.stop(a)},doLastNodeBlur:function(a){d.stop(a)},doColHeaderFocus:function(a){this._setActiveColHeader(a.target,c.attr(a.target,"idx"),this._colHeadFocusIdx);this._scrollHeader(this.getHeaderIndex());d.stop(a)},doColHeaderBlur:function(a){c.toggleClass(a.target,this.focusClass,!1)},_mouseDown:function(a){this._clickFocus=
dojo.some(this.grid.views.views,function(b){return b.scrollboxNode===a.target})},_mouseUp:function(a){this._clickFocus=!1}})})},"dojox/grid/_EditManager":function(){define("dojo/_base/lang dojo/_base/array dojo/_base/declare dojo/_base/connect dojo/_base/sniff ./util".split(" "),function(u,v,m,l,d,h){return m("dojox.grid._EditManager",null,{constructor:function(g){this.grid=g;this.connections=d("ie")?[l.connect(document.body,"onfocus",u.hitch(this,"_boomerangFocus"))]:[];this.connections.push(l.connect(this.grid,
"onBlur",this,"apply"));this.connections.push(l.connect(this.grid,"prerender",this,"_onPreRender"))},info:{},destroy:function(){v.forEach(this.connections,l.disconnect)},cellFocus:function(d,f){this.grid.singleClickEdit||this.isEditRow(f)?this.setEditCell(d,f):this.apply();(this.isEditing()||d&&d.editable&&d.alwaysEditing)&&this._focusEditor(d,f)},rowClick:function(d){this.isEditing()&&!this.isEditRow(d.rowIndex)&&this.apply()},styleRow:function(d){d.index==this.info.rowIndex&&(d.customClasses+=" dojoxGridRowEditing")},
dispatchEvent:function(d){var f=d.cell;return(f=f&&f.editable?f:0)&&f.dispatchEvent(d.dispatch,d)},isEditing:function(){return void 0!==this.info.rowIndex},isEditCell:function(d,f){return this.info.rowIndex===d&&this.info.cell.index==f},isEditRow:function(d){return this.info.rowIndex===d},setEditCell:function(d,f){!this.isEditCell(f,d.index)&&this.grid.canEdit&&this.grid.canEdit(d,f)&&this.start(d,f,this.isEditRow(f)||d.editable)},_focusEditor:function(d,f){h.fire(d,"focus",[f])},focusEditor:function(){this.isEditing()&&
this._focusEditor(this.info.cell,this.info.rowIndex)},_boomerangWindow:500,_shouldCatchBoomerang:function(){return this._catchBoomerang>(new Date).getTime()},_boomerangFocus:function(){this._shouldCatchBoomerang()&&(this.grid.focus.focusGrid(),this.focusEditor(),this._catchBoomerang=0)},_doCatchBoomerang:function(){d("ie")&&(this._catchBoomerang=(new Date).getTime()+this._boomerangWindow)},start:function(d,f,c){this._isValidInput()&&(this.grid.beginUpdate(),this.editorApply(),this.isEditing()&&!this.isEditRow(f)&&
(this.applyRowEdit(),this.grid.updateRow(f)),c?(this.info={cell:d,rowIndex:f},this.grid.doStartEdit(d,f),this.grid.updateRow(f)):this.info={},this.grid.endUpdate(),this.grid.focus.focusGrid(),this._focusEditor(d,f),this._doCatchBoomerang())},_editorDo:function(d){var f=this.info.cell;if(f&&f.editable)f[d](this.info.rowIndex)},editorApply:function(){this._editorDo("apply")},editorCancel:function(){this._editorDo("cancel")},applyCellEdit:function(d,f,c){this.grid.canEdit(f,c)&&this.grid.doApplyCellEdit(d,
c,f.field)},applyRowEdit:function(){this.grid.doApplyEdit(this.info.rowIndex,this.info.cell.field)},apply:function(){this.isEditing()&&this._isValidInput()&&(this.grid.beginUpdate(),this.editorApply(),this.applyRowEdit(),this.info={},this.grid.endUpdate(),this.grid.focus.focusGrid(),this._doCatchBoomerang())},cancel:function(){this.isEditing()&&(this.grid.beginUpdate(),this.editorCancel(),this.info={},this.grid.endUpdate(),this.grid.focus.focusGrid(),this._doCatchBoomerang())},save:function(d,f){var c=
this.info.cell;!this.isEditRow(d)||f&&c.view!=f||!c.editable||c.save(c,this.info.rowIndex)},restore:function(d,f){var c=this.info.cell;this.isEditRow(f)&&c.view==d&&c.editable&&c.restore(this.info.rowIndex)},_isValidInput:function(){var d=(this.info.cell||{}).widget;if(!d||!d.isValid)return!0;d.focused=!0;return d.isValid(!0)},_onPreRender:function(){this.isEditing()&&(this.info.value=this.info.cell.getValue())}})})},"dojox/grid/Selection":function(){define(["dojo/_base/declare","dojo/_base/array",
"dojo/_base/lang","dojo/dom-attr"],function(u,v,m,l){return u("dojox.grid.Selection",null,{constructor:function(d){this.grid=d;this.selected=[];this.setMode(d.selectionMode)},mode:"extended",selected:null,updating:0,selectedIndex:-1,rangeStartIndex:-1,setMode:function(d){this.selected.length&&this.deselectAll();this.mode="extended"!=d&&"multiple"!=d&&"single"!=d&&"none"!=d?"extended":d},onCanSelect:function(d){return this.grid.onCanSelect(d)},onCanDeselect:function(d){return this.grid.onCanDeselect(d)},
onSelected:function(d){},onDeselected:function(d){},onChanging:function(){},onChanged:function(){},isSelected:function(d){return"none"==this.mode?!1:this.selected[d]},getFirstSelected:function(){if(!this.selected.length||"none"==this.mode)return-1;for(var d=0,h=this.selected.length;d<h;d++)if(this.selected[d])return d;return-1},getNextSelected:function(d){if("none"==this.mode)return-1;d+=1;for(var h=this.selected.length;d<h;d++)if(this.selected[d])return d;return-1},getSelected:function(){for(var d=
[],h=0,g=this.selected.length;h<g;h++)this.selected[h]&&d.push(h);return d},getSelectedCount:function(){for(var d=0,h=0;h<this.selected.length;h++)this.selected[h]&&d++;return d},_beginUpdate:function(){if(0===this.updating)this.onChanging();this.updating++},_endUpdate:function(){this.updating--;if(0===this.updating)this.onChanged()},select:function(d){"none"!=this.mode&&("multiple"!=this.mode?(this.deselectAll(d),this.addToSelection(d)):this.toggleSelect(d))},addToSelection:function(d){if("none"!=
this.mode)if(m.isArray(d))v.forEach(d,this.addToSelection,this);else if(d=Number(d),this.selected[d])this.selectedIndex=d;else if(!1!==this.onCanSelect(d)){this.selectedIndex=d;var h=this.grid.getRowNode(d);h&&l.set(h,"aria-selected","true");this._beginUpdate();this.selected[d]=!0;this.onSelected(d);this._endUpdate()}},deselect:function(d){if("none"!=this.mode)if(m.isArray(d))v.forEach(d,this.deselect,this);else if(d=Number(d),this.selectedIndex==d&&(this.selectedIndex=-1),this.selected[d]&&!1!==
this.onCanDeselect(d)){var h=this.grid.getRowNode(d);h&&l.set(h,"aria-selected","false");this._beginUpdate();delete this.selected[d];this.onDeselected(d);this._endUpdate()}},setSelected:function(d,h){this[h?"addToSelection":"deselect"](d)},toggleSelect:function(d){m.isArray(d)?v.forEach(d,this.toggleSelect,this):this.setSelected(d,!this.selected[d])},_range:function(d,h,g){var f=0<=d?d:h;d=h;f>d&&(d=f,f=h);for(h=f;h<=d;h++)g(h)},selectRange:function(d,h){this._range(d,h,m.hitch(this,"addToSelection"))},
deselectRange:function(d,h){this._range(d,h,m.hitch(this,"deselect"))},insert:function(d){this.selected.splice(d,0,!1);this.selectedIndex>=d&&this.selectedIndex++},remove:function(d){this.selected.splice(d,1);this.selectedIndex>=d&&this.selectedIndex--},deselectAll:function(d){for(var h in this.selected)h!=d&&!0===this.selected[h]&&this.deselect(h)},clickSelect:function(d,h,g){if("none"!=this.mode){this._beginUpdate();if("extended"!=this.mode)this.select(d);else{if(!g||0>this.rangeStartIndex)this.rangeStartIndex=
d;h||this.deselectAll(d);g?this.selectRange(this.rangeStartIndex,d):h?this.toggleSelect(d):this.addToSelection(d)}this._endUpdate()}},clickSelectEvent:function(d){this.clickSelect(d.rowIndex,dojo.isCopyKey(d),d.shiftKey)},clear:function(){this._beginUpdate();this.deselectAll();this._endUpdate()}})})},"dijit/CheckedMenuItem":function(){define(["dojo/_base/declare","dojo/dom-class","./MenuItem","dojo/text!./templates/CheckedMenuItem.html","./hccss"],function(u,v,m,l){return u("dijit.CheckedMenuItem",
m,{baseClass:"dijitMenuItem dijitCheckedMenuItem",templateString:l,checked:!1,_setCheckedAttr:function(d){this.domNode.setAttribute("aria-checked",d?"true":"false");this._set("checked",d)},iconClass:"",role:"menuitemcheckbox",checkedChar:"\x26#10003;",onChange:function(){},_onClick:function(d){this.disabled||(this.set("checked",!this.checked),this.onChange(this.checked));this.onClick(d)}})})},"dojox/grid/DataSelection":function(){define(["dojo/_base/declare","./_SelectionPreserver","./Selection"],
function(u,v,m){return u("dojox.grid.DataSelection",m,{constructor:function(l){l.keepSelection&&(this.preserver=new v(this))},destroy:function(){this.preserver&&this.preserver.destroy()},getFirstSelected:function(){var l=m.prototype.getFirstSelected.call(this);return-1==l?null:this.grid.getItem(l)},getNextSelected:function(l){l=this.grid.getItemIndex(l);l=m.prototype.getNextSelected.call(this,l);return-1==l?null:this.grid.getItem(l)},getSelected:function(){for(var l=[],d=0,h=this.selected.length;d<
h;d++)this.selected[d]&&l.push(this.grid.getItem(d));return l},addToSelection:function(l){if("none"!=this.mode){var d=null,d="number"==typeof l||"string"==typeof l?l:this.grid.getItemIndex(l);m.prototype.addToSelection.call(this,d)}},deselect:function(l){if("none"!=this.mode){var d=null,d="number"==typeof l||"string"==typeof l?l:this.grid.getItemIndex(l);m.prototype.deselect.call(this,d)}},deselectAll:function(l){var d=null;l||"number"==typeof l?(d="number"==typeof l||"string"==typeof l?l:this.grid.getItemIndex(l),
m.prototype.deselectAll.call(this,d)):this.inherited(arguments)}})})},"dojox/grid/_SelectionPreserver":function(){define(["dojo/_base/declare","dojo/_base/connect","dojo/_base/lang","dojo/_base/array"],function(u,v,m,l){return u("dojox.grid._SelectionPreserver",null,{constructor:function(d){this.selection=d;var h=this.grid=d.grid;this.reset();this._connects=[v.connect(h,"_setStore",this,"reset"),v.connect(h,"_addItem",this,"_reSelectById"),v.connect(d,"onSelected",m.hitch(this,"_selectById",!0)),
v.connect(d,"onDeselected",m.hitch(this,"_selectById",!1)),v.connect(d,"deselectAll",this,"reset")]},destroy:function(){this.reset();l.forEach(this._connects,v.disconnect);delete this._connects},reset:function(){this._selectedById={}},_reSelectById:function(d,h){d&&this.grid._hasIdentity&&(this.selection.selected[h]=this._selectedById[this.grid.store.getIdentity(d)])},_selectById:function(d,h){if("none"!=this.selection.mode&&this.grid._hasIdentity){var g=h,f=this.grid;if("number"==typeof h||"string"==
typeof h)g=(h=f._by_idx[h])&&h.item;g&&(this._selectedById[f.store.getIdentity(g)]=!!d);return g}}})})},"jimu/CSVUtils":function(){define("exports dojo/_base/lang dojo/_base/array dojo/_base/html dojo/has dojo/Deferred jimu/utils esri/lang esri/tasks/QueryTask esri/tasks/query esri/graphic jimu/ArcadeUtils".split(" "),function(u,v,m,l,d,h,g,f,c,a,b,e){function t(a){var b=v.clone(a.attributes);(a=a.geometry)&&"point"===a.type&&("x"in b?b._x=a.x:b.x=a.x,"y"in b?b._y=a.y:b.y=a.y);return b}u.exportCSV=
function(a,b,c){return u._createCSVStr(b,c).then(function(b){return u._download(a+".csv",b)})};u.exportCSVFromFeatureLayer=function(a,b,c){c=c||{};return u._getExportData(b,{datas:c.datas,objectIds:c.objectIds,fromClient:c.fromClient,withGeometry:c.withGeometry,outFields:c.outFields,filterExpression:c.filterExpression,outSpatialReference:c.outSpatialReference,arcadeExpressions:c.arcadeExpressions}).then(function(e){return u._formattedData(b,e,{formatNumber:c.formatNumber,formatDate:c.formatDate,formatCodedValue:c.formatCodedValue,
richText:{clearFormat:c.richTextFieldsToClear&&!!c.richTextFieldsToClear.length,fieldsToClear:c.richTextFieldsToClear||[]},popupInfo:c.popupInfo}).then(function(b){return u.exportCSV(a,b.datas,b.columns)})})};u.exportCSVByAttributes=function(a,b,c,e){e=v.mixin({},e);e.datas=c;return u.exportCSVFromFeatureLayer(a,b,e)};u.exportCSVByGraphics=function(a,b,c,e){c=m.map(c,function(a){return a.attributes});return u.exportCSVByAttributes(a,b,c,e)};u._createCSVStr=function(a,b){var c=new h,e="",d=0,f=0,g=
"",n="";try{b=m.map(b,function(a){return"string"===typeof a?{name:a}:a});m.forEach(b,function(a){a=a.alias||a.name;-1<a.toString().indexOf(",")&&(a='"'+a+'"');e=e+g+a;g=","});for(var e=e+"\r\n",d=a.length,f=b.length,p=0;p<d;p++){for(var g="",t=0;t<f;t++)(n=a[p][b[t].name])||"number"===typeof n||(n=""),n&&/[",\r\n]/g.test(n)&&(n='"'+n.replace(/(")/g,'""')+'"'),e=e+g+n,g=",";e+="\r\n"}c.resolve(e)}catch(D){console.error(D),c.resolve("")}return c};u._isIE11=function(){return 11===g.has("ie")};u._isEdge=
function(){return g.has("edge")};u._getDownloadUrl=function(a){return window.Blob&&window.URL&&window.URL.createObjectURL?(a=new Blob(["\ufeff"+a],{type:"text/csv"}),URL.createObjectURL(a)):"data:attachment/csv;charset\x3dutf-8,\ufeff"+encodeURIComponent(a)};u._download=function(a,b){var c=new h;try{if(d("ie")&&10>d("ie")){var e=window.top.open("about:blank","_blank");e.document.write("sep\x3d,\r\n"+b);e.document.close();e.document.execCommand("SaveAs",!0,a);e.close()}else if(10===d("ie")||u._isIE11()||
u._isEdge()){var f=new Blob(["\ufeff"+b],{type:"text/csv"});navigator.msSaveBlob(f,a)}else{var g=l.create("a",{href:u._getDownloadUrl(b),target:"_blank",download:a},document.body);if(d("safari")){var n=document.createEvent("MouseEvents");n.initEvent("click",!0,!0);g.dispatchEvent(n)}else g.click();l.destroy(g)}c.resolve()}catch(F){c.reject(F)}return c};u._getExportData=function(a,b){var c=new h,e=null,d=[],f=b.datas,g=b.withGeometry,n=!!b.arcadeExpressions;(e=b.outFields)&&e.length||(e=a.fields);
e=v.clone(e);if(g&&!(f&&0<f.length)){n?(d=m.filter(a.fields,function(a){return-1===a.name.indexOf("expression/")}),d=v.clone(d)):d=v.clone(e);var p="",p=-1!==e.indexOf("x")?"_x":"x";e.push({name:p,alias:p,format:{digitSeparator:!1,places:6},show:!0,type:"esriFieldTypeDouble"});p=-1!==e.indexOf("y")?"_y":"y";e.push({name:p,alias:p,format:{digitSeparator:!1,places:6},show:!0,type:"esriFieldTypeDouble"})}f&&0<f.length?(n&&(f=u._getAttrsWithExpressionsBatch(f,b.arcadeExpressions)),c.resolve({data:f||
[],outFields:e})):b.fromClient?(f=m.map(a.graphics,function(a){a=g?t(a):v.clone(a);return a=n?u._getAttrsWithExpressions(a,b.arcadeExpressions):a}),c.resolve({data:f||[],outFields:e})):u._getExportDataFromServer(a,d,b).then(function(a){n&&(a=u._getAttrsWithExpressionsBatch(a,b.arcadeExpressions));c.resolve({data:a||[],outFields:e})});return c};u._getExportDataFromServer=function(b,e,d){var f=new h;if("esri.layers.FeatureLayer"!==b.declaredClass)return f.resolve([]),f;var k=new c(b.url),g=new a;g.where=
d.filterExpression||b.getDefinitionExpression&&b.getDefinitionExpression()||"1\x3d1";0<e.length?(b=m.map(e,function(a){return a.name}),g.outFields=b):g.outFields=["*"];g.objectIds=d.objectIds;g.returnGeometry=d.withGeometry;g.outSR=d.spatialReference;k.execute(g,function(a){a=m.map(a.features,function(a){return t(a)});f.resolve(a)},function(a){console.error(a);f.resolve([])});return f};u._formattedData=function(a,b,c){var e=new h,d=[],f=b.data;b=b.outFields;for(var k=0,g=f.length;k<g;k++){for(var n=
{},p=0;p<b.length;p++){var t=b[p];n[t.name]=u._getExportValue(f[k][t.name],t,a.objectIdField,a.typeIdField,f[k][a.typeIdField],a.types,c)}d.push(n)}a=m.map(b,function(a){return{alias:a.alias,name:a.name}});e.resolve({datas:d,columns:a});return e};u._getExportValue=function(a,b,c,e,d,h,t){function k(a){if(n&&f.isDefined(n.fieldInfos))for(var b=0,c=n.fieldInfos.length;b<c;b++){var e=n.fieldInfos[b];if(e.fieldName===a)return e.format}return null}function r(a){for(var b=0,c=p.length;b<c;b++)if(p[b].fieldName===
a)return!0;return!1}var n=t.popupInfo,p=t.richText.fieldsToClear,E=!!b.domain&&t.formatCodedValue,q="esriFieldTypeDate"===b.type&&t.formatDate,l=c&&b.name===c;e=e&&b.name===e;r="esriFieldTypeString"===b.type&&t.richText.clearFormat&&r(b.name);return q?g.fieldFormatter.getFormattedDate(a,k(b.name)):e?g.fieldFormatter.getTypeName(a,h):E?g.fieldFormatter.getCodedValue(b.domain,a):r?a?(b=document.createElement("span"),b.innerHTML=a,b.textContent||b.innerText||""):a:E||q||l||e||r?a:(t=null,c&&h&&0<h.length&&
(c=(c=m.filter(h,function(a){return a.id===d}))&&c[0])&&c.domains&&c.domains[b.name]&&c.domains[b.name].codedValues&&(t=g.fieldFormatter.getCodedValue(c.domains[b.name],a)),null!==t?t:a)};u._getAttrsWithExpressions=function(a,c){var d=v.getObject("expressionInfos",!1,c);c=v.getObject("layerDefinition",!1,c);var f=new b(null,null,a);return e.customExpr.getAttributesFromCustomArcadeExpr(d,f,c)||a};u._getAttrsWithExpressionsBatch=function(a,b){return m.map(a,function(a){return u._getAttrsWithExpressions(a,
b)})}})},"jimu/ArcadeUtils":function(){define("dojo/_base/array dojo/_base/lang dojo/Deferred dojo/promise/all dojo/string esri/arcade/arcade esri/arcade/Feature esri/tasks/RelationshipQuery jimu/utils jimu/LayerStructure".split(" "),function(u,v,m,l,d,h,g,f,c,a){var b={readExprInfo:{}};b.readExprInfo.getArcadeProfilesByType=function(a,c,d){a={map:a,layer:c};return"render"===d?b.readExprInfo._getArcadeRender(a):"label"===d?b.readExprInfo._getArcadeLabel(a):"infoTemplate"===d?b.readExprInfo._getArcadeInfoTemplate(a):
b.readExprInfo._getAllArcade(a)};b.readExprInfo._getArcadeRender=function(a){return b.readExprInfo._lookupArcadeRender({layers:b.readExprInfo._checkPassInLayer(a)})};b.readExprInfo._getArcadeInfoTemplate=function(a){return b.readExprInfo._lookupArcadeInfoTemplate({layers:b.readExprInfo._checkPassInLayer(a)})};b.readExprInfo._getArcadeLabel=function(a){return b.readExprInfo._lookupArcadeLabel({layers:b.readExprInfo._checkPassInLayer(a)})};b.readExprInfo._getAllArcade=function(a){var c=b.readExprInfo._getArcadeRender(a),
e=b.readExprInfo._getArcadeInfoTemplate(a);a=b.readExprInfo._getArcadeLabel(a);return{render:c,infoTemplate:e,label:a}};b.readExprInfo._checkPassInLayer=function(a){return"undefined"!==typeof a?"undefined"!==typeof a.layer?null!==a.layer&&""!==a.layer?b.readExprInfo._getAllMapLayers(a):b.readExprInfo._getAllMapLayers():b.readExprInfo._getAllMapLayers():b.readExprInfo._getAllMapLayers()};b.readExprInfo._getAllMapLayers=function(b){var c="",e=[],d=a.getInstance();b&&b.layer&&(c=b.layer.id);""!==c?(b=
d.getNodeById(c))&&e.push(b._layerInfo.layerObject):d.traversal(function(a){"undefined"!==typeof a._layerInfo.layerObject.type?-1===a._layerInfo.layerObject.type.indexOf("tile")&&e.push(a._layerInfo.layerObject):e.push(a._layerInfo.layerObject)});return e};b.readExprInfo._lookupArcadeRender=function(a){var b=[];0<a.layers.length&&u.forEach(a.layers,v.hitch(this,function(a){var c={};if("undefined"!==typeof a.renderer){var e=a.renderer;"undefined"!==typeof e.valueExpression&&(c.layer=a.id,c.valueExpression=
e.valueExpression,c.valueExpressionTitle=e.valueExpressionTitle,"undefined"!==typeof e.values&&(c.values=e.values),"undefined"!==typeof e.visualVariables&&(c.visualVariables=e.visualVariables));1<Object.keys(c).length&&c.constructor===Object?b.push(c):b.push({layer:a.id,valueExpression:null,valueExpressionTitle:null,values:null,visualVariables:null})}}));return b};b.readExprInfo._lookupArcadeInfoTemplate=function(a){var b=[];0<a.layers.length&&u.forEach(a.layers,v.hitch(this,function(a){var c={};
if("undefined"!==typeof a.infoTemplate)"undefined"!==typeof a.infoTemplate.info.expressionInfos&&0<a.infoTemplate.info.expressionInfos.length&&(c.layer=a.id,c.expressionInfos=a.infoTemplate.info.expressionInfos);else if("undefined"!==typeof a.infoTemplates)for(var e in a.infoTemplates)if(a.infoTemplates.hasOwnProperty(e)&&"undefined"!==typeof a.infoTemplates[e].infoTemplate.info.expressionInfos){var d=a.infoTemplates[e].infoTemplate;0<d.info.expressionInfos.length&&(c.layer=a.id,c.expressionInfos=
d.info.expressionInfos)}1<Object.keys(c).length&&c.constructor===Object?b.push(c):b.push({layer:a.id,expressionInfos:null})}));return b};b.readExprInfo._lookupArcadeLabel=function(a){var b=[];0<a.layers.length&&u.forEach(a.layers,v.hitch(this,function(a){var c={};"undefined"!==typeof a.labelingInfo&&u.forEach(a.labelingInfo,v.hitch(this,function(b){"undefined"!==typeof b.name&&(c.layer=a.id,c.name=b.name,c.labelingInfo=b,c.expression=b.labelExpressionInfo.expression)}));1<Object.keys(c).length&&c.constructor===
Object?b.push(c):b.push({layer:a.id,name:null,labelingInfo:null,expression:null})}));return b};b.customExpr={};b.customExpr.getAttributesFromCustomArcadeExpr=function(a,c,d){a=b.InfoTemplate._parseArcadeExpressions(a);return b.InfoTemplate._combineFeatureAttributesAndExpressionResolutions(c,a,d)};b.customExpr.getAttributesValueFromCustomArcadeExprBatch=function(a,c,d){var e=[],f;for(f in c)e.push(c[f]);c=b.InfoTemplate._parseArcadeExpressions(a);a=b.InfoTemplate._getExprNamesArrayFromPopupExprInfos(a);
a.relationships=null;a.parsedExpressions=c;var h=new m;b.InfoTemplate._getPopupFieldsValueFromArcadeFeatures(e,a,d).then(function(a){h.resolve(a)});return h};b.InfoTemplate={};b.InfoTemplate.getAttributesFromInfoTemplate=function(a,c,d){var e={fields:[]};c.layerObject&&c.layerObject.fields&&(e.fields=c.layerObject.fields);a=b.readExprInfo.getArcadeProfilesByType(a,c,"infoTemplate")[0].expressionInfos;if(!a)return d.attributes;a=b.InfoTemplate._parseArcadeExpressions(a);return b.InfoTemplate._combineFeatureAttributesAndExpressionResolutions(d,
a,e)};b.InfoTemplate.getAttributesValueFromInfoTemplateBatch=function(a,c,d){var e={fields:[]};c.layerObject&&c.layerObject.fields&&(e.fields=c.layerObject.fields);var f=[],h;for(h in d)f.push(d[h]);a=b.readExprInfo.getArcadeProfilesByType(a,c,"infoTemplate")[0].expressionInfos;var g=new m;if(!a)return g.resolve([]),g;d=b.InfoTemplate._parseArcadeExpressions(a);h=null;h=c.getPopupInfo().description;null!==h?(h=b.InfoTemplate._convertPopupDescToFieldNamesArray(h),h.relationships=b.InfoTemplate._getRelationshipQueries(c)):
(h=b.InfoTemplate._getExprNamesArrayFromPopupExprInfos(a),h.relationships=null);h.parsedExpressions=d;b.InfoTemplate._getPopupFieldsValueFromArcadeFeatures(f,h,e).then(function(a){g.resolve(a)});return g};b.InfoTemplate._getRelationshipQueries=function(a){var b=!1,c={},e=/\d+/,d;if(d=a.getPopupInfo().description.match(/\{relationships\/\d+\//gm))b=!0,u.forEach(d,function(b){var d=b.match(e)[0];c.hasOwnProperty(d)||(b=new f,b.outFields=["*"],b.relationshipId=d,b.returnGeometry=!1,c[d]={operLayer:a,
relatedQuery:b})});return b?c:null};b.InfoTemplate._getExprNamesArrayFromPopupExprInfos=function(a){var b=[],c;for(c in a)b.push("${expression/"+a[c].name+"}");return b};b.InfoTemplate._convertPopupDescToFieldNamesArray=function(a){a=b.InfoTemplate._convertEndParasToEOLs(a);a=b.InfoTemplate._convertBreaksToEOLs(a);a=b.InfoTemplate._sanitizeNoTags(a).trim();a=a.replace(/\{/gi,"${");a=a.replace(/\u00a0/gi," ");a=a.split("\n");return a=u.map(a,function(a){return a.trim()})};b.InfoTemplate._sanitizeNoTags=
function(a){var b;b=c.sanitizeHTML(a);a=/<(?:!--(?:(?:-*[^->])*--+|-?)|script\b(?:[^"'>]|"[^"]*"|'[^']*')*>[\s\S]*?<\/script\s*|style\b(?:[^"'>]|"[^"]*"|'[^']*')*>[\s\S]*?<\/style\s*|\/?[a-z](?:[^"'>]|"[^"]*"|'[^']*')*)>/gi;var d;do d=b,b=b.replace(a,"");while(b!==d);return b=b.replace(/</g,"\x26lt;")};b.InfoTemplate._getPopupFieldsValueFromArcadeFeatures=function(a,c,f){var e=new m,k=[],h=[],g=0;c.relationships?(u.forEach(a,function(a){b.InfoTemplate._objEach(c.relationships,function(e,k){var g=
new m,r=e.relatedQuery,n;h.push(g);n=a.attributes[e.operLayer.layerObject.objectIdField];r.objectIds=[n];e.operLayer.layerObject.queryRelatedFeatures(r,function(e){var h=[];e[n]&&e[n].features&&(e=e[n].features,u.forEach(e,function(e){var g=[],r,n,B;r=a.attributes;n="relationships/"+k+"/";b.InfoTemplate._objEach(e.attributes,function(a,b){B=n+b;r[B]=a});u.forEach(c,function(e){g.push(d.substitute(e,b.InfoTemplate._combineFeatureAttributesAndExpressionResolutions(a,c.parsedExpressions,f),b.InfoTemplate._useEmptyStringForNull))});
h.push(g)}));g.resolve(h)})})}),l(h).then(function(a){u.forEach(a,function(a){u.forEach(a,function(a){++g;k.push(a)})});console.log(g+" related address features found");e.resolve(k)})):(u.forEach(a,function(a){var e=[];u.forEach(c,function(k){e.push(d.substitute(k,b.InfoTemplate._combineFeatureAttributesAndExpressionResolutions(a,c.parsedExpressions,f),b.InfoTemplate._useEmptyStringForNull))});k.push(e)}),e.resolve(k));return e};b.InfoTemplate._parseArcadeExpressions=function(a){var b;Array.isArray(a)&&
0<a.length&&(b={},u.forEach(a,function(a){b[a.name]=h.parseScript(a.expression)}));return b};b.InfoTemplate._initArcadeContext=function(a,b){var c={vars:{}};c.vars.$feature=g.createFromGraphicLikeObject(a.geometry,a.attributes,b);return c};b.InfoTemplate._combineFeatureAttributesAndExpressionResolutions=function(a,c,d){var e,f;e=v.mixin({},a.attributes);if(c)for(f in a=b.InfoTemplate._initArcadeContext(a,d),c)d=h.executeScript(c[f],a),e["expression/"+f]=d?d.toString():"";return e};b.InfoTemplate._convertEndParasToEOLs=
function(a){var b=a;a=a.match(/<\/p>/gi);u.forEach(a,function(a){b=b.replace(a,"\n")});return b};b.InfoTemplate._convertBreaksToEOLs=function(a){var b=a;a=a.match(/<br\s*\/?>/gi);u.forEach(a,function(a){b=b.replace(a,"\n")});return b};b.InfoTemplate._useEmptyStringForNull=function(a){return a?a:""};b.InfoTemplate._objEach=function(a,b,c){for(var d in a)a.hasOwnProperty(d)&&b.call(c,a[d],d)};return b})},"jimu/LayerStructure":function(){define("dojo/_base/declare dojo/_base/array dojo/_base/lang dojo/on dojo/Evented ./LayerInfos/LayerInfos".split(" "),
function(u,v,m,l,d,h){var g=u([d],{declaredClass:"jimu.LayerStructure",map:null,_layerInfos:null,_eventHandles:null,constructor:function(c){this._layerInfos=c;this.map=this._layerInfos.map;this._eventHandles=[];this._bindEvents()},getLayerNodes:function(){return this._getNodesArrayFromInfosArray(this._layerInfos.getLayerInfoArray())},getTableNodes:function(){return this._getNodesArrayFromInfosArray(this._layerInfos.getTableInfoArray())},getBasemapLayerNodes:function(){return this._getNodesArrayFromInfosArray(this._layerInfos.getBasemapLayerInfoArray())},
getWebmapLayerNodes:function(){return this._getNodesArrayFromInfosArray(this._layerInfos.getLayerInfoArrayOfWebmap())},getWebmapTableNodes:function(){return this._getNodesArrayFromInfosArray(this._layerInfos.getTableInfoArrayOfWebmap())},addTable:function(c){var a=null;if(c=this._layerInfos.addTable(c))a=c._adaptor;return a},removeTable:function(c){(c=this.getNodeById(c))&&this._layerInfos.removeTable(c._layerInfo)},_traversal:function(c,a){for(var b=0;b<a.length;b++)if(a[b].traversal(c))return!0;
return!1},traversal:function(c){return this._traversal(c,this.getLayerNodes().concat(this.getBasemapLayerNodes().concat(this.getTableNodes())))},traversalWithNodes:function(c,a){return this._traversal(c,a)},getNodeById:function(c){var a=null;this.traversal(function(b){if(b.id===c)return a=b,!0});return a},getBasemapLayerObjects:function(){return this._layerInfos.getBasemapLayers()},restoreState:function(c){this._layerInfos.restoreState(c)},destroy:function(){v.forEach(this._eventHandles,function(c){c.remove()});
this.inherited(arguments)},_getNodesArrayFromInfosArray:function(c){var a=[];v.forEach(c,function(b){a.push(b._adaptor)},this);return a},_emitEvent:function(){try{this.emit.apply(this,arguments)}catch(c){console.warn(c)}},_bindEvents:function(){var c;c=l(this._layerInfos,"layerInfosChanged",m.hitch(this,this._onLayerNodesStructureChanged));this._eventHandles.push(c);c=l(this._layerInfos,"basemapLayerInfosChanged",m.hitch(this,this._onLayerNodesStructureChanged));this._eventHandles.push(c);c=l(this._layerInfos,
"tableInfosChanged",m.hitch(this,this._onTableNdoesStructureChanged));this._eventHandles.push(c);c=l(this._layerInfos,"layerInfosReorder",m.hitch(this,this._onLayerReordered));this._eventHandles.push(c);c=l(this._layerInfos,"layerInfosIsShowInMapChanged",m.hitch(this,this._onVisibilityChanged));this._eventHandles.push(c);c=l(this._layerInfos,"layerInfosIsVisibleChanged",m.hitch(this,this._onToggleChanged));this._eventHandles.push(c);c=l(this._layerInfos,"layerInfosFilterChanged",m.hitch(this,this._onFilterChanged));
this._eventHandles.push(c);c=l(this._layerInfos,"layerInfosRendererChanged",m.hitch(this,this._onRendererChanged));this._eventHandles.push(c);c=l(this._layerInfos,"layerInfosOpacityChanged",m.hitch(this,this._onOpacityChanged));this._eventHandles.push(c);c=l(this._layerInfos,"layerInfosTimeExtentChanged",m.hitch(this,this._onTimeExtentChanged));this._eventHandles.push(c)},_onLayerNodesStructureChanged:function(c,a,b){this._emitEvent(g.EVENT_STRUCTURE_CHANGE,{type:a,layerNodes:[b._adaptor],rootLayerNodes:[c._adaptor]})},
_onTableNdoesStructureChanged:function(c,a){c=this._getNodesArrayFromInfosArray(c);this._emitEvent(g.EVENT_STRUCTURE_CHANGE,{type:a,layerNodes:c,rootLayerNodes:c})},_onLayerReordered:function(c,a){c=[c._adaptor];this._emitEvent(g.EVENT_STRUCTURE_CHANGE,{type:a,layerNodes:c,rootLayerNodes:c})},_onVisibilityChanged:function(c){c={layerNodes:this._getNodesArrayFromInfosArray(c)};this._emitEvent(g.EVENT_VISIBILITY_CHANGE,c)},_onToggleChanged:function(c){c={layerNodes:this._getNodesArrayFromInfosArray(c)};
this._emitEvent(g.EVENT_TOOGLE_CHANGE,c)},_onFilterChanged:function(c){c={layerNodes:this._getNodesArrayFromInfosArray(c)};this._emitEvent(g.EVENT_FILTER_CHANGE,c)},_onRendererChanged:function(c){c={layerNodes:this._getNodesArrayFromInfosArray(c)};this._emitEvent(g.EVENT_RENDERER_CHANGE,c)},_onOpacityChanged:function(c){c={layerNodes:this._getNodesArrayFromInfosArray(c)};this._emitEvent(g.EVENT_OPACITY_CHANGE,c)},_onTimeExtentChanged:function(c){c={layerNodes:this._getNodesArrayFromInfosArray(c)};
this._emitEvent(g.EVENT_TIME_EXTENT_CHANGE,c)}}),f=null;g.getInstance=function(){f&&f._layerInfos._objectId===h.getInstanceSync()._objectId||(f&&f.destroy(),f=new g(h.getInstanceSync()));return f};g.createInstance=function(c){return new g(h.createInstance(c))};m.mixin(g,{STRUCTURE_CHANGE_ADD:h.ADDED,STRUCTURE_CHANGE_REMOVE:h.REMOVED,STRUCTURE_CHANGE_SUBNODE_ADD:h.SUBLAYER_ADDED,STRUCTURE_CHANGE_SUBNODE_REMOVE:h.SUBLAYER_REMOVED,STRUCTURE_CHANGE_NODE_UPDATE:h.UPDATED,STRUCTURE_CHANGE_REORDER:h.REORDERED,
EVENT_STRUCTURE_CHANGE:"structure-change",EVENT_TOOGLE_CHANGE:"toggle-change",EVENT_VISIBILITY_CHANGE:"visibility-change",EVENT_FILTER_CHANGE:"filter-change",EVENT_RENDERER_CHANGE:"renderer-change",EVENT_OPACITY_CHANGE:"opacity-change",EVENT_TIME_EXTENT_CHANGE:"time-extent-change"});return g})},"widgets/HucNavigation/JS2Shapefile":function(){define(["dojo","dijit","dojox"],function(u,v,m){(function(l,d){"object"===typeof window&&(l.JS2Shapefile=d())})(this,function(){"".lpad||(String.prototype.lpad=
function(a,c){for(var b=this;b.length<c;)b=a+b;return b});"".rpad||(String.prototype.rpad=function(a,c){for(var b=this;b.length<c;)b+=a;return b});Array.indexOf||(Array.prototype.indexOf=function(a){for(var b=0;b<this.length;b++)if(this[b]==a)return b;return-1});var l={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,10:10,11:11,12:12,13:13,14:14,15:15,16:16,17:17,18:18,19:19,20:20,21:21,22:22,23:23,24:24,25:25,26:26,27:27,28:28,29:29,30:30,31:31,32:32,33:33,34:34,35:35,36:36,37:37,38:38,39:39,40:40,41:41,
42:42,43:43,44:44,45:45,46:46,47:47,48:48,49:49,50:50,51:51,52:52,53:53,54:54,55:55,56:56,57:57,58:58,59:59,60:60,61:61,62:62,63:63,64:64,65:65,66:66,67:67,68:68,69:69,70:70,71:71,72:72,73:73,74:74,75:75,76:76,77:77,78:78,79:79,80:80,81:81,82:82,83:83,84:84,85:85,86:86,87:87,88:88,89:89,90:90,91:91,92:92,93:93,94:94,95:95,96:96,97:97,98:98,99:99,100:100,101:101,102:102,103:103,104:104,105:105,106:106,107:107,108:108,109:109,110:110,111:111,112:112,113:113,114:114,115:115,116:116,117:117,118:118,119:119,
120:120,121:121,122:122,123:123,124:124,125:125,126:126,127:127,1027:129,8225:135,1046:198,8222:132,1047:199,1168:165,1048:200,1113:154,1049:201,1045:197,1050:202,1028:170,160:160,1040:192,1051:203,164:164,166:166,167:167,169:169,171:171,172:172,173:173,174:174,1053:205,176:176,177:177,1114:156,181:181,182:182,183:183,8221:148,187:187,1029:189,1056:208,1057:209,1058:210,8364:136,1112:188,1115:158,1059:211,1060:212,1030:178,1061:213,1062:214,1063:215,1116:157,1064:216,1065:217,1031:175,1066:218,1067:219,
1068:220,1069:221,1070:222,1032:163,8226:149,1071:223,1072:224,8482:153,1073:225,8240:137,1118:162,1074:226,1110:179,8230:133,1075:227,1033:138,1076:228,1077:229,8211:150,1078:230,1119:159,1079:231,1042:194,1080:232,1034:140,1025:168,1081:233,1082:234,8212:151,1083:235,1169:180,1084:236,1052:204,1085:237,1035:142,1086:238,1087:239,1088:240,1089:241,1090:242,1036:141,1041:193,1091:243,1092:244,8224:134,1093:245,8470:185,1094:246,1054:206,1095:247,1096:248,8249:139,1097:249,1098:250,1044:196,1099:251,
1111:191,1055:207,1100:252,1038:161,8220:147,1101:253,8250:155,1102:254,8216:145,1103:255,1043:195,1105:184,1039:143,1026:128,1106:144,8218:130,1107:131,8217:146,1108:186,1109:190},d=String.fromCharCode,h={},g={POINT:1,POLYLINE:3,POLYGON:5},f,c,a=function(a,e){var b,h,p,k={};if("undefined"===typeof a&&"POINT"!==a&&"POLYLINE"!==a&&"POLYGON"!==a)return{successful:!1,message:"Unknown or unspecified shapefile type requested"};if(0===e.length)return{successful:!1,message:"No graphics of type "+a+" have been added!"};
var r;a:{b:{var q=e.length,M=100;switch(a){case "POINT":for(var H=28,F=1;F<q+1;F++)M+=H;break;case "POLYLINE":case "POLYGON":for(F=1;F<q+1;F++){var R=e[F-1],C=0,D;"POLYLINE"==a?D=R.geometry.paths.length:"POLYGON"==a&&(D=R.geometry.rings.length);for(var E=0;E<D;E++)C+=("POLYLINE"===a?R.geometry.paths[E]:R.geometry.rings[E]).length;H=52+4*D+16*C;M+=H}break;default:b=!1;p=h=void 0;break b}b=!0;h=M;p=100+8*q}if(!1===b)r=void 0;else{var N=h,m=p,u=new ArrayBuffer(N),v=new DataView(u),Q=new ArrayBuffer(m),
B=new DataView(Q);v.setInt32(0,9994);B.setInt32(0,9994);v.setInt32(28,1E3,!0);B.setInt32(28,1E3,!0);v.setInt32(32,g[a],!0);B.setInt32(32,g[a],!0);var x=Number.MAX_VALUE,Y=Number.MAX_VALUE,X=-Number.MAX_VALUE,ga=-Number.MAX_VALUE,A=e.length,G=100,ja=100,O,Z,da;switch(a){case "POINT":da=28;for(O=1;O<A+1;O++){Z=e[O-1];var V=Z.geometry.x,U=Z.geometry.y;V<x&&(x=V);V>X&&(X=V);U<Y&&(Y=U);U>ga&&(ga=U);var y=new DataView(u,G);y.setInt32(0,O);y.setInt32(4,10);y.setInt32(8,g[a],!0);y.setFloat64(12,V,!0);y.setFloat64(20,
U,!0);var S=new DataView(Q,ja);S.setInt32(0,G/2);S.setInt32(4,10);ja+=8;G+=da}break;case "POLYLINE":case "POLYGON":for(O=1;O<A+1;O++){Z=e[O-1];var z=Number.MAX_VALUE,J=Number.MAX_VALUE,wa=-Number.MAX_VALUE,Da=-Number.MAX_VALUE,xa;"POLYLINE"==a?xa=Z.geometry.paths.length:"POLYGON"==a&&(xa=Z.geometry.rings.length);for(var ca=[],qa=[],ra=0;ra<xa;ra++){var Na="POLYLINE"===a?Z.geometry.paths[ra]:Z.geometry.rings[ra],jb=Na.length;ca.push(qa.length);for(var sa=0;sa<jb;sa++)qa.push(Na[sa])}var Oa=qa.length,
Wa=52+4*xa;da=Wa+16*Oa;for(var Xa=da-8,Pa=new DataView(u,G+Wa),sa=0;sa<Oa;sa+=1){var ba=qa[sa];Pa.setFloat64(16*sa,ba[0],!0);Pa.setFloat64(16*sa+8,ba[1],!0);ba[0]<z&&(z=ba[0]);ba[0]>wa&&(wa=ba[0]);ba[1]<J&&(J=ba[1]);ba[1]>Da&&(Da=ba[1])}var fa=new DataView(u,G);fa.setInt32(0,O);fa.setInt32(4,Xa/2);fa.setInt32(8,g[a],!0);fa.setFloat64(12,z,!0);fa.setFloat64(20,J,!0);fa.setFloat64(28,wa,!0);fa.setFloat64(36,Da,!0);fa.setInt32(44,xa,!0);fa.setInt32(48,Oa,!0);for(ra=0;ra<ca.length;ra++)fa.setInt32(52+
4*ra,ca[ra],!0);var Qa=new DataView(Q,ja);Qa.setInt32(0,G/2);Qa.setInt32(4,Xa/2);wa>X&&(X=wa);z<x&&(x=z);Da>ga&&(ga=Da);J<Y&&(Y=J);ja+=8;G+=da}break;default:r={successful:!1,message:"unknown shape type specified"};break a}v.setFloat64(36,x,!0);v.setFloat64(44,Y,!0);v.setFloat64(52,X,!0);v.setFloat64(60,ga,!0);B.setFloat64(36,x,!0);B.setFloat64(44,Y,!0);B.setFloat64(52,X,!0);B.setFloat64(60,ga,!0);v.setInt32(24,N/2);B.setInt32(24,m/2);r={successful:!0,shape:u,shx:Q}}}for(var ea={},Ea=0;Ea<e.length;Ea++){var za=
e[Ea];if(za.attributes)for(var la in za.attributes)if(za.attributes.hasOwnProperty(la)){var ia=za.attributes[la];if(ea.hasOwnProperty(la))ea[la].length<ia.toString().length&&(ea[la].length=ia.toString().length);else switch(typeof ia){case "number":if(parseInt(ia)===ia)ea[la]={type:"N",length:ia.toString().length};else if(parseFloat(ia)===ia){var ta=ia.toString().length-(ia.toString().split(".")[0].length+1);ea[la]={type:"N",length:ia.toString().length,scale:ta}}break;case "boolean":ea[la]={type:"L"};
break;case "string":ea[la]={type:"C",length:ia.length}}}}var W=[],na;for(na in ea)if(ea.hasOwnProperty(na)){var Ia={name:na,type:ea[na].type,length:ea[na].length};ea[na].hasOwnProperty("length")&&(Ia.length=ea[na].length);ea[na].hasOwnProperty("scale")&&(Ia.scale=ea[na].scale);W.push(Ia)}0===W.length&&W.push({name:"ID_AUTO",type:"C",length:"18"});for(var Fa=e.length,Ja=W.length,Ya=32*Ja+1,Ra=Ya+31+1,Aa=1,K=0;K<Ja;K++){var aa=W[K].type||"C",T;switch(aa){case "L":T=1;break;case "D":T=8;break;case "N":T=
W[K].length&&19>W[K].length?W[K].length:18;break;case "C":T=W[K].length&&254>W[K].length?W[K].length:254}Aa+=parseInt(T)}for(var ua=Aa*Fa+1,va=new ArrayBuffer(Ra+ua),Ka=new DataView(va,32),kb=[],Aa=1,K=0;K<Ja;K++){var Sa=W[K].name.slice(0,10);-1==kb.indexOf(Sa)&&kb.push(Sa);for(var Ta=0;Ta<Sa.length;Ta++)Ka.setInt8(32*K+Ta,Sa.charCodeAt(Ta));aa=W[K].type||"C";"L"==aa?T=1:"D"==aa?T=8:"N"==aa?T=W[K].length&&19>W[K].length?W[K].length:18:"C"==aa?T=W[K].length&&254>W[K].length?W[K].length:254:(aa="C",
T=254);Ka.setInt8(32*K+11,aa.charCodeAt(0));Ka.setInt8(32*K+16,T);"N"==aa&&Ka.setInt8(32*K+17,W[K].scale||0);W[K].length=parseInt(T);Aa+=parseInt(T)}Ka.setInt8(Ya-1,13);var ya=new DataView(va);ya.setUint8(0,3);var Za=new Date;ya.setUint8(1,Za.getFullYear()-1900);ya.setUint8(2,Za.getMonth());ya.setUint8(3,Za.getDate());ya.setUint32(4,Fa,!0);ya.setUint16(8,Ra,!0);ya.setUint16(10,Aa,!0);"Win1251"==f&&ya.setUint16(29,87,!0);for(var Ba=new DataView(va,Ra),ma=0,Ga=0;Ga<Fa;Ga++){var $a=e[Ga].attributes||
{};Ba.setUint8(ma,32);for(var ma=ma+1,ab=0;ab<W.length;ab++){var bb=W[ab],cb=bb.name,La=bb.type||"C";T=parseInt(bb.length)||0;var ka;switch(f){case "UTF8":for(var db,eb=$a[cb]||Ga.toString(),Ua=[],Ma=0,lb=eb.length,Ha=void 0,fb=void 0;Ma<lb;)Ha=eb.charCodeAt(Ma++),55296<=Ha&&56319>=Ha&&Ma<lb?(fb=eb.charCodeAt(Ma++),56320==(fb&64512)?Ua.push(((Ha&1023)<<10)+(fb&1023)+65536):(Ua.push(Ha),Ma--)):Ua.push(Ha);db=Ua;for(var qb=db.length,mb=-1,nb=void 0,gb="";++mb<qb;){var nb=db[mb],rb=gb,hb;var ha=nb;if(0===
(ha&4294967168))hb=d(ha);else{var Ca="";if(0===(ha&4294965248))Ca=d(ha>>6&31|192);else if(0===(ha&4294901760)){if(55296<=ha&&57343>=ha)throw Error("Lone surrogate U+"+ha.toString(16).toUpperCase()+" is not a scalar value");Ca=d(ha>>12&15|224);Ca+=d(ha>>6&63|128)}else 0===(ha&4292870144)&&(Ca=d(ha>>18&7|240),Ca+=d(ha>>12&63|128),Ca+=d(ha>>6&63|128));hb=Ca+=d(ha&63|128)}gb=rb+hb}ka=gb;break;case "Win1251":for(var ib=$a[cb]||Ga.toString(),ob=[],Va=0;Va<ib.length;Va++){var pb=ib.charCodeAt(Va);if(!(pb in
l))throw"Character "+ib.charAt(Va)+" isn't supported by win1251!";ob.push(String.fromCharCode(l[pb]))}ka=ob.join("");break;default:ka=$a[cb]||Ga.toString()}if("L"==La)T=1,ka?Ba.setUint8(ma,84):Ba.setUint8(ma,70),ma+=1;else if("D"==La){T=8;var oa=ka.toString();oa.length!=T&&(oa="".lpad(" ",8));for(var pa=0;pa<T;pa++)Ba.setUint8(ma,oa.charCodeAt(pa)),ma+=1}else if("N"==La){if(oa=ka.toString(),0!==T)for(oa.length<T?oa=oa.lpad(" ",T):oa.length>T&&(oa=oa.substr(0,18)),pa=0;pa<T;pa++)Ba.setUint8(ma,oa.charCodeAt(pa)),
ma+=1}else if(("C"===La||""===La)&&0!==T)for("string"!==typeof ka&&(ka=ka.toString()),ka.length<T&&(ka=ka.rpad(" ",T)),pa=0;pa<T;pa++)Ba.setUint8(ma,ka.charCodeAt(pa)),ma+=1}}Ba.setUint8(ua-1,26);r.dbf=va;k.shp={};k.shp.blob=new Blob([r.shape],{type:"application/octet-stream"});k.shp.name=a+"_Huc_Navigation.shp";k.shx={};k.shx.blob=new Blob([r.shx],{type:"application/octet-stream"});k.shx.name=a+"_Huc_Navigation.shx";k.dbf={};k.dbf.blob=new Blob([r.dbf],{type:"application/octet-stream"});k.dbf.name=
a+"_Huc_Navigation.dbf";"UTF8"==f&&(k.cpg={},k.cpg.blob=new Blob(["65001"],{type:"plain/text"}),k.cpg.name=a+"_Huc_Navigation.cpg");c&&(k.prj={},k.prj.blob=new Blob([c],{type:"plain/text"}),k.prj.name=a+"_Huc_Navigation.prj");return{successful:!0,shapefile:k}};h.createShapeFiles=function(b,d,h){f=d;c=h;var e=[];h=[];d=[];for(var g=0;g<b.length;g++){var k=b[g];switch(k.geometry.type){case "point":e.push(k);break;case "polyline":h.push(k);break;case "polygon":d.push(k);break;default:throw Error("Unknown geometry type");
}}b=a("POINT",e);h=a("POLYLINE",h);d=a("POLYGON",d);return{pointShapefile:b,polylineShapefile:h,polygonShapefile:d}};return h})})},"widgets/HucNavigation/jszip":function(){define(["dojo","dijit","dojox"],function(u,v,m){(function(l){"object"===typeof exports&&"undefined"!==typeof module?module.exports=l():"function"===typeof define&&define.amd?define([],l):("undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:this).JSZip=l()})(function(){return function d(h,
g,f){function c(b,t){if(!g[b]){if(!h[b]){var e="function"==typeof require&&require;if(!t&&e)return e(b,!0);if(a)return a(b,!0);t=Error("Cannot find module '"+b+"'");throw t.code="MODULE_NOT_FOUND",t;}t=g[b]={exports:{}};h[b][0].call(t.exports,function(a){var d=h[b][1][a];return c(d?d:a)},t,t.exports,d,h,g,f)}return g[b].exports}for(var a="function"==typeof require&&require,b=0;b<f.length;b++)c(f[b]);return c}({1:[function(d,h,g){var f=d("./utils"),c=d("./support");g.encode=function(a){for(var b=[],
c,d,h,g,k=0,r=a.length,q=r,M="string"!==f.getTypeOf(a);k<a.length;)q=r-k,M?(c=a[k++],d=k<r?a[k++]:0,h=k<r?a[k++]:0):(c=a.charCodeAt(k++),d=k<r?a.charCodeAt(k++):0,h=k<r?a.charCodeAt(k++):0),g=c>>2,c=(c&3)<<4|d>>4,d=1<q?(d&15)<<2|h>>6:64,h=2<q?h&63:64,b.push("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/\x3d".charAt(g)+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/\x3d".charAt(c)+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/\x3d".charAt(d)+
"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/\x3d".charAt(h));return b.join("")};g.decode=function(a){var b,d,f,h,g,k=0,r=0;if("data:"===a.substr(0,5))throw Error("Invalid base64 input, it looks like a data url.");a=a.replace(/[^A-Za-z0-9\+\/\=]/g,"");h=3*a.length/4;"\x3d"===a.charAt(a.length-1)&&h--;"\x3d"===a.charAt(a.length-2)&&h--;if(0!==h%1)throw Error("Invalid base64 input, bad content length.");var q;for(q=c.uint8array?new Uint8Array(h|0):Array(h|0);k<a.length;)b="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/\x3d".indexOf(a.charAt(k++)),
d="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/\x3d".indexOf(a.charAt(k++)),h="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/\x3d".indexOf(a.charAt(k++)),g="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/\x3d".indexOf(a.charAt(k++)),b=b<<2|d>>4,d=(d&15)<<4|h>>2,f=(h&3)<<6|g,q[r++]=b,64!==h&&(q[r++]=d),64!==g&&(q[r++]=f);return q}},{"./support":30,"./utils":32}],2:[function(d,h,g){function f(a,b,c,d,e){this.compressedSize=a;this.uncompressedSize=
b;this.crc32=c;this.compression=d;this.compressedContent=e}var c=d("./external"),a=d("./stream/DataWorker"),b=d("./stream/DataLengthProbe"),e=d("./stream/Crc32Probe"),b=d("./stream/DataLengthProbe");f.prototype={getContentWorker:function(){var d=(new a(c.Promise.resolve(this.compressedContent))).pipe(this.compression.uncompressWorker()).pipe(new b("data_length")),e=this;d.on("end",function(){if(this.streamInfo.data_length!==e.uncompressedSize)throw Error("Bug : uncompressed data size mismatch");});
return d},getCompressedWorker:function(){return(new a(c.Promise.resolve(this.compressedContent))).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}};f.createWorkerFrom=function(a,c,d){return a.pipe(new e).pipe(new b("uncompressedSize")).pipe(c.compressWorker(d)).pipe(new b("compressedSize")).withStreamInfo("compression",c)};h.exports=f},{"./external":6,"./stream/Crc32Probe":25,
"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(d,h,g){var f=d("./stream/GenericWorker");g.STORE={magic:"\x00\x00",compressWorker:function(c){return new f("STORE compression")},uncompressWorker:function(){return new f("STORE decompression")}};g.DEFLATE=d("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(d,h,g){var f=d("./utils"),c=function(){for(var a,b=[],c=0;256>c;c++){a=c;for(var d=0;8>d;d++)a=a&1?3988292384^a>>>1:a>>>1;b[c]=a}return b}();h.exports=function(a,
b){if("undefined"===typeof a||!a.length)return 0;if("string"!==f.getTypeOf(a)){var d=0+a.length;b=(b|0)^-1;for(var h=0;h<d;h++)b=b>>>8^c[(b^a[h])&255];return b^-1}d=0+a.length;b=(b|0)^-1;for(h=0;h<d;h++)b=b>>>8^c[(b^a.charCodeAt(h))&255];return b^-1}},{"./utils":32}],5:[function(d,h,g){g.base64=!1;g.binary=!1;g.dir=!1;g.createFolders=!0;g.date=null;g.compression=null;g.compressionOptions=null;g.comment=null;g.unixPermissions=null;g.dosPermissions=null},{}],6:[function(d,h,g){g=null;g="undefined"!==
typeof Promise?Promise:d("lie");h.exports={Promise:g}},{lie:58}],7:[function(d,h,g){function f(a,d){b.call(this,"FlateWorker/"+a);this._pako=new c[a]({raw:!0,level:d.level||-1});this.meta={};var e=this;this._pako.onData=function(a){e.push({data:a,meta:e.meta})}}h="undefined"!==typeof Uint8Array&&"undefined"!==typeof Uint16Array&&"undefined"!==typeof Uint32Array;var c=d("pako"),a=d("./utils"),b=d("./stream/GenericWorker"),e=h?"uint8array":"array";g.magic="\b\x00";a.inherits(f,b);f.prototype.processChunk=
function(b){this.meta=b.meta;this._pako.push(a.transformTo(e,b.data),!1)};f.prototype.flush=function(){b.prototype.flush.call(this);this._pako.push([],!0)};f.prototype.cleanUp=function(){b.prototype.cleanUp.call(this);this._pako=null};g.compressWorker=function(a){return new f("Deflate",a)};g.uncompressWorker=function(){return new f("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:59}],8:[function(d,h,g){function f(b,c,d,e){a.call(this,"ZipFileWorker");this.bytesWritten=0;this.zipComment=
c;this.zipPlatform=d;this.encodeFileName=e;this.streamFiles=b;this.accumulate=!1;this.contentBuffer=[];this.dirRecords=[];this.entriesCount=this.currentSourceOffset=0;this.currentFile=null;this._sources=[]}var c=d("../utils"),a=d("../stream/GenericWorker"),b=d("../utf8"),e=d("../crc32"),t=d("../signature"),n=function(a,b){var c="",d;for(d=0;d<b;d++)c+=String.fromCharCode(a&255),a>>>=8;return c},p=function(a,d,f,h,k,g){var r=a.file,p=a.compression,E=g!==b.utf8encode,F=c.transformTo("string",g(r.name)),
q=c.transformTo("string",b.utf8encode(r.name)),H=r.comment;g=c.transformTo("string",g(H));var M=c.transformTo("string",b.utf8encode(H)),R=q.length!==r.name.length,B=M.length!==H.length,x=H="",x="",Y=r.dir,x=r.date,X=0,m=0,A=0;if(!d||f)X=a.crc32,m=a.compressedSize,A=a.uncompressedSize;a=0;d&&(a|=8);E||!R&&!B||(a|=2048);E=d=0;Y&&(d|=16);"UNIX"===k?(E=798,(r=k=r.unixPermissions)||(r=Y?16893:33204),d|=(r&65535)<<16):(E=20,d|=(r.dosPermissions||0)&63);k=x.getUTCHours();k=k<<6|x.getUTCMinutes();k=k<<5|
x.getUTCSeconds()/2;r=x.getUTCFullYear()-1980;r=r<<4|x.getUTCMonth()+1;r=r<<5|x.getUTCDate();R&&(x=n(1,1)+n(e(F),4)+q,H+="up"+n(x.length,2)+x);B&&(x=n(1,1)+n(e(g),4)+M,H+="uc"+n(x.length,2)+x);q="\n\x00"+n(a,2);q+=p.magic;q+=n(k,2);q+=n(r,2);q+=n(X,4);q+=n(m,4);q+=n(A,4);q+=n(F.length,2);q+=n(H.length,2);p=t.LOCAL_FILE_HEADER+q+F+H;h=t.CENTRAL_FILE_HEADER+n(E,2)+q+n(g.length,2)+"\x00\x00\x00\x00"+n(d,4)+n(h,4)+F+H+g;return{fileRecord:p,dirRecord:h}},k=function(a){var b="";return b=t.DATA_DESCRIPTOR+
n(a.crc32,4)+n(a.compressedSize,4)+n(a.uncompressedSize,4)};c.inherits(f,a);f.prototype.push=function(b){var c=b.meta.percent||0,d=this.entriesCount,e=this._sources.length;this.accumulate?this.contentBuffer.push(b):(this.bytesWritten+=b.data.length,a.prototype.push.call(this,{data:b.data,meta:{currentFile:this.currentFile,percent:d?(c+100*(d-e-1))/d:100}}))};f.prototype.openedSource=function(a){this.currentSourceOffset=this.bytesWritten;this.currentFile=a.file.name;var b=this.streamFiles&&!a.file.dir;
b?(a=p(a,b,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName),this.push({data:a.fileRecord,meta:{percent:0}})):this.accumulate=!0};f.prototype.closedSource=function(a){this.accumulate=!1;var b=this.streamFiles&&!a.file.dir,c=p(a,b,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.dirRecords.push(c.dirRecord);if(b)this.push({data:k(a),meta:{percent:100}});else for(this.push({data:c.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());
this.currentFile=null};f.prototype.flush=function(){for(var a=this.bytesWritten,b=0;b<this.dirRecords.length;b++)this.push({data:this.dirRecords[b],meta:{percent:100}});var b=this.dirRecords.length,d=this.bytesWritten-a,e="",e=c.transformTo("string",(0,this.encodeFileName)(this.zipComment)),e=t.CENTRAL_DIRECTORY_END+"\x00\x00\x00\x00"+n(b,2)+n(b,2)+n(d,4)+n(a,4)+n(e.length,2)+e;this.push({data:e,meta:{percent:100}})};f.prototype.prepareNextSource=function(){this.previous=this._sources.shift();this.openedSource(this.previous.streamInfo);
this.isPaused?this.previous.pause():this.previous.resume()};f.prototype.registerPrevious=function(a){this._sources.push(a);var b=this;a.on("data",function(a){b.processChunk(a)});a.on("end",function(){b.closedSource(b.previous.streamInfo);b._sources.length?b.prepareNextSource():b.end()});a.on("error",function(a){b.error(a)});return this};f.prototype.resume=function(){if(!a.prototype.resume.call(this))return!1;if(!this.previous&&this._sources.length)return this.prepareNextSource(),!0;if(!this.previous&&
!this._sources.length&&!this.generatedError)return this.end(),!0};f.prototype.error=function(b){var c=this._sources;if(!a.prototype.error.call(this,b))return!1;for(var d=0;d<c.length;d++)try{c[d].error(b)}catch(H){}return!0};f.prototype.lock=function(){a.prototype.lock.call(this);for(var b=this._sources,c=0;c<b.length;c++)b[c].lock()};h.exports=f},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(d,h,g){var f=d("../compressions"),c=d("./ZipFileWorker");
g.generateWorker=function(a,b,d){var e=new c(b.streamFiles,d,b.platform,b.encodeFileName),h=0;try{a.forEach(function(a,c){h++;var d=c.options.compression||b.compression,g=f[d];if(!g)throw Error(d+" is not a valid compression method !");var d=c.dir,k=c.date;c._compressWorker(g,c.options.compressionOptions||b.compressionOptions||{}).withStreamInfo("file",{name:a,dir:d,date:k,comment:c.comment||"",unixPermissions:c.unixPermissions,dosPermissions:c.dosPermissions}).pipe(e)}),e.entriesCount=h}catch(p){e.error(p)}return e}},
{"../compressions":3,"./ZipFileWorker":8}],10:[function(d,h,g){function f(){if(!(this instanceof f))return new f;if(arguments.length)throw Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files={};this.comment=null;this.root="";this.clone=function(){var c=new f,a;for(a in this)"function"!==typeof this[a]&&(c[a]=this[a]);return c}}f.prototype=d("./object");f.prototype.loadAsync=d("./load");f.support=d("./support");f.defaults=d("./defaults");
f.version="3.1.3";f.loadAsync=function(c,a){return(new f).loadAsync(c,a)};f.external=d("./external");h.exports=f},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(d,h,g){function f(b){return new a.Promise(function(a,c){var d=b.decompressed.getContentWorker().pipe(new t);d.on("error",function(a){c(a)}).on("end",function(){d.streamInfo.crc32!==b.decompressed.crc32?c(Error("Corrupted zip : CRC32 mismatch")):a()}).resume()})}var c=d("./utils"),a=d("./external"),b=
d("./utf8"),c=d("./utils"),e=d("./zipEntries"),t=d("./stream/Crc32Probe"),n=d("./nodejsUtils");h.exports=function(d,h){var g=this;h=c.extend(h||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:b.utf8decode});return n.isNode&&n.isStream(d)?a.Promise.reject(Error("JSZip can't accept a stream when loading a zip file.")):c.prepareContent("the loaded zip file",d,!0,h.optimizedBinaryString,h.base64).then(function(a){var b=new e(h);b.load(a);return b}).then(function(b){var c=
[a.Promise.resolve(b)];b=b.files;if(h.checkCRC32)for(var d=0;d<b.length;d++)c.push(f(b[d]));return a.Promise.all(c)}).then(function(a){a=a.shift();for(var b=a.files,c=0;c<b.length;c++){var d=b[c];g.file(d.fileNameStr,d.decompressed,{binary:!0,optimizedBinaryString:!0,date:d.date,dir:d.dir,comment:d.fileCommentStr.length?d.fileCommentStr:null,unixPermissions:d.unixPermissions,dosPermissions:d.dosPermissions,createFolders:h.createFolders})}a.zipComment.length&&(g.comment=a.zipComment);return g})}},
{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(d,h,g){function f(a,b){c.call(this,"Nodejs stream input adapter for "+a);this._upstreamEnded=!1;this._bindStream(b)}g=d("../utils");var c=d("../stream/GenericWorker");g.inherits(f,c);f.prototype._bindStream=function(a){var b=this;this._stream=a;a.pause();a.on("data",function(a){b.push({data:a,meta:{percent:0}})}).on("error",function(a){b.isPaused?this.generatedError=a:b.error(a)}).on("end",
function(){b.isPaused?b._upstreamEnded=!0:b.end()})};f.prototype.pause=function(){if(!c.prototype.pause.call(this))return!1;this._stream.pause();return!0};f.prototype.resume=function(){if(!c.prototype.resume.call(this))return!1;this._upstreamEnded?this.end():this._stream.resume();return!0};h.exports=f},{"../stream/GenericWorker":28,"../utils":32}],13:[function(d,h,g){function f(a,b,d){c.call(this,b);this._helper=a;var e=this;a.on("data",function(a,b){e.push(a)||e._helper.pause();d&&d(b)}).on("error",
function(a){e.emit("error",a)}).on("end",function(){e.push(null)})}var c=d("readable-stream").Readable;d("util").inherits(f,c);f.prototype._read=function(){this._helper.resume()};h.exports=f},{"readable-stream":16,util:void 0}],14:[function(d,h,g){h.exports={isNode:"undefined"!==typeof Buffer,newBuffer:function(d,c){return new Buffer(d,c)},isBuffer:function(d){return Buffer.isBuffer(d)},isStream:function(d){return d&&"function"===typeof d.on&&"function"===typeof d.pause&&"function"===typeof d.resume}}},
{}],15:[function(d,h,g){var f=d("./utf8"),c=d("./utils"),a=d("./stream/GenericWorker"),b=d("./stream/StreamHelper"),e=d("./defaults"),t=d("./compressedObject"),n=d("./zipObject"),p=d("./generate"),k=d("./nodejsUtils"),r=d("./nodejs/NodejsStreamInputAdapter"),q=function(b,d,f){var h=c.getTypeOf(d),g,p=c.extend(f||{},e);p.date=p.date||new Date;null!==p.compression&&(p.compression=p.compression.toUpperCase());"string"===typeof p.unixPermissions&&(p.unixPermissions=parseInt(p.unixPermissions,8));p.unixPermissions&&
p.unixPermissions&16384&&(p.dir=!0);p.dosPermissions&&p.dosPermissions&16&&(p.dir=!0);p.dir&&(b=M(b));var C;if(C=p.createFolders)g=b,"/"===g.slice(-1)&&(g=g.substring(0,g.length-1)),C=g.lastIndexOf("/"),C=g=0<C?g.substring(0,C):"";C&&H.call(this,g,!0);h="string"===h&&!1===p.binary&&!1===p.base64;f&&"undefined"!==typeof f.binary||(p.binary=!h);if(d instanceof t&&0===d.uncompressedSize||p.dir||!d||0===d.length)p.base64=!1,p.binary=!0,d="",p.compression="STORE",h="string";f=null;f=d instanceof t||d instanceof
a?d:k.isNode&&k.isStream(d)?new r(b,d):c.prepareContent(b,d,p.binary,p.optimizedBinaryString,p.base64);d=new n(b,f,p);this.files[b]=d},M=function(a){"/"!==a.slice(-1)&&(a+="/");return a},H=function(a,b){b="undefined"!==typeof b?b:e.createFolders;a=M(a);this.files[a]||q.call(this,a,null,{dir:!0,createFolders:b});return this.files[a]};h.exports={load:function(){throw Error("This method has been removed in JSZip 3.0, please check the upgrade guide.");},forEach:function(a){var b,c,d;for(b in this.files)this.files.hasOwnProperty(b)&&
(d=this.files[b],(c=b.slice(this.root.length,b.length))&&b.slice(0,this.root.length)===this.root&&a(c,d))},filter:function(a){var b=[];this.forEach(function(c,d){a(c,d)&&b.push(d)});return b},file:function(a,b,c){if(1===arguments.length){if("[object RegExp]"===Object.prototype.toString.call(a)){var d=a;return this.filter(function(a,b){return!b.dir&&d.test(a)})}var e=this.files[this.root+a];return e&&!e.dir?e:null}a=this.root+a;q.call(this,a,b,c);return this},folder:function(a){if(!a)return this;if("[object RegExp]"===
Object.prototype.toString.call(a))return this.filter(function(b,c){return c.dir&&a.test(b)});var b=H.call(this,this.root+a),c=this.clone();c.root=b.name;return c},remove:function(a){a=this.root+a;var b=this.files[a];b||("/"!==a.slice(-1)&&(a+="/"),b=this.files[a]);if(b&&!b.dir)delete this.files[a];else for(var b=this.filter(function(b,c){return c.name.slice(0,a.length)===a}),c=0;c<b.length;c++)delete this.files[b[c].name];return this},generate:function(a){throw Error("This method has been removed in JSZip 3.0, please check the upgrade guide.");
},generateInternalStream:function(d){var e,h={};try{h=c.extend(d||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:f.utf8encode});h.type=h.type.toLowerCase();h.compression=h.compression.toUpperCase();"binarystring"===h.type&&(h.type="string");if(!h.type)throw Error("No output type specified.");c.checkSupport(h.type);if("darwin"===h.platform||"freebsd"===h.platform||"linux"===h.platform||"sunos"===h.platform)h.platform=
"UNIX";"win32"===h.platform&&(h.platform="DOS");e=p.generateWorker(this,h,h.comment||this.comment||"")}catch(D){e=new a("error"),e.error(D)}return new b(e,h.type||"string",h.mimeType)},generateAsync:function(a,b){return this.generateInternalStream(a).accumulate(b)},generateNodeStream:function(a,b){a=a||{};a.type||(a.type="nodebuffer");return this.generateInternalStream(a).toNodejsStream(b)}}},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,
"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(d,h,g){h.exports=d("stream")},{stream:void 0}],17:[function(d,h,g){function f(a){c.call(this,a);for(var b=0;b<this.data.length;b++)a[b]&=255}var c=d("./DataReader");d("../utils").inherits(f,c);f.prototype.byteAt=function(a){return this.data[this.zero+a]};f.prototype.lastIndexOfSignature=function(a){var b=a.charCodeAt(0),c=a.charCodeAt(1),d=a.charCodeAt(2);a=a.charCodeAt(3);for(var f=this.length-
4;0<=f;--f)if(this.data[f]===b&&this.data[f+1]===c&&this.data[f+2]===d&&this.data[f+3]===a)return f-this.zero;return-1};f.prototype.readAndCheckSignature=function(a){var b=a.charCodeAt(0),c=a.charCodeAt(1),d=a.charCodeAt(2);a=a.charCodeAt(3);var f=this.readData(4);return b===f[0]&&c===f[1]&&d===f[2]&&a===f[3]};f.prototype.readData=function(a){this.checkOffset(a);if(0===a)return[];var b=this.data.slice(this.zero+this.index,this.zero+this.index+a);this.index+=a;return b};h.exports=f},{"../utils":32,
"./DataReader":18}],18:[function(d,h,g){function f(a){this.data=a;this.length=a.length;this.zero=this.index=0}var c=d("../utils");f.prototype={checkOffset:function(a){this.checkIndex(this.index+a)},checkIndex:function(a){if(this.length<this.zero+a||0>a)throw Error("End of data reached (data length \x3d "+this.length+", asked index \x3d "+a+"). Corrupted zip ?");},setIndex:function(a){this.checkIndex(a);this.index=a},skip:function(a){this.setIndex(this.index+a)},byteAt:function(a){},readInt:function(a){var b=
0,c;this.checkOffset(a);for(c=this.index+a-1;c>=this.index;c--)b=(b<<8)+this.byteAt(c);this.index+=a;return b},readString:function(a){return c.transformTo("string",this.readData(a))},readData:function(a){},lastIndexOfSignature:function(a){},readAndCheckSignature:function(a){},readDate:function(){var a=this.readInt(4);return new Date(Date.UTC((a>>25&127)+1980,(a>>21&15)-1,a>>16&31,a>>11&31,a>>5&63,(a&31)<<1))}};h.exports=f},{"../utils":32}],19:[function(d,h,g){function f(a){c.call(this,a)}var c=d("./Uint8ArrayReader");
d("../utils").inherits(f,c);f.prototype.readData=function(a){this.checkOffset(a);var b=this.data.slice(this.zero+this.index,this.zero+this.index+a);this.index+=a;return b};h.exports=f},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(d,h,g){function f(a){c.call(this,a)}var c=d("./DataReader");d("../utils").inherits(f,c);f.prototype.byteAt=function(a){return this.data.charCodeAt(this.zero+a)};f.prototype.lastIndexOfSignature=function(a){return this.data.lastIndexOf(a)-this.zero};f.prototype.readAndCheckSignature=
function(a){var b=this.readData(4);return a===b};f.prototype.readData=function(a){this.checkOffset(a);var b=this.data.slice(this.zero+this.index,this.zero+this.index+a);this.index+=a;return b};h.exports=f},{"../utils":32,"./DataReader":18}],21:[function(d,h,g){function f(a){c.call(this,a)}var c=d("./ArrayReader");d("../utils").inherits(f,c);f.prototype.readData=function(a){this.checkOffset(a);if(0===a)return new Uint8Array(0);var b=this.data.subarray(this.zero+this.index,this.zero+this.index+a);this.index+=
a;return b};h.exports=f},{"../utils":32,"./ArrayReader":17}],22:[function(d,h,g){var f=d("../utils"),c=d("../support"),a=d("./ArrayReader"),b=d("./StringReader"),e=d("./NodeBufferReader"),t=d("./Uint8ArrayReader");h.exports=function(d){var h=f.getTypeOf(d);f.checkSupport(h);return"string"!==h||c.uint8array?"nodebuffer"===h?new e(d):c.uint8array?new t(f.transformTo("uint8array",d)):new a(f.transformTo("array",d)):new b(d)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,
"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(d,h,g){g.LOCAL_FILE_HEADER="PK\u0003\u0004";g.CENTRAL_FILE_HEADER="PK\u0001\u0002";g.CENTRAL_DIRECTORY_END="PK\u0005\u0006";g.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\u0006\u0007";g.ZIP64_CENTRAL_DIRECTORY_END="PK\u0006\u0006";g.DATA_DESCRIPTOR="PK\u0007\b"},{}],24:[function(d,h,g){function f(a){c.call(this,"ConvertWorker to "+a);this.destType=a}var c=d("./GenericWorker"),a=d("../utils");a.inherits(f,c);f.prototype.processChunk=function(b){this.push({data:a.transformTo(this.destType,
b.data),meta:b.meta})};h.exports=f},{"../utils":32,"./GenericWorker":28}],25:[function(d,h,g){function f(){c.call(this,"Crc32Probe");this.withStreamInfo("crc32",0)}var c=d("./GenericWorker"),a=d("../crc32");d("../utils").inherits(f,c);f.prototype.processChunk=function(b){this.streamInfo.crc32=a(b.data,this.streamInfo.crc32||0);this.push(b)};h.exports=f},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(d,h,g){function f(a){c.call(this,"DataLengthProbe for "+a);this.propName=a;this.withStreamInfo(a,
0)}g=d("../utils");var c=d("./GenericWorker");g.inherits(f,c);f.prototype.processChunk=function(a){a&&(this.streamInfo[this.propName]=(this.streamInfo[this.propName]||0)+a.data.length);c.prototype.processChunk.call(this,a)};h.exports=f},{"../utils":32,"./GenericWorker":28}],27:[function(d,h,g){function f(b){a.call(this,"DataWorker");var d=this;this.dataIsReady=!1;this.max=this.index=0;this.data=null;this.type="";this._tickScheduled=!1;b.then(function(a){d.dataIsReady=!0;d.data=a;d.max=a&&a.length||
0;d.type=c.getTypeOf(a);d.isPaused||d._tickAndRepeat()},function(a){d.error(a)})}var c=d("../utils"),a=d("./GenericWorker");c.inherits(f,a);f.prototype.cleanUp=function(){a.prototype.cleanUp.call(this);this.data=null};f.prototype.resume=function(){if(!a.prototype.resume.call(this))return!1;!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,c.delay(this._tickAndRepeat,[],this));return!0};f.prototype._tickAndRepeat=function(){this._tickScheduled=!1;this.isPaused||this.isFinished||(this._tick(),
this.isFinished||(c.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))};f.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var a=null,c=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case "string":a=this.data.substring(this.index,c);break;case "uint8array":a=this.data.subarray(this.index,c);break;case "array":case "nodebuffer":a=this.data.slice(this.index,c)}this.index=c;return this.push({data:a,meta:{percent:this.max?
this.index/this.max*100:0}})};h.exports=f},{"../utils":32,"./GenericWorker":28}],28:[function(d,h,g){function f(c){this.name=c||"default";this.streamInfo={};this.generatedError=null;this.extraStreamInfo={};this.isPaused=!0;this.isLocked=this.isFinished=!1;this._listeners={data:[],end:[],error:[]};this.previous=null}f.prototype={push:function(c){this.emit("data",c)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(c){this.emit("error",
c)}return!0},error:function(c){if(this.isFinished)return!1;this.isPaused?this.generatedError=c:(this.isFinished=!0,this.emit("error",c),this.previous&&this.previous.error(c),this.cleanUp());return!0},on:function(c,a){this._listeners[c].push(a);return this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null;this._listeners=[]},emit:function(c,a){if(this._listeners[c])for(var b=0;b<this._listeners[c].length;b++)this._listeners[c][b].call(this,a)},pipe:function(c){return c.registerPrevious(this)},
registerPrevious:function(c){if(this.isLocked)throw Error("The stream '"+this+"' has already been used.");this.streamInfo=c.streamInfo;this.mergeStreamInfo();this.previous=c;var a=this;c.on("data",function(b){a.processChunk(b)});c.on("end",function(){a.end()});c.on("error",function(b){a.error(b)});return this},pause:function(){if(this.isPaused||this.isFinished)return!1;this.isPaused=!0;this.previous&&this.previous.pause();return!0},resume:function(){if(!this.isPaused||this.isFinished)return!1;var c=
this.isPaused=!1;this.generatedError&&(this.error(this.generatedError),c=!0);this.previous&&this.previous.resume();return!c},flush:function(){},processChunk:function(c){this.push(c)},withStreamInfo:function(c,a){this.extraStreamInfo[c]=a;this.mergeStreamInfo();return this},mergeStreamInfo:function(){for(var c in this.extraStreamInfo)this.extraStreamInfo.hasOwnProperty(c)&&(this.streamInfo[c]=this.extraStreamInfo[c])},lock:function(){if(this.isLocked)throw Error("The stream '"+this+"' has already been used.");
this.isLocked=!0;this.previous&&this.previous.lock()},toString:function(){var c="Worker "+this.name;return this.previous?this.previous+" -\x3e "+c:c}};h.exports=f},{}],29:[function(d,h,g){function f(a,b){var c,d=0,e=null;for(c=e=0;c<b.length;c++)e+=b[c].length;switch(a){case "string":return b.join("");case "array":return Array.prototype.concat.apply([],b);case "uint8array":e=new Uint8Array(e);for(c=0;c<b.length;c++)e.set(b[c],d),d+=b[c].length;return e;case "nodebuffer":return Buffer.concat(b);default:throw Error("concat : unsupported type '"+
a+"'");}}function c(a,c){return new p.Promise(function(d,e){var h=[],g=a._internalType,k=a._outputType,r=a._mimeType;a.on("data",function(a,b){h.push(a);c&&c(b)}).on("error",function(a){h=[];e(a)}).on("end",function(){try{var a;a:{var c=h,p=null;switch(k){case "blob":a=b.newBlob(c,r);break a;case "base64":p=f(g,c);a=n.encode(p);break a;default:p=f(g,c),a=b.transformTo(k,p)}}d(a)}catch(P){e(P)}h=[]}).resume()})}function a(a,c,d){var f=c;switch(c){case "blob":f="arraybuffer";break;case "arraybuffer":f=
"uint8array";break;case "base64":f="string"}try{this._internalType=f,this._outputType=c,this._mimeType=d,b.checkSupport(f),this._worker=a.pipe(new e(f)),a.lock()}catch(F){this._worker=new t("error"),this._worker.error(F)}}var b=d("../utils"),e=d("./ConvertWorker"),t=d("./GenericWorker"),n=d("../base64");g=d("../support");var p=d("../external"),k=null;if(g.nodestream)try{k=d("../nodejs/NodejsStreamOutputAdapter")}catch(r){}a.prototype={accumulate:function(a){return c(this,a)},on:function(a,c){var d=
this;if("data"===a)this._worker.on(a,function(a){c.call(d,a.data,a.meta)});else this._worker.on(a,function(){b.delay(c,arguments,d)});return this},resume:function(){b.delay(this._worker.resume,[],this._worker);return this},pause:function(){this._worker.pause();return this},toNodejsStream:function(a){b.checkSupport("nodestream");if("nodebuffer"!==this._outputType)throw Error(this._outputType+" is not supported by this method");return new k(this,{objectMode:"nodebuffer"!==this._outputType},a)}};h.exports=
a},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(d,h,g){g.base64=!0;g.array=!0;g.string=!0;g.arraybuffer="undefined"!==typeof ArrayBuffer&&"undefined"!==typeof Uint8Array;g.nodebuffer="undefined"!==typeof Buffer;g.uint8array="undefined"!==typeof Uint8Array;if("undefined"===typeof ArrayBuffer)g.blob=!1;else{h=new ArrayBuffer(0);try{g.blob=0===(new Blob([h],{type:"application/zip"})).size}catch(c){try{var f=
new (window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder);f.append(h);g.blob=0===f.getBlob("application/zip").size}catch(a){g.blob=!1}}}try{g.nodestream=!!d("readable-stream").Readable}catch(c){g.nodestream=!1}},{"readable-stream":16}],31:[function(d,h,g){function f(){t.call(this,"utf-8 decode");this.leftOver=null}function c(){t.call(this,"utf-8 encode")}var a=d("./utils"),b=d("./support"),e=d("./nodejsUtils"),t=d("./stream/GenericWorker"),n=Array(256);for(d=
0;256>d;d++)n[d]=252<=d?6:248<=d?5:240<=d?4:224<=d?3:192<=d?2:1;n[254]=n[254]=1;g.utf8encode=function(a){if(b.nodebuffer)return e.newBuffer(a,"utf-8");var c,d,f,h,g,n=a.length,p=0;for(h=0;h<n;h++)d=a.charCodeAt(h),55296===(d&64512)&&h+1<n&&(f=a.charCodeAt(h+1),56320===(f&64512)&&(d=65536+(d-55296<<10)+(f-56320),h++)),p+=128>d?1:2048>d?2:65536>d?3:4;c=b.uint8array?new Uint8Array(p):Array(p);for(h=g=0;g<p;h++)d=a.charCodeAt(h),55296===(d&64512)&&h+1<n&&(f=a.charCodeAt(h+1),56320===(f&64512)&&(d=65536+
(d-55296<<10)+(f-56320),h++)),128>d?c[g++]=d:(2048>d?c[g++]=192|d>>>6:(65536>d?c[g++]=224|d>>>12:(c[g++]=240|d>>>18,c[g++]=128|d>>>12&63),c[g++]=128|d>>>6&63),c[g++]=128|d&63);return c};g.utf8decode=function(c){if(b.nodebuffer)return a.transformTo("nodebuffer",c).toString("utf-8");c=a.transformTo(b.uint8array?"uint8array":"array",c);var d,e,f,h,g=c.length,p=Array(2*g);for(d=e=0;d<g;)if(f=c[d++],128>f)p[e++]=f;else if(h=n[f],4<h)p[e++]=65533,d+=h-1;else{for(f&=2===h?31:3===h?15:7;1<h&&d<g;)f=f<<6|
c[d++]&63,h--;1<h?p[e++]=65533:65536>f?p[e++]=f:(f-=65536,p[e++]=55296|f>>10&1023,p[e++]=56320|f&1023)}p.length!==e&&(p.subarray?p=p.subarray(0,e):p.length=e);return a.applyFromCharCode(p)};a.inherits(f,t);f.prototype.processChunk=function(c){var d=a.transformTo(b.uint8array?"uint8array":"array",c.data);if(this.leftOver&&this.leftOver.length){if(b.uint8array){var e=d,d=new Uint8Array(e.length+this.leftOver.length);d.set(this.leftOver,0);d.set(e,this.leftOver.length)}else d=this.leftOver.concat(d);
this.leftOver=null}var f,e=d.length;e>d.length&&(e=d.length);for(f=e-1;0<=f&&128===(d[f]&192);)f--;e=0>f?e:0===f?e:f+n[d[f]]>e?f:e;f=d;e!==d.length&&(b.uint8array?(f=d.subarray(0,e),this.leftOver=d.subarray(e,d.length)):(f=d.slice(0,e),this.leftOver=d.slice(e,d.length)));this.push({data:g.utf8decode(f),meta:c.meta})};f.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:g.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)};g.Utf8DecodeWorker=f;a.inherits(c,t);c.prototype.processChunk=
function(a){this.push({data:g.utf8encode(a.data),meta:a.meta})};g.Utf8EncodeWorker=c},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(d,h,g){function f(a){return a}function c(a,b){for(var c=0;c<a.length;++c)b[c]=a.charCodeAt(c)&255;return b}function a(a){var b=65536,c=g.getTypeOf(a),d=!0;"uint8array"===c?d=m.applyCanBeUsed.uint8array:"nodebuffer"===c&&(d=m.applyCanBeUsed.nodebuffer);if(d)for(;1<b;)try{return m.stringifyByChunk(a,c,b)}catch(E){b=Math.floor(b/
2)}return m.stringifyByChar(a)}function b(a,b){for(var c=0;c<a.length;c++)b[c]=a[c];return b}var e=d("./support"),t=d("./base64"),n=d("./nodejsUtils"),p=d("core-js/library/fn/set-immediate"),k=d("./external");g.newBlob=function(a,b){g.checkSupport("blob");try{return new Blob(a,{type:b})}catch(E){try{for(var c=new (window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder),d=0;d<a.length;d++)c.append(a[d]);return c.getBlob(b)}catch(N){throw Error("Bug : can't construct the Blob.");
}}};var r;try{r=e.uint8array&&1===String.fromCharCode.apply(null,new Uint8Array(1)).length}catch(F){r=!1}d=r;var q;try{q=e.nodebuffer&&1===String.fromCharCode.apply(null,n.newBuffer(1)).length}catch(F){q=!1}var m={stringifyByChunk:function(a,b,c){var d=[],e=0,f=a.length;if(f<=c)return String.fromCharCode.apply(null,a);for(;e<f;)"array"===b||"nodebuffer"===b?d.push(String.fromCharCode.apply(null,a.slice(e,Math.min(e+c,f)))):d.push(String.fromCharCode.apply(null,a.subarray(e,Math.min(e+c,f)))),e+=c;
return d.join("")},stringifyByChar:function(a){for(var b="",c=0;c<a.length;c++)b+=String.fromCharCode(a[c]);return b},applyCanBeUsed:{uint8array:d,nodebuffer:q}};g.applyFromCharCode=a;var H={};H.string={string:f,array:function(a){return c(a,Array(a.length))},arraybuffer:function(a){return H.string.uint8array(a).buffer},uint8array:function(a){return c(a,new Uint8Array(a.length))},nodebuffer:function(a){return c(a,n.newBuffer(a.length))}};H.array={string:a,array:f,arraybuffer:function(a){return(new Uint8Array(a)).buffer},
uint8array:function(a){return new Uint8Array(a)},nodebuffer:function(a){return n.newBuffer(a)}};H.arraybuffer={string:function(b){return a(new Uint8Array(b))},array:function(a){return b(new Uint8Array(a),Array(a.byteLength))},arraybuffer:f,uint8array:function(a){return new Uint8Array(a)},nodebuffer:function(a){return n.newBuffer(new Uint8Array(a))}};H.uint8array={string:a,array:function(a){return b(a,Array(a.length))},arraybuffer:function(a){var b=new Uint8Array(a.length);a.length&&b.set(a,0);return b.buffer},
uint8array:f,nodebuffer:function(a){return n.newBuffer(a)}};H.nodebuffer={string:a,array:function(a){return b(a,Array(a.length))},arraybuffer:function(a){return H.nodebuffer.uint8array(a).buffer},uint8array:function(a){return b(a,new Uint8Array(a.length))},nodebuffer:f};g.transformTo=function(a,b){b||(b="");if(!a)return b;g.checkSupport(a);var c=g.getTypeOf(b);return H[c][a](b)};g.getTypeOf=function(a){if("string"===typeof a)return"string";if("[object Array]"===Object.prototype.toString.call(a))return"array";
if(e.nodebuffer&&n.isBuffer(a))return"nodebuffer";if(e.uint8array&&a instanceof Uint8Array)return"uint8array";if(e.arraybuffer&&a instanceof ArrayBuffer)return"arraybuffer"};g.checkSupport=function(a){if(!e[a.toLowerCase()])throw Error(a+" is not supported by this platform");};g.MAX_VALUE_16BITS=65535;g.MAX_VALUE_32BITS=-1;g.pretty=function(a){var b="",c,d;for(d=0;d<(a||"").length;d++)c=a.charCodeAt(d),b+="\\x"+(16>c?"0":"")+c.toString(16).toUpperCase();return b};g.delay=function(a,b,c){p(function(){a.apply(c||
null,b||[])})};g.inherits=function(a,b){var c=function(){};c.prototype=b.prototype;a.prototype=new c};g.extend=function(){var a={},b,c;for(b=0;b<arguments.length;b++)for(c in arguments[b])arguments[b].hasOwnProperty(c)&&"undefined"===typeof a[c]&&(a[c]=arguments[b][c]);return a};g.prepareContent=function(a,b,d,f,h){return k.Promise.resolve(b).then(function(a){return e.blob&&(a instanceof Blob||-1!==["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(a)))&&"undefined"!==typeof FileReader?
new k.Promise(function(b,c){var d=new FileReader;d.onload=function(a){b(a.target.result)};d.onerror=function(a){c(a.target.error)};d.readAsArrayBuffer(a)}):a}).then(function(b){var E=g.getTypeOf(b);if(!E)return k.Promise.reject(Error("The data of '"+a+"' is in an unsupported format !"));"arraybuffer"===E?b=g.transformTo("uint8array",b):"string"===E&&(h?b=t.decode(b):d&&!0!==f&&(E=null,E=e.uint8array?new Uint8Array(b.length):Array(b.length),b=c(b,E)));return b})}},{"./base64":1,"./external":6,"./nodejsUtils":14,
"./support":30,"core-js/library/fn/set-immediate":36}],33:[function(d,h,g){function f(a){this.files=[];this.loadOptions=a}var c=d("./reader/readerFor"),a=d("./utils"),b=d("./signature"),e=d("./zipEntry");d("./utf8");var t=d("./support");f.prototype={checkSignature:function(b){if(!this.reader.readAndCheckSignature(b)){this.reader.index-=4;var c=this.reader.readString(4);throw Error("Corrupted zip or bug : unexpected signature ("+a.pretty(c)+", expected "+a.pretty(b)+")");}},isSignature:function(a,
b){var c=this.reader.index;this.reader.setIndex(a);a=this.reader.readString(4)===b;this.reader.setIndex(c);return a},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2);this.diskWithCentralDirStart=this.reader.readInt(2);this.centralDirRecordsOnThisDisk=this.reader.readInt(2);this.centralDirRecords=this.reader.readInt(2);this.centralDirSize=this.reader.readInt(4);this.centralDirOffset=this.reader.readInt(4);this.zipCommentLength=this.reader.readInt(2);var b=this.reader.readData(this.zipCommentLength),
b=a.transformTo(t.uint8array?"uint8array":"array",b);this.zipComment=this.loadOptions.decodeFileName(b)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8);this.reader.skip(4);this.diskNumber=this.reader.readInt(4);this.diskWithCentralDirStart=this.reader.readInt(4);this.centralDirRecordsOnThisDisk=this.reader.readInt(8);this.centralDirRecords=this.reader.readInt(8);this.centralDirSize=this.reader.readInt(8);this.centralDirOffset=this.reader.readInt(8);this.zip64ExtensibleData=
{};for(var a=this.zip64EndOfCentralSize-44,b,c,d;0<a;)b=this.reader.readInt(2),c=this.reader.readInt(4),d=this.reader.readData(c),this.zip64ExtensibleData[b]={id:b,length:c,value:d}},readBlockZip64EndOfCentralLocator:function(){this.diskWithZip64CentralDirStart=this.reader.readInt(4);this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8);this.disksCount=this.reader.readInt(4);if(1<this.disksCount)throw Error("Multi-volumes zip are not supported");},readLocalFiles:function(){var a,c;for(a=
0;a<this.files.length;a++)c=this.files[a],this.reader.setIndex(c.localHeaderOffset),this.checkSignature(b.LOCAL_FILE_HEADER),c.readLocalPart(this.reader),c.handleUTF8(),c.processAttributes()},readCentralDir:function(){var a;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(b.CENTRAL_FILE_HEADER);)a=new e({zip64:this.zip64},this.loadOptions),a.readCentralPart(this.reader),this.files.push(a);if(this.centralDirRecords!==this.files.length&&0!==this.centralDirRecords&&0===
this.files.length)throw Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length);},readEndOfCentral:function(){var c=this.reader.lastIndexOfSignature(b.CENTRAL_DIRECTORY_END);if(0>c){if(this.isSignature(0,b.LOCAL_FILE_HEADER))throw Error("Corrupted zip : can't find end of central directory");throw Error("Can't find end of central directory : is this a zip file ? If it is, see http://stuk.github.io/jszip/documentation/howto/read_zip.html");}this.reader.setIndex(c);
var d=c;this.checkSignature(b.CENTRAL_DIRECTORY_END);this.readBlockEndOfCentral();if(this.diskNumber===a.MAX_VALUE_16BITS||this.diskWithCentralDirStart===a.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===a.MAX_VALUE_16BITS||this.centralDirRecords===a.MAX_VALUE_16BITS||this.centralDirSize===a.MAX_VALUE_32BITS||this.centralDirOffset===a.MAX_VALUE_32BITS){this.zip64=!0;c=this.reader.lastIndexOfSignature(b.ZIP64_CENTRAL_DIRECTORY_LOCATOR);if(0>c)throw Error("Corrupted zip : can't find the ZIP64 end of central directory locator");
this.reader.setIndex(c);this.checkSignature(b.ZIP64_CENTRAL_DIRECTORY_LOCATOR);this.readBlockZip64EndOfCentralLocator();if(!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,b.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(b.ZIP64_CENTRAL_DIRECTORY_END),0>this.relativeOffsetEndOfZip64CentralDir))throw Error("Corrupted zip : can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir);this.checkSignature(b.ZIP64_CENTRAL_DIRECTORY_END);
this.readBlockZip64EndOfCentral()}c=this.centralDirOffset+this.centralDirSize;this.zip64&&(c=c+20+(12+this.zip64EndOfCentralSize));c=d-c;if(0<c)this.isSignature(d,b.CENTRAL_FILE_HEADER)||(this.reader.zero=c);else if(0>c)throw Error("Corrupted zip: missing "+Math.abs(c)+" bytes.");},prepareReader:function(a){this.reader=c(a)},load:function(a){this.prepareReader(a);this.readEndOfCentral();this.readCentralDir();this.readLocalFiles()}};h.exports=f},{"./reader/readerFor":22,"./signature":23,"./support":30,
"./utf8":31,"./utils":32,"./zipEntry":34}],34:[function(d,h,g){function f(a,b){this.options=a;this.loadOptions=b}var c=d("./reader/readerFor"),a=d("./utils"),b=d("./compressedObject"),e=d("./crc32"),t=d("./utf8"),n=d("./compressions"),p=d("./support");f.prototype={isEncrypted:function(){return 1===(this.bitFlag&1)},useUTF8:function(){return 2048===(this.bitFlag&2048)},readLocalPart:function(c){var d,e;c.skip(22);this.fileNameLength=c.readInt(2);e=c.readInt(2);this.fileName=c.readData(this.fileNameLength);
c.skip(e);if(-1===this.compressedSize||-1===this.uncompressedSize)throw Error("Bug or corrupted zip : didn't get enough informations from the central directory (compressedSize \x3d\x3d\x3d -1 || uncompressedSize \x3d\x3d\x3d -1)");a:{e=this.compressionMethod;for(d in n)if(n.hasOwnProperty(d)&&n[d].magic===e){d=n[d];break a}d=null}if(null===d)throw Error("Corrupted zip : compression "+a.pretty(this.compressionMethod)+" unknown (inner file : "+a.transformTo("string",this.fileName)+")");this.decompressed=
new b(this.compressedSize,this.uncompressedSize,this.crc32,d,c.readData(this.compressedSize))},readCentralPart:function(a){this.versionMadeBy=a.readInt(2);a.skip(2);this.bitFlag=a.readInt(2);this.compressionMethod=a.readString(2);this.date=a.readDate();this.crc32=a.readInt(4);this.compressedSize=a.readInt(4);this.uncompressedSize=a.readInt(4);var b=a.readInt(2);this.extraFieldsLength=a.readInt(2);this.fileCommentLength=a.readInt(2);this.diskNumberStart=a.readInt(2);this.internalFileAttributes=a.readInt(2);
this.externalFileAttributes=a.readInt(4);this.localHeaderOffset=a.readInt(4);if(this.isEncrypted())throw Error("Encrypted zip are not supported");a.skip(b);this.readExtraFields(a);this.parseZIP64ExtraField(a);this.fileComment=a.readData(this.fileCommentLength)},processAttributes:function(){this.dosPermissions=this.unixPermissions=null;var a=this.versionMadeBy>>8;this.dir=this.externalFileAttributes&16?!0:!1;0===a&&(this.dosPermissions=this.externalFileAttributes&63);3===a&&(this.unixPermissions=this.externalFileAttributes>>
16&65535);this.dir||"/"!==this.fileNameStr.slice(-1)||(this.dir=!0)},parseZIP64ExtraField:function(b){this.extraFields[1]&&(b=c(this.extraFields[1].value),this.uncompressedSize===a.MAX_VALUE_32BITS&&(this.uncompressedSize=b.readInt(8)),this.compressedSize===a.MAX_VALUE_32BITS&&(this.compressedSize=b.readInt(8)),this.localHeaderOffset===a.MAX_VALUE_32BITS&&(this.localHeaderOffset=b.readInt(8)),this.diskNumberStart===a.MAX_VALUE_32BITS&&(this.diskNumberStart=b.readInt(4)))},readExtraFields:function(a){var b=
a.index+this.extraFieldsLength,c,d,e;this.extraFields||(this.extraFields={});for(;a.index<b;)c=a.readInt(2),d=a.readInt(2),e=a.readData(d),this.extraFields[c]={id:c,length:d,value:e}},handleUTF8:function(){var b=p.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=t.utf8decode(this.fileName),this.fileCommentStr=t.utf8decode(this.fileComment);else{var c=this.findExtraFieldUnicodePath();null!==c?this.fileNameStr=c:(c=a.transformTo(b,this.fileName),this.fileNameStr=this.loadOptions.decodeFileName(c));
c=this.findExtraFieldUnicodeComment();null!==c?this.fileCommentStr=c:(b=a.transformTo(b,this.fileComment),this.fileCommentStr=this.loadOptions.decodeFileName(b))}},findExtraFieldUnicodePath:function(){var a=this.extraFields[28789];if(a){var b=c(a.value);return 1!==b.readInt(1)||e(this.fileName)!==b.readInt(4)?null:t.utf8decode(b.readData(a.length-5))}return null},findExtraFieldUnicodeComment:function(){var a=this.extraFields[25461];if(a){var b=c(a.value);return 1!==b.readInt(1)||e(this.fileComment)!==
b.readInt(4)?null:t.utf8decode(b.readData(a.length-5))}return null}};h.exports=f},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(d,h,g){var f=d("./stream/StreamHelper"),c=d("./stream/DataWorker"),a=d("./utf8"),b=d("./compressedObject"),e=d("./stream/GenericWorker");d=function(a,b,c){this.name=a;this.dir=c.dir;this.date=c.date;this.comment=c.comment;this.unixPermissions=c.unixPermissions;this.dosPermissions=c.dosPermissions;
this._data=b;this._dataBinary=c.binary;this.options={compression:c.compression,compressionOptions:c.compressionOptions}};d.prototype={internalStream:function(b){b=b.toLowerCase();var c="string"===b||"text"===b;if("binarystring"===b||"text"===b)b="string";var d=this._decompressWorker(),e=!this._dataBinary;e&&!c&&(d=d.pipe(new a.Utf8EncodeWorker));!e&&c&&(d=d.pipe(new a.Utf8DecodeWorker));return new f(d,b,"")},async:function(a,b){return this.internalStream(a).accumulate(b)},nodeStream:function(a,b){return this.internalStream(a||
"nodebuffer").toNodejsStream(b)},_compressWorker:function(c,d){if(this._data instanceof b&&this._data.compression.magic===c.magic)return this._data.getCompressedWorker();var e=this._decompressWorker();this._dataBinary||(e=e.pipe(new a.Utf8EncodeWorker));return b.createWorkerFrom(e,c,d)},_decompressWorker:function(){return this._data instanceof b?this._data.getContentWorker():this._data instanceof e?this._data:new c(this._data)}};g=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"];
for(var t=function(){throw Error("This method has been removed in JSZip 3.0, please check the upgrade guide.");},n=0;n<g.length;n++)d.prototype[g[n]]=t;h.exports=d},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(d,h,g){d("../modules/web.immediate");h.exports=d("../modules/_core").setImmediate},{"../modules/_core":40,"../modules/web.immediate":56}],37:[function(d,h,g){h.exports=function(d){if("function"!=typeof d)throw TypeError(d+
" is not a function!");return d}},{}],38:[function(d,h,g){var f=d("./_is-object");h.exports=function(c){if(!f(c))throw TypeError(c+" is not an object!");return c}},{"./_is-object":51}],39:[function(d,h,g){var f={}.toString;h.exports=function(c){return f.call(c).slice(8,-1)}},{}],40:[function(d,h,g){d=h.exports={version:"2.3.0"};"number"==typeof __e&&(__e=d)},{}],41:[function(d,h,g){var f=d("./_a-function");h.exports=function(c,a,b){f(c);if(void 0===a)return c;switch(b){case 1:return function(b){return c.call(a,
b)};case 2:return function(b,d){return c.call(a,b,d)};case 3:return function(b,d,f){return c.call(a,b,d,f)}}return function(){return c.apply(a,arguments)}}},{"./_a-function":37}],42:[function(d,h,g){h.exports=!d("./_fails")(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},{"./_fails":45}],43:[function(d,h,g){g=d("./_is-object");var f=d("./_global").document,c=g(f)&&g(f.createElement);h.exports=function(a){return c?f.createElement(a):{}}},{"./_global":46,"./_is-object":51}],
44:[function(d,h,g){var f=d("./_global"),c=d("./_core"),a=d("./_ctx"),b=d("./_hide"),e=function(d,h,g){var k=d&e.F,r=d&e.G,p=d&e.S,n=d&e.P,t=d&e.B,m=d&e.W,u=r?c:c[h]||(c[h]={}),C=u.prototype,p=r?f:p?f[h]:(f[h]||{}).prototype,D,E;r&&(g=h);for(D in g)h=!k&&p&&void 0!==p[D],h&&D in u||(E=h?p[D]:g[D],u[D]=r&&"function"!=typeof p[D]?g[D]:t&&h?a(E,f):m&&p[D]==E?function(a){var b=function(b,c,d){if(this instanceof a){switch(arguments.length){case 0:return new a;case 1:return new a(b);case 2:return new a(b,
c)}return new a(b,c,d)}return a.apply(this,arguments)};b.prototype=a.prototype;return b}(E):n&&"function"==typeof E?a(Function.call,E):E,n&&((u.virtual||(u.virtual={}))[D]=E,d&e.R&&C&&!C[D]&&b(C,D,E)))};e.F=1;e.G=2;e.S=4;e.P=8;e.B=16;e.W=32;e.U=64;e.R=128;h.exports=e},{"./_core":40,"./_ctx":41,"./_global":46,"./_hide":47}],45:[function(d,h,g){h.exports=function(d){try{return!!d()}catch(c){return!0}}},{}],46:[function(d,h,g){d=h.exports="undefined"!=typeof window&&Math==Math?window:"undefined"!=typeof self&&
self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=d)},{}],47:[function(d,h,g){var f=d("./_object-dp"),c=d("./_property-desc");h.exports=d("./_descriptors")?function(a,b,d){return f.f(a,b,c(1,d))}:function(a,b,c){a[b]=c;return a}},{"./_descriptors":42,"./_object-dp":52,"./_property-desc":53}],48:[function(d,h,g){h.exports=d("./_global").document&&document.documentElement},{"./_global":46}],49:[function(d,h,g){h.exports=!d("./_descriptors")&&!d("./_fails")(function(){return 7!=
Object.defineProperty(d("./_dom-create")("div"),"a",{get:function(){return 7}}).a})},{"./_descriptors":42,"./_dom-create":43,"./_fails":45}],50:[function(d,h,g){h.exports=function(d,c,a){var b=void 0===a;switch(c.length){case 0:return b?d():d.call(a);case 1:return b?d(c[0]):d.call(a,c[0]);case 2:return b?d(c[0],c[1]):d.call(a,c[0],c[1]);case 3:return b?d(c[0],c[1],c[2]):d.call(a,c[0],c[1],c[2]);case 4:return b?d(c[0],c[1],c[2],c[3]):d.call(a,c[0],c[1],c[2],c[3])}return d.apply(a,c)}},{}],51:[function(d,
h,g){h.exports=function(d){return"object"===typeof d?null!==d:"function"===typeof d}},{}],52:[function(d,h,g){var f=d("./_an-object"),c=d("./_ie8-dom-define"),a=d("./_to-primitive"),b=Object.defineProperty;g.f=d("./_descriptors")?Object.defineProperty:function(d,h,g){f(d);h=a(h,!0);f(g);if(c)try{return b(d,h,g)}catch(p){}if("get"in g||"set"in g)throw TypeError("Accessors not supported!");"value"in g&&(d[h]=g.value);return d}},{"./_an-object":38,"./_descriptors":42,"./_ie8-dom-define":49,"./_to-primitive":55}],
53:[function(d,h,g){h.exports=function(d,c){return{enumerable:!(d&1),configurable:!(d&2),writable:!(d&4),value:c}}},{}],54:[function(d,h,g){var f=d("./_ctx"),c=d("./_invoke"),a=d("./_html"),b=d("./_dom-create"),e=d("./_global"),t=e.process;g=e.setImmediate;var n=e.clearImmediate,p=e.MessageChannel,k=0,r={},q,m=function(){var a=+this;if(r.hasOwnProperty(a)){var b=r[a];delete r[a];b()}},H=function(a){m.call(a.data)};g&&n||(g=function(a){for(var b=[],d=1;arguments.length>d;)b.push(arguments[d++]);r[++k]=
function(){c("function"==typeof a?a:Function(a),b)};q(k);return k},n=function(a){delete r[a]},"process"==d("./_cof")(t)?q=function(a){t.nextTick(f(m,a,1))}:p?(d=new p,p=d.port2,d.port1.onmessage=H,q=f(p.postMessage,p,1)):e.addEventListener&&"function"==typeof postMessage&&!e.importScripts?(q=function(a){e.postMessage(a+"","*")},e.addEventListener("message",H,!1)):q="onreadystatechange"in b("script")?function(c){a.appendChild(b("script")).onreadystatechange=function(){a.removeChild(this);m.call(c)}}:
function(a){setTimeout(f(m,a,1),0)});h.exports={set:g,clear:n}},{"./_cof":39,"./_ctx":41,"./_dom-create":43,"./_global":46,"./_html":48,"./_invoke":50}],55:[function(d,h,g){var f=d("./_is-object");h.exports=function(c,a){if(!f(c))return c;var b,d;if(a&&"function"==typeof(b=c.toString)&&!f(d=b.call(c))||"function"==typeof(b=c.valueOf)&&!f(d=b.call(c))||!a&&"function"==typeof(b=c.toString)&&!f(d=b.call(c)))return d;throw TypeError("Can't convert object to primitive value");}},{"./_is-object":51}],56:[function(d,
h,g){h=d("./_export");d=d("./_task");h(h.G+h.B,{setImmediate:d.set,clearImmediate:d.clear})},{"./_export":44,"./_task":54}],57:[function(d,h,g){(function(d){function c(){p=!0;for(var a,b,c=k.length;c;){b=k;k=[];for(a=-1;++a<c;)b[a]();c=k.length}p=!1}var a=d.MutationObserver||d.WebKitMutationObserver,b;if(a){var e=0,a=new a(c),f=d.document.createTextNode("");a.observe(f,{characterData:!0});b=function(){f.data=e=++e%2}}else if(d.setImmediate||"undefined"===typeof d.MessageChannel)b="document"in d&&
"onreadystatechange"in d.document.createElement("script")?function(){var a=d.document.createElement("script");a.onreadystatechange=function(){c();a.onreadystatechange=null;a.parentNode.removeChild(a);a=null};d.document.documentElement.appendChild(a)}:function(){setTimeout(c,0)};else{var g=new d.MessageChannel;g.port1.onmessage=c;b=function(){g.port2.postMessage(0)}}var p,k=[];h.exports=function(a){1!==k.push(a)||p||b()}}).call(this,"undefined"!==typeof global?global:"undefined"!==typeof self?self:
"undefined"!==typeof window?window:{})},{}],58:[function(d,h,g){function f(){}function c(a){if("function"!==typeof a)throw new TypeError("resolver must be a function");this.state=m;this.queue=[];this.outcome=void 0;a!==f&&t(this,a)}function a(a,b,c){this.promise=a;"function"===typeof b&&(this.onFulfilled=b,this.callFulfilled=this.otherCallFulfilled);"function"===typeof c&&(this.onRejected=c,this.callRejected=this.otherCallRejected)}function b(a,b,c){p(function(){var d;try{d=b(c)}catch(D){return k.reject(a,
D)}d===a?k.reject(a,new TypeError("Cannot resolve promise with itself")):k.resolve(a,d)})}function e(a){var b=a&&a.then;if(a&&"object"===typeof a&&"function"===typeof b)return function(){b.apply(a,arguments)}}function t(a,b){function c(b){e||(e=!0,k.reject(a,b))}function d(b){e||(e=!0,k.resolve(a,b))}var e=!1,f=n(function(){b(d,c)});"error"===f.status&&c(f.value)}function n(a,b){var c={};try{c.value=a(b),c.status="success"}catch(C){c.status="error",c.value=C}return c}var p=d("immediate"),k={},r=["REJECTED"],
q=["FULFILLED"],m=["PENDING"];h.exports=c;c.prototype["catch"]=function(a){return this.then(null,a)};c.prototype.then=function(c,d){if("function"!==typeof c&&this.state===q||"function"!==typeof d&&this.state===r)return this;var e=new this.constructor(f);this.state!==m?b(e,this.state===q?c:d,this.outcome):this.queue.push(new a(e,c,d));return e};a.prototype.callFulfilled=function(a){k.resolve(this.promise,a)};a.prototype.otherCallFulfilled=function(a){b(this.promise,this.onFulfilled,a)};a.prototype.callRejected=
function(a){k.reject(this.promise,a)};a.prototype.otherCallRejected=function(a){b(this.promise,this.onRejected,a)};k.resolve=function(a,b){var c=n(e,b);if("error"===c.status)return k.reject(a,c.value);if(c=c.value)t(a,c);else{a.state=q;a.outcome=b;for(var c=-1,d=a.queue.length;++c<d;)a.queue[c].callFulfilled(b)}return a};k.reject=function(a,b){a.state=r;a.outcome=b;for(var c=-1,d=a.queue.length;++c<d;)a.queue[c].callRejected(b);return a};c.resolve=function(a){return a instanceof this?a:k.resolve(new this(f),
a)};c.reject=function(a){var b=new this(f);return k.reject(b,a)};c.all=function(a){function b(a,b){c.resolve(a).then(function(a){h[b]=a;++g!==d||e||(e=!0,k.resolve(p,h))},function(a){e||(e=!0,k.reject(p,a))})}var c=this;if("[object Array]"!==Object.prototype.toString.call(a))return this.reject(new TypeError("must be an array"));var d=a.length,e=!1;if(!d)return this.resolve([]);for(var h=Array(d),g=0,r=-1,p=new this(f);++r<d;)b(a[r],r);return p};c.race=function(a){function b(a){c.resolve(a).then(function(a){e||
(e=!0,k.resolve(g,a))},function(a){e||(e=!0,k.reject(g,a))})}var c=this;if("[object Array]"!==Object.prototype.toString.call(a))return this.reject(new TypeError("must be an array"));var d=a.length,e=!1;if(!d)return this.resolve([]);for(var h=-1,g=new this(f);++h<d;)b(a[h]);return g}},{immediate:57}],59:[function(d,h,g){g=d("./lib/utils/common").assign;var f=d("./lib/deflate"),c=d("./lib/inflate");d=d("./lib/zlib/constants");var a={};g(a,f,c,d);h.exports=a},{"./lib/deflate":60,"./lib/inflate":61,"./lib/utils/common":62,
"./lib/zlib/constants":65}],60:[function(d,h,g){function f(c){if(!(this instanceof f))return new f(c);c=this.options=b.assign({level:-1,method:8,chunkSize:16384,windowBits:15,memLevel:8,strategy:0,to:""},c||{});c.raw&&0<c.windowBits?c.windowBits=-c.windowBits:c.gzip&&0<c.windowBits&&16>c.windowBits&&(c.windowBits+=16);this.err=0;this.msg="";this.ended=!1;this.chunks=[];this.strm=new n;this.strm.avail_out=0;var d=a.deflateInit2(this.strm,c.level,c.method,c.windowBits,c.memLevel,c.strategy);if(0!==
d)throw Error(t[d]);c.header&&a.deflateSetHeader(this.strm,c.header);if(c.dictionary){c="string"===typeof c.dictionary?e.string2buf(c.dictionary):"[object ArrayBuffer]"===p.call(c.dictionary)?new Uint8Array(c.dictionary):c.dictionary;d=a.deflateSetDictionary(this.strm,c);if(0!==d)throw Error(t[d]);this._dict_set=!0}}function c(a,b){b=new f(b);b.push(a,!0);if(b.err)throw b.msg;return b.result}var a=d("./zlib/deflate"),b=d("./utils/common"),e=d("./utils/strings"),t=d("./zlib/messages"),n=d("./zlib/zstream"),
p=Object.prototype.toString;f.prototype.push=function(c,d){var f=this.strm,h=this.options.chunkSize;if(this.ended)return!1;d=d===~~d?d:!0===d?4:0;"string"===typeof c?f.input=e.string2buf(c):"[object ArrayBuffer]"===p.call(c)?f.input=new Uint8Array(c):f.input=c;f.next_in=0;f.avail_in=f.input.length;do{0===f.avail_out&&(f.output=new b.Buf8(h),f.next_out=0,f.avail_out=h);c=a.deflate(f,d);if(1!==c&&0!==c)return this.onEnd(c),this.ended=!0,!1;if(0===f.avail_out||0===f.avail_in&&(4===d||2===d))if("string"===
this.options.to)this.onData(e.buf2binstring(b.shrinkBuf(f.output,f.next_out)));else this.onData(b.shrinkBuf(f.output,f.next_out))}while((0<f.avail_in||0===f.avail_out)&&1!==c);if(4===d)return c=a.deflateEnd(this.strm),this.onEnd(c),this.ended=!0,0===c;2===d&&(this.onEnd(0),f.avail_out=0);return!0};f.prototype.onData=function(a){this.chunks.push(a)};f.prototype.onEnd=function(a){0===a&&(this.result="string"===this.options.to?this.chunks.join(""):b.flattenChunks(this.chunks));this.chunks=[];this.err=
a;this.msg=this.strm.msg};g.Deflate=f;g.deflate=c;g.deflateRaw=function(a,b){b=b||{};b.raw=!0;return c(a,b)};g.gzip=function(a,b){b=b||{};b.gzip=!0;return c(a,b)}},{"./utils/common":62,"./utils/strings":63,"./zlib/deflate":67,"./zlib/messages":72,"./zlib/zstream":74}],61:[function(d,h,g){function f(c){if(!(this instanceof f))return new f(c);var d=this.options=b.assign({chunkSize:16384,windowBits:0,to:""},c||{});d.raw&&0<=d.windowBits&&16>d.windowBits&&(d.windowBits=-d.windowBits,0===d.windowBits&&
(d.windowBits=-15));!(0<=d.windowBits&&16>d.windowBits)||c&&c.windowBits||(d.windowBits+=32);15<d.windowBits&&48>d.windowBits&&0===(d.windowBits&15)&&(d.windowBits|=15);this.err=0;this.msg="";this.ended=!1;this.chunks=[];this.strm=new p;this.strm.avail_out=0;c=a.inflateInit2(this.strm,d.windowBits);if(c!==t.Z_OK)throw Error(n[c]);this.header=new k;a.inflateGetHeader(this.strm,this.header)}function c(a,b){b=new f(b);b.push(a,!0);if(b.err)throw b.msg;return b.result}var a=d("./zlib/inflate"),b=d("./utils/common"),
e=d("./utils/strings"),t=d("./zlib/constants"),n=d("./zlib/messages"),p=d("./zlib/zstream"),k=d("./zlib/gzheader"),r=Object.prototype.toString;f.prototype.push=function(c,d){var f=this.strm,h=this.options.chunkSize,g=this.options.dictionary,k,p,E,n=!1;if(this.ended)return!1;d=d===~~d?d:!0===d?t.Z_FINISH:t.Z_NO_FLUSH;"string"===typeof c?f.input=e.binstring2buf(c):"[object ArrayBuffer]"===r.call(c)?f.input=new Uint8Array(c):f.input=c;f.next_in=0;f.avail_in=f.input.length;do{0===f.avail_out&&(f.output=
new b.Buf8(h),f.next_out=0,f.avail_out=h);c=a.inflate(f,t.Z_NO_FLUSH);c===t.Z_NEED_DICT&&g&&(c="string"===typeof g?e.string2buf(g):"[object ArrayBuffer]"===r.call(g)?new Uint8Array(g):g,c=a.inflateSetDictionary(this.strm,c));c===t.Z_BUF_ERROR&&!0===n&&(c=t.Z_OK,n=!1);if(c!==t.Z_STREAM_END&&c!==t.Z_OK)return this.onEnd(c),this.ended=!0,!1;if(f.next_out&&(0===f.avail_out||c===t.Z_STREAM_END||0===f.avail_in&&(d===t.Z_FINISH||d===t.Z_SYNC_FLUSH)))if("string"===this.options.to)k=e.utf8border(f.output,
f.next_out),p=f.next_out-k,E=e.buf2string(f.output,k),f.next_out=p,f.avail_out=h-p,p&&b.arraySet(f.output,f.output,k,p,0),this.onData(E);else this.onData(b.shrinkBuf(f.output,f.next_out));0===f.avail_in&&0===f.avail_out&&(n=!0)}while((0<f.avail_in||0===f.avail_out)&&c!==t.Z_STREAM_END);c===t.Z_STREAM_END&&(d=t.Z_FINISH);if(d===t.Z_FINISH)return c=a.inflateEnd(this.strm),this.onEnd(c),this.ended=!0,c===t.Z_OK;d===t.Z_SYNC_FLUSH&&(this.onEnd(t.Z_OK),f.avail_out=0);return!0};f.prototype.onData=function(a){this.chunks.push(a)};
f.prototype.onEnd=function(a){a===t.Z_OK&&(this.result="string"===this.options.to?this.chunks.join(""):b.flattenChunks(this.chunks));this.chunks=[];this.err=a;this.msg=this.strm.msg};g.Inflate=f;g.inflate=c;g.inflateRaw=function(a,b){b=b||{};b.raw=!0;return c(a,b)};g.ungzip=c},{"./utils/common":62,"./utils/strings":63,"./zlib/constants":65,"./zlib/gzheader":68,"./zlib/inflate":70,"./zlib/messages":72,"./zlib/zstream":74}],62:[function(d,h,g){d="undefined"!==typeof Uint8Array&&"undefined"!==typeof Uint16Array&&
"undefined"!==typeof Int32Array;g.assign=function(a){for(var b=Array.prototype.slice.call(arguments,1);b.length;){var c=b.shift();if(c){if("object"!==typeof c)throw new TypeError(c+"must be non-object");for(var d in c)c.hasOwnProperty(d)&&(a[d]=c[d])}}return a};g.shrinkBuf=function(a,b){if(a.length===b)return a;if(a.subarray)return a.subarray(0,b);a.length=b;return a};var f={arraySet:function(a,b,c,d,f){if(b.subarray&&a.subarray)a.set(b.subarray(c,c+d),f);else for(var e=0;e<d;e++)a[f+e]=b[c+e]},flattenChunks:function(a){var b,
c,d,f,h;b=d=0;for(c=a.length;b<c;b++)d+=a[b].length;h=new Uint8Array(d);b=d=0;for(c=a.length;b<c;b++)f=a[b],h.set(f,d),d+=f.length;return h}},c={arraySet:function(a,b,c,d,f){for(var e=0;e<d;e++)a[f+e]=b[c+e]},flattenChunks:function(a){return[].concat.apply([],a)}};g.setTyped=function(a){a?(g.Buf8=Uint8Array,g.Buf16=Uint16Array,g.Buf32=Int32Array,g.assign(g,f)):(g.Buf8=Array,g.Buf16=Array,g.Buf32=Array,g.assign(g,c))};g.setTyped(d)},{}],63:[function(d,h,g){function f(d,e){if(65537>e&&(d.subarray&&
b||!d.subarray&&a))return String.fromCharCode.apply(null,c.shrinkBuf(d,e));for(var f="",h=0;h<e;h++)f+=String.fromCharCode(d[h]);return f}var c=d("./common"),a=!0,b=!0;try{String.fromCharCode.apply(null,[0])}catch(t){a=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(t){b=!1}var e=new c.Buf8(256);for(d=0;256>d;d++)e[d]=252<=d?6:248<=d?5:240<=d?4:224<=d?3:192<=d?2:1;e[254]=e[254]=1;g.string2buf=function(a){var b,d,e,f,h,g=a.length,t=0;for(f=0;f<g;f++)d=a.charCodeAt(f),55296===(d&64512)&&
f+1<g&&(e=a.charCodeAt(f+1),56320===(e&64512)&&(d=65536+(d-55296<<10)+(e-56320),f++)),t+=128>d?1:2048>d?2:65536>d?3:4;b=new c.Buf8(t);for(f=h=0;h<t;f++)d=a.charCodeAt(f),55296===(d&64512)&&f+1<g&&(e=a.charCodeAt(f+1),56320===(e&64512)&&(d=65536+(d-55296<<10)+(e-56320),f++)),128>d?b[h++]=d:(2048>d?b[h++]=192|d>>>6:(65536>d?b[h++]=224|d>>>12:(b[h++]=240|d>>>18,b[h++]=128|d>>>12&63),b[h++]=128|d>>>6&63),b[h++]=128|d&63);return b};g.buf2binstring=function(a){return f(a,a.length)};g.binstring2buf=function(a){for(var b=
new c.Buf8(a.length),d=0,e=b.length;d<e;d++)b[d]=a.charCodeAt(d);return b};g.buf2string=function(a,b){var c,d,h,g=b||a.length,n=Array(2*g);for(b=c=0;b<g;)if(d=a[b++],128>d)n[c++]=d;else if(h=e[d],4<h)n[c++]=65533,b+=h-1;else{for(d&=2===h?31:3===h?15:7;1<h&&b<g;)d=d<<6|a[b++]&63,h--;1<h?n[c++]=65533:65536>d?n[c++]=d:(d-=65536,n[c++]=55296|d>>10&1023,n[c++]=56320|d&1023)}return f(n,c)};g.utf8border=function(a,b){var c;b=b||a.length;b>a.length&&(b=a.length);for(c=b-1;0<=c&&128===(a[c]&192);)c--;return 0>
c||0===c?b:c+e[a[c]]>b?c:b}},{"./common":62}],64:[function(d,h,g){h.exports=function(d,c,a,b){var e=d&65535|0;d=d>>>16&65535|0;for(var f=0;0!==a;){f=2E3<a?2E3:a;a-=f;do e=e+c[b++]|0,d=d+e|0;while(--f);e%=65521;d%=65521}return e|d<<16|0}},{}],65:[function(d,h,g){h.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,
Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],66:[function(d,h,g){var f=function(){for(var c,a=[],b=0;256>b;b++){c=b;for(var d=0;8>d;d++)c=c&1?3988292384^c>>>1:c>>>1;a[b]=c}return a}();h.exports=function(c,a,b,d){b=d+b;for(c^=-1;d<b;d++)c=c>>>8^f[(c^a[d])&255];return c^-1}},{}],67:[function(d,h,g){function f(a,b){a.msg=L[b];return b}function c(a){for(var b=a.length;0<=--b;)a[b]=0}function a(a){var b=
a.state,c=b.pending;c>a.avail_out&&(c=a.avail_out);0!==c&&(E.arraySet(a.output,b.pending_buf,b.pending_out,c,a.next_out),a.next_out+=c,b.pending_out+=c,a.total_out+=c,a.avail_out-=c,b.pending-=c,0===b.pending&&(b.pending_out=0))}function b(b,c){N._tr_flush_block(b,0<=b.block_start?b.block_start:-1,b.strstart-b.block_start,c);b.block_start=b.strstart;a(b.strm)}function e(a,b){a.pending_buf[a.pending++]=b}function t(a,b){a.pending_buf[a.pending++]=b>>>8&255;a.pending_buf[a.pending++]=b&255}function n(a,
b){var c=a.max_chain_length,d=a.strstart,e,f=a.prev_length,h=a.nice_match,g=a.strstart>a.w_size-262?a.strstart-(a.w_size-262):0,B=a.window,E=a.w_mask,k=a.prev,r=a.strstart+258,p=B[d+f-1],n=B[d+f];a.prev_length>=a.good_match&&(c>>=2);h>a.lookahead&&(h=a.lookahead);do if(e=b,B[e+f]===n&&B[e+f-1]===p&&B[e]===B[d]&&B[++e]===B[d+1]){d+=2;for(e++;B[++d]===B[++e]&&B[++d]===B[++e]&&B[++d]===B[++e]&&B[++d]===B[++e]&&B[++d]===B[++e]&&B[++d]===B[++e]&&B[++d]===B[++e]&&B[++d]===B[++e]&&d<r;);e=258-(r-d);d=r-
258;if(e>f){a.match_start=b;f=e;if(e>=h)break;p=B[d+f-1];n=B[d+f]}}while((b=k[b&E])>g&&0!==--c);return f<=a.lookahead?f:a.lookahead}function p(a){var b=a.w_size,c,d,e,f;do{f=a.window_size-a.lookahead-a.strstart;if(a.strstart>=b+(b-262)){E.arraySet(a.window,a.window,b,b,0);a.match_start-=b;a.strstart-=b;a.block_start-=b;c=d=a.hash_size;do e=a.head[--c],a.head[c]=e>=b?e-b:0;while(--d);c=d=b;do e=a.prev[--c],a.prev[c]=e>=b?e-b:0;while(--d);f+=b}if(0===a.strm.avail_in)break;c=a.strm;d=a.window;e=a.strstart+
a.lookahead;var h=c.avail_in;h>f&&(h=f);0===h?d=0:(c.avail_in-=h,E.arraySet(d,c.input,c.next_in,h,e),1===c.state.wrap?c.adler=I(c.adler,d,h,e):2===c.state.wrap&&(c.adler=P(c.adler,d,h,e)),c.next_in+=h,c.total_in+=h,d=h);a.lookahead+=d;if(3<=a.lookahead+a.insert)for(f=a.strstart-a.insert,a.ins_h=a.window[f],a.ins_h=(a.ins_h<<a.hash_shift^a.window[f+1])&a.hash_mask;a.insert&&!(a.ins_h=(a.ins_h<<a.hash_shift^a.window[f+3-1])&a.hash_mask,a.prev[f&a.w_mask]=a.head[a.ins_h],a.head[a.ins_h]=f,f++,a.insert--,
3>a.lookahead+a.insert););}while(262>a.lookahead&&0!==a.strm.avail_in)}function k(a,c){for(var d,e;;){if(262>a.lookahead){p(a);if(262>a.lookahead&&0===c)return 1;if(0===a.lookahead)break}d=0;3<=a.lookahead&&(a.ins_h=(a.ins_h<<a.hash_shift^a.window[a.strstart+3-1])&a.hash_mask,d=a.prev[a.strstart&a.w_mask]=a.head[a.ins_h],a.head[a.ins_h]=a.strstart);0!==d&&a.strstart-d<=a.w_size-262&&(a.match_length=n(a,d));if(3<=a.match_length)if(e=N._tr_tally(a,a.strstart-a.match_start,a.match_length-3),a.lookahead-=
a.match_length,a.match_length<=a.max_lazy_match&&3<=a.lookahead){a.match_length--;do a.strstart++,a.ins_h=(a.ins_h<<a.hash_shift^a.window[a.strstart+3-1])&a.hash_mask,d=a.prev[a.strstart&a.w_mask]=a.head[a.ins_h],a.head[a.ins_h]=a.strstart;while(0!==--a.match_length);a.strstart++}else a.strstart+=a.match_length,a.match_length=0,a.ins_h=a.window[a.strstart],a.ins_h=(a.ins_h<<a.hash_shift^a.window[a.strstart+1])&a.hash_mask;else e=N._tr_tally(a,0,a.window[a.strstart]),a.lookahead--,a.strstart++;if(e&&
(b(a,!1),0===a.strm.avail_out))return 1}a.insert=2>a.strstart?a.strstart:2;return 4===c?(b(a,!0),0===a.strm.avail_out?3:4):a.last_lit&&(b(a,!1),0===a.strm.avail_out)?1:2}function r(a,c){for(var d,e,f;;){if(262>a.lookahead){p(a);if(262>a.lookahead&&0===c)return 1;if(0===a.lookahead)break}d=0;3<=a.lookahead&&(a.ins_h=(a.ins_h<<a.hash_shift^a.window[a.strstart+3-1])&a.hash_mask,d=a.prev[a.strstart&a.w_mask]=a.head[a.ins_h],a.head[a.ins_h]=a.strstart);a.prev_length=a.match_length;a.prev_match=a.match_start;
a.match_length=2;0!==d&&a.prev_length<a.max_lazy_match&&a.strstart-d<=a.w_size-262&&(a.match_length=n(a,d),5>=a.match_length&&(1===a.strategy||3===a.match_length&&4096<a.strstart-a.match_start)&&(a.match_length=2));if(3<=a.prev_length&&a.match_length<=a.prev_length){f=a.strstart+a.lookahead-3;e=N._tr_tally(a,a.strstart-1-a.prev_match,a.prev_length-3);a.lookahead-=a.prev_length-1;a.prev_length-=2;do++a.strstart<=f&&(a.ins_h=(a.ins_h<<a.hash_shift^a.window[a.strstart+3-1])&a.hash_mask,d=a.prev[a.strstart&
a.w_mask]=a.head[a.ins_h],a.head[a.ins_h]=a.strstart);while(0!==--a.prev_length);a.match_available=0;a.match_length=2;a.strstart++;if(e&&(b(a,!1),0===a.strm.avail_out))return 1}else if(a.match_available){if((e=N._tr_tally(a,0,a.window[a.strstart-1]))&&b(a,!1),a.strstart++,a.lookahead--,0===a.strm.avail_out)return 1}else a.match_available=1,a.strstart++,a.lookahead--}a.match_available&&(e=N._tr_tally(a,0,a.window[a.strstart-1]),a.match_available=0);a.insert=2>a.strstart?a.strstart:2;return 4===c?(b(a,
!0),0===a.strm.avail_out?3:4):a.last_lit&&(b(a,!1),0===a.strm.avail_out)?1:2}function m(a,c){for(var d,e,f,h=a.window;;){if(258>=a.lookahead){p(a);if(258>=a.lookahead&&0===c)return 1;if(0===a.lookahead)break}a.match_length=0;if(3<=a.lookahead&&0<a.strstart&&(e=a.strstart-1,d=h[e],d===h[++e]&&d===h[++e]&&d===h[++e])){for(f=a.strstart+258;d===h[++e]&&d===h[++e]&&d===h[++e]&&d===h[++e]&&d===h[++e]&&d===h[++e]&&d===h[++e]&&d===h[++e]&&e<f;);a.match_length=258-(f-e);a.match_length>a.lookahead&&(a.match_length=
a.lookahead)}3<=a.match_length?(d=N._tr_tally(a,1,a.match_length-3),a.lookahead-=a.match_length,a.strstart+=a.match_length,a.match_length=0):(d=N._tr_tally(a,0,a.window[a.strstart]),a.lookahead--,a.strstart++);if(d&&(b(a,!1),0===a.strm.avail_out))return 1}a.insert=0;return 4===c?(b(a,!0),0===a.strm.avail_out?3:4):a.last_lit&&(b(a,!1),0===a.strm.avail_out)?1:2}function u(a,c){for(var d;;){if(0===a.lookahead&&(p(a),0===a.lookahead)){if(0===c)return 1;break}a.match_length=0;d=N._tr_tally(a,0,a.window[a.strstart]);
a.lookahead--;a.strstart++;if(d&&(b(a,!1),0===a.strm.avail_out))return 1}a.insert=0;return 4===c?(b(a,!0),0===a.strm.avail_out?3:4):a.last_lit&&(b(a,!1),0===a.strm.avail_out)?1:2}function v(a,b,c,d,e){this.good_length=a;this.max_lazy=b;this.nice_length=c;this.max_chain=d;this.func=e}function F(){this.strm=null;this.status=0;this.pending_buf=null;this.wrap=this.pending=this.pending_out=this.pending_buf_size=0;this.gzhead=null;this.gzindex=0;this.method=8;this.last_flush=-1;this.w_mask=this.w_bits=
this.w_size=0;this.window=null;this.window_size=0;this.head=this.prev=null;this.nice_match=this.good_match=this.strategy=this.level=this.max_lazy_match=this.max_chain_length=this.prev_length=this.lookahead=this.match_start=this.strstart=this.match_available=this.prev_match=this.match_length=this.block_start=this.hash_shift=this.hash_mask=this.hash_bits=this.hash_size=this.ins_h=0;this.dyn_ltree=new E.Buf16(1146);this.dyn_dtree=new E.Buf16(122);this.bl_tree=new E.Buf16(78);c(this.dyn_ltree);c(this.dyn_dtree);
c(this.bl_tree);this.bl_desc=this.d_desc=this.l_desc=null;this.bl_count=new E.Buf16(16);this.heap=new E.Buf16(573);c(this.heap);this.heap_max=this.heap_len=0;this.depth=new E.Buf16(573);c(this.depth);this.bi_valid=this.bi_buf=this.insert=this.matches=this.static_len=this.opt_len=this.d_buf=this.last_lit=this.lit_bufsize=this.l_buf=0}function R(a){var b;if(!a||!a.state)return f(a,-2);a.total_in=a.total_out=0;a.data_type=2;b=a.state;b.pending=0;b.pending_out=0;0>b.wrap&&(b.wrap=-b.wrap);b.status=b.wrap?
42:113;a.adler=2===b.wrap?0:1;b.last_flush=0;N._tr_init(b);return 0}function C(a){var b=R(a);0===b&&(a=a.state,a.window_size=2*a.w_size,c(a.head),a.max_lazy_match=Q[a.level].max_lazy,a.good_match=Q[a.level].good_length,a.nice_match=Q[a.level].nice_length,a.max_chain_length=Q[a.level].max_chain,a.strstart=0,a.block_start=0,a.lookahead=0,a.insert=0,a.match_length=a.prev_length=2,a.match_available=0,a.ins_h=0);return b}function D(a,b,c,d,e,h){if(!a)return-2;var g=1;-1===b&&(b=6);0>d?(g=0,d=-d):15<d&&
(g=2,d-=16);if(1>e||9<e||8!==c||8>d||15<d||0>b||9<b||0>h||4<h)return f(a,-2);8===d&&(d=9);var k=new F;a.state=k;k.strm=a;k.wrap=g;k.gzhead=null;k.w_bits=d;k.w_size=1<<k.w_bits;k.w_mask=k.w_size-1;k.hash_bits=e+7;k.hash_size=1<<k.hash_bits;k.hash_mask=k.hash_size-1;k.hash_shift=~~((k.hash_bits+3-1)/3);k.window=new E.Buf8(2*k.w_size);k.head=new E.Buf16(k.hash_size);k.prev=new E.Buf16(k.w_size);k.lit_bufsize=1<<e+6;k.pending_buf_size=4*k.lit_bufsize;k.pending_buf=new E.Buf8(k.pending_buf_size);k.d_buf=
1*k.lit_bufsize;k.l_buf=3*k.lit_bufsize;k.level=b;k.strategy=h;k.method=c;return C(a)}var E=d("../utils/common"),N=d("./trees"),I=d("./adler32"),P=d("./crc32"),L=d("./messages"),Q;Q=[new v(0,0,0,0,function(a,c){var d=65535;for(d>a.pending_buf_size-5&&(d=a.pending_buf_size-5);;){if(1>=a.lookahead){p(a);if(0===a.lookahead&&0===c)return 1;if(0===a.lookahead)break}a.strstart+=a.lookahead;a.lookahead=0;var e=a.block_start+d;if(0===a.strstart||a.strstart>=e)if(a.lookahead=a.strstart-e,a.strstart=e,b(a,
!1),0===a.strm.avail_out)return 1;if(a.strstart-a.block_start>=a.w_size-262&&(b(a,!1),0===a.strm.avail_out))return 1}a.insert=0;if(4===c)return b(a,!0),0===a.strm.avail_out?3:4;a.strstart>a.block_start&&b(a,!1);return 1}),new v(4,4,8,4,k),new v(4,5,16,8,k),new v(4,6,32,32,k),new v(4,4,16,16,r),new v(8,16,32,32,r),new v(8,16,128,128,r),new v(8,32,128,256,r),new v(32,128,258,1024,r),new v(32,258,258,4096,r)];g.deflateInit=function(a,b){return D(a,b,8,15,8,0)};g.deflateInit2=D;g.deflateReset=C;g.deflateResetKeep=
R;g.deflateSetHeader=function(a,b){if(!a||!a.state||2!==a.state.wrap)return-2;a.state.gzhead=b;return 0};g.deflate=function(b,d){var h,g,k,E;if(!b||!b.state||5<d||0>d)return b?f(b,-2):-2;g=b.state;if(!b.output||!b.input&&0!==b.avail_in||666===g.status&&4!==d)return f(b,0===b.avail_out?-5:-2);g.strm=b;h=g.last_flush;g.last_flush=d;42===g.status&&(2===g.wrap?(b.adler=0,e(g,31),e(g,139),e(g,8),g.gzhead?(e(g,(g.gzhead.text?1:0)+(g.gzhead.hcrc?2:0)+(g.gzhead.extra?4:0)+(g.gzhead.name?8:0)+(g.gzhead.comment?
16:0)),e(g,g.gzhead.time&255),e(g,g.gzhead.time>>8&255),e(g,g.gzhead.time>>16&255),e(g,g.gzhead.time>>24&255),e(g,9===g.level?2:2<=g.strategy||2>g.level?4:0),e(g,g.gzhead.os&255),g.gzhead.extra&&g.gzhead.extra.length&&(e(g,g.gzhead.extra.length&255),e(g,g.gzhead.extra.length>>8&255)),g.gzhead.hcrc&&(b.adler=P(b.adler,g.pending_buf,g.pending,0)),g.gzindex=0,g.status=69):(e(g,0),e(g,0),e(g,0),e(g,0),e(g,0),e(g,9===g.level?2:2<=g.strategy||2>g.level?4:0),e(g,3),g.status=113)):(k=8+(g.w_bits-8<<4)<<8,
E=-1,E=2<=g.strategy||2>g.level?0:6>g.level?1:6===g.level?2:3,k|=E<<6,0!==g.strstart&&(k|=32),g.status=113,t(g,k+(31-k%31)),0!==g.strstart&&(t(g,b.adler>>>16),t(g,b.adler&65535)),b.adler=1));if(69===g.status)if(g.gzhead.extra){for(k=g.pending;g.gzindex<(g.gzhead.extra.length&65535)&&(g.pending!==g.pending_buf_size||(g.gzhead.hcrc&&g.pending>k&&(b.adler=P(b.adler,g.pending_buf,g.pending-k,k)),a(b),k=g.pending,g.pending!==g.pending_buf_size));)e(g,g.gzhead.extra[g.gzindex]&255),g.gzindex++;g.gzhead.hcrc&&
g.pending>k&&(b.adler=P(b.adler,g.pending_buf,g.pending-k,k));g.gzindex===g.gzhead.extra.length&&(g.gzindex=0,g.status=73)}else g.status=73;if(73===g.status)if(g.gzhead.name){k=g.pending;do{if(g.pending===g.pending_buf_size&&(g.gzhead.hcrc&&g.pending>k&&(b.adler=P(b.adler,g.pending_buf,g.pending-k,k)),a(b),k=g.pending,g.pending===g.pending_buf_size)){E=1;break}E=g.gzindex<g.gzhead.name.length?g.gzhead.name.charCodeAt(g.gzindex++)&255:0;e(g,E)}while(0!==E);g.gzhead.hcrc&&g.pending>k&&(b.adler=P(b.adler,
g.pending_buf,g.pending-k,k));0===E&&(g.gzindex=0,g.status=91)}else g.status=91;if(91===g.status)if(g.gzhead.comment){k=g.pending;do{if(g.pending===g.pending_buf_size&&(g.gzhead.hcrc&&g.pending>k&&(b.adler=P(b.adler,g.pending_buf,g.pending-k,k)),a(b),k=g.pending,g.pending===g.pending_buf_size)){E=1;break}E=g.gzindex<g.gzhead.comment.length?g.gzhead.comment.charCodeAt(g.gzindex++)&255:0;e(g,E)}while(0!==E);g.gzhead.hcrc&&g.pending>k&&(b.adler=P(b.adler,g.pending_buf,g.pending-k,k));0===E&&(g.status=
103)}else g.status=103;103===g.status&&(g.gzhead.hcrc?(g.pending+2>g.pending_buf_size&&a(b),g.pending+2<=g.pending_buf_size&&(e(g,b.adler&255),e(g,b.adler>>8&255),b.adler=0,g.status=113)):g.status=113);if(0!==g.pending){if(a(b),0===b.avail_out)return g.last_flush=-1,0}else if(0===b.avail_in&&(d<<1)-(4<d?9:0)<=(h<<1)-(4<h?9:0)&&4!==d)return f(b,-5);if(666===g.status&&0!==b.avail_in)return f(b,-5);if(0!==b.avail_in||0!==g.lookahead||0!==d&&666!==g.status){h=2===g.strategy?u(g,d):3===g.strategy?m(g,
d):Q[g.level].func(g,d);if(3===h||4===h)g.status=666;if(1===h||3===h)return 0===b.avail_out&&(g.last_flush=-1),0;if(2===h&&(1===d?N._tr_align(g):5!==d&&(N._tr_stored_block(g,0,0,!1),3===d&&(c(g.head),0===g.lookahead&&(g.strstart=0,g.block_start=0,g.insert=0))),a(b),0===b.avail_out))return g.last_flush=-1,0}if(4!==d)return 0;if(0>=g.wrap)return 1;2===g.wrap?(e(g,b.adler&255),e(g,b.adler>>8&255),e(g,b.adler>>16&255),e(g,b.adler>>24&255),e(g,b.total_in&255),e(g,b.total_in>>8&255),e(g,b.total_in>>16&
255),e(g,b.total_in>>24&255)):(t(g,b.adler>>>16),t(g,b.adler&65535));a(b);0<g.wrap&&(g.wrap=-g.wrap);return 0!==g.pending?0:1};g.deflateEnd=function(a){var b;if(!a||!a.state)return-2;b=a.state.status;if(42!==b&&69!==b&&73!==b&&91!==b&&103!==b&&113!==b&&666!==b)return f(a,-2);a.state=null;return 113===b?f(a,-3):0};g.deflateSetDictionary=function(a,b){var d=b.length,e,f,g,h,k;if(!a||!a.state)return-2;e=a.state;f=e.wrap;if(2===f||1===f&&42!==e.status||e.lookahead)return-2;1===f&&(a.adler=I(a.adler,b,
d,0));e.wrap=0;d>=e.w_size&&(0===f&&(c(e.head),e.strstart=0,e.block_start=0,e.insert=0),g=new E.Buf8(e.w_size),E.arraySet(g,b,d-e.w_size,e.w_size,0),b=g,d=e.w_size);g=a.avail_in;h=a.next_in;k=a.input;a.avail_in=d;a.next_in=0;a.input=b;for(p(e);3<=e.lookahead;){b=e.strstart;d=e.lookahead-2;do e.ins_h=(e.ins_h<<e.hash_shift^e.window[b+3-1])&e.hash_mask,e.prev[b&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=b,b++;while(--d);e.strstart=b;e.lookahead=2;p(e)}e.strstart+=e.lookahead;e.block_start=e.strstart;
e.insert=e.lookahead;e.lookahead=0;e.match_length=e.prev_length=2;e.match_available=0;a.next_in=h;a.input=k;a.avail_in=g;e.wrap=f;return 0};g.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":62,"./adler32":64,"./crc32":66,"./messages":72,"./trees":73}],68:[function(d,h,g){h.exports=function(){this.os=this.xflags=this.time=this.text=0;this.extra=null;this.extra_len=0;this.comment=this.name="";this.hcrc=0;this.done=!1}},{}],69:[function(d,h,g){h.exports=function(d,c){var a,b,e,f,
g,h,k,r,m,u,v,F,R,C,D,E,N,I,P,L,Q,B,x;a=d.state;b=d.next_in;B=d.input;e=b+(d.avail_in-5);f=d.next_out;x=d.output;c=f-(c-d.avail_out);g=f+(d.avail_out-257);h=a.dmax;k=a.wsize;r=a.whave;m=a.wnext;u=a.window;v=a.hold;F=a.bits;R=a.lencode;C=a.distcode;D=(1<<a.lenbits)-1;E=(1<<a.distbits)-1;a:do b:for(15>F&&(v+=B[b++]<<F,F+=8,v+=B[b++]<<F,F+=8),N=R[v&D];;){I=N>>>24;v>>>=I;F-=I;I=N>>>16&255;if(0===I)x[f++]=N&65535;else if(I&16){P=N&65535;if(I&=15)F<I&&(v+=B[b++]<<F,F+=8),P+=v&(1<<I)-1,v>>>=I,F-=I;15>F&&
(v+=B[b++]<<F,F+=8,v+=B[b++]<<F,F+=8);N=C[v&E];c:for(;;){I=N>>>24;v>>>=I;F-=I;I=N>>>16&255;if(I&16){N&=65535;I&=15;F<I&&(v+=B[b++]<<F,F+=8,F<I&&(v+=B[b++]<<F,F+=8));N+=v&(1<<I)-1;if(N>h){d.msg="invalid distance too far back";a.mode=30;break a}v>>>=I;F-=I;I=f-c;if(N>I){I=N-I;if(I>r&&a.sane){d.msg="invalid distance too far back";a.mode=30;break a}L=0;Q=u;if(0===m){if(L+=k-I,I<P){P-=I;do x[f++]=u[L++];while(--I);L=f-N;Q=x}}else if(m<I){if(L+=k+m-I,I-=m,I<P){P-=I;do x[f++]=u[L++];while(--I);L=0;if(m<
P){I=m;P-=I;do x[f++]=u[L++];while(--I);L=f-N;Q=x}}}else if(L+=m-I,I<P){P-=I;do x[f++]=u[L++];while(--I);L=f-N;Q=x}for(;2<P;)x[f++]=Q[L++],x[f++]=Q[L++],x[f++]=Q[L++],P-=3;P&&(x[f++]=Q[L++],1<P&&(x[f++]=Q[L++]))}else{L=f-N;do x[f++]=x[L++],x[f++]=x[L++],x[f++]=x[L++],P-=3;while(2<P);P&&(x[f++]=x[L++],1<P&&(x[f++]=x[L++]))}}else if(0===(I&64)){N=C[(N&65535)+(v&(1<<I)-1)];continue c}else{d.msg="invalid distance code";a.mode=30;break a}break}}else if(0===(I&64)){N=R[(N&65535)+(v&(1<<I)-1)];continue b}else{I&
32?a.mode=12:(d.msg="invalid literal/length code",a.mode=30);break a}break}while(b<e&&f<g);P=F>>3;b-=P;F-=P<<3;d.next_in=b;d.next_out=f;d.avail_in=b<e?5+(e-b):5-(b-e);d.avail_out=f<g?257+(g-f):257-(f-g);a.hold=v&(1<<F)-1;a.bits=F}},{}],70:[function(d,h,g){function f(a){return(a>>>24&255)+(a>>>8&65280)+((a&65280)<<8)+((a&255)<<24)}function c(){this.mode=0;this.last=!1;this.wrap=0;this.havedict=!1;this.total=this.check=this.dmax=this.flags=0;this.head=null;this.wnext=this.whave=this.wsize=this.wbits=
0;this.window=null;this.extra=this.offset=this.length=this.bits=this.hold=0;this.distcode=this.lencode=null;this.have=this.ndist=this.nlen=this.ncode=this.distbits=this.lenbits=0;this.next=null;this.lens=new p.Buf16(320);this.work=new p.Buf16(288);this.distdyn=this.lendyn=null;this.was=this.back=this.sane=0}function a(a){var b;if(!a||!a.state)return-2;b=a.state;a.total_in=a.total_out=b.total=0;a.msg="";b.wrap&&(a.adler=b.wrap&1);b.mode=1;b.last=0;b.havedict=0;b.dmax=32768;b.head=null;b.hold=0;b.bits=
0;b.lencode=b.lendyn=new p.Buf32(852);b.distcode=b.distdyn=new p.Buf32(592);b.sane=1;b.back=-1;return 0}function b(b){var c;if(!b||!b.state)return-2;c=b.state;c.wsize=0;c.whave=0;c.wnext=0;return a(b)}function e(a,c){var d,e;if(!a||!a.state)return-2;e=a.state;0>c?(d=0,c=-c):(d=(c>>4)+1,48>c&&(c&=15));if(c&&(8>c||15<c))return-2;null!==e.window&&e.wbits!==c&&(e.window=null);e.wrap=d;e.wbits=c;return b(a)}function m(a,b){var d;if(!a)return-2;d=new c;a.state=d;d.window=null;b=e(a,b);0!==b&&(a.state=null);
return b}function n(a,b,c,d){var e=a.state;null===e.window&&(e.wsize=1<<e.wbits,e.wnext=0,e.whave=0,e.window=new p.Buf8(e.wsize));d>=e.wsize?(p.arraySet(e.window,b,c-e.wsize,e.wsize,0),e.wnext=0,e.whave=e.wsize):(a=e.wsize-e.wnext,a>d&&(a=d),p.arraySet(e.window,b,c-d,a,e.wnext),(d-=a)?(p.arraySet(e.window,b,c-d,d,0),e.wnext=d,e.whave=e.wsize):(e.wnext+=a,e.wnext===e.wsize&&(e.wnext=0),e.whave<e.wsize&&(e.whave+=a)));return 0}var p=d("../utils/common"),k=d("./adler32"),r=d("./crc32"),u=d("./inffast"),
v=d("./inftrees"),H=!0,F,R;g.inflateReset=b;g.inflateReset2=e;g.inflateResetKeep=a;g.inflateInit=function(a){return m(a,15)};g.inflateInit2=m;g.inflate=function(a,b){var c,d,e,g,h,m,t,x,q,C,D,A,G,M,O=0,Z,da,V,U=new p.Buf8(4),y=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!a||!a.state||!a.output||!a.input&&0!==a.avail_in)return-2;c=a.state;12===c.mode&&(c.mode=13);h=a.next_out;e=a.output;t=a.avail_out;g=a.next_in;d=a.input;m=a.avail_in;x=c.hold;q=c.bits;C=m;D=t;V=0;a:for(;;)switch(c.mode){case 1:if(0===
c.wrap){c.mode=13;break}for(;16>q;){if(0===m)break a;m--;x+=d[g++]<<q;q+=8}if(c.wrap&2&&35615===x){c.check=0;U[0]=x&255;U[1]=x>>>8&255;c.check=r(c.check,U,2,0);q=x=0;c.mode=2;break}c.flags=0;c.head&&(c.head.done=!1);if(!(c.wrap&1)||(((x&255)<<8)+(x>>8))%31){a.msg="incorrect header check";c.mode=30;break}if(8!==(x&15)){a.msg="unknown compression method";c.mode=30;break}x>>>=4;q-=4;G=(x&15)+8;if(0===c.wbits)c.wbits=G;else if(G>c.wbits){a.msg="invalid window size";c.mode=30;break}c.dmax=1<<G;a.adler=
c.check=1;c.mode=x&512?10:12;q=x=0;break;case 2:for(;16>q;){if(0===m)break a;m--;x+=d[g++]<<q;q+=8}c.flags=x;if(8!==(c.flags&255)){a.msg="unknown compression method";c.mode=30;break}if(c.flags&57344){a.msg="unknown header flags set";c.mode=30;break}c.head&&(c.head.text=x>>8&1);c.flags&512&&(U[0]=x&255,U[1]=x>>>8&255,c.check=r(c.check,U,2,0));q=x=0;c.mode=3;case 3:for(;32>q;){if(0===m)break a;m--;x+=d[g++]<<q;q+=8}c.head&&(c.head.time=x);c.flags&512&&(U[0]=x&255,U[1]=x>>>8&255,U[2]=x>>>16&255,U[3]=
x>>>24&255,c.check=r(c.check,U,4,0));q=x=0;c.mode=4;case 4:for(;16>q;){if(0===m)break a;m--;x+=d[g++]<<q;q+=8}c.head&&(c.head.xflags=x&255,c.head.os=x>>8);c.flags&512&&(U[0]=x&255,U[1]=x>>>8&255,c.check=r(c.check,U,2,0));q=x=0;c.mode=5;case 5:if(c.flags&1024){for(;16>q;){if(0===m)break a;m--;x+=d[g++]<<q;q+=8}c.length=x;c.head&&(c.head.extra_len=x);c.flags&512&&(U[0]=x&255,U[1]=x>>>8&255,c.check=r(c.check,U,2,0));q=x=0}else c.head&&(c.head.extra=null);c.mode=6;case 6:if(c.flags&1024&&(A=c.length,
A>m&&(A=m),A&&(c.head&&(G=c.head.extra_len-c.length,c.head.extra||(c.head.extra=Array(c.head.extra_len)),p.arraySet(c.head.extra,d,g,A,G)),c.flags&512&&(c.check=r(c.check,d,A,g)),m-=A,g+=A,c.length-=A),c.length))break a;c.length=0;c.mode=7;case 7:if(c.flags&2048){if(0===m)break a;A=0;do G=d[g+A++],c.head&&G&&65536>c.length&&(c.head.name+=String.fromCharCode(G));while(G&&A<m);c.flags&512&&(c.check=r(c.check,d,A,g));m-=A;g+=A;if(G)break a}else c.head&&(c.head.name=null);c.length=0;c.mode=8;case 8:if(c.flags&
4096){if(0===m)break a;A=0;do G=d[g+A++],c.head&&G&&65536>c.length&&(c.head.comment+=String.fromCharCode(G));while(G&&A<m);c.flags&512&&(c.check=r(c.check,d,A,g));m-=A;g+=A;if(G)break a}else c.head&&(c.head.comment=null);c.mode=9;case 9:if(c.flags&512){for(;16>q;){if(0===m)break a;m--;x+=d[g++]<<q;q+=8}if(x!==(c.check&65535)){a.msg="header crc mismatch";c.mode=30;break}q=x=0}c.head&&(c.head.hcrc=c.flags>>9&1,c.head.done=!0);a.adler=c.check=0;c.mode=12;break;case 10:for(;32>q;){if(0===m)break a;m--;
x+=d[g++]<<q;q+=8}a.adler=c.check=f(x);q=x=0;c.mode=11;case 11:if(0===c.havedict)return a.next_out=h,a.avail_out=t,a.next_in=g,a.avail_in=m,c.hold=x,c.bits=q,2;a.adler=c.check=1;c.mode=12;case 12:if(5===b||6===b)break a;case 13:if(c.last){x>>>=q&7;q-=q&7;c.mode=27;break}for(;3>q;){if(0===m)break a;m--;x+=d[g++]<<q;q+=8}c.last=x&1;x>>>=1;--q;switch(x&3){case 0:c.mode=14;break;case 1:A=c;if(H){G=void 0;F=new p.Buf32(512);R=new p.Buf32(32);for(G=0;144>G;)A.lens[G++]=8;for(;256>G;)A.lens[G++]=9;for(;280>
G;)A.lens[G++]=7;for(;288>G;)A.lens[G++]=8;v(1,A.lens,0,288,F,0,A.work,{bits:9});for(G=0;32>G;)A.lens[G++]=5;v(2,A.lens,0,32,R,0,A.work,{bits:5});H=!1}A.lencode=F;A.lenbits=9;A.distcode=R;A.distbits=5;c.mode=20;if(6===b){x>>>=2;q-=2;break a}break;case 2:c.mode=17;break;case 3:a.msg="invalid block type",c.mode=30}x>>>=2;q-=2;break;case 14:x>>>=q&7;for(q-=q&7;32>q;){if(0===m)break a;m--;x+=d[g++]<<q;q+=8}if((x&65535)!==(x>>>16^65535)){a.msg="invalid stored block lengths";c.mode=30;break}c.length=x&
65535;q=x=0;c.mode=15;if(6===b)break a;case 15:c.mode=16;case 16:if(A=c.length){A>m&&(A=m);A>t&&(A=t);if(0===A)break a;p.arraySet(e,d,g,A,h);m-=A;g+=A;t-=A;h+=A;c.length-=A;break}c.mode=12;break;case 17:for(;14>q;){if(0===m)break a;m--;x+=d[g++]<<q;q+=8}c.nlen=(x&31)+257;x>>>=5;q-=5;c.ndist=(x&31)+1;x>>>=5;q-=5;c.ncode=(x&15)+4;x>>>=4;q-=4;if(286<c.nlen||30<c.ndist){a.msg="too many length or distance symbols";c.mode=30;break}c.have=0;c.mode=18;case 18:for(;c.have<c.ncode;){for(;3>q;){if(0===m)break a;
m--;x+=d[g++]<<q;q+=8}c.lens[y[c.have++]]=x&7;x>>>=3;q-=3}for(;19>c.have;)c.lens[y[c.have++]]=0;c.lencode=c.lendyn;c.lenbits=7;A={bits:c.lenbits};V=v(0,c.lens,0,19,c.lencode,0,c.work,A);c.lenbits=A.bits;if(V){a.msg="invalid code lengths set";c.mode=30;break}c.have=0;c.mode=19;case 19:for(;c.have<c.nlen+c.ndist;){for(;;){O=c.lencode[x&(1<<c.lenbits)-1];A=O>>>24;G=O>>>16&255;O&=65535;if(A<=q)break;if(0===m)break a;m--;x+=d[g++]<<q;q+=8}if(16>O)x>>>=A,q-=A,c.lens[c.have++]=O;else{if(16===O){for(G=A+
2;q<G;){if(0===m)break a;m--;x+=d[g++]<<q;q+=8}x>>>=A;q-=A;if(0===c.have){a.msg="invalid bit length repeat";c.mode=30;break}G=c.lens[c.have-1];A=3+(x&3);x>>>=2;q-=2}else if(17===O){for(G=A+3;q<G;){if(0===m)break a;m--;x+=d[g++]<<q;q+=8}x>>>=A;q-=A;G=0;A=3+(x&7);x>>>=3;q-=3}else{for(G=A+7;q<G;){if(0===m)break a;m--;x+=d[g++]<<q;q+=8}x>>>=A;q-=A;G=0;A=11+(x&127);x>>>=7;q-=7}if(c.have+A>c.nlen+c.ndist){a.msg="invalid bit length repeat";c.mode=30;break}for(;A--;)c.lens[c.have++]=G}}if(30===c.mode)break;
if(0===c.lens[256]){a.msg="invalid code -- missing end-of-block";c.mode=30;break}c.lenbits=9;A={bits:c.lenbits};V=v(1,c.lens,0,c.nlen,c.lencode,0,c.work,A);c.lenbits=A.bits;if(V){a.msg="invalid literal/lengths set";c.mode=30;break}c.distbits=6;c.distcode=c.distdyn;A={bits:c.distbits};V=v(2,c.lens,c.nlen,c.ndist,c.distcode,0,c.work,A);c.distbits=A.bits;if(V){a.msg="invalid distances set";c.mode=30;break}c.mode=20;if(6===b)break a;case 20:c.mode=21;case 21:if(6<=m&&258<=t){a.next_out=h;a.avail_out=
t;a.next_in=g;a.avail_in=m;c.hold=x;c.bits=q;u(a,D);h=a.next_out;e=a.output;t=a.avail_out;g=a.next_in;d=a.input;m=a.avail_in;x=c.hold;q=c.bits;12===c.mode&&(c.back=-1);break}for(c.back=0;;){O=c.lencode[x&(1<<c.lenbits)-1];A=O>>>24;G=O>>>16&255;O&=65535;if(A<=q)break;if(0===m)break a;m--;x+=d[g++]<<q;q+=8}if(G&&0===(G&240)){M=A;Z=G;for(da=O;;){O=c.lencode[da+((x&(1<<M+Z)-1)>>M)];A=O>>>24;G=O>>>16&255;O&=65535;if(M+A<=q)break;if(0===m)break a;m--;x+=d[g++]<<q;q+=8}x>>>=M;q-=M;c.back+=M}x>>>=A;q-=A;
c.back+=A;c.length=O;if(0===G){c.mode=26;break}if(G&32){c.back=-1;c.mode=12;break}if(G&64){a.msg="invalid literal/length code";c.mode=30;break}c.extra=G&15;c.mode=22;case 22:if(c.extra){for(G=c.extra;q<G;){if(0===m)break a;m--;x+=d[g++]<<q;q+=8}c.length+=x&(1<<c.extra)-1;x>>>=c.extra;q-=c.extra;c.back+=c.extra}c.was=c.length;c.mode=23;case 23:for(;;){O=c.distcode[x&(1<<c.distbits)-1];A=O>>>24;G=O>>>16&255;O&=65535;if(A<=q)break;if(0===m)break a;m--;x+=d[g++]<<q;q+=8}if(0===(G&240)){M=A;Z=G;for(da=
O;;){O=c.distcode[da+((x&(1<<M+Z)-1)>>M)];A=O>>>24;G=O>>>16&255;O&=65535;if(M+A<=q)break;if(0===m)break a;m--;x+=d[g++]<<q;q+=8}x>>>=M;q-=M;c.back+=M}x>>>=A;q-=A;c.back+=A;if(G&64){a.msg="invalid distance code";c.mode=30;break}c.offset=O;c.extra=G&15;c.mode=24;case 24:if(c.extra){for(G=c.extra;q<G;){if(0===m)break a;m--;x+=d[g++]<<q;q+=8}c.offset+=x&(1<<c.extra)-1;x>>>=c.extra;q-=c.extra;c.back+=c.extra}if(c.offset>c.dmax){a.msg="invalid distance too far back";c.mode=30;break}c.mode=25;case 25:if(0===
t)break a;A=D-t;if(c.offset>A){A=c.offset-A;if(A>c.whave&&c.sane){a.msg="invalid distance too far back";c.mode=30;break}A>c.wnext?(A-=c.wnext,G=c.wsize-A):G=c.wnext-A;A>c.length&&(A=c.length);M=c.window}else M=e,G=h-c.offset,A=c.length;A>t&&(A=t);t-=A;c.length-=A;do e[h++]=M[G++];while(--A);0===c.length&&(c.mode=21);break;case 26:if(0===t)break a;e[h++]=c.length;t--;c.mode=21;break;case 27:if(c.wrap){for(;32>q;){if(0===m)break a;m--;x|=d[g++]<<q;q+=8}D-=t;a.total_out+=D;c.total+=D;D&&(a.adler=c.check=
c.flags?r(c.check,e,D,h-D):k(c.check,e,D,h-D));D=t;if((c.flags?x:f(x))!==c.check){a.msg="incorrect data check";c.mode=30;break}q=x=0}c.mode=28;case 28:if(c.wrap&&c.flags){for(;32>q;){if(0===m)break a;m--;x+=d[g++]<<q;q+=8}if(x!==(c.total&4294967295)){a.msg="incorrect length check";c.mode=30;break}q=x=0}c.mode=29;case 29:V=1;break a;case 30:V=-3;break a;case 31:return-4;default:return-2}a.next_out=h;a.avail_out=t;a.next_in=g;a.avail_in=m;c.hold=x;c.bits=q;if((c.wsize||D!==a.avail_out&&30>c.mode&&(27>
c.mode||4!==b))&&n(a,a.output,a.next_out,D-a.avail_out))return c.mode=31,-4;C-=a.avail_in;D-=a.avail_out;a.total_in+=C;a.total_out+=D;c.total+=D;c.wrap&&D&&(a.adler=c.check=c.flags?r(c.check,e,D,a.next_out-D):k(c.check,e,D,a.next_out-D));a.data_type=c.bits+(c.last?64:0)+(12===c.mode?128:0)+(20===c.mode||15===c.mode?256:0);(0===C&&0===D||4===b)&&0===V&&(V=-5);return V};g.inflateEnd=function(a){if(!a||!a.state)return-2;var b=a.state;b.window&&(b.window=null);a.state=null;return 0};g.inflateGetHeader=
function(a,b){if(!a||!a.state)return-2;a=a.state;if(0===(a.wrap&2))return-2;a.head=b;b.done=!1;return 0};g.inflateSetDictionary=function(a,b){var c=b.length,d,e;if(!a||!a.state)return-2;d=a.state;if(0!==d.wrap&&11!==d.mode)return-2;if(11===d.mode&&(e=k(1,b,c,0),e!==d.check))return-3;if(n(a,b,c,c))return d.mode=31,-4;d.havedict=1;return 0};g.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":62,"./adler32":64,"./crc32":66,"./inffast":69,"./inftrees":71}],71:[function(d,h,g){var f=
d("../utils/common"),c=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],a=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],b=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],e=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];h.exports=function(d,g,h,k,r,m,u,v){for(var p=v.bits,n=0,q=0,t=0,E=0,
H=0,I=0,M=0,L=0,Q=0,B=0,x,Y,X=null,ga=0,A,G=new f.Buf16(16),I=new f.Buf16(16),ja=null,O=0,Z,da,V,n=0;15>=n;n++)G[n]=0;for(q=0;q<k;q++)G[g[h+q]]++;H=p;for(E=15;1<=E&&0===G[E];E--);H>E&&(H=E);if(0===E)return r[m++]=20971520,r[m++]=20971520,v.bits=1,0;for(t=1;t<E&&0===G[t];t++);H<t&&(H=t);for(n=L=1;15>=n;n++)if(L<<=1,L-=G[n],0>L)return-1;if(0<L&&(0===d||1!==E))return-1;I[1]=0;for(n=1;15>n;n++)I[n+1]=I[n]+G[n];for(q=0;q<k;q++)0!==g[h+q]&&(u[I[g[h+q]]++]=q);0===d?(X=ja=u,A=19):1===d?(X=c,ga-=257,ja=a,
O-=257,A=256):(X=b,ja=e,A=-1);q=B=0;n=t;p=m;I=H;M=0;Y=-1;Q=1<<H;k=Q-1;if(1===d&&852<Q||2===d&&592<Q)return 1;for(var U=0;;){U++;Z=n-M;u[q]<A?(da=0,V=u[q]):u[q]>A?(da=ja[O+u[q]],V=X[ga+u[q]]):(da=96,V=0);L=1<<n-M;t=x=1<<I;do x-=L,r[p+(B>>M)+x]=Z<<24|da<<16|V|0;while(0!==x);for(L=1<<n-1;B&L;)L>>=1;0!==L?(B&=L-1,B+=L):B=0;q++;if(0===--G[n]){if(n===E)break;n=g[h+u[q]]}if(n>H&&(B&k)!==Y){0===M&&(M=H);p+=t;I=n-M;for(L=1<<I;I+M<E;){L-=G[I+M];if(0>=L)break;I++;L<<=1}Q+=1<<I;if(1===d&&852<Q||2===d&&592<Q)return 1;
Y=B&k;r[Y]=H<<24|I<<16|p-m|0}}0!==B&&(r[p+B]=n-M<<24|4194304);v.bits=H;return 0}},{"../utils/common":62}],72:[function(d,h,g){h.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],73:[function(d,h,g){function f(a){for(var b=a.length;0<=--b;)a[b]=0}function c(a,b,c,d,e){this.static_tree=a;this.extra_bits=b;this.extra_base=c;this.elems=d;this.max_length=e;this.has_stree=
a&&a.length}function a(a,b){this.dyn_tree=a;this.max_code=0;this.stat_desc=b}function b(a,b){a.pending_buf[a.pending++]=b&255;a.pending_buf[a.pending++]=b>>>8&255}function e(a,c,d){a.bi_valid>16-d?(a.bi_buf|=c<<a.bi_valid&65535,b(a,a.bi_buf),a.bi_buf=c>>16-a.bi_valid,a.bi_valid+=d-16):(a.bi_buf|=c<<a.bi_valid&65535,a.bi_valid+=d)}function m(a,b,c){e(a,c[2*b],c[2*b+1])}function n(a,b){var c=0;do c|=a&1,a>>>=1,c<<=1;while(0<--b);return c>>>1}function p(a,b,c){var d=Array(16),e=0,f;for(f=1;15>=f;f++)d[f]=
e=e+c[f-1]<<1;for(c=0;c<=b;c++)e=a[2*c+1],0!==e&&(a[2*c]=n(d[e]++,e))}function k(a){var b;for(b=0;286>b;b++)a.dyn_ltree[2*b]=0;for(b=0;30>b;b++)a.dyn_dtree[2*b]=0;for(b=0;19>b;b++)a.bl_tree[2*b]=0;a.dyn_ltree[512]=1;a.opt_len=a.static_len=0;a.last_lit=a.matches=0}function r(a){8<a.bi_valid?b(a,a.bi_buf):0<a.bi_valid&&(a.pending_buf[a.pending++]=a.bi_buf);a.bi_buf=0;a.bi_valid=0}function q(a,b,c,d){var e=2*b,f=2*c;return a[e]<a[f]||a[e]===a[f]&&d[b]<=d[c]}function u(a,b,c){for(var d=a.heap[c],e=c<<
1;e<=a.heap_len;){e<a.heap_len&&q(b,a.heap[e+1],a.heap[e],a.depth)&&e++;if(q(b,d,a.heap[e],a.depth))break;a.heap[c]=a.heap[e];c=e;e<<=1}a.heap[c]=d}function v(a,b,c){var d,f,g=0,h,k;if(0!==a.last_lit){do d=a.pending_buf[a.d_buf+2*g]<<8|a.pending_buf[a.d_buf+2*g+1],f=a.pending_buf[a.l_buf+g],g++,0===d?m(a,f,b):(h=X[f],m(a,h+256+1,b),k=I[h],0!==k&&(f-=ga[h],e(a,f,k)),d--,h=256>d?Y[d]:Y[256+(d>>>7)],m(a,h,c),k=P[h],0!==k&&(d-=A[h],e(a,d,k)));while(g<a.last_lit)}m(a,256,b)}function F(a,b){var c=b.dyn_tree,
d=b.stat_desc.static_tree,e=b.stat_desc.has_stree,f=b.stat_desc.elems,g,h=-1,k;a.heap_len=0;a.heap_max=573;for(g=0;g<f;g++)0!==c[2*g]?(a.heap[++a.heap_len]=h=g,a.depth[g]=0):c[2*g+1]=0;for(;2>a.heap_len;)k=a.heap[++a.heap_len]=2>h?++h:0,c[2*k]=1,a.depth[k]=0,a.opt_len--,e&&(a.static_len-=d[2*k+1]);b.max_code=h;for(g=a.heap_len>>1;1<=g;g--)u(a,c,g);k=f;do g=a.heap[1],a.heap[1]=a.heap[a.heap_len--],u(a,c,1),d=a.heap[1],a.heap[--a.heap_max]=g,a.heap[--a.heap_max]=d,c[2*k]=c[2*g]+c[2*d],a.depth[k]=(a.depth[g]>=
a.depth[d]?a.depth[g]:a.depth[d])+1,c[2*g+1]=c[2*d+1]=k,a.heap[1]=k++,u(a,c,1);while(2<=a.heap_len);a.heap[--a.heap_max]=a.heap[1];g=b.dyn_tree;k=b.max_code;var d=b.stat_desc.static_tree,e=b.stat_desc.has_stree,f=b.stat_desc.extra_bits,n=b.stat_desc.extra_base,r=b.stat_desc.max_length,m,q,t,v,x=0;for(q=0;15>=q;q++)a.bl_count[q]=0;g[2*a.heap[a.heap_max]+1]=0;for(b=a.heap_max+1;573>b;b++)m=a.heap[b],q=g[2*g[2*m+1]+1]+1,q>r&&(q=r,x++),g[2*m+1]=q,m>k||(a.bl_count[q]++,t=0,m>=n&&(t=f[m-n]),v=g[2*m],a.opt_len+=
v*(q+t),e&&(a.static_len+=v*(d[2*m+1]+t)));if(0!==x){do{for(q=r-1;0===a.bl_count[q];)q--;a.bl_count[q]--;a.bl_count[q+1]+=2;a.bl_count[r]--;x-=2}while(0<x);for(q=r;0!==q;q--)for(m=a.bl_count[q];0!==m;)d=a.heap[--b],d>k||(g[2*d+1]!==q&&(a.opt_len+=(q-g[2*d+1])*g[2*d],g[2*d+1]=q),m--)}p(c,h,a.bl_count)}function R(a,b,c){var d,e=-1,f,g=b[1],h=0,k=7,m=4;0===g&&(k=138,m=3);b[2*(c+1)+1]=65535;for(d=0;d<=c;d++)f=g,g=b[2*(d+1)+1],++h<k&&f===g||(h<m?a.bl_tree[2*f]+=h:0!==f?(f!==e&&a.bl_tree[2*f]++,a.bl_tree[32]++):
10>=h?a.bl_tree[34]++:a.bl_tree[36]++,h=0,e=f,0===g?(k=138,m=3):f===g?(k=6,m=3):(k=7,m=4))}function C(a,b,c){var d,f=-1,g,h=b[1],k=0,r=7,n=4;0===h&&(r=138,n=3);for(d=0;d<=c;d++)if(g=h,h=b[2*(d+1)+1],!(++k<r&&g===h)){if(k<n){do m(a,g,a.bl_tree);while(0!==--k)}else 0!==g?(g!==f&&(m(a,g,a.bl_tree),k--),m(a,16,a.bl_tree),e(a,k-3,2)):10>=k?(m(a,17,a.bl_tree),e(a,k-3,3)):(m(a,18,a.bl_tree),e(a,k-11,7));k=0;f=g;0===h?(r=138,n=3):g===h?(r=6,n=3):(r=7,n=4)}}function D(a){var b=4093624447,c;for(c=0;31>=c;c++,
b>>>=1)if(b&1&&0!==a.dyn_ltree[2*c])return 0;if(0!==a.dyn_ltree[18]||0!==a.dyn_ltree[20]||0!==a.dyn_ltree[26])return 1;for(c=32;256>c;c++)if(0!==a.dyn_ltree[2*c])return 1;return 0}function E(a,c,d,f){e(a,0+(f?1:0),3);r(a);b(a,d);b(a,~d);N.arraySet(a.pending_buf,a.window,c,d,a.pending);a.pending+=d}var N=d("../utils/common"),I=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],P=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],L=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],
Q=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],B=Array(576);f(B);var x=Array(60);f(x);var Y=Array(512);f(Y);var X=Array(256);f(X);var ga=Array(29);f(ga);var A=Array(30);f(A);var G,ja,O,Z=!1;g._tr_init=function(b){if(!Z){var d,e,f,g=Array(16);for(f=e=0;28>f;f++)for(ga[f]=e,d=0;d<1<<I[f];d++)X[e++]=f;X[e-1]=f;for(f=e=0;16>f;f++)for(A[f]=e,d=0;d<1<<P[f];d++)Y[e++]=f;for(e>>=7;30>f;f++)for(A[f]=e<<7,d=0;d<1<<P[f]-7;d++)Y[256+e++]=f;for(d=0;15>=d;d++)g[d]=0;for(d=0;143>=d;)B[2*d+1]=8,d++,g[8]++;for(;255>=
d;)B[2*d+1]=9,d++,g[9]++;for(;279>=d;)B[2*d+1]=7,d++,g[7]++;for(;287>=d;)B[2*d+1]=8,d++,g[8]++;p(B,287,g);for(d=0;30>d;d++)x[2*d+1]=5,x[2*d]=n(d,5);G=new c(B,I,257,286,15);ja=new c(x,P,0,30,15);O=new c([],L,0,19,7);Z=!0}b.l_desc=new a(b.dyn_ltree,G);b.d_desc=new a(b.dyn_dtree,ja);b.bl_desc=new a(b.bl_tree,O);b.bi_buf=0;b.bi_valid=0;k(b)};g._tr_stored_block=E;g._tr_flush_block=function(a,b,c,d){var f,g,h=0;if(0<a.level){2===a.strm.data_type&&(a.strm.data_type=D(a));F(a,a.l_desc);F(a,a.d_desc);R(a,
a.dyn_ltree,a.l_desc.max_code);R(a,a.dyn_dtree,a.d_desc.max_code);F(a,a.bl_desc);for(h=18;3<=h&&0===a.bl_tree[2*Q[h]+1];h--);a.opt_len+=3*(h+1)+14;f=a.opt_len+3+7>>>3;g=a.static_len+3+7>>>3;g<=f&&(f=g)}else f=g=c+5;if(c+4<=f&&-1!==b)E(a,b,c,d);else if(4===a.strategy||g===f)e(a,2+(d?1:0),3),v(a,B,x);else{e(a,4+(d?1:0),3);b=a.l_desc.max_code+1;c=a.d_desc.max_code+1;h+=1;e(a,b-257,5);e(a,c-1,5);e(a,h-4,4);for(f=0;f<h;f++)e(a,a.bl_tree[2*Q[f]+1],3);C(a,a.dyn_ltree,b-1);C(a,a.dyn_dtree,c-1);v(a,a.dyn_ltree,
a.dyn_dtree)}k(a);d&&r(a)};g._tr_tally=function(a,b,c){a.pending_buf[a.d_buf+2*a.last_lit]=b>>>8&255;a.pending_buf[a.d_buf+2*a.last_lit+1]=b&255;a.pending_buf[a.l_buf+a.last_lit]=c&255;a.last_lit++;0===b?a.dyn_ltree[2*c]++:(a.matches++,b--,a.dyn_ltree[2*(X[c]+256+1)]++,a.dyn_dtree[2*(256>b?Y[b]:Y[256+(b>>>7)])]++);return a.last_lit===a.lit_bufsize-1};g._tr_align=function(a){e(a,2,3);m(a,256,B);16===a.bi_valid?(b(a,a.bi_buf),a.bi_buf=0,a.bi_valid=0):8<=a.bi_valid&&(a.pending_buf[a.pending++]=a.bi_buf&
255,a.bi_buf>>=8,a.bi_valid-=8)}},{"../utils/common":62}],74:[function(d,h,g){h.exports=function(){this.input=null;this.total_in=this.avail_in=this.next_in=0;this.output=null;this.total_out=this.avail_out=this.next_out=0;this.msg="";this.state=null;this.data_type=2;this.adler=0}},{}]},{},[10])(10)})})},"dijit/Menu":function(){define("require dojo/_base/array dojo/_base/declare dojo/dom dojo/dom-attr dojo/dom-geometry dojo/dom-style dojo/keys dojo/_base/lang dojo/on dojo/sniff dojo/_base/window dojo/window ./popup ./DropDownMenu dojo/ready".split(" "),
function(u,v,m,l,d,h,g,f,c,a,b,e,t,n,p,k){b("dijit-legacy-requires")&&k(0,function(){u(["dijit/MenuItem","dijit/PopupMenuItem","dijit/CheckedMenuItem","dijit/MenuSeparator"])});return m("dijit.Menu",p,{constructor:function(){this._bindings=[]},targetNodeIds:[],selector:"",contextMenuForWindow:!1,leftClickToOpen:!1,refocus:!0,postCreate:function(){this.contextMenuForWindow?this.bindDomNode(this.ownerDocumentBody):v.forEach(this.targetNodeIds,this.bindDomNode,this);this.inherited(arguments)},_iframeContentWindow:function(a){return t.get(this._iframeContentDocument(a))||
this._iframeContentDocument(a).__parent__||a.name&&document.frames[a.name]||null},_iframeContentDocument:function(a){return a.contentDocument||a.contentWindow&&a.contentWindow.document||a.name&&document.frames[a.name]&&document.frames[a.name].document||null},bindDomNode:function(b){b=l.byId(b,this.ownerDocument);var g;if("iframe"==b.tagName.toLowerCase()){var h=b;g=this._iframeContentWindow(h);g=e.body(g.document)}else g=b==e.body(this.ownerDocument)?this.ownerDocument.documentElement:b;var k={node:b,
iframe:h};d.set(b,"_dijitMenu"+this.id,this._bindings.push(k));var m=c.hitch(this,function(b){var c=this.selector,d=c?function(b){return a.selector(c,b)}:function(a){return a},e=this;return[a(b,d(this.leftClickToOpen?"click":"contextmenu"),function(a){a.stopPropagation();a.preventDefault();(new Date).getTime()<e._lastKeyDown+500||e._scheduleOpen(this,h,{x:a.pageX,y:a.pageY},a.target)}),a(b,d("keydown"),function(a){if(93==a.keyCode||a.shiftKey&&a.keyCode==f.F10||e.leftClickToOpen&&a.keyCode==f.SPACE)a.stopPropagation(),
a.preventDefault(),e._scheduleOpen(this,h,null,a.target),e._lastKeyDown=(new Date).getTime()})]});k.connects=g?m(g):[];h&&(k.onloadHandler=c.hitch(this,function(){var a=this._iframeContentWindow(h),a=e.body(a.document);k.connects=m(a)}),h.addEventListener?h.addEventListener("load",k.onloadHandler,!1):h.attachEvent("onload",k.onloadHandler))},unBindDomNode:function(a){var b;try{b=l.byId(a,this.ownerDocument)}catch(R){return}a="_dijitMenu"+this.id;if(b&&d.has(b,a)){for(var c=d.get(b,a)-1,e=this._bindings[c],
f;f=e.connects.pop();)f.remove();(f=e.iframe)&&(f.removeEventListener?f.removeEventListener("load",e.onloadHandler,!1):f.detachEvent("onload",e.onloadHandler));d.remove(b,a);delete this._bindings[c]}},_scheduleOpen:function(a,b,c,d){this._openTimer||(this._openTimer=this.defer(function(){delete this._openTimer;this._openMyself({target:d,delegatedTarget:a,iframe:b,coords:c})},1))},_openMyself:function(a){function c(){t.refocus&&u&&u.focus();n.close(t)}var d=a.target,e=a.iframe,f=a.coords,k=!f;this.currentTarget=
a.delegatedTarget;if(f){if(e){a=h.position(e,!0);var d=this._iframeContentWindow(e),d=h.docScroll(d.document),m=g.getComputedStyle(e),p=g.toPixelValue,r=(b("ie")&&b("quirks")?0:p(e,m.paddingLeft))+(b("ie")&&b("quirks")?p(e,m.borderLeftWidth):0),e=(b("ie")&&b("quirks")?0:p(e,m.paddingTop))+(b("ie")&&b("quirks")?p(e,m.borderTopWidth):0);f.x+=a.x+r-d.x;f.y+=a.y+e-d.y}}else f=h.position(d,!0),f.x+=10,f.y+=10;var t=this,e=this._focusManager.get("prevNode");a=this._focusManager.get("curNode");var u=!a||
l.isDescendant(a,this.domNode)?e:a;n.open({popup:this,x:f.x,y:f.y,onExecute:c,onCancel:c,orient:this.isLeftToRight()?"L":"R"});this.focus();k||this.defer(function(){this._cleanUp(!0)});this._onBlur=function(){this.inherited("_onBlur",arguments);n.close(this)}},destroy:function(){v.forEach(this._bindings,function(a){a&&this.unBindDomNode(a.node)},this);this.inherited(arguments)}})})},"widgets/HucNavigation/_build-generate_module":function(){define(["dojo/text!./Widget.html","dojo/text!./css/style.css",
"dojo/i18n!./nls/strings","dojo/text!widgets/HucNavigation/config.json"],function(){})},"url:widgets/HucNavigation/Parameters.html":'\x3cdiv\x3e\r\n  \x3ctable style\x3d"width:100%;border-collapse:collapse;"\x3e\r\n    \x3ctbody data-dojo-attach-point\x3d"tbody"\x3e\r\n    \x3c/tbody\x3e\r\n  \x3c/table\x3e\r\n\x3c/div\x3e',"url:widgets/HucNavigation/SingleParameter.html":'\x3cdiv\x3e\r\n  \x3ctable style\x3d"width:100%;"\x3e\r\n    \x3ccolgroup\x3e\r\n      \x3ccol width\x3d"100px" /\x3e\r\n      \x3ccol width\x3d"auto" /\x3e\r\n    \x3c/colgroup\x3e\r\n    \x3ctbody\x3e\r\n      \x3ctr data-dojo-attach-point\x3d"uniqueMessageTR" style\x3d"display: none;"\x3e\r\n        \x3ctd colspan\x3d"2"\x3e\r\n          \x3cdiv style\x3d"margin-bottom: 8px; height: 18px;"\x3e\r\n            \x3cdiv class\x3d"uniqueBusy"\x3e\x3c/div\x3e\r\n            \x3cdiv class\x3d"uniqueMessage" data-dojo-attach-point\x3d"uniqueMessageNode"\x3e\x3c/div\x3e\r\n            \x3cdiv class\x3d"cancelUnique" data-dojo-attach-point\x3d"uniqueCancelNode"\x3e${nls.cancel}\x3c/div\x3e\r\n          \x3c/div\x3e\r\n        \x3c/td\x3e\r\n      \x3c/tr\x3e\r\n      \x3ctr\x3e\r\n        \x3ctd\x3e\r\n          \x3cdiv class\x3d"prompt" data-dojo-attach-point\x3d"promptNode"\x3e\x3c/div\x3e\r\n        \x3c/td\x3e\r\n        \x3ctd\x3e\r\n          \x3cdiv data-dojo-attach-point\x3d"allValueBoxContainer" style\x3d"width:100%;padding-bottom:2px;"\x3e\r\n            \x3cdiv data-dojo-attach-point\x3d"stringTextBoxContainer" style\x3d"display:none;"\x3e\r\n              \x3cinput data-dojo-attach-point\x3d"stringTextBox" data-dojo-type\x3d"dijit/form/TextBox" data-dojo-props\x3d"trim:true" style\x3d"display:none;width:100%;height:30px;" class\x3d"dijit-form-TextBox" /\x3e\r\n              \x3cdiv data-dojo-attach-point\x3d"stringCodedValuesFS" data-dojo-type\x3d"dijit/form/FilteringSelect"\r\n                   data-dojo-props\x3d"searchAttr:\'name\',intermediateChanges:true" class\x3d"dijit-form-FilteringSelect"\x3e\x3c/div\x3e\r\n            \x3c/div\x3e\r\n\r\n            \x3cdiv data-dojo-attach-point\x3d"numberTextBoxContainer" style\x3d"display:none;"\x3e\r\n              \x3cinput data-dojo-attach-point\x3d"numberTextBox" data-dojo-type\x3d"dijit/form/NumberTextBox"\r\n                     data-dojo-props\x3d"intermediateChanges:true,constraints: {pattern: \'#####0.##########\'}"\r\n                     class\x3d"dijit-form-NumberTextBox" style\x3d"display:none;width:100%;height:30px;" /\x3e\r\n              \x3cdiv data-dojo-attach-point\x3d"numberCodedValuesFS" data-dojo-type\x3d"dijit/form/FilteringSelect"\r\n                   data-dojo-props\x3d"searchAttr:\'name\',required:false,intermediateChanges:true" class\x3d"dijit-form-FilteringSelect"\x3e\x3c/div\x3e\r\n              \x3ctable data-dojo-attach-point\x3d"numberRangeTable" style\x3d"display:none;width:100%;border-collapse:collapse;" cellpadding\x3d"0" cellspacing\x3d"0"\x3e\r\n                \x3ctbody\x3e\r\n                  \x3ctr\x3e\r\n                    \x3ctd style\x3d"width:40%;"\x3e\r\n                      \x3cinput data-dojo-attach-point\x3d"numberTextBox1" data-dojo-type\x3d"dijit/form/NumberTextBox" data-dojo-attach-event\x3d"blur:_onRangeNumberBlur" data-dojo-props\x3d"intermediateChanges:true,constraints: {pattern: \'#####0.##########\'}" class\x3d"dijit-form-NumberTextBox" style\x3d"width:100%;height:30px;" /\x3e\r\n                    \x3c/td\x3e\r\n                    \x3ctd style\x3d"width:20%;text-align:center;"\x3e\r\n                      \x3cspan\x3e${nls.and}\x3c/span\x3e\r\n                    \x3c/td\x3e\r\n                    \x3ctd style\x3d"width:40%;"\x3e\r\n                      \x3cinput data-dojo-attach-point\x3d"numberTextBox2" data-dojo-type\x3d"dijit/form/NumberTextBox" data-dojo-attach-event\x3d"blur:_onRangeNumberBlur" data-dojo-props\x3d"intermediateChanges:true,constraints: {pattern: \'#####0.##########\'}" class\x3d"dijit-form-NumberTextBox" style\x3d"width:100%;height:30px;" /\x3e\r\n                    \x3c/td\x3e\r\n                  \x3c/tr\x3e\r\n                \x3c/tbody\x3e\r\n              \x3c/table\x3e\r\n            \x3c/div\x3e\r\n\r\n            \x3cdiv data-dojo-attach-point\x3d"dateTextBoxContainer" style\x3d"display:none;"\x3e\r\n              \x3cinput data-dojo-attach-point\x3d"dateTextBox" data-dojo-type\x3d"dijit/form/DateTextBox"\r\n                     data-dojo-props\x3d"value:new Date(),trim:true,constraints:{datePattern: \'yyyy-MM-dd\'}"\r\n                     class\x3d"dijit-form-DateTextBox" style\x3d"display:none;width:100%;height:30px;" /\x3e\r\n\r\n              \x3ctable data-dojo-attach-point\x3d"dateRangeTable" style\x3d"display:none;width:100%;border-collapse:collapse;" cellpadding\x3d"0" cellspacing\x3d"0"\x3e\r\n                \x3ctbody\x3e\r\n                  \x3ctr\x3e\r\n                    \x3ctd style\x3d"width:40%;"\x3e\r\n                      \x3cinput data-dojo-attach-point\x3d"dateTextBox1" data-dojo-type\x3d"dijit/form/DateTextBox"\r\n                             data-dojo-attach-event\x3d"change:_onRangeDateBlur"\r\n                             data-dojo-props\x3d"value:new Date(),trim:true,constraints:{datePattern: \'yyyy-MM-dd\'}"\r\n                             class\x3d"dijit-form-DateTextBox" style\x3d"width:100%;height:30px;" /\x3e\r\n                    \x3c/td\x3e\r\n                    \x3ctd style\x3d"width:20%;text-align:center;"\x3e\r\n                      \x3cspan\x3e${nls.and}\x3c/span\x3e\r\n                    \x3c/td\x3e\r\n                    \x3ctd\x3e\r\n                      \x3cinput data-dojo-attach-point\x3d"dateTextBox2" data-dojo-type\x3d"dijit/form/DateTextBox" data-dojo-attach-event\x3d"change:_onRangeDateBlur"\r\n                             data-dojo-props\x3d"value:new Date(),trim:true,constraints:{datePattern: \'yyyy-MM-dd\'}"\r\n                             class\x3d"dijit-form-DateTextBox" style\x3d"width:100%;height:30px;" /\x3e\r\n                    \x3c/td\x3e\r\n                  \x3c/tr\x3e\r\n                \x3c/tbody\x3e\r\n              \x3c/table\x3e\r\n            \x3c/div\x3e\r\n          \x3c/div\x3e\r\n        \x3c/td\x3e\r\n      \x3c/tr\x3e\r\n      \x3ctr\x3e\r\n        \x3ctd\x3e\r\n          \x3cspan class\x3d"required" title\x3d"${nls.requiredTip}" data-dojo-attach-point\x3d"requiredNode"\x3e*${nls.required}\x3c/span\x3e\r\n        \x3c/td\x3e\r\n        \x3ctd\x3e\r\n          \x3cdiv class\x3d"hint" data-dojo-attach-point\x3d"hintNode"\x3e\x3c/div\x3e\r\n        \x3c/td\x3e\r\n      \x3c/tr\x3e\r\n    \x3c/tbody\x3e\r\n  \x3c/table\x3e\r\n\x3c/div\x3e\r\n',
"url:dijit/templates/Calendar.html":'\x3cdiv class\x3d"dijitCalendarContainer dijitInline" role\x3d"presentation" aria-labelledby\x3d"${id}_mddb ${id}_year"\x3e\n\t\x3cdiv class\x3d"dijitReset dijitCalendarMonthContainer" role\x3d"presentation"\x3e\n\t\t\x3cdiv class\x3d\'dijitReset dijitCalendarArrow dijitCalendarDecrementArrow\' data-dojo-attach-point\x3d"decrementMonth"\x3e\n\t\t\t\x3cimg src\x3d"${_blankGif}" alt\x3d"" class\x3d"dijitCalendarIncrementControl dijitCalendarDecrease" role\x3d"presentation"/\x3e\n\t\t\t\x3cspan data-dojo-attach-point\x3d"decreaseArrowNode" class\x3d"dijitA11ySideArrow"\x3e-\x3c/span\x3e\n\t\t\x3c/div\x3e\n\t\t\x3cdiv class\x3d\'dijitReset dijitCalendarArrow dijitCalendarIncrementArrow\' data-dojo-attach-point\x3d"incrementMonth"\x3e\n\t\t\t\x3cimg src\x3d"${_blankGif}" alt\x3d"" class\x3d"dijitCalendarIncrementControl dijitCalendarIncrease" role\x3d"presentation"/\x3e\n\t\t\t\x3cspan data-dojo-attach-point\x3d"increaseArrowNode" class\x3d"dijitA11ySideArrow"\x3e+\x3c/span\x3e\n\t\t\x3c/div\x3e\n\t\t\x3cdiv data-dojo-attach-point\x3d"monthNode" class\x3d"dijitInline"\x3e\x3c/div\x3e\n\t\x3c/div\x3e\n\t\x3ctable cellspacing\x3d"0" cellpadding\x3d"0" role\x3d"grid" data-dojo-attach-point\x3d"gridNode"\x3e\n\t\t\x3cthead\x3e\n\t\t\t\x3ctr role\x3d"row"\x3e\n\t\t\t\t${!dayCellsHtml}\n\t\t\t\x3c/tr\x3e\n\t\t\x3c/thead\x3e\n\t\t\x3ctbody data-dojo-attach-point\x3d"dateRowsNode" data-dojo-attach-event\x3d"ondijitclick: _onDayClick" class\x3d"dijitReset dijitCalendarBodyContainer"\x3e\n\t\t\t\t${!dateRowsHtml}\n\t\t\x3c/tbody\x3e\n\t\x3c/table\x3e\n\t\x3cdiv class\x3d"dijitReset dijitCalendarYearContainer" role\x3d"presentation"\x3e\n\t\t\x3cdiv class\x3d"dijitCalendarYearLabel"\x3e\n\t\t\t\x3cspan data-dojo-attach-point\x3d"previousYearLabelNode" class\x3d"dijitInline dijitCalendarPreviousYear" role\x3d"button"\x3e\x3c/span\x3e\n\t\t\t\x3cspan data-dojo-attach-point\x3d"currentYearLabelNode" class\x3d"dijitInline dijitCalendarSelectedYear" role\x3d"button" id\x3d"${id}_year"\x3e\x3c/span\x3e\n\t\t\t\x3cspan data-dojo-attach-point\x3d"nextYearLabelNode" class\x3d"dijitInline dijitCalendarNextYear" role\x3d"button"\x3e\x3c/span\x3e\n\t\t\x3c/div\x3e\n\t\x3c/div\x3e\n\x3c/div\x3e\n',
"url:dijit/templates/ProgressBar.html":'\x3cdiv class\x3d"dijitProgressBar dijitProgressBarEmpty" role\x3d"progressbar"\n\t\x3e\x3cdiv  data-dojo-attach-point\x3d"internalProgress" class\x3d"dijitProgressBarFull"\n\t\t\x3e\x3cdiv class\x3d"dijitProgressBarTile" role\x3d"presentation"\x3e\x3c/div\n\t\t\x3e\x3cspan style\x3d"visibility:hidden"\x3e\x26#160;\x3c/span\n\t\x3e\x3c/div\n\t\x3e\x3cdiv data-dojo-attach-point\x3d"labelNode" class\x3d"dijitProgressBarLabel" id\x3d"${id}_label"\x3e\x3c/div\n\t\x3e\x3cspan data-dojo-attach-point\x3d"indeterminateHighContrastImage"\n\t\t   class\x3d"dijitInline dijitProgressBarIndeterminateHighContrastImage"\x3e\x3c/span\n\x3e\x3c/div\x3e\n',
"url:dojox/grid/resources/View.html":'\x3cdiv class\x3d"dojoxGridView" role\x3d"presentation"\x3e\n\t\x3cdiv class\x3d"dojoxGridHeader" dojoAttachPoint\x3d"headerNode" role\x3d"presentation"\x3e\n\t\t\x3cdiv dojoAttachPoint\x3d"headerNodeContainer" style\x3d"width:9000em" role\x3d"presentation"\x3e\n\t\t\t\x3cdiv dojoAttachPoint\x3d"headerContentNode" role\x3d"row"\x3e\x3c/div\x3e\n\t\t\x3c/div\x3e\n\t\x3c/div\x3e\n\t\x3cinput type\x3d"checkbox" class\x3d"dojoxGridHiddenFocus" dojoAttachPoint\x3d"hiddenFocusNode" aria-hidden\x3d"true" /\x3e\n\t\x3cinput type\x3d"checkbox" class\x3d"dojoxGridHiddenFocus" aria-hidden\x3d"true" /\x3e\n\t\x3cdiv class\x3d"dojoxGridScrollbox" dojoAttachPoint\x3d"scrollboxNode" role\x3d"presentation"\x3e\n\t\t\x3cdiv class\x3d"dojoxGridContent" dojoAttachPoint\x3d"contentNode" hidefocus\x3d"hidefocus" role\x3d"presentation"\x3e\x3c/div\x3e\n\t\x3c/div\x3e\n\x3c/div\x3e\n',
"url:dijit/templates/CheckedMenuItem.html":'\x3ctr class\x3d"dijitReset" data-dojo-attach-point\x3d"focusNode" role\x3d"${role}" tabIndex\x3d"-1" aria-checked\x3d"${checked}"\x3e\n\t\x3ctd class\x3d"dijitReset dijitMenuItemIconCell" role\x3d"presentation"\x3e\n\t\t\x3cspan class\x3d"dijitInline dijitIcon dijitMenuItemIcon dijitCheckedMenuItemIcon" data-dojo-attach-point\x3d"iconNode"\x3e\x3c/span\x3e\n\t\t\x3cspan class\x3d"dijitMenuItemIconChar dijitCheckedMenuItemIconChar"\x3e${!checkedChar}\x3c/span\x3e\n\t\x3c/td\x3e\n\t\x3ctd class\x3d"dijitReset dijitMenuItemLabel" colspan\x3d"2" data-dojo-attach-point\x3d"containerNode,labelNode,textDirNode"\x3e\x3c/td\x3e\n\t\x3ctd class\x3d"dijitReset dijitMenuItemAccelKey" style\x3d"display: none" data-dojo-attach-point\x3d"accelKeyNode"\x3e\x3c/td\x3e\n\t\x3ctd class\x3d"dijitReset dijitMenuArrowCell" role\x3d"presentation"\x3e\x26#160;\x3c/td\x3e\n\x3c/tr\x3e\n',
"url:dojox/grid/resources/_Grid.html":'\x3cdiv hidefocus\x3d"hidefocus" role\x3d"grid" dojoAttachEvent\x3d"onmouseout:_mouseOut"\x3e\n\t\x3cdiv class\x3d"dojoxGridMasterHeader" dojoAttachPoint\x3d"viewsHeaderNode" role\x3d"presentation"\x3e\x3c/div\x3e\n\t\x3cdiv class\x3d"dojoxGridMasterView" dojoAttachPoint\x3d"viewsNode" role\x3d"presentation"\x3e\x3c/div\x3e\n\t\x3cdiv class\x3d"dojoxGridMasterMessages" style\x3d"display: none;" dojoAttachPoint\x3d"messagesNode"\x3e\x3c/div\x3e\n\t\x3cspan dojoAttachPoint\x3d"lastFocusNode" tabindex\x3d"0"\x3e\x3c/span\x3e\n\x3c/div\x3e\n',
"url:widgets/HucNavigation/Widget.html":'\x3cdiv\x3e\r\n  \x3cdiv data-dojo-attach-point\x3d"tabSearch"\x3e\r\n    \x3cdiv class\x3d"search-tab-node-hidden" data-dojo-attach-point\x3d"tabNode1"\x3e\r\n       \x3cdiv\x3e\r\n        \x3clabel style\x3d"font-size: 18px;"\x3e${nls.searchLayer}\x3c/label\x3e\r\n        \x3cbr\x3e\r\n      \t\t\x3cdiv id\x3d"user_options"\x3e\r\n      \t\t\t\x3c!-- toggle on/off to allow selecting to show all HUC12s, or HUC8s and just\r\n      \t\t\t     a subset of HUC12s - upto the bottom of the first HUC8  --\x3e\r\n\t\t\t\t\x3c!-- \r\n\t\t\t\t\x3cdiv style\x3d"padding-top: 10px; font-size: 14px; " \x3e\r\n\t\t\t\t\t\x3cinput id\x3d"showAllHUC12" name\x3d\'show_all_huc12_bool\' type\x3d\'checkbox\' /\x3eShow all navigated HUC12s\r\n\t\t\t\t\x3c/div\x3e\r\n\t\t\t\t--\x3e\r\n\t\t\t\t\x3cdiv id\x3d"navDirection" style\x3d"padding-top: 10px; font-size: 14px;" \x3eNavigation direction \r\n\t\t\t\t\t\x3cinput name\x3d\'navigation_direction\' value\x3d\'Upstream\' ng-model\x3d\'mValue\' type\x3d\'radio\'  checked\x3d"checked" /\x3eUpstream or  \r\n\t\t\t\t\t\x3cinput name\x3d\'navigation_direction\' value\x3d\'Downstream\' ng-model\x3d\'mValue\' type\x3d\'radio\' /\x3eDownstream\r\n\t\t\t\t\x3c/div\x3e\r\n\t\t\t\t\x3c!-- toggle on/off to allow selecting the HUC12 layer --\x3e\r\n\t\t\t\t\x3c!-- \r\n\t\t\t\t\x3cdiv id\x3d"selectHUC12MapServer" style\x3d"padding-top: 10px; font-size: 14px;" \x3eSelect HUC12 Map Server\r\n\t\t\t\t\t\x3cinput name\x3d\'huc12_mapserver\' value\x3d\'EnviroAtlas\' ng-model\x3d\'mValue\' type\x3d\'radio\' checked\x3d"checked" /\x3eEnviroAtlas or  \r\n\t\t\t\t\t\x3cinput name\x3d\'huc12_mapserver\' value\x3d\'WatersGEO\' ng-model\x3d\'mValue\' type\x3d\'radio\' /\x3eWatersGEO\r\n\t\t\t\t\x3c/div\x3e\r\n\t\t\t\t --\x3e\t\t\r\n\t\t\t\x3c/div\x3e\r\n        \x3cbr\x3e\r\n        \x3clabel class\x3d"esearch-label hidden" style\x3d"display: none; margin-bottom:10px;float:left;line-height:30px;" data-dojo-attach-point\x3d"labelLayerGraphical"\x3e\x3c/label\x3e\r\n        \x3cselect class\x3d"esearch-select-graphic" style\x3d"display: none; margin-bottom:10px;float:left;" data-dojo-attach-point\x3d"selectLayerGraphical" data-dojo-type\x3d"dijit/form/Select"\x3e\x3c/select\x3e\r\n\x3c!--        \x3cdiv data-dojo-type\x3d"dijit/form/DropDownButton" data-dojo-attach-point\x3d"gSelectType" iconclass\x3d"newSelIcon" class\x3d"selectionmenu"\x3e\x3cspan\x3e\x3c/span\x3e\r\n          \x3cdiv data-dojo-type\x3d"dijit/Menu"\x3e\r\n            \x3cdiv data-dojo-type\x3d"dijit/MenuItem" data-dojo-attach-event\x3d"onClick:onNewSelection" iconclass\x3d"newSelIcon"\x3e${nls.createnewselection}\x3c/div\x3e\r\n            \x3cdiv data-dojo-type\x3d"dijit/MenuItem" data-dojo-attach-event\x3d"onClick:onAddSelection" iconclass\x3d"addSelIcon"\x3e${nls.addtoselection}\x3c/div\x3e\r\n            \x3cdiv data-dojo-type\x3d"dijit/MenuItem" data-dojo-attach-event\x3d"onClick:onRemoveSelection" iconclass\x3d"removeSelIcon"\x3e${nls.removefromselection}\x3c/div\x3e\r\n          \x3c/div\x3e\r\n        \x3c/div\x3e--\x3e\r\n      \x3c/div\x3e\r\n      \x3cbr\x3e\r\n      \x3c!--\x3clabel\x3e${nls.selectFeaturesBy}\x3c/label\x3e \r\n      \x3cbr\x3e--\x3e\r\n      \x3cdiv data-dojo-attach-point\x3d"drawBox" data-dojo-type\x3d"jimu/dijit/DrawBox" data-dojo-props\x3d"types:[\'point\',\'polyline\',\'polygon\'],showClear:false"\x3e\x3c/div\x3e\r\n      \x3ca class\x3d"button-clear-graphical" href\x3d"#" data-dojo-attach-point\x3d"btnClear2"\x3e${nls.clear}\x3c/a\x3e\r\n      \x3cdiv style\x3d"clear:both;margin-bottom:8px;" data-dojo-attach-point\x3d"multiGraDiv"\x3e\r\n        \x3cdiv data-dojo-type\x3d"jimu/dijit/CheckBox" data-dojo-attach-point\x3d"cbxMultiGraphic" data-dojo-props\x3d"label:\'${nls.useMultiGraphics}\'" style\x3d"margin-top: 8px;"\x3e\x3c/div\x3e\r\n        \x3cdiv data-dojo-attach-point\x3d"btnGraSearch" data-dojo-attach-event\x3d"onclick:_onBtnGraSearchClicked" class\x3d"search-btn btn-grasearch"\x3e${nls.search}\x3c/div\x3e\r\n      \x3c/div\x3e\r\n      \x3cdiv style\x3d"padding-bottom:8px;" data-dojo-attach-point\x3d"addToleranceDiv"\x3e\r\n        \x3cdiv data-dojo-type\x3d"jimu/dijit/CheckBox" data-dojo-attach-point\x3d"cbxAddTolerance" data-dojo-props\x3d"label:\'${nls.addTolerance}\'"\x3e\x3c/div\x3e\r\n      \x3c/div\x3e\r\n      \x3cdiv data-dojo-attach-point\x3d"addSqlTextDiv"\x3e\r\n        \x3cdiv data-dojo-type\x3d"jimu/dijit/CheckBox" data-dojo-attach-point\x3d"cbxAddTextQuery" data-dojo-props\x3d"checked: false,label:\'${nls.addTextQuery}\'"\x3e\x3c/div\x3e\r\n      \x3c/div\x3e\r\n      \x3cdiv style\x3d"white-space: nowrap;" data-dojo-attach-point\x3d"bufferGraDiv"\x3e\r\n        \x3cdiv data-dojo-type\x3d"jimu/dijit/CheckBox" data-dojo-attach-point\x3d"cbxBufferGraphic" data-dojo-props\x3d"label:\'${nls.bufferGraphic}\'" style\x3d"margin-top: 8px;"\x3e\x3c/div\x3e\r\n        \x3cinput type\x3d"text" data-dojo-type\x3d"dijit/form/NumberTextBox" data-dojo-attach-point\x3d"txtBufferValue" data-dojo-props\x3d"required:true,intermediateChanges:true" style\x3d"width:50px;padding-right:5px;margin-top:-8px;" /\x3e\r\n        \x3cselect style\x3d"width:120px;padding-right:5px;margin-top:-8px;" data-dojo-attach-point\x3d"bufferUnits" data-dojo-type\x3d"dijit/form/Select"\x3e\x3c/select\x3e\r\n        \x3ca style\x3d"float:right; margin-right:10px" href\x3d"#" data-dojo-attach-point\x3d"btnClearBuffer2"\x3e${nls.clearBuffer}\x3c/a\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv class\x3d"search-tab-node-hidden" data-dojo-attach-point\x3d"tabNode2"\x3e\r\n      \x3cdiv\x3e\r\n        \x3clabel\x3e${nls.searchLayer}\x3c/label\x3e\r\n        \x3ca style\x3d"float:right; margin-right:10px" href\x3d"#" data-dojo-attach-point\x3d"btnClear3"\x3e${nls.clear}\x3c/a\x3e\r\n        \x3ca style\x3d"float:right; margin-right:10px" href\x3d"#" data-dojo-attach-point\x3d"btnClear4"\x3e${nls.clearfields}\x3c/a\x3e\r\n        \x3cdiv style\x3d"clear:both;"\x3e\x3c/div\x3e\r\n        \x3clabel class\x3d"esearch-label hidden" style\x3d"margin-bottom:10px;float:left;line-height:30px;" data-dojo-attach-point\x3d"labelLayerAttribute"\x3e\x3c/label\x3e\r\n        \x3cselect class\x3d"esearch-select-attrib" style\x3d"margin-bottom:10px;float:left;" data-dojo-attach-point\x3d"selectLayerAttribute" data-dojo-type\x3d"dijit/form/Select"\x3e\x3c/select\x3e\r\n        \x3cdiv data-dojo-type\x3d"dijit/form/DropDownButton" data-dojo-attach-point\x3d"aSelectType" iconclass\x3d"newSelIcon" class\x3d"selectionmenu"\x3e\x3cspan\x3e\x3c/span\x3e\r\n          \x3cdiv data-dojo-type\x3d"dijit/Menu"\x3e\r\n            \x3cdiv data-dojo-type\x3d"dijit/MenuItem" data-dojo-attach-event\x3d"onClick:onNewSelection2" iconclass\x3d"newSelIcon"\x3e${nls.createnewselection}\x3c/div\x3e\r\n            \x3cdiv data-dojo-type\x3d"dijit/MenuItem" data-dojo-attach-event\x3d"onClick:onAddSelection2" iconclass\x3d"addSelIcon"\x3e${nls.addtoselection}\x3c/div\x3e\r\n            \x3cdiv data-dojo-type\x3d"dijit/MenuItem" data-dojo-attach-event\x3d"onClick:onRemoveSelection2" iconclass\x3d"removeSelIcon"\x3e${nls.removefromselection}\x3c/div\x3e\r\n          \x3c/div\x3e\r\n        \x3c/div\x3e\r\n        \x3cdiv data-dojo-attach-point\x3d"expressionDiv" style\x3d"display:none;clear: both;"\x3e\r\n          \x3clabel\x3e${nls.searchType}\x3c/label\x3e\r\n          \x3cbr\x3e\r\n          \x3cselect class\x3d"esearch-select" data-dojo-attach-point\x3d"selectExpression" data-dojo-type\x3d"dijit/form/Select"\x3e\x3c/select\x3e\r\n        \x3c/div\x3e\r\n      \x3c/div\x3e\r\n      \x3cdiv class\x3d"params-container" data-dojo-attach-point\x3d"paramsContainer" style\x3d"width:96%;margin:10px 0;clear: both;"\x3e\r\n        \x3cdiv class\x3d"attributes-section" data-dojo-attach-point\x3d"parametersDiv"\x3e\r\n          \x3cspan style\x3d"display:block;margin-bottom:10px;" data-dojo-attach-point\x3d"textsearchlabel"\x3e\x3c/span\x3e\r\n        \x3c/div\x3e\r\n      \x3c/div\x3e\r\n      \x3cdiv class\x3d"jimu-r-row play-section"\x3e\r\n        \x3cdiv class\x3d"col-1-3"\x3e\r\n          \x3cdiv class\x3d"search-btn" data-dojo-attach-point\x3d"btnSearch" data-dojo-attach-event\x3d"onclick:onSearch"\x3e${nls.search}\x3c/div\x3e\r\n        \x3c/div\x3e\r\n        \x3cdiv class\x3d"col-2-3"\x3e\r\n          \x3cdiv data-dojo-type\x3d"jimu/dijit/CheckBox" data-dojo-attach-point\x3d"limitMapExtentCbx" style\x3d"margin-top: 14px;" data-dojo-props\x3d"label:\'${nls.limit2mapextent}\'"\x3e\x3c/div\x3e\r\n        \x3c/div\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv class\x3d"search-tab-node-hidden" data-dojo-attach-point\x3d"tabNode3"\x3e\r\n      \x3cdiv\x3e\r\n        \x3clabel\x3e${nls.searchDistance}\x3c/label\x3e\r\n        \x3cbr\x3e\r\n        \x3cdiv style\x3d"height:50px;white-space:nowrap;"\x3e\r\n          \x3cinput type\x3d"text" data-dojo-type\x3d"dijit/form/NumberTextBox" data-dojo-attach-point\x3d"txtBufferValueSpat" data-dojo-props\x3d"required:true,intermediateChanges:true" style\x3d"width:80px;padding-right:5px;margin-top:-50px;" /\x3e\r\n          \x3cselect style\x3d"width:120px;padding-right:5px;margin-top:-50px;" data-dojo-attach-point\x3d"bufferUnitsSpat" data-dojo-type\x3d"dijit/form/Select"\x3e\x3c/select\x3e\r\n          \x3cdiv style\x3d"display: inline-block;" title\x3d"${nls.applyBuffer}" class\x3d"buffer-icon" data-dojo-attach-event\x3d"click:_bufferFeatures"\x3e\x3c/div\x3e\r\n          \x3ca style\x3d"float:right; margin-right:10px" href\x3d"#" data-dojo-attach-point\x3d"btnClearBuffer3"\x3e${nls.clearBuffer}\x3c/a\x3e\r\n        \x3c/div\x3e\r\n      \x3c/div\x3e\r\n      \x3chr style\x3d"clear:both;"\x3e\r\n      \x3cdiv\x3e\r\n        \x3clabel\x3e${nls.searchEntities}\x3c/label\x3e\r\n        \x3cbr\x3e\r\n        \x3clabel class\x3d"label-layer-spatial hidden" style\x3d"margin-bottom:10px;float:left;line-height:30px;" data-dojo-attach-point\x3d"labelLayerSpatial"\x3e\x3c/label\x3e\r\n        \x3cselect class\x3d"select-layer-spatial" data-dojo-attach-point\x3d"selectLayerSpatial" data-dojo-type\x3d"dijit/form/Select"\x3e\x3c/select\x3e\r\n      \x3c/div\x3e\r\n      \x3clabel\x3e${nls.searchSpatialRelationship}\x3c/label\x3e\r\n      \x3cbr\x3e\r\n      \x3cdiv class\x3d"hcenter"\x3e\r\n        \x3cdiv class\x3d"spatial-items" data-dojo-attach-point\x3d"spatialItems"\x3e\x3c/div\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv class\x3d"search-tab-node-hidden" data-dojo-attach-point\x3d"tabNode4" style\x3d"overflow: hidden;"\x3e\r\n      \x3cdiv data-dojo-attach-point\x3d"progressbar"\x3e\x3c/div\x3e\r\n      \x3cdiv data-dojo-attach-point\x3d"divResultMessage" class\x3d"esearch-noResults"\x3e\x3c/div\x3e\r\n      \x3cdiv class\x3d"popup-menu-button esearch-result-action-button" data-dojo-attach-event\x3d"click:_onBtnMenuClicked" data-dojo-attach-point\x3d"divOptions" title\x3d"${nls.resultactions}" style\x3d"display:none;"\x3e\x3c/div\x3e\r\n      \x3cdiv data-dojo-attach-point\x3d"listDiv"\x3e\x3c/div\x3e\r\n      \x3cdiv id\x3d"results"\x3e\x3c/div\x3e\r\n      \x3cdiv data-dojo-attach-point\x3d"clickAgainMessage"\x3eSelect one of the highlighted HUC-12 subwatersheds to navigate upstream.+\x3c/div\x3e\r\n      \x3cdiv style\x3d"margin-top:38px"\x3e\r\n      \x3cdiv id\x3d"gridHUC12" data-dojo-attach-point\x3d"gridHUC12"\x3e\x3c/div\x3e\r\n      \x3cbr\x3e\r\n      \x3cdiv id\x3d"gridNavResults" data-dojo-attach-point\x3d"gridNavResults"\x3e\x3c/div\x3e\r\n      \x3c/div\x3e\r\n      \x3clabel data-dojo-attach-point\x3d"divSum" class\x3d"esearch-sum" style\x3d"display:none;"\x3e\x3c/label\x3e\r\n    \x3c/div\x3e\r\n  \x3c/div\x3e\r\n  \x3cimg id\x3d"loadingImg" src\x3d"images/hourglass.gif" style\x3d"display: none; position:absolute; right:512px; top:256px; z-index:100;" /\x3e\r\n  \r\n  \x3cdiv data-dojo-type\x3d"jimu/dijit/LoadingShelter" data-dojo-attach-point\x3d"shelter" data-dojo-props\x3d"hidden:true" style\x3d"overflow:hidden;"\x3e\x3c/div\x3e\r\n\x3c/div\x3e\r\n',
"url:widgets/HucNavigation/css/style.css":'.widget-esearch {position: relative; width: 100%; height: 100%; min-width: 265px; min-height: 279px;}.jimu-widget-attributetable-feature-table-footer{padding-top: 6px; padding-left: 3px;}.widget-esearch .required {color: red;}.jimu-widget-frame\x3e.widget-esearch\x3e.jimu-tab\x3e.control {margin: -14px -14px 0 -14px;}.jimu-widget-frame\x3e.widget-esearch\x3e.jimu-tab\x3e.jimu-viewstack,.jimu-container\x3e.widget-esearch\x3e.jimu-tab\x3e.jimu-viewstack {position: absolute !important; top: 45px !important; left: 0 !important; right: 0 !important; bottom: 0 !important; height: auto; margin-bottom: -14px;}.widget-esearch\x3e.jimu-tab\x3e.jimu-viewstack {position: absolute !important; top: 45px !important; left: 0 !important; right: 0 !important; bottom: 0 !important; height: auto; margin-bottom: -14px;}.widget-esearch .search-tab-node,.widget-esearch .result-tab-node {position: absolute !important; width: 100% !important; height: auto !important; top: 0 !important; bottom: 0 !important;}.widget-esearch .search-tab-node-hidden {position: absolute !important; width: 100% !important; height: auto !important; top: 0 !important; bottom: 0 !important; display: none;}.widget-esearch .option-div {font-size: 14px; padding-left: 10px; height: 16px;}.widget-esearch .btn-grasearch {margin-left: auto; margin-right: auto; padding: 6px 12px; margin-top: -8px;}.widget-esearch .dijitArrowButtonContainer {width: 30px;}.widget-esearch .dijitSelect {height: 30px; width: 100%;}.widget-esearch .searchFeaturesIcon {width: 40px; height: 40px; background-repeat: no-repeat; text-align: center; float: left; margin: 10px 11px 12px 11px;}.widget-esearch .searchFeaturesIcon:hover {background-color: #C0C0C0;}.widget-esearch .contain-icon {background-image: url("images/contain.png");}.widget-esearch .intersect-icon {background-image: url("images/intersect.png");}.widget-esearch .envintersects-icon {background-image: url("images/envintersects.png");}.widget-esearch .within-icon {background-image: url("images/within.png");}.widget-esearch .touches-icon {background-image: url("images/touches.png");}.widget-esearch .overlaps-icon {background-image: url("images/overlaps.png");}.widget-esearch .indexintersects-icon {background-image: url("images/index.png");}.widget-esearch .crosses-icon {background-image: url("images/crosses.png");}.widget-esearch .hcenter {margin-left: auto; width: 100%; height: 40px; margin-top: 8px;}.widget-esearch .spatial-items {display: table; margin: 0px auto; height: 40px;}.widget-esearch .spatial-items .spatial-item {width: 40px; height: 40px; background-repeat: no-repeat; cursor: pointer; margin: 0 4px; float: left;}.widget-esearch .spatial-item.selected,.widget-esearch .spatial-item:hover {background-color: #C0C0C0;}.widget-esearch .buffer-icon {width: 40px; height: 40px; background-repeat: no-repeat; text-align: center; margin: 7px; background-image: url("images/buffer.png"); cursor: pointer;}.widget-esearch .buffer-icon:hover {background-color: #C0C0C0;}.TabTheme .widget-esearch .jimu-tab\x3e.control\x3e.tab.jimu-state-selected {border-top: 0;}.search-valign-ele {line-height: 47px;}.search-list-container,.relate-list-container {min-width: 100%; height: 100%; vertical-align: middle; float: left; position: relative;}.relate-list-item {line-height: 40px; font-size: 12px; white-space: pre; position: relative; margin: 1px 0; border-radius: 8px; border-color: lightgray; border-style: solid; border-width: 1px; padding: 5px; cursor: pointer;}.search-list-item {line-height: 30px; font-size: 12px; white-space: pre; position: relative;}.result-wrap{white-space: pre-wrap;}.search-list-item .label,.relate-list-item .label {padding-left: 40px; padding-right: 10px; padding-bottom: 3px; cursor: default;}.search-list-item ._title,.relate-list-item ._title{padding-left: 40px; padding-right: 10px; padding-bottom: 3px; margin-right: 22px; cursor:default; font-weight: bolder;}.relate-list-item ._title {} cursor:pointer;}.search-list-item .labellink {padding-left: 40px; padding-right: 10px; padding-bottom: 3px; cursor: pointer; outline: none;}.search-list-item .iconDiv,.relate-list-item .iconDiv {text-align: center; position: absolute; height: 100%; left: 0;}.relate-list-item .iconDiv {left: 5px; top: 2px;}.search-list-item .linksdiv {text-align: center; width: 100%; padding-left: 5px; padding-right: 5px;}.search-list-item .linkIcon {display: inline-block; padding-right: 4px;}.search-list-item .iconDiv:before {content: \'\'; display: inline-block; height: 100%; vertical-align: middle; margin-right: -0.25em;}.search-list-item .iconDiv svg {display: inline-block; vertical-align: middle;}.search-list-item.alt {background-color: #ebebeb;}.search-list-item.selected {background-color: #d9dde0;}.search-list-item.selected.alt {background-color: #d9dde0;}.search-list-item:hover,.relate-list-item:hover {background-color: #dcdcdc;}.search-list-item.alt:hover {background-color: #dcdcdc;}.search-list-item.selected:hover {background-color: #d9dde0;}.search-list-item.selected.alt:hover {background-color: #d9dde0;}.widget-esearch .esearch-list {position: absolute; width: 100%; height: auto; left: 0; right: 0; top: 25px; bottom: 10px; overflow-x: auto; overflow-y: auto;}.widget-esearch .esearch-noResults {position: absolute; width: 100%;}.widget-esearch .esearch-list.sum {position: absolute; width: 100%; height: auto; left: 0; right: 0; top: 25px; bottom: 24px; overflow-x: auto; overflow-y: auto;}.widget-esearch .esearch-sum {position: absolute; width: 100%; height: auto; left: 0; right: 0; bottom: 0; overflow-x: hidden; overflow-y: hidden;}.widget-esearch .select-layer-spatial,.widget-esearch .label-layer-spatial {width: 96%; margin-top: 10px; margin-bottom: 10px;}.widget-esearch .esearch-select,.widget-esearch .esearch-label,.widget-esearch .esearch-select-attrib,.widget-esearch .esearch-select-graphic {width: 83%; margin-top: 10px; margin-right: 3px;}.hidden {display: none;}.widget-esearch .button-clear-graphical {float: right; margin-right: 10px; padding-bottom: 8px;}.widget-esearch .search-params .params-container {position: absolute; width: 100%; left: 0; top: 40px; bottom: 0; overflow-y: auto;}.widget-esearch .search-params table.current-view {width: auto; border-collapse: collapse; margin-top: 10px;}.widget-esearch .query-search table.current-view td {vertical-align: top; text-align: left;}.widget-esearch .search-params table.current-view .map-extent-tip {padding-left: 8px;}.widget-esearch-single-parameter .dijit-form-Select\x3etbody\x3etr\x3etd {height: 23px;}.widget-esearch-single-parameter .dijit-form-Select\x3etbody\x3etr\x3etd\x3e.dijitButtonText {height: 20px; height: 20px !important;}.widget-esearch-single-parameter .dijit-form-FilteringSelect {display: none; width: 100%; height: 25px;}.widget-esearch-single-parameter .dijit-form-FilteringSelect\x3ediv.dijitArrowButton.dijitDownArrowButton {width: 20px; height: 100%;}.widget-esearch-single-parameter .dijit-form-FilteringSelect\x3ediv.dijitArrowButton.dijitDownArrowButton\x3einput {padding: 0; border: 0; display: inline-block; height: 100%; height: 100% !important;}.widget-esearch-single-parameter .dijit-form-FilteringSelect\x3ediv.dijitInputField\x3einput.dijitInputInner {height: 20px;}.widget-esearch-single-parameter .dijit-form-ValidationTextBox\x3ediv.dijitInputField\x3einput.dijitInputInner {margin: 0; padding: 0; height: 100%; height: 100% !important;}.widget-esearch-single-parameter .dijit-form-NumberTextBox\x3ediv.dijitInputField\x3einput.dijitInputInner {margin: 0; padding: 0; height: 100%; padding: 0 !important; height: 100% !important;}.widget-esearch-single-parameter .dijit-form-DateTextBox\x3e.dijitRight {width: 17px; width: 17px !important;}.widget-esearch-single-parameter .dijit-form-DateTextBox\x3ediv.dijitInputField\x3einput.dijitInputInner {margin: 0; padding: 0; height: 100%; padding: 0 !important; height: 100% !important;}.widget-esearch-single-parameter .dijitSelectLabel.dijitValidationTextBoxLabel {width: 52px; max-width: 52px; overflow: hidden; max-width: 52px !important; overflow: hidden !important;}.widget-esearch-single-parameter .prompt {font-size: 12px; color: #686868;}.widget-esearch-single-parameter .uniqueMessage {font-size: 12px; color: #686868; line-height: 16px; float: left;}.widget-esearch-single-parameter .cancelUnique {cursor: pointer; display: inline-block; padding: 0 4px; font-size: 10px; line-height: 16px; text-align: center; background: none repeat scroll 0% 0% #cccccc; vertical-align: middle; color: #000; border-radius: 5px; width: 40px; height: 16px; margin-left: 8px; margin-bottom: 3px;}.widget-esearch-single-parameter .cancelUnique:hover {background: none repeat scroll 0% 0% #acacac;}.widget-esearch-single-parameter .uniqueBusy {width: 16px; height: 16px; background-image: url(images/validating.gif); float: left; margin-right: 7px;}.DartTheme .widget-esearch-single-parameter .uniqueBusy {width: 16px; height: 16px; background-image: url(images/validating2.gif); float: left; margin-right: 7px;}.widget-esearch-single-parameter .hint {font-style: italic; font-size: 12px; color: #8996a0; margin-top: 5px;}.search-btn {cursor: pointer; min-width: 70px; display: inline-block; padding: 12px; font-size: 15px; text-align: center; vertical-align: middle; color: #FFF; border-radius: 5px; overflow: hidden; text-overflow: ellipsis; white-space: nowrap;}.search-btn {background-color: rgb(0, 0, 0); background-color: rgba(0, 0, 0, 1);}.search-btn:hover {background-color: rgb(0, 0, 0); -ms-filter: "Alpha(opacity\x3d70)"; background-color: rgba(0, 0, 0, 0.7);}.JewelryBoxTheme.default .jimu-on-screen-widget-panel \x3e .jimu-panel-title,.JewelryBoxTheme.default .search-btn,.JewelryBoxTheme.default .jimu-draw-box .draw-item.jimu-state-active,.FoldableTheme jimu-draw-box .draw-item.jimu-state-active,.FoldableTheme .search-btn,.FoldableTheme .esriPopup .titlePane,.JewelryBoxTheme.default .esriPopup .titlePane {background-color: rgb(89, 102, 121); background-color: rgba(89, 102, 121, 1);}.JewelryBoxTheme.default .search-btn:hover,.FoldableTheme .search-btn:hover,.JewelryBoxTheme.default .jimu-draw-box .draw-item:hover,.FoldableTheme .jimu-draw-box .draw-item:hover {background-color: rgb(89, 102, 121); -ms-filter: "Alpha(opacity\x3d70)"; background-color: rgba(89, 102, 121, 0.7);}.TabTheme .search-btn,.TabTheme .jimu-draw-box .draw-item.jimu-state-active,.TabTheme .esriPopup .titlePane {background-color: rgb(0, 0, 0); background-color: rgba(0, 0, 0, 1);}.TabTheme .search-btn:hover,.TabTheme .jimu-draw-box .draw-item:hover {background-color: rgb(0, 0, 0); -ms-filter: "Alpha(opacity\x3d70)"; background-color: rgba(0, 0, 0, 0.7);}.BoxTheme.default .search-btn,.BoxTheme.default .jimu-draw-box .draw-item.jimu-state-active,.BoxTheme.default .esriPopup .titlePane {background-color: rgb(100, 100, 100); background-color: rgba(100, 100, 100, 1);}.BoxTheme.default .search-btn:hover,.BoxTheme.default .jimu-draw-box .draw-item:hover {background-color: rgb(100, 100, 100); -ms-filter: "Alpha(opacity\x3d70)"; background-color: rgba(100, 100, 100, 0.7);}.BillboardTheme.blue .search-btn,.BillboardTheme.default .search-btn,.BillboardTheme.green .search-btn,.BillboardTheme.orange .search-btn,.BillboardTheme.pink .search-btn,.BillboardTheme.purple .search-btn,.BillboardTheme.red .search-btn,.BillboardTheme.turquoise .search-btn,.BillboardTheme.blue .jimu-draw-box .draw-item.jimu-state-active,.BillboardTheme.default .jimu-draw-box .draw-item.jimu-state-active,.BillboardTheme.green .jimu-draw-box .draw-item.jimu-state-active,.BillboardTheme.orange .jimu-draw-box .draw-item.jimu-state-active,.BillboardTheme.pink .jimu-draw-box .draw-item.jimu-state-active,.BillboardTheme.purple .jimu-draw-box .draw-item.jimu-state-active,.BillboardTheme.red .jimu-draw-box .draw-item.jimu-state-active,.BillboardTheme.turquoise .jimu-draw-box .draw-item.jimu-state-active {background-color: rgb(217, 221, 224); color: #86909C;}.BillboardTheme.blue .search-btn:hover,.BillboardTheme.default .search-btn:hover,.BillboardTheme.green .search-btn:hover,.BillboardTheme.orange .search-btn:hover,.BillboardTheme.pink .search-btn:hover,.BillboardTheme.purple .search-btn:hover,.BillboardTheme.red .search-btn:hover,.BillboardTheme.turquoise .search-btn:hover,.BillboardTheme.blue .jimu-draw-box .draw-item:hover,.BillboardTheme.default .jimu-draw-box .draw-item:hover,.BillboardTheme.green .jimu-draw-box .draw-item:hover,.BillboardTheme.orange .jimu-draw-box .draw-item:hover,.BillboardTheme.pink .jimu-draw-box .draw-item:hover,.BillboardTheme.purple .jimu-draw-box .draw-item:hover,.BillboardTheme.red .jimu-draw-box .draw-item:hover,.BillboardTheme.turquoise .jimu-draw-box .draw-item:hover {background-color: rgb(0, 0, 0); -ms-filter: "Alpha(opacity\x3d70)"; background-color: rgba(0, 0, 0, 0.5); color: #fff;}.BillboardTheme.blue .esriPopup .titlePane,.DartTheme.blue .esriPopup .titlePane {background-color: #2f70e4;}.BillboardTheme.default .esriPopup .titlePane {background-color: #2e3641;}.DartTheme.default .esriPopup .titlePane {background-color: #646464;}.BillboardTheme.green .esriPopup .titlePane {background-color: #6db8ac;}.DartTheme.green .esriPopup .titlePane {background-color: #80ab00;}.BillboardTheme.orange .esriPopup .titlePane {background-color: #edbd35;}.DartTheme.orange .esriPopup .titlePane {background-color: #ff9b00;}.BillboardTheme.pink .esriPopup .titlePane {background-color: #fe6960;}.DartTheme.pink .esriPopup .titlePane {background-color: #ed008c;}.BillboardTheme.purple .esriPopup .titlePane {background-color: #856d9c;}.DartTheme.purple .esriPopup .titlePane {background-color: #886197;}.BillboardTheme.red .esriPopup .titlePane {background-color: #e83428;}.DartTheme.red .esriPopup .titlePane {background-color: #cf0000;}.BillboardTheme.turquoise .esriPopup .titlePane {background-color: #2d95a0;}.DartTheme.turquoise .esriPopup .titlePane {background-color: #2faacd;}.FoldableTheme.default .jimu-on-screen-widget-panel \x3e .jimu-panel-title,.FoldableTheme.default .search-btn,.FoldableTheme.default .jimu-draw-box .draw-item.jimu-state-active,.FoldableTheme.default .esriPopup .titlePane {background-color: rgb(89, 102, 121); background-color: rgba(89, 102, 121, 1);}.FoldableTheme.default .search-btn:hover,.FoldableTheme.default .jimu-draw-box .draw-item:hover {background-color: rgb(89, 102, 121); -ms-filter: "Alpha(opacity\x3d70)"; background-color: rgba(89, 102, 121, 0.7);}.JewelryBoxTheme.black .jimu-on-screen-widget-panel \x3e .jimu-panel-title,.FoldableTheme.black .jimu-on-screen-widget-panel \x3e .jimu-panel-title,.TabTheme.default .jimu-on-screen-widget-panel \x3e .jimu-panel-title,.FoldableTheme.black .search-btn,.TabTheme.default .search-btn,.JewelryBoxTheme.black .search-btn,.PlateauTheme.black .search-btn,.FoldableTheme.black .jimu-draw-box .draw-item.jimu-state-active,.TabTheme.default .jimu-draw-box .draw-item.jimu-state-active,.JewelryBoxTheme.black .jimu-draw-box .draw-item.jimu-state-active,.PlateauTheme.black .jimu-draw-box .draw-item.jimu-state-active,.FoldableTheme.black .esriPopup .titlePane,.JewelryBoxTheme.black .esriPopup .titlePane,.TabTheme.default .esriPopup .titlePane,.PlateauTheme.black .esriPopup .titlePane {background-color: rgb(0, 0, 0); background-color: rgba(0, 0, 0, 1);}.FoldableTheme.black .search-btn:hover,.TabTheme.default .search-btn:hover,.JewelryBoxTheme.black .search-btn:hover,.PlateauTheme.black .search-btn:hover,.FoldableTheme.black .jimu-draw-box .draw-item:hover,.TabTheme.default .jimu-draw-box .draw-item:hover,.JewelryBoxTheme.black .jimu-draw-box .draw-item:hover,.PlateauTheme.black .jimu-draw-box .draw-item:hover {background-color: rgb(0, 0, 0); -ms-filter: "Alpha(opacity\x3d70)"; background-color: rgba(0, 0, 0, 0.7);}.PlateauTheme.default .search-btn,.PlateauTheme.default .jimu-draw-box .draw-item.jimu-state-active,.PlateauTheme.default .esriPopup .titlePane {background-color: rgb(70, 70, 70); background-color: rgba(70, 70, 70, 1);}.PlateauTheme.default .jimu-draw-box .draw-item:hover,.PlateauTheme.default .search-btn:hover{background-color: rgb(70, 70, 70); -ms-filter: "Alpha(opacity\x3d70)"; background-color: rgba(70, 70, 70, 0.7);}.PlateauTheme.medium-grey .search-btn,.PlateauTheme.medium-grey .jimu-draw-box .draw-item.jimu-state-active,.PlateauTheme.medium-grey .esriPopup .titlePane {background-color: rgb(110, 110, 110); background-color: rgba(110, 110, 110, 1);}.PlateauTheme.medium-grey .jimu-draw-box .draw-item:hover,.PlateauTheme.medium-grey .search-btn:hover {background-color: rgb(110, 110, 110); -ms-filter: "Alpha(opacity\x3d70)"; background-color: rgba(110, 110, 110, 0.7);}.PlateauTheme.dark-blue .search-btn,.PlateauTheme.dark-blue .jimu-draw-box .draw-item.jimu-state-active,.PlateauTheme.dark-blue .esriPopup .titlePane {background-color: rgb(0, 69, 117); background-color: rgba(0, 69, 117, 1);}.PlateauTheme.dark-blue .jimu-draw-box .draw-item:hover,.PlateauTheme.dark-blue .search-btn:hover {background-color: rgb(0, 69, 117); -ms-filter: "Alpha(opacity\x3d70)"; background-color: rgba(0, 69, 117, 0.7);}.PlateauTheme.esri-blue .search-btn,.PlateauTheme.esri-blue .jimu-draw-box .draw-item.jimu-state-active,.PlateauTheme.esri-blue .esriPopup .titlePane {background-color: rgb(0, 122, 194); background-color: rgba(0, 122, 194, 1);}.PlateauTheme.esri-blue .jimu-draw-box .draw-item:hover,.PlateauTheme.esri-blue .search-btn:hover {background-color: rgb(0, 122, 194); -ms-filter: "Alpha(opacity\x3d70)"; background-color: rgba(0, 122, 194, 0.7);}.PlateauTheme.esri-green .search-btn,.PlateauTheme.esri-green .jimu-draw-box .draw-item.jimu-state-active,.PlateauTheme.esri-green .esriPopup .titlePane {background-color: rgb(53, 172, 70); background-color: rgba(53, 172, 70, 1);}.PlateauTheme.esri-green .jimu-draw-box .draw-item:hover,.PlateauTheme.esri-green .search-btn:hover {background-color: rgb(53, 172, 70); -ms-filter: "Alpha(opacity\x3d70)"; background-color: rgba(53, 172, 70, 0.7);}.PlateauTheme.dark-green .search-btn,.PlateauTheme.dark-green .jimu-draw-box .draw-item.jimu-state-active,.PlateauTheme.dark-green .esriPopup .titlePane {background-color: rgb(42, 116, 51); background-color: rgba(42, 116, 51, 1);}.PlateauTheme.dark-green .jimu-draw-box .draw-item:hover,.PlateauTheme.dark-green .search-btn:hover {background-color: rgb(42, 116, 51); -ms-filter: "Alpha(opacity\x3d70)"; background-color: rgba(42, 116, 51, 0.7);}.PlateauTheme.orange .search-btn,.PlateauTheme.orange .jimu-draw-box .draw-item.jimu-state-active,.PlateauTheme.orange .esriPopup .titlePane {background-color: rgb(218 ,77, 30); background-color: rgba(218 ,77, 30, 1);}.PlateauTheme.orange .jimu-draw-box .draw-item:hover,.PlateauTheme.orange .search-btn:hover {background-color: rgb(218 ,77, 30); -ms-filter: "Alpha(opacity\x3d70)"; background-color: rgba(218 ,77, 30, 0.7);}.JewelryBoxTheme.cyan .jimu-on-screen-widget-panel \x3e .jimu-panel-title,.FoldableTheme.cyan .jimu-on-screen-widget-panel \x3e .jimu-panel-title,.FoldableTheme.cyan .search-btn,.JewelryBoxTheme.cyan .search-btn,.FoldableTheme.cyan .jimu-draw-box .draw-item.jimu-state-active,.JewelryBoxTheme.cyan .jimu-draw-box .draw-item.jimu-state-active,.JewelryBoxTheme.cyan .esriPopup .titlePane,.FoldableTheme.cyan .esriPopup .titlePane {background-color: rgb(38, 112, 48); background-color: rgba(38, 112, 48, 1);}.FoldableTheme.cyan .search-btn:hover,.JewelryBoxTheme.cyan .search-btn:hover,.FoldableTheme.cyan .jimu-draw-box .draw-item:hover,.JewelryBoxTheme.cyan .jimu-draw-box .draw-item:hover {background-color: rga(38, 112, 48); -ms-filter: "Alpha(opacity\x3d70)"; background-color: rgba(38, 112, 48, 0.7);}.TabTheme.cyan .jimu-on-screen-widget-panel \x3e .jimu-panel-title,.TabTheme.cyan .search-btn,.TabTheme.cyan .jimu-draw-box .draw-item.jimu-state-active,.TabTheme.cyan .esriPopup .titlePane {background-color: rgb(42, 170, 138); background-color: rgba(42, 170, 138, 1);}.TabTheme.cyan .search-btn:hover,.TabTheme.cyan .jimu-draw-box .draw-item:hover {background-color: rga(42, 170, 138); -ms-filter: "Alpha(opacity\x3d70)"; background-color: rgba(42, 170, 138, 0.7);}.TabTheme.green .jimu-on-screen-widget-panel \x3e .jimu-panel-title,.TabTheme.green .search-btn,.TabTheme.green .jimu-draw-box .draw-item.jimu-state-active,.TabTheme.green .esriPopup .titlePane {background-color: rgb(5, 171, 8); background-color: rgba(5, 171, 8, 1);}.TabTheme.green .search-btn:hover,.TabTheme.green .jimu-draw-box .draw-item:hover {background-color: rgb(5, 171, 8); -ms-filter: "Alpha(opacity\x3d70)"; background-color: rgba(5, 171, 8, 0.7);}.BoxTheme.green .search-btn,.BoxTheme.green .jimu-draw-box .draw-item.jimu-state-active,.BoxTheme.green .esriPopup .titlePane {background-color: rgb(128, 171, 0); background-color: rgba(128, 171, 0, 1);}.BoxTheme.green .search-btn:hover,.BoxTheme.green .jimu-draw-box .draw-item:hover {background-color: rgb(128, 171, 0); -ms-filter: "Alpha(opacity\x3d70)"; background-color: rgba(128, 171, 0, 0.7);}.BoxTheme.orange .search-btn,.BoxTheme.orange .jimu-draw-box .draw-item.jimu-state-active,.BoxTheme.orange .esriPopup .titlePane {background-color: rgb(255, 155, 0); background-color: rgba(255, 155, 0, 1);}.BoxTheme.orange .search-btn:hover,.BoxTheme.orange .jimu-draw-box .draw-item:hover {background-color: rgb(255, 155, 0); -ms-filter: "Alpha(opacity\x3d70)"; background-color: rgba(255, 155, 0, 0.7);}.JewelryBoxTheme.green .jimu-on-screen-widget-panel \x3e .jimu-panel-title,.FoldableTheme.green .jimu-on-screen-widget-panel \x3e .jimu-panel-title,.FoldableTheme.green .search-btn,.JewelryBoxTheme.green .search-btn,.FoldableTheme.green .jimu-draw-box .draw-item.jimu-state-active,.JewelryBoxTheme.green .jimu-draw-box .draw-item.jimu-state-active,.JewelryBoxTheme.green .esriPopup .titlePane,.FoldableTheme.green .esriPopup .titlePane {background-color: rgb(42, 170, 138); background-color: rgba(42, 170, 138, 1);}.FoldableTheme.green .search-btn:hover,.JewelryBoxTheme.green .search-btn:hover,.FoldableTheme.green .jimu-draw-box .draw-item:hover,.JewelryBoxTheme.green .jimu-draw-box .draw-item:hover {background-color: rgb(42, 170, 138); -ms-filter: "Alpha(opacity\x3d70)"; background-color: rgba(42, 170, 138, 0.7);}.BoxTheme.turquoise .search-btn,.BoxTheme.turquoise .jimu-draw-box .draw-item.jimu-state-active,.BoxTheme.turquoise .esriPopup .titlePane {background-color: rgb(47, 170, 205); background-color: rgba(47, 170, 205, 1);}.BoxTheme.turquoise .search-btn:hover,.BoxTheme.turquoise .jimu-draw-box .draw-item:hover {background-color: rgb(47, 170, 205); -ms-filter: "Alpha(opacity\x3d70)"; background-color: rgba(47, 170, 205, 0.7);}.TabTheme.simpleblue .jimu-on-screen-widget-panel \x3e .jimu-panel-title,.TabTheme.simpleblue .search-btn,.TabTheme.simpleblue .jimu-draw-box .draw-item.jimu-state-active,.TabTheme.simpleblue .esriPopup .titlePane {background-color: rgb(52, 152, 219); background-color: rgba(52, 152, 219, 1);}.TabTheme.simpleblue .search-btn:hover,.TabTheme.simpleblue .jimu-draw-box .draw-item:hover {background-color: rgb(52, 152, 219); -ms-filter: "Alpha(opacity\x3d70)"; background-color: rgba(52, 152, 219, 0.7);}.JewelryBoxTheme.red .jimu-on-screen-widget-panel \x3e .jimu-panel-title,.FoldableTheme.red .jimu-on-screen-widget-panel \x3e .jimu-panel-title,.TabTheme.red .jimu-on-screen-widget-panel \x3e .jimu-panel-title,.FoldableTheme.red .search-btn,.TabTheme.red .search-btn,.JewelryBoxTheme.red .search-btn,.FoldableTheme.red .jimu-draw-box .draw-item.jimu-state-active,.TabTheme.red .jimu-draw-box .draw-item.jimu-state-active,.JewelryBoxTheme.red .jimu-draw-box .draw-item.jimu-state-active,.JewelryBoxTheme.red .esriPopup .titlePane,.FoldableTheme.red .esriPopup .titlePane,.TabTheme.red .esriPopup .titlePane {background-color: rgb(201, 46, 73); background-color: rgba(201, 46, 73, 1);}.FoldableTheme.red .search-btn:hover,.TabTheme.red .search-btn:hover,.JewelryBoxTheme.red .search-btn:hover,.FoldableTheme.red .jimu-draw-box .draw-item:hover,.TabTheme.red .jimu-draw-box .draw-item:hover,.JewelryBoxTheme.red .jimu-draw-box .draw-item:hover {background-color: rgb(201, 46, 73); -ms-filter: "Alpha(opacity\x3d70)"; background-color: rgba(201, 46, 73, 0.7);}.BoxTheme.red .search-btn,.BoxTheme.red .jimu-draw-box .draw-item.jimu-state-active,.BoxTheme.red .esriPopup .titlePane {background-color: rgb(207, 0, 0); background-color: rgba(207, 0, 0, 1);}.BoxTheme.red .search-btn:hover,.BoxTheme.red .jimu-draw-box .draw-item:hover {background-color: rgb(207, 0, 0); -ms-filter: "Alpha(opacity\x3d70)"; background-color: rgba(207, 0, 0, 0.7);}.BoxTheme.pink .search-btn,.BoxTheme.pink .jimu-draw-box .draw-item.jimu-state-active,.BoxTheme.pink .esriPopup .titlePane {background-color: rgb(237, 0, 140); background-color: rgba(237, 0, 140, 1);}.BoxTheme.pink .search-btn:hover,.BoxTheme.pink .jimu-draw-box .draw-item:hover {background-color: rgb(237, 0, 140); -ms-filter: "Alpha(opacity\x3d70)"; background-color: rgba(237, 0, 140, 0.7);}.JewelryBoxTheme.yellow .jimu-on-screen-widget-panel \x3e .jimu-panel-title,.FoldableTheme.yellow .jimu-on-screen-widget-panel \x3e .jimu-panel-title,.TabTheme.yellow .jimu-on-screen-widget-panel \x3e .jimu-panel-title,.FoldableTheme.yellow .search-btn,.TabTheme.yellow .search-btn,.JewelryBoxTheme.yellow .search-btn,.FoldableTheme.yellow .jimu-draw-box .draw-item.jimu-state-active,.TabTheme.yellow .jimu-draw-box .draw-item.jimu-state-active,.JewelryBoxTheme.yellow .jimu-draw-box .draw-item.jimu-state-active,.JewelryBoxTheme.yellow .esriPopup .titlePane,.FoldableTheme.yellow .esriPopup .titlePane,.TabTheme.yellow .esriPopup .titlePane {background-color: rgb(208, 125, 14); background-color: rgba(208, 125, 14, 1);}.FoldableTheme.yellow .search-btn:hover,.TabTheme.yellow .search-btn:hover,.JewelryBoxTheme.yellow .search-btn:hover,.FoldableTheme.yellow .jimu-draw-box .draw-item:hover,.TabTheme.yellow .jimu-draw-box .draw-item:hover,.JewelryBoxTheme.yellow .jimu-draw-box .draw-item:hover {background-color: rgb(208, 125, 14); -ms-filter: "Alpha(opacity\x3d70)"; background-color: rgba(208, 125, 14, 0.7);}.JewelryBoxTheme.blue .jimu-on-screen-widget-panel \x3e .jimu-panel-title,.FoldableTheme.blue .jimu-on-screen-widget-panel \x3e .jimu-panel-title,.TabTheme.blue .jimu-on-screen-widget-panel \x3e .jimu-panel-title,.FoldableTheme.blue .search-btn,.TabTheme.blue .search-btn,.JewelryBoxTheme.blue .search-btn,.FoldableTheme.blue .jimu-draw-box .draw-item.jimu-state-active,.TabTheme.blue .jimu-draw-box .draw-item.jimu-state-active,.JewelryBoxTheme.blue .jimu-draw-box .draw-item.jimu-state-active,.JewelryBoxTheme.blue .esriPopup .titlePane,.FoldableTheme.blue .esriPopup .titlePane,.TabTheme.blue .esriPopup .titlePane {background-color: rgb(0, 95, 162); background-color: rgba(0, 95, 162, 1);}.FoldableTheme.blue .search-btn:hover,.TabTheme.blue .search-btn:hover,.JewelryBoxTheme.blue .search-btn:hover,.FoldableTheme.blue .jimu-draw-box .draw-item:hover,.TabTheme.blue .jimu-draw-box .draw-item:hover,.JewelryBoxTheme.blue .jimu-draw-box .draw-item:hover {background-color: rgb(0, 95, 162); -ms-filter: "Alpha(opacity\x3d70)"; background-color: rgba(0, 95, 162, 0.7);}.BoxTheme.blue .search-btn,.BoxTheme.blue .jimu-draw-box .draw-item.jimu-state-active,.BoxTheme.blue .esriPopup .titlePane {background-color: rgb(45, 112, 228); background-color: rgba(45, 112, 228, 1);}.BoxTheme.blue .search-btn:hover,.BoxTheme.blue .jimu-draw-box .draw-item:hover {background-color: rgb(45, 112, 228); -ms-filter: "Alpha(opacity\x3d70)"; background-color: rgba(45, 112, 228, 0.7);}.JewelryBoxTheme.purple .jimu-on-screen-widget-panel \x3e .jimu-panel-title,.FoldableTheme.purple .jimu-on-screen-widget-panel \x3e .jimu-panel-title,.TabTheme.purple .jimu-on-screen-widget-panel \x3e .jimu-panel-title,.FoldableTheme.purple .search-btn,.TabTheme.purple .search-btn,.JewelryBoxTheme.purple .search-btn,.FoldableTheme.purple .jimu-draw-box .draw-item.jimu-state-active,.TabTheme.purple .jimu-draw-box .draw-item.jimu-state-active,.JewelryBoxTheme.purple .jimu-draw-box .draw-item.jimu-state-active,.JewelryBoxTheme.purple .esriPopup .titlePane,.FoldableTheme.purple .esriPopup .titlePane,.TabTheme.purple .esriPopup .titlePane {background-color: rgb(171, 109, 174); background-color: rgba(171, 109, 174, 1);}.FoldableTheme.purple .search-btn:hover,.TabTheme.purple .search-btn:hover,.JewelryBoxTheme.purple .search-btn:hover,.FoldableTheme.purple .jimu-draw-box .draw-item:hover,.TabTheme.purple .jimu-draw-box .draw-item:hover,.JewelryBoxTheme.purple .jimu-draw-box .draw-item:hover {background-color: rgb(171, 109, 174); -ms-filter: "Alpha(opacity\x3d70)"; background-color: rgba(171, 109, 174, 0.7);}.BoxTheme.purple .search-btn,.BoxTheme.purple .jimu-draw-box .draw-item.jimu-state-active,.BoxTheme.purple .esriPopup .titlePane {background-color: rgb(136, 97, 151); background-color: rgba(136, 97, 151, 1);}.BoxTheme.purple .search-btn:hover,.BoxTheme.purple .jimu-draw-box .draw-item:hover {background-color: rgb(136, 97, 151); -ms-filter: "Alpha(opacity\x3d70)"; background-color: rgba(136, 97, 151, 0.7);}.LaunchpadTheme.style2 .search-btn,.LaunchpadTheme.default .search-btn,.LaunchpadTheme.style2 .jimu-draw-box .draw-item.jimu-state-active,.LaunchpadTheme.default .jimu-draw-box .draw-item.jimu-state-active,.LaunchpadTheme.style2 .esriPopup .titlePane,.LaunchpadTheme.default .esriPopup .titlePane {background-color: rgb(51, 51, 51); background-color: rgba(51, 51, 51, 1);}.LaunchpadTheme.style2 .search-btn:hover,.LaunchpadTheme.default .search-btn:hover,.LaunchpadTheme.style2 .jimu-draw-box .draw-item:hover,.LaunchpadTheme.default .jimu-draw-box .draw-item:hover {background-color: rgb(51, 51, 51); -ms-filter: "Alpha(opacity\x3d70)"; background-color: rgba(51, 51, 51, 0.7);}.jimu-draw-box .point-icon.jimu-state-active:before,.PlateauTheme .jimu-draw-box .point-icon:hover {color: white;}.jimu-draw-box .line-icon.jimu-state-active:before,.PlateauTheme .jimu-draw-box .line-icon:hover {color: white;}.jimu-draw-box .polyline-icon.jimu-state-active:before,.PlateauTheme .jimu-draw-box .polyline-icon:hover {color: white;}.jimu-draw-box .freehand-polyline-icon.jimu-state-active:before,.PlateauTheme .jimu-draw-box .freehand-polyline-icon:hover {color: white;}.jimu-draw-box .triangle-icon.jimu-state-active:before,.PlateauTheme .jimu-draw-box .triangle-icon:hover {color: white;}.jimu-draw-box .extent-icon.jimu-state-active:before,.PlateauTheme .jimu-draw-box .extent-icon:hover {color: white;}.jimu-draw-box .circle-icon.jimu-state-active:before,.PlateauTheme .jimu-draw-box .circle-icon:hover {color: white;}.jimu-draw-box .ellipse-icon.jimu-state-active:before,.PlateauTheme .jimu-draw-box .ellipse-icon:hover {color: white;}.jimu-draw-box .polygon-icon.jimu-state-active:before,.PlateauTheme .jimu-draw-box .polygon-icon:hover {color: white;}.jimu-draw-box .freehand-polygon-icon.jimu-state-active:before,.PlateauTheme .jimu-draw-box .freehand-polygon-icon:hover {color: white;}.LaunchpadTheme .jimu-draw-box .draw-item:hover {color: #fff;}div.dijitArrowButton {float: right; height: 100%;}.dijitValidationTextBoxError input.dijitValidationInner,.dijitSelect input,.dijitTextBox input.dijitArrowButtonInner {text-indent: -2em !important; direction: ltr !important; text-align: left !important; height: 100% !important;}.jimu-draw-box .draw-item:hover {background-color: unset;}.jimu-draw-box .draw-item.selected {background-color: #C0C0C0;}.jimu-checkbox .label {font-size: 12px; margin: auto 5px; cursor: default; margin-top: 3px;}.DartTheme .widget-esearch {width: 98%;}.DartTheme .search-list-item.alt {background-color: #646464;}.DartTheme .search-list-item.selected {background-color: #959595;}.DartTheme .search-list-item.selected.alt {background-color: #d9dde0;}.DartTheme .search-list-item:hover {background-color: #555555;}.DartTheme .search-list-item.alt:hover {background-color: #555555;}.DartTheme .search-list-item.selected:hover {background-color: #555555;}.DartTheme .search-list-item.selected.alt:hover {background-color: #555555;}.LaunchpadTheme .widget-esearch-single-parameter .dijit-form-FilteringSelect \x3e div.dijitArrowButton.dijitDownArrowButton {width: 30px; height: 100%;}.LaunchpadTheme .widget-esearch-single-parameter .dijit-form-FilteringSelect {display: none; width: 100%; height: 32px;}.LaunchpadTheme .jimu-draw-box .draw-item {cursor: default;}.widget-esearch.jimu-widget \x3e .jimu-tab \x3e .control \x3e .tab.jimu-vcenter-text {overflow-x: hidden; line-height: 28px !important;}.jimu-draw-box .elocate-icon {background-image: url(images/draw_elocate1.png);}.jimu-draw-box .elocate-icon.jimu-state-active {background-image: url(images/draw_elocate.png);}.LaunchpadTheme .jimu-draw-box .elocate-icon {background-image: url(images/draw_elocate_lp1.png);}.LaunchpadTheme .jimu-draw-box .elocate-icon:hover {background-image: url(images/draw_elocate_lp.png);}.newSelIcon {background-image: url(\'images/selection_new.png\'); width: 16px; height: 16px; background-repeat: no-repeat;}.addSelIcon {background-image: url(\'images/selection_add.png\'); width: 16px; height: 16px; background-repeat: no-repeat;}.removeSelIcon {background-image: url(\'images/selection_remove.png\'); width: 16px; height: 16px; background-repeat: no-repeat;}.selectionmenu {margin: 10px 0 0;}.selectionmenu \x3e .dijitReset.dijitInline.dijitButtonNode {background-image: unset; border-radius: unset; background-color: #EFEFF0; padding: 6px 4px 6px; border: 1px solid #B5BCC7; box-shadow: unset;}.LaunchpadTheme .widget-esearch .esearch-select,.LaunchpadTheme .widget-esearch .esearch-label,.LaunchpadTheme .widget-esearch .esearch-select-attrib,.LaunchpadTheme .widget-esearch .esearch-select-graphic {width: 75%;}.DartTheme .widget-esearch .esearch-select,.BoxTheme .widget-esearch .esearch-select,.BoxTheme .widget-esearch .esearch-label,.BoxTheme .widget-esearch .esearch-select-attrib,.BoxTheme .widget-esearch .esearch-select-graphic,.DartTheme .widget-esearch .esearch-label,.DartTheme .widget-esearch .esearch-select-attrib,.DartTheme .widget-esearch .esearch-select-graphic {width: 80%;}.LaunchpadTheme .selectionmenu \x3e .dijitReset.dijitInline.dijitButtonNode {background-image: unset; border-radius: unset; background-color: unset; padding: 5px 0 4px 0; border: 1px solid #DDD; box-shadow: unset;}.DartTheme .selectionmenu \x3e .dijitReset.dijitInline.dijitButtonNode {background-image: unset; border-radius: 2px; background-color: rgba(0, 0, 0, 0.25); padding: 6px 4px; border: 1px solid rgba(181, 188, 199, 0.86) !important; box-shadow: unset;}.claro .DartTheme .dijitDateTextBox .dijitArrowButton::before {content: none !important;}.claro .DartTheme .dijitSelect .dijitArrowButtonInner,.claro .DartTheme .dijitComboBox .dijitArrowButtonInner {display: none}.search-list-item .removediv:before {content: \'\'; display: inline-block; height: 100%; vertical-align: middle; margin-right: -0.25em;}.search-list-item .removediv svg {display: inline-block; vertical-align: middle;}.search-list-item .removediv {text-align: center; position: absolute; height: 100%; width: 22px; right: 0;}.search-list-item .removedivImg {display: inline-block; vertical-align: middle; background-image: url("images/i_remove_info.png"); background-repeat: no-repeat; width: 20px; height: 20px; cursor: pointer;}.widget-esearch .esearch-result-action-button{float: right;}.jimu-rtl .widget-esearch .esearch-result-action-button{right: auto; left: -8px;}.popup-menu .popup-menu-item .label {display: block;}',
"url:widgets/HucNavigation/config.json":'{\r\n\t"navigator_url": "widgets/HucNavigation/wbd-cgi/index.py",\r\n\t\r\n\t"watersgeo_huc8_mapserver": "https://watersgeo.epa.gov/arcgis/rest/services/NHDPlus_NP21/WBD_NP21_Simplified/MapServer/2",\r\n\t"enviroatlas_huc8_mapserver": "https://enviroatlas.epa.gov/arcgis/rest/services/Other/HydrologicUnits/MapServer/2",\r\n\t\r\n\t"NOTE1": "This one is too slow and times out",\r\n\t"enviroatlas_huc12_mapserver": "https://enviroatlas.epa.gov/arcgis/rest/services/Other/HydrologicUnits/MapServer/4",\r\n\t"watersgeo_huc12_mapserver": "https://watersgeo.epa.gov/arcgis/rest/services/NHDPlus_NP21/WBD_NP21_Simplified/MapServer/0",\r\n\t\r\n\t\r\n\t"huc12_array_slice_size": 250,\r\n\t\r\n  "layers": [\r\n    {\r\n      "name": "Subwatersheds (HUC12)",\r\n      "url": "https://enviroatlas.epa.gov/arcgis/rest/services/Other/HydrologicUnits/MapServer/4",\r\n      "HOLDurl": "https://watersgeo.epa.gov/arcgis/rest/services/OW/WBD_WMERC/MapServer/0",\r\n      "definitionexpression": "",\r\n      "spatialsearchlayer": true,\r\n      "export2Csv": true,\r\n      "export2Geo": true,\r\n      "export2FC": true,\r\n      "export2Shp": true,\r\n      "zoomScale": 10000,\r\n      "forceZoomScale": true,\r\n      "shareResult": true,\r\n      "addToAttrib": false,\r\n      "expressions": {\r\n        "expression": []\r\n      },\r\n      "titlefield": null,\r\n      "fields": {\r\n        "all": false,\r\n        "HOLDfield": [\r\n          {\r\n            "name": "HUC_12",\r\n            "alias": "HUC12"\r\n          }\r\n        ],\r\n        "field": [\r\n          {\r\n            "name": "HUC_12",\r\n            "alias": "HUC12"\r\n          },\r\n          {\r\n            "name": "HU_12_Name",\r\n            "alias": "HUC12 NAME"\r\n          }\r\n        ]\r\n      },\r\n      "links": {\r\n        "link": []\r\n      },\r\n      "relates": {\r\n        "relate": []\r\n      },\r\n      "orderByFields": [],\r\n      "showattachments": false,\r\n      "layersymbolfrom": "layer",\r\n      "symbology": {\r\n        "color": [\r\n          255,\r\n          170,\r\n          0,\r\n          125\r\n        ],\r\n        "outline": {\r\n          "color": [\r\n            0,\r\n            0,\r\n            0,\r\n            255\r\n          ],\r\n          "width": 0.75,\r\n          "type": "esriSLS",\r\n          "style": "esriSLSSolid",\r\n          "marker": null\r\n        },\r\n        "type": "esriSFS",\r\n        "style": "esriSFSSolid"\r\n      }\r\n    }\r\n  ],\r\n  "initialView": "text",\r\n  "selectfilter": "contains",\r\n  "disabledtabs": [\r\n    "text",\r\n    "spatial"\r\n  ],\r\n  "enablePopupsOnResultClick": true,\r\n  "disablePopups": false,\r\n  "disableuvcache": false,\r\n  "exportsearchurlchecked": false,\r\n  "limitsearch2mapextentchecked": false,\r\n  "autozoomtoresults": true,\r\n  "mouseovergraphics": false,\r\n  "bufferDefaults": {\r\n    "addtolegend": false,\r\n    "bufferUnits": {\r\n      "bufferUnit": [\r\n        {\r\n          "name": "UNIT_FOOT",\r\n          "label": "Feet"\r\n        },\r\n        {\r\n          "name": "UNIT_STATUTE_MILE",\r\n          "label": "Miles"\r\n        },\r\n        {\r\n          "name": "UNIT_METER",\r\n          "label": "Meter"\r\n        }\r\n      ]\r\n    },\r\n    "bufferDefaultValue": 3,\r\n    "bufferWKID": 102003,\r\n    "simplefillsymbol": {\r\n      "color": [\r\n        1,\r\n        185,\r\n        253,\r\n        128\r\n      ],\r\n      "outline": {\r\n        "color": [\r\n          1,\r\n          185,\r\n          253,\r\n          204\r\n        ],\r\n        "width": 0.75,\r\n        "type": "esriSLS",\r\n        "style": "esriSLSSolid",\r\n        "marker": null\r\n      },\r\n      "type": "esriSFS",\r\n      "style": "esriSFSSolid"\r\n    }\r\n  },\r\n  "spatialrelationships": {\r\n    "spatialrelationship": [\r\n      {\r\n        "name": "esriSpatialRelContains",\r\n        "label": "entirely contained in"\r\n      },\r\n      {\r\n        "name": "esriSpatialRelIntersects",\r\n        "label": "intersected by"\r\n      },\r\n      {\r\n        "name": "esriSpatialRelEnvelopeIntersects",\r\n        "label": "intersected by envelope of"\r\n      }\r\n    ]\r\n  },\r\n  "graphicalsearchoptions": {\r\n    "enablepointselect": true,\r\n    "enableextentselect": false,\r\n    "enablecircleselect": false,\r\n    "enablepolyselect": false,\r\n    "showmultigraphicsgraphicaloption": false,\r\n    "showaddtolerancegraphicaloption": false,\r\n    "showaddsqltextgraphicaloption": true,\r\n    "showbuffergraphicaloption": false,\r\n    "buffercheckedbydefaultgraphicaloption": false,\r\n    "multipartgraphicsearchchecked": false,\r\n    "addpointtolerancechecked": true,\r\n    "toleranceforpointgraphicalselection": 3,\r\n    "keepgraphicalsearchenabled": true,\r\n    "autoactivatedtool": "point"\r\n  },\r\n  "symbols": {\r\n    "simplemarkersymbol": null,\r\n    "picturemarkersymbol": {\r\n      "angle": 0,\r\n      "xoffset": 0,\r\n      "yoffset": 0,\r\n      "type": "esriPMS",\r\n      "url": "images/i_search.png",\r\n      "width": 20.00025,\r\n      "height": 20.00025\r\n    },\r\n    "simplelinesymbol": {\r\n      "color": [\r\n        255,\r\n        0,\r\n        0,\r\n        204\r\n      ],\r\n      "width": 2.25,\r\n      "type": "esriSLS",\r\n      "style": "esriSLSSolid",\r\n      "marker": null\r\n    },\r\n    "simplefillsymbol": {\r\n      "color": [\r\n        255,\r\n        0,\r\n        0,\r\n        128\r\n      ],\r\n      "outline": {\r\n        "color": [\r\n          255,\r\n          0,\r\n          0,\r\n          204\r\n        ],\r\n        "width": 1.5,\r\n        "type": "esriSLS",\r\n        "style": "esriSLSSolid",\r\n        "marker": null\r\n      },\r\n      "type": "esriSFS",\r\n      "style": "esriSFSSolid"\r\n    }\r\n  },\r\n  "resultFormat": {\r\n    "attTitlesymbol": {\r\n      "bold": false,\r\n      "italic": true,\r\n      "underline": false,\r\n      "color": [\r\n        0,\r\n        0,\r\n        0,\r\n        1\r\n      ]\r\n    },\r\n    "attValuesymbol": {\r\n      "bold": false,\r\n      "italic": false,\r\n      "underline": false,\r\n      "color": [\r\n        0,\r\n        0,\r\n        0,\r\n        255\r\n      ]\r\n    }\r\n  }\r\n}',
"*now":function(u){u(['dojo/i18n!*preload*widgets/HucNavigation/nls/Widget*["","ROOT"]'])}}});
define("dojo/_base/declare dijit/_WidgetsInTemplateMixin jimu/BaseWidget jimu/dijit/TabContainer ./List ./Parameters ./RelateChooser jimu/dijit/Message jimu/utils esri/urlUtils esri/tasks/query esri/tasks/QueryTask esri/tasks/RelationshipQuery esri/layers/CodedValueDomain esri/layers/Domain esri/layers/GraphicsLayer esri/layers/FeatureLayer esri/layers/FeatureType esri/layers/Field esri/layers/RangeDomain esri/tasks/BufferParameters esri/tasks/GeometryService esri/config esri/graphic esri/graphicsUtils esri/geometry/Point esri/symbols/SimpleMarkerSymbol esri/symbols/PictureMarkerSymbol esri/geometry/Polyline esri/symbols/SimpleLineSymbol esri/geometry/Polygon esri/geometry/Multipoint esri/geometry/Extent esri/symbols/SimpleFillSymbol esri/symbols/jsonUtils esri/renderers/SimpleRenderer esri/renderers/jsonUtils esri/toolbars/draw esri/dijit/PopupTemplate esri/request esri/Color dojo/Deferred dijit/ProgressBar dojo/_base/lang dojo/on dojo/_base/html dojo/_base/array dojo/store/Memory dojo/data/ObjectStore dojox/grid/DataGrid dojo/dom dojo/promise/all dojo/date dojo/date/locale dijit/form/Select dijit/form/TextBox dijit/form/NumberTextBox jimu/dijit/DrawBox jimu/dijit/LoadingShelter dojo/io-query dojo/query esri/SpatialReference jimu/WidgetManager jimu/PanelManager dojo/aspect esri/domUtils jimu/LayerInfos/LayerInfos jimu/CSVUtils jimu/BaseFeatureAction jimu/FeatureActionManager jimu/dijit/FeatureActionPopupMenu esri/tasks/FeatureSet dojo/dom-construct dojo/dom-class dojo/topic ./JS2Shapefile ./jszip jimu/dijit/CheckBox dijit/form/DropDownButton dijit/Menu dijit/MenuItem".split(" "),function(u,
v,m,l,d,h,g,f,c,a,b,e,t,n,p,k,r,q,M,H,F,R,C,D,E,N,I,P,L,Q,B,x,Y,X,ga,A,G,ja,O,Z,da,V,U,y,S,z,J,wa,Da,xa,ca,qa,ra,Na,jb,sa,Oa,Wa,Xa,Pa,ba,fa,Qa,ea,Ea,za,la,ia,ta,W,na,Ia,Fa,Ja,Ya,Ra,Aa){return u([m,v],{name:"eSearch",label:"Enhanced Search",baseClass:"widget-esearch",resultLayers:[],operationalLayers:[],relateLayers:[],HUC12_numberOnly:[],graphicLayerIndex:0,AttributeLayerIndex:0,spatialLayerIndex:0,expressIndex:0,progressBar:null,tabContainer:null,list:null,selTab:null,garr:[],pointSearchTolerance:6,
numHUC8Tolerance:5,polygonsToDiscard:[],autozoomtoresults:!1,layerautozoomtoresults:!1,keepgraphicalsearchenabled:!1,layerDomainsCache:{},layerUniqueCache:null,graphicsLayerBuffer:null,bufferWKID:null,initiator:null,currentLayerIndex:null,lastWhere:null,wManager:null,pManager:null,attTableOpenedbySearch:!1,oidArray:null,disabledTabs:null,shapeTab:!0,attribTab:!0,spatTab:!0,rsltsTab:!0,mouseovergraphics:!1,lastDrawCommonType:null,lastDrawTool:null,zoomAttempt:0,tempResultLayer:null,currentSearchLayer:null,
currentFeatures:null,eLocateGLFound:!1,locateGraphicsLayer:null,mapLayerAddResultEvent:null,eLocateEnabled:!0,gSelectTypeVal:"new",aSelectTypeVal:"new",serviceFailureNames:[],resultFormatString:"",operLayerInfos:null,sumResultArr:[],sumFields:[],currentCSVResults:null,popupMenu:null,autoactivatedtool:null,map_click_point:null,results_json:{},g_gridHUC12:null,g_gridNavResults:null,huc8_mapserver:null,huc8_id_field_name:null,huc12_mapserver:null,huc12_array_slice_size:0,navigator_url:null,navHUC12Layer:null,
navHUC8Layer:null,postCreate:function(){this.inherited(arguments);this.list=new d({},this.listDiv);this.list.startup();this.own(S(this.list,"click",y.hitch(this,this._selectResultItem)));z.addClass(this.list.domNode,"esearch-list");this.popupMenu=na.getInstance();this.featureActionManager=W.getInstance();this.config.graphicalsearchoptions.autoactivatedtool&&(this.autoactivatedtool=this.config.graphicalsearchoptions.autoactivatedtool);if(this.map.itemId)la.getInstance(this.map,this.map.itemInfo).then(y.hitch(this,
function(a){this.operLayerInfos=a}));else{var a=this._obtainMapLayers();la.getInstance(this.map,a).then(y.hitch(this,function(a){this.operLayerInfos=a}))}z.empty(this.divResultMessage);this.resultLayers=[];this.layerUniqueCache={};this._initResultFormatString();this._initDrawBox();this._initTabContainer();this._initBufferUnits();this._initSpatialRelationships();this._initLayerSelect();this._initProgressBar();this._initCheckForSupportedWidgets();this.garr=[];this.polygonsToDiscard=[];this._addBufferLayer();
this.wManager=Qa.getInstance();this.pManager=ea.getInstance();Ea.before(this,"onClose",this.closeDDs);this.own(S(this.domNode,"mousedown",y.hitch(this,function(a){a.stopPropagation();a.altKey&&(a=this.nls.widgetverstr+": "+this.manifest.version,a+="\n"+this.nls.wabversionmsg+": "+this.manifest.wabVersion,a+="\n"+this.manifest.description,new f({titleLabel:this.nls.widgetversion,message:a}))})))},startup:function(){this.inherited(arguments);this.fetchData();this.list.parentWidget=this;this.navigator_url=
this.config.navigator_url;this.watersgeo_huc12_mapserver=this.config.watersgeo_huc12_mapserver;this.enviroatlas_huc12_mapserver=this.config.enviroatlas_huc12_mapserver;this.huc12_mapserver="";this.watersgeo_huc8_mapserver=this.config.watersgeo_huc8_mapserver;this.enviroatlas_huc8_mapserver=this.config.enviroatlas_huc8_mapserver;this.huc8_mapserver=this.watersgeo_huc8_mapserver;this.huc8_id_field_name=this.huc8_mapserver==this.watersgeo_huc8_mapserver?"HUC_8":"HUC8";this.huc12_array_slice_size=this.config.huc12_array_slice_size;
this.initHUC12Grid();this.initNavigationGrid();z.setStyle(this.clickAgainMessage,"display","none")},_obtainMapLayers:function(){var a=[],b=[],c={itemData:{baseMap:{baseMapLayers:[]},operationalLayers:[]}};J.forEach(this.map.graphicsLayerIds,function(a){a=this.map.getLayer(a);a.isOperationalLayer&&b.push({layerObject:a,title:a.label||a.title||a.name||a.id||" ",id:a.id||" "})},this);J.forEach(this.map.layerIds,function(c){c=this.map.getLayer(c);c.isOperationalLayer?b.push({layerObject:c,title:c.label||
c.title||c.name||c.id||" ",id:c.id||" "}):a.push({layerObject:c,id:c.id||" "})},this);c.itemData.baseMap.baseMapLayers=a;c.itemData.operationalLayers=b;return c},_initCheckForSupportedWidgets:function(){this.eLocateEnabled&&(J.forEach(this.map.graphicsLayerIds,y.hitch(this,function(a){a=this.map.getLayer(a);a.name&&"elocate results"===a.name.toLowerCase()&&(this.locateGraphicsLayer=a,S(this.locateGraphicsLayer,"graphic-add",y.hitch(this,this.checkeLocateNumGras)),S(this.locateGraphicsLayer,"graphic-remove",
y.hitch(this,this.checkeLocateNumGras)),S(this.locateGraphicsLayer,"graphic-clear",y.hitch(this,this.checkeLocateNumGras)),this.eLocateGLFound=!0,a=ba(".draw-items",this.drawBox.domNode),a=z.create("div",{style:"display:none;","class":"draw-item","data-gratype":"ELOCATE",title:this.nls.eLocateTip},a[0]),z.addClass(a,"elocate-icon"),this.own(S(a,"click",y.hitch(this,this._eLocateButtonOnClick))),0<this.locateGraphicsLayer.graphics.length&&this.checkeLocateNumGras())})),this.eLocateGLFound||this.own(this.mapLayerAddResultEvent=
this.map.on("layer-add-result",y.hitch(this,this.checkForeLocateGL))))},_initResultFormatString:function(){this.list._wrapResults=this.config.resultFormat.wrap||!1;var a=!1,b=!1,c=!1,d="#000000",c=b=a=!1,e="#000000";this.resultFormatString="";if(this.config.resultFormat){var f="[attribname]",a=this.config.resultFormat.attTitlesymbol.bold,b=this.config.resultFormat.attTitlesymbol.italic,c=this.config.resultFormat.attTitlesymbol.underline;this.config.resultFormat.attTitlesymbol.color&&(d=(new da(this.config.resultFormat.attTitlesymbol.color)).toHex());
a&&(f="\x3cstrong\x3e"+f+"\x3c/strong\x3e");b&&(f="\x3cem\x3e"+f+"\x3c/em\x3e");c&&(f="\x3cu\x3e"+f+"\x3c/u\x3e");d&&(f="\x3cfont color\x3d'"+d+"'\x3e"+f+"\x3c/font\x3e");d="[attribvalue]";a=this.config.resultFormat.attValuesymbol.bold;b=this.config.resultFormat.attValuesymbol.italic;c=this.config.resultFormat.attValuesymbol.underline;this.config.resultFormat.attValuesymbol.color&&(e=(new da(this.config.resultFormat.attValuesymbol.color)).toHex());a&&(d="\x3cstrong\x3e"+d+"\x3c/strong\x3e");b&&(d=
"\x3cem\x3e"+d+"\x3c/em\x3e");c&&(d="\x3cu\x3e"+d+"\x3c/u\x3e");e&&(d="\x3cfont color\x3d'"+e+"'\x3e"+d+"\x3c/font\x3e");this.resultFormatString=f+": "+d+"\x3cbr\x3e"}else this.resultFormatString="\x3cfont\x3e\x3cem\x3e[attribname]\x3c/em\x3e\x3c/font\x3e: \x3cfont\x3e[attribvalue]\x3c/font\x3e\x3cbr\x3e"},onReceiveData:function(a,b,c){c.message&&"Deactivate_DrawTool"===c.message&&this.drawBox.deactivate()},_getFeatureSet:function(){var a=this.navHUC12Layer,b=new Ia;b.fields=y.clone(a.fields);b.features=
[].concat(a.graphics);b.geometryType=a.geometryType;b.fieldAliases={};J.forEach(b.fields,y.hitch(this,function(a){var c=a.name;b.fieldAliases[c]=a.alias||c}));return b},_getGraphicsSet:function(){return this.navHUC12Layer.graphics},_onBtnMenuClicked:function(a){var b=z.position(a.target||a.srcElement),c=this._getFeatureSet(),d=this._getGraphicsSet();a=this.currentSearchLayer;a.fields||(a.fields=[]);if(!c.geometryType){var e="";switch(a.graphics[0].geometry.type){case "point":case "multipoint":e="esriGeometryPoint";
break;case "polygon":case "extent":e="esriGeometryPolygon";break;case "polyline":e="esriGeometryPolyline"}c.geometryType=e;c.fields=[]}var f=this.config.layers[this.currentLayerIndex],g=this.getNoStatFieldNames(f);this.featureActionManager.getSupportedActions(c,a).then(y.hitch(this,function(a){J.forEach(a,y.hitch(this,function(a){if("eShowStatistics"===a.name&&0<g.length){var b=J.filter(c.fields,y.hitch(this,function(a){return-1===g.indexOf(a.name)}));c.fields=b}a.data=c}));if(f.relates&&f.relates.relate&&
this.list.hasSelectedItem()){var e=new ta({name:"eShowRelate",iconClass:"icon-show-related-record",label:this.nls._featureAction_eShowRelate,iconFormat:"svg",map:this.map,onExecute:y.hitch(this,function(){this._relateResultItem(0,this.list.getSelectedItem())})});e.name="eShowRelate";e.data=c;a.push(e)}f.export2Geo||(a=J.filter(a,y.hitch(this,function(a){return"ExportToGeoJSON"!==a.name})));f.export2FC||(a=J.filter(a,y.hitch(this,function(a){return"ExportToFeatureCollection"!==a.name})));a=J.filter(a,
y.hitch(this,function(a){return"CreateLayer"!==a.name&&"ShowStatistics"!==a.name&&"ExportToCSV"!==a.name}));f.export2Csv&&(e=new ta({name:"eExportToCSV",iconClass:"icon-export",label:this.nls._featureAction_eExportToCSV,iconFormat:"svg",map:this.map,onExecute:y.hitch(this,function(){ia.exportCSV(this.currentSearchLayer.name,HUC12_numberOnly,["HUC12_num"])})}),e.name="eExportToCSV",e.data=c,a.push(e));f.export2Shp&&(e=new ta({name:"eExportToSHP",iconClass:"icon-export",label:this.nls._featureAction_eExportToSHP,
iconFormat:"svg",map:this.map,onExecute:y.hitch(this,function(){var a=new Aa;if(0<c.features.length){var b=window.JS2Shapefile.createShapeFiles(d,"UTF8",c.features[0].geometry.spatialReference.__proto__._info[c.features[0].geometry.spatialReference.wkid].wkTemplate),e;for(e in b)if(b[e].successful)for(var f in b[e].shapefile)a.file(b[e].shapefile[f].name,b[e].shapefile[f].blob);a.generateAsync({type:"arraybuffer"}).then(function(a){a=new Blob([a],{type:"application/zip"});saveAs(a,"HucNavigationResult.zip")})}})}),
e.name="eExportToSHP",e.data=c,a.push(e));this.initiator&&"attribute"===this.initiator&&this.config.exportsearchurlchecked&&(e=new ta({name:"exportSearchUrl",iconClass:"icon-export",label:this.nls.exporturl,iconFormat:"svg",map:this.map,onExecute:y.hitch(this,this.exportURL)}),e.name="exportSearchUrl",e.data=c,a.push(e));this.graphicsLayerBuffer&&0<this.graphicsLayerBuffer.graphics.length&&(e=new ta({name:"RemoveBufferResult",iconClass:"icon-close",label:this.nls.clearBuffer,iconFormat:"svg",map:this.map,
onExecute:y.hitch(this,this.clearbuffer)}),e.name="RemoveBufferResult",e.data=c,a.push(e));e=new ta({name:"CleareSearchResult",iconClass:"icon-close",label:this.nls.clearResults,iconFormat:"svg",map:this.map,onExecute:y.hitch(this,this.clear)});e.name="CleareSearchResult";e.data=c;a.push(e);this.relateLayers&&0<this.relateLayers.length&&(e=new ta({name:"ClearRelateResult",iconClass:"icon-close",label:this.nls.clearRelates,iconFormat:"svg",map:this.map,onExecute:y.hitch(this,this._clearRelateLayers)}),
e.name="ClearRelateResult",e.data=c,a.push(e));this.popupMenu.setActions(a);this.popupMenu.show(b)}))},resetFeatureActions:function(a,b){this.featureActionManager.getSupportedActions(a,b).then(y.hitch(this,function(b){J.forEach(b,y.hitch(this,function(b){b.data=a}));this.popupMenu.setActions(b)}))},getNoStatFieldNames:function(a){var b=[];J.forEach(a.fields.field,y.hitch(this,function(a){a.excludestat&&b.push(a.name)}));return b},checkForeLocateGL:function(a){a.layer.name&&"elocate results"===a.layer.name.toLowerCase()&&
(this.locateGraphicsLayer=a.layer,S(this.locateGraphicsLayer,"graphic-add",y.hitch(this,this.checkeLocateNumGras)),S(this.locateGraphicsLayer,"graphic-remove",y.hitch(this,this.checkeLocateNumGras)),S(this.locateGraphicsLayer,"graphic-clear",y.hitch(this,this.checkeLocateNumGras)),this.mapLayerAddResultEvent.remove(),a=ba(".draw-items",this.drawBox.domNode),a=z.create("div",{style:"display:none;","class":"draw-item","data-gratype":"ELOCATE",title:this.nls.eLocateTip},a[0]),z.addClass(a,"elocate-icon"),
this.own(S(a,"click",y.hitch(this,this._eLocateButtonOnClick))))},checkeLocateNumGras:function(){if(this.locateGraphicsLayer){var a=ba(".draw-item.elocate-icon",this.drawBox.domNode);0<this.locateGraphicsLayer.graphics.length?z.setStyle(a[0],"display","block"):z.setStyle(a[0],"display","none")}},_eLocateButtonOnClick:function(){var a=this.locateGraphicsLayer.graphics;1<a.length?this.processInputs(this.unionGeoms(a)):1==a.length&&this.processInputs(a[0].geometry)},processInputs:function(a){a===B&&
a.isSelfIntersecting(a)?C.defaults.geometryService.simplify([a],y.hitch(this,function(b){this.cbxBufferGraphic.getValue()?this._bufferGeometries([a],new fa({wkid:this.bufferWKID}),[parseFloat(this.txtBufferValue.get("value"))],this.bufferUnits.get("value"),!0):this.search(b[0],this.graphicLayerIndex)})):("point"===a.type&&this.cbxAddTolerance.getValue()&&(a=this.pointToExtent(a,this.pointSearchTolerance),this.map_click_point=a.getCenter(),this.add_click_point_graphic(this.map_click_point)),this.cbxBufferGraphic.getValue()?
this._bufferGeometries([a],new fa({wkid:this.bufferWKID}),[parseFloat(this.txtBufferValue.get("value"))],this.bufferUnits.get("value"),!0):this.search(a,this.graphicLayerIndex))},_addBufferLayer:function(){this.config.bufferDefaults.addtolegend?(this.graphicsLayerBuffer=new r({layerDefinition:{type:"Feature Layer",description:"",definitionExpression:"",name:"Search Buffer Results",geometryType:"esriGeometryPolygon",objectIdField:"ObjectID",drawingInfo:{renderer:{type:"simple",label:"Buffer",description:"Buffer",
symbol:this.config.bufferDefaults.simplefillsymbol}},fields:[{name:"ObjectID",alias:"ObjectID",type:"esriFieldTypeOID"},{name:"bufferdist",alias:"Buffer Distance",type:"esriFieldTypeString"}]},featureSet:null}),this.graphicsLayerBuffer.name="Search Buffer Results"):(this.graphicsLayerBuffer=new k,this.graphicsLayerBuffer.name="Search Buffer Results",this.map.addLayer(this.graphicsLayerBuffer))},closeDDs:function(){this.selectLayerAttribute.closeDropDown();this.selectLayerGraphical.closeDropDown();
this.selectExpression.closeDropDown();this.selectLayerSpatial.closeDropDown()},onDeactivate:function(){this.drawBox.deactivate()},onClose:function(){window.toggleOnHucNavigation=!1;this.publishData({message:"mapClickForPopup"});this.drawBox.deactivate();this._hideInfoWindow();this.inherited(arguments);this.config.bufferDefaults.addtolegend||this.graphicsLayerBuffer&&this.graphicsLayerBuffer.hide();this.tempResultLayer&&this.tempResultLayer.hide()},onOpen:function(){window.toggleOnHucNavigation=!0;
this.publishData({message:"mapClickForPopup"});this.config.bufferDefaults.addtolegend||this.graphicsLayerBuffer&&this.graphicsLayerBuffer.show();this.tempResultLayer&&this.tempResultLayer.show()},_resetDrawBox:function(){this.drawBox.deactivate();this.drawBox.clear()},destroy:function(){this._hideInfoWindow();this._resetDrawBox();this._removeAllResultLayers();this._clearRelateLayers();this.inherited(arguments)},_removeAllResultLayers:function(){this._hideInfoWindow();this._removeTempResultLayer();
this._removeAllOperatonalLayers()},_removeAllOperatonalLayers:function(){for(var a=this.operationalLayers;0<a.length;){var b=a[0];b&&this.map.removeLayer(b);a[0]=null;a.splice(0,1)}this.operationalLayers=[]},_removeAllRelateLayers:function(){var a=this.relateLayers;if(a&&0<a.length){for(;0<a.length;){var b=a[0];b&&this.map.removeLayer(b);a[0]=null;a.splice(0,1)}this.relateLayers=[]}},_addOperationalLayer:function(a){this.operationalLayers.push(a);this.map.addLayer(a)},_addRelateLayer:function(a){-1===
this.relateLayers.indexOf(a)?(this.relateLayers.push(a),this.map.addLayer(a)):a.clear()},_resetAndAddTempResultLayer:function(a){this._removeTempResultLayer();this.tempResultLayer=new k;this.tempResultLayer.name="Search Results jb";a=this.config.layers[a];a=a.hasOwnProperty("disablePopups")&&a.disablePopups?!0:!1;this.config.disablePopups||a||(this.tempResultLayer.infoTemplate=new O);this.map.addLayer(this.tempResultLayer)},_removeTempResultLayer:function(){this.tempResultLayer&&this.map.removeLayer(this.tempResultLayer);
this.tempResultLayer=null},onSpatialLayerChange:function(a){this.spatialLayerIndex=a},onGraphicalLayerChange:function(a){this.graphicLayerIndex=a;0<this.config.layers[a].expressions.expression.length?this.cbxAddTextQuery.setStatus(!0):this.cbxAddTextQuery.setStatus(!1);this._getSumFields(a);0<this.sumFields.length?(z.addClass(this.list.domNode,"sum"),z.setStyle(this.divSum,"display","")):(z.removeClass(this.list.domNode,"sum"),z.setStyle(this.divSum,"display","none"))},onAttributeLayerChange:function(a){this.AttributeLayerIndex=
a;this._initSelectedLayerExpressions();var b=y.clone(this.config.layers[a].expressions.expression[0].values.value);z.empty(this.textsearchlabel);""!==this.config.layers[a].expressions.expression[0].textsearchlabel?(z.place(z.toDom(this.config.layers[a].expressions.expression[0].textsearchlabel),this.textsearchlabel),z.style(this.textsearchlabel,"display","block")):z.style(this.textsearchlabel,"display","none");this.paramsDijit.clear();this.paramsDijit.build(b,this.resultLayers[a],this.config.layers[a].url,
this.config.layers[a].definitionexpression);this.paramsDijit.setFocusOnFirstParam();this.expressIndex=0;this.graphicLayerIndex=a;this.selectLayerGraphical.set("value",a);this._getSumFields(a);0<this.sumFields.length?(z.addClass(this.list.domNode,"sum"),z.setStyle(this.divSum,"display","")):(z.removeClass(this.list.domNode,"sum"),z.setStyle(this.divSum,"display","none"))},onAttributeLayerExpressionChange:function(a){this.expressIndex=a;var b=y.clone(this.config.layers[this.AttributeLayerIndex].expressions.expression[a].values.value);
z.empty(this.textsearchlabel);""!==this.config.layers[this.AttributeLayerIndex].expressions.expression[a].textsearchlabel?(z.place(z.toDom(this.config.layers[this.AttributeLayerIndex].expressions.expression[a].textsearchlabel),this.textsearchlabel),z.style(this.textsearchlabel,"display","block")):z.style(this.textsearchlabel,"display","none");this.paramsDijit.clear();this.paramsDijit.build(b,this.resultLayers[this.AttributeLayerIndex],this.config.layers[this.AttributeLayerIndex].url,this.config.layers[this.AttributeLayerIndex].definitionexpression);
this.paramsDijit.setFocusOnFirstParam()},_initBufferUnits:function(){this.config.bufferDefaults.maxBufferValue&&(this.txtBufferValue.constraints.max=this.config.bufferDefaults.maxBufferValue,this.txtBufferValueSpat.constraints.max=this.config.bufferDefaults.maxBufferValue);for(var a=[],b=this.config.bufferDefaults.bufferUnits.bufferUnit.length,c=0;c<b;c++)a.push({value:this.config.bufferDefaults.bufferUnits.bufferUnit[c].name,label:this.config.bufferDefaults.bufferUnits.bufferUnit[c].label}),0===
c&&(a[c].selected=!0);this.bufferUnits.addOption(a);this.bufferUnitsSpat.addOption(a)},_initSpatialRelationships:function(){for(var a=this.config.spatialrelationships.spatialrelationship.length,b=0;b<a;b++){var c=this._getSpatialIconClass(this.config.spatialrelationships.spatialrelationship[b].name),d=z.create("div",{"class":"spatial-item","data-spatialtype":this.config.spatialrelationships.spatialrelationship[b].name,title:this.config.spatialrelationships.spatialrelationship[b].label},this.spatialItems);
z.addClass(d,c);this.own(S(d,"click",y.hitch(this,this._spatButtonOnClick)))}},_spatButtonOnClick:function(a){a.stopPropagation();this._intersectResults(a.target.getAttribute("data-spatialtype"))},_intersectResults:function(a){this.garr=[];var b;if(this.graphicsLayerBuffer&&0<this.graphicsLayerBuffer.graphics.length&&this.currentLayerAdded&&0<this.currentLayerAdded.graphics.length)var c=new f({type:"question",titleLabel:this.nls.spatialchoicetitle,message:this.nls.spatialchoicemsg,buttons:[{label:this.nls.buffergraphics,
onClick:y.hitch(this,y.hitch(this,function(){c.close();b=this.graphicsLayerBuffer.graphics[0].geometry;this.search(b,this.spatialLayerIndex,null,null,a)}))},{label:this.nls.selectiongraphics,onClick:y.hitch(this,y.hitch(this,function(){c.close();b=this.unionGeoms(this.currentLayerAdded.graphics);this.search(b,this.spatialLayerIndex,null,null,a)}))}]});else{var d;this.graphicsLayerBuffer&&0<this.graphicsLayerBuffer.graphics.length?(d=this.graphicsLayerBuffer.graphics[0],b=d.geometry,this.search(b,
this.spatialLayerIndex,null,null,a)):this.currentLayerAdded&&0<this.currentLayerAdded.graphics.length?(b=this.unionGeoms(this.currentLayerAdded.graphics),b===B&&(b.isSelfIntersecting(b)||1<b.rings.length)?C.defaults.geometryService.simplify([b],y.hitch(this,function(b){this.search(b[0],this.spatialLayerIndex,null,null,a)})):this.search(b,this.spatialLayerIndex,null,null,a)):new f({titleLabel:this.nls.spatialSearchErrorTitle,message:this.nls.intersectMessage})}},_getSpatialIconClass:function(a){switch(a){case "esriSpatialRelContains":a=
"contain-icon";break;case "esriSpatialRelIntersects":a="intersect-icon";break;case "esriSpatialRelEnvelopeIntersects":a="envintersects-icon";break;case "esriSpatialRelCrosses":a="crosses-icon";break;case "esriSpatialRelIndexIntersects":a="indexintersects-icon";break;case "esriSpatialRelOverlaps":a="overlaps-icon";break;case "esriSpatialRelTouches":a="touches-icon";break;case "esriSpatialRelWithin":a="within-icon";break;default:a="contain-icon"}return a},_initTabContainer:function(){this.config.hasOwnProperty("disabledtabs")?
this.disabledTabs=this.config.disabledtabs:this.disabledTabs=[];this.limitMapExtentCbx.setValue(this.config.limitsearch2mapextentchecked||!1);this.eLocateEnabled=this.config.graphicalsearchoptions.enableeLocateselect||!1;this.txtBufferValue.set("value",this.config.bufferDefaults.bufferDefaultValue||2);this.txtBufferValueSpat.set("value",this.config.bufferDefaults.bufferDefaultValue||2);this.bufferWKID=this.config.bufferDefaults.bufferWKID;this.autozoomtoresults=this.config.autozoomtoresults||!1;this.mouseovergraphics=
this.config.mouseovergraphics||!1;var a=this.config.initialView||"text";this.pointSearchTolerance=this.config.graphicalsearchoptions.toleranceforpointgraphicalselection||6;this.cbxAddTolerance.setValue(this.config.graphicalsearchoptions.addpointtolerancechecked||!1);this.cbxMultiGraphic.setValue(this.config.graphicalsearchoptions.multipartgraphicsearchchecked||!1);this.cbxBufferGraphic.setValue(!1);this.config.graphicalsearchoptions.showmultigraphicsgraphicaloption?z.setStyle(this.multiGraDiv,"display",
""):z.setStyle(this.multiGraDiv,"display","none");this.config.graphicalsearchoptions.showaddtolerancegraphicaloption?z.setStyle(this.addToleranceDiv,"display",""):z.setStyle(this.addToleranceDiv,"display","none");this.config.graphicalsearchoptions.showaddsqltextgraphicaloption?z.setStyle(this.addSqlTextDiv,"display",""):z.setStyle(this.addSqlTextDiv,"display","none");this.config.graphicalsearchoptions.showbuffergraphicaloption?z.setStyle(this.bufferGraDiv,"display",""):z.setStyle(this.bufferGraDiv,
"display","none");this.cbxBufferGraphic.setValue(this.config.graphicalsearchoptions.buffercheckedbydefaultgraphicaloption);this.cbxMultiGraphic.onChange=y.hitch(this,this._onCbxMultiGraphicClicked);J.map(this.disabledTabs,y.hitch(this,function(a){"graphic"===a&&(this.shapeTab=!1);"text"===a&&(this.attribTab=!1);"spatial"===a&&(this.spatTab=!1);"result"===a&&(this.rsltsTab=!1)}));0<this.config.layers[0].expressions.expression.length?this.cbxAddTextQuery.setStatus(!0):this.cbxAddTextQuery.setStatus(!1);
this.cbxMultiGraphic.getValue()?z.setStyle(this.btnGraSearch,"display","inline-block"):z.setStyle(this.btnGraSearch,"display","none");var b=this.config.layers.length;"text"===a&&this.attribTab?this.selTab=this.nls.selectByAttribute:"graphical"===a&&this.shapeTab&&(this.selTab=this.nls.selectFeatures);this.autoactivatedtool&&this.drawBox.activate(this.autoactivatedtool.toUpperCase());a=[];this.shapeTab&&(a.push({title:this.nls.selectFeatures,content:this.tabNode1}),z.replaceClass(this.tabNode1,"search-tab-node",
"search-tab-node-hidden"));if(this.attribTab)for(var d=0;d<b;d++)if(0<this.config.layers[d].expressions.expression.length){a.push({title:this.nls.selectByAttribute,content:this.tabNode2});z.replaceClass(this.tabNode2,"search-tab-node","search-tab-node-hidden");break}if(this.spatTab)for(d=0;d<b;d++)if(this.config.layers[d].spatialsearchlayer){a.push({title:this.nls.selectSpatial,content:this.tabNode3});z.replaceClass(this.tabNode3,"search-tab-node","search-tab-node-hidden");break}this.rsltsTab&&(a.push({title:this.nls.results,
content:this.tabNode4}),z.replaceClass(this.tabNode4,"search-tab-node","search-tab-node-hidden"));this.tabContainer=new l({tabs:a,selected:this.selTab},this.tabSearch);this.tabContainer.startup();this.own(S(this.tabContainer,"tabChanged",y.hitch(this,function(a){a!==this.nls.results&&(this.selTab=a);a===this.nls.selectFeatures?this.autoactivatedtool&&this.drawBox.activate(this.autoactivatedtool.toUpperCase()):a===this.nls.selectByAttribute||a===this.nls.selectSpatial?this.drawBox.deactivate():a!==
this.nls.results||this.keepgraphicalsearchenabled||this.drawBox.deactivate()})));c.setVerticalCenter(this.tabContainer.domNode)},_getSumFields:function(a){this.sumFields=[];J.map(this.config.layers[a].fields.field,y.hitch(this,function(a){a.sumfield&&this.sumFields.push({field:a.name,sumlabel:a.sumlabel})}))},_initLayerSelect:function(){this.serviceFailureNames=[];this.currentFeatures||(this.currentFeatures=[]);for(var a=[],b=[],c=[],d=this.config.layers.length,e=0;e<d;e++){var g={value:e,label:this.config.layers[e].name};
a.push(g);this.config.layers[e].spatialsearchlayer&&b.push(g);0<this.config.layers[e].expressions.expression.length&&c.push(g)}0<a.length&&(a[0].selected=!0);0<b.length&&(b[0].selected=!0);0<c.length?c[0].selected=!0:z.setStyle(this.addSqlTextDiv,"display","none");0<d&&(this.paramsDijit=new h({nls:this.nls,layerUniqueCache:this.layerUniqueCache,disableuvcache:this.config.disableuvcache,selectFilterType:this.config.selectfilter}),this.paramsDijit.placeAt(this.parametersDiv),this.paramsDijit.startup(),
this.paramsDijit.on("enter-pressed",y.hitch(this,function(){this.search(null,this.AttributeLayerIndex,this.expressIndex)})),this.shelter.show(),d=J.map(this.config.layers,y.hitch(this,function(a){return this._getLayerInfoWithRelationships(a.url)})),qa(d).then(y.hitch(this,function(d){this.shelter.hide();J.forEach(d,y.hitch(this,function(c,d){if("success"===c.state){c=c.value;var e=this.config.layers[d];if(c.objectIdField)e.objectIdField=c.objectIdField;else{var f=J.filter(c.fields,y.hitch(this,function(a){return"esriFieldTypeOID"===
a.type}));0<f.length&&(e.objectIdField=f[0].name)}e.existObjectId=J.some(e.fields.field,y.hitch(this,function(a){return a.name===e.objectIdField}));e.typeIdField=c.typeIdField;c.drawingInfo||(c.drawingInfo={});c.name=this.nls.search+" "+this.nls.results+": "+e.name;c._titleForLegend=c.name;c.minScale=0;c.maxScale=0;c.effectiveMinScale=0;c.effectiveMaxScale=0;c.defaultVisibility=!0;this.resultLayers.push(c)}else{var g=-1;J.some(a,y.hitch(this,function(a,b){return a.label===this.config.layers[d].name?
(g=b,!0):!1}));a.splice(g,1);this.config.layers[d].spatialsearchlayer&&b.splice(b.indexOf(this.config.layers[d].spatialsearchlayer),1);this.serviceFailureNames.push(this.config.layers[d].name);this.resultLayers.push({})}}));setTimeout(y.hitch(this,function(){1===a.length?(this.labelLayerGraphical.innerHTML=a[0].label,z.setStyle(ba(".esearch-select-graphic")[0],"display","none"),z.removeClass(this.labelLayerGraphical,"hidden")):this.selectLayerGraphical.addOption(a);1===c.length?(this.labelLayerAttribute.innerHTML=
c[0].label,z.setStyle(ba(".esearch-select-attrib")[0],"display","none"),z.removeClass(this.labelLayerAttribute,"hidden")):this.selectLayerAttribute.addOption(c);1===b.length?(this.labelLayerSpatial.innerHTML=b[0].label,z.setStyle(ba(".select-layer-spatial")[0],"display","none"),z.removeClass(this.labelLayerSpatial,"hidden")):this.selectLayerSpatial.addOption(b)}),100);0<b.length&&(this.spatialLayerIndex=b[0].value);var e=this.getUrlParams();if(e.esearch){if("last48"===e.esearch&&(d=new Date,d=new Date(d.getTime()-
172798E3),d=this._formatDate(d.getTime(),"yyyy/MM/dd"),e.esearch=d+"~"+this._formatDate((new Date).getTime(),"yyyy/MM/dd")),"thismonth"===e.esearch&&(d=new Date,d.setDate(1),d=this._formatDate(d.getTime(),"yyyy/MM/dd"),e.esearch=d+"~"+this._formatDate((new Date).getTime(),"yyyy/MM/dd")),"thisyear"===e.esearch&&(d=new Date,d.setMonth(0,1),d=this._formatDate(d.getTime(),"yyyy/MM/dd"),e.esearch=d+"~"+this._formatDate((new Date).getTime(),"yyyy/MM/dd")),0<this.config.layers[e.slayer].expressions.expression.length){var g=
y.clone(this.config.layers[e.slayer].expressions.expression[e.exprnum||0].values.value);d=e.esearch.split("|");J.forEach(d,y.hitch(this,function(a,b){-1<a.indexOf("~")?(a=a.split("~"),g[b].valueObj.value1=a[0],g[b].valueObj.value2=a[1]):g[b].valueObj.value=a}));z.empty(this.textsearchlabel);""!==this.config.layers[e.slayer].expressions.expression[e.exprnum||0].textsearchlabel?(z.place(z.toDom(this.config.layers[e.slayer].expressions.expression[e.exprnum||0].textsearchlabel),this.textsearchlabel),
z.style(this.textsearchlabel,"display","block")):z.style(this.textsearchlabel,"display","none");this.paramsDijit.build(g,this.resultLayers[e.slayer],this.config.layers[e.slayer].url,this.config.layers[e.slayer].definitionexpression);S.once(this.paramsDijit,"param-ready",y.hitch(this,function(){this._queryFromURL(e.esearch,e.slayer,e.exprnum||0,e.close||!1,c.length)}))}}else if(0<c.length){this.AttributeLayerIndex=d=c[0].value;this._initSelectedLayerExpressions();if(0<this.config.layers[d].expressions.expression.length){var h=
y.clone(this.config.layers[d].expressions.expression[0].values.value);z.empty(this.textsearchlabel);""!==this.config.layers[d].expressions.expression[0].textsearchlabel?(z.place(z.toDom(this.config.layers[d].expressions.expression[0].textsearchlabel),this.textsearchlabel),z.style(this.textsearchlabel,"display","block")):z.style(this.textsearchlabel,"display","none");this.paramsDijit.build(h,this.resultLayers[d],this.config.layers[d].url,this.config.layers[d].definitionexpression);S.once(this.paramsDijit,
"param-ready",y.hitch(this,function(){this.paramsDijit.setFocusOnFirstParam()}))}this._getSumFields(d);0<this.sumFields.length?(z.addClass(this.list.domNode,"sum"),z.setStyle(this.divSum,"display","")):(z.removeClass(this.list.domNode,"sum"),z.setStyle(this.divSum,"display","none"))}0<this.serviceFailureNames.length&&(console.info("service failed",this.serviceFailureNames),new f({titleLabel:this.nls.mapServiceFailureTitle,message:this.nls.mapServicefailureMsg+this.serviceFailureNames.join(", ")+this.nls.mapServicefailureMsg2}))}),
y.hitch(this,function(d){this.shelter.hide();1===a.length?(this.labelLayerGraphical.innerHTML=a[0].label,z.setStyle(ba(".esearch-select-graphic")[0],"display","none"),z.removeClass(this.labelLayerGraphical,"hidden")):this.selectLayerGraphical.addOption(a);1===c.length?(this.labelLayerAttribute.innerHTML=c[0].label,z.setStyle(ba(".esearch-select-attrib")[0],"display","none"),z.removeClass(this.labelLayerAttribute,"hidden")):this.selectLayerAttribute.addOption(c);1===b.length?(this.labelLayerSpatial.innerHTML=
b[0].label,z.setStyle(ba(".select-layer-spatial")[0],"display","none"),z.removeClass(this.labelLayerSpatial,"hidden")):this.selectLayerSpatial.addOption(b);console.error(d);for(d=0;d<this.config.layers.length;d++){var e=new k;this.resultLayers.push(e)}})));this.own(S(this.selectLayerGraphical,"change",y.hitch(this,this.onGraphicalLayerChange)));this.own(S(this.selectLayerAttribute,"change",y.hitch(this,this.onAttributeLayerChange)));this.own(S(this.selectLayerSpatial,"change",y.hitch(this,this.onSpatialLayerChange)));
this.own(S(this.selectExpression,"change",y.hitch(this,this.onAttributeLayerExpressionChange)));this.own(S(this.list,"remove",y.hitch(this,this._removeResultItem)))},_relateResultItem:function(a,b){a=this.config.layers[this.currentLayerIndex];var c=a.objectIdField;if(b){this.relArray=[];for(var d=0;d<a.relates.relate.length;d++)this.relArray.push({id:a.relates.relate[d].id,name:a.relates.relate[d].label,fields:a.relates.relate[d].fields,oid:b.graphic.attributes[c]});this.wManager&&(b=this._getWidgetConfig("AttributeTable"))&&
(b=this.wManager.getWidgetByLabel(b.label))&&(this.attTableOpenedbySearch=!b.showing,this.wManager.openWidget(b),1===this.relArray.length?this._createLayerAndExecuteQuery(0):(b=new g({relatesArr:this.relArray,autoHeight:!0,width:400,titleLabel:this.nls.chooserelate,folderurl:this.folderUrl}),S(b,"click",y.hitch(this,function(a){this._createLayerAndExecuteQuery(a)}))))}},_createLayerAndExecuteQuery:function(a){var b=this.config.layers[this.currentLayerIndex];this._createRelateResultLayer(a).then(y.hitch(this,
function(c){this._addRelateLayer(c.value);c=new t;c.outSpatialReference=this.map.spatialReference;if(this.relArray[a].fields.all)c.outFields=["*"];else{var d=J.map(this.relArray[a].fields.field,y.hitch(this,function(a){return a.name}));c.outFields=d}c.relationshipId=parseInt(a);c.objectIds=[this.relArray[a].oid];c.returnGeometry=!0;(new e(b.url)).executeRelationshipQuery(c,y.hitch(this,this._onRelSearchFinish,this.relArray[a].oid,a))}))},_onRelSearchFinish:function(a,b,c){var d=this.config.layers[this.currentLayerIndex];
if(c[a]){this._relateLyr.applyEdits(c[a].features);a=this.operLayerInfos.getLayerInfoById(this._relateLyr.id);if(!d.relates.relate[b].fields.all){var e=[];J.map(a.layerObject.fields,y.hitch(this,function(a){(a=this._getRelateConfigFieldObject(a.name,this.currentLayerIndex,b))&&e.push({fieldName:a.name,label:a.alias,show:!0,format:this._convertFormatInfo(a)})}));a.originOperLayer.popupInfo={fieldInfos:e}}this.publishData({target:"AttributeTable",layer:a})}else this.map.removeLayer(this._relateLyr),
this.relateLayers.splice(this.relateLayers.length-1,1),new f({titleLabel:this.nls.noResults,message:this.nls.noRelatedRecords+" "+d.relates.relate[b].label})},_createRelateResultLayer:function(a){var b=new V,c=!1,d=this.config.layers[this.currentLayerIndex];this.relateLayers&&0<this.relateLayers.length&&J.some(this.relateLayers,y.hitch(this,function(e){if(e.name===this.nls.relate+": "+d.relates.relate[a].label)return this._relateLyr=e,b.resolve({state:"success",value:e}),c=!0}));c||(relateLyrUrl=
this._getServiceUrlByLayerUrl(d.url)+"/"+a,this._getLayerInfoWithRelationships(relateLyrUrl).then(y.hitch(this,function(c){var e=c.value;e.name=this.nls.relate+": "+d.relates.relate[a].label;e._titleForLegend=e.name;e.minScale=0;e.maxScale=0;e.effectiveMinScale=0;e.effectiveMaxScale=0;e.defaultVisibility=!0;var f=J.map(d.relates.relate[a].fields.field,y.hitch(this,function(a){return a.name})),g;e.objectIdField?g=e.objectIdField:(c=J.filter(e.fields,y.hitch(this,function(a){return"esriFieldTypeOID"===
a.type})),0<c.length&&(g=c[0].name));0>J.indexOf(f,g)&&f.push(g);if(!d.relates.relate[a].fields.all){var h=[];J.map(d.relates.relate[a].fields.field,y.hitch(this,function(a){J.some(e.fields,y.hitch(this,function(b){if(b.name===a.name)return h.push(b),!0}))}));e.fields=h}e.fields=J.filter(e.fields,y.hitch(this,function(b){return d.relates.relate[a].fields.all?!0:0<=f.indexOf(b.name)}));J.map(e.fields,y.hitch(this,function(b){if(0<=f.indexOf(b.name)){var c=this._getRelateConfigFieldObject(b.name,this.currentLayerIndex,
a);c&&c.alias!==b.alias&&(b.alias=c.alias)}}));this._relateLyr=resultLayer=new r({layerDefinition:e,featureSet:null});b.resolve({state:"success",value:resultLayer})})));return b},_removeResultItem:function(a,b){J.some(this.currentCSVResults.data,y.hitch(this,function(a){return a.OID===b.OID?(this.currentCSVResults.data.splice(this.currentCSVResults.data.indexOf(a),1),!0):!1}));var c=this.config.layers[this.currentLayerIndex];this.currentFeatures.splice(this.currentFeatures.indexOf(b.graphic),1);if(0===
this.currentFeatures.length)this.clear(),this.isSelTabVisible()&&this.tabContainer.selectTab(this.selTab);else if(this.currentSearchLayer.remove(b.graphic),this.currentSearchLayer.refresh(),z.empty(this.divResultMessage),z.place(z.toDom("\x3clabel\x3e"+this.nls.featuresSelected+this.currentFeatures.length+"\x3c/label\x3e"),this.divResultMessage),this.list.remove(a),this._hideInfoWindow(),c.shareResult&&c.addToAttrib&&this.wManager&&(a=this._getWidgetConfig("AttributeTable")))if(a=this.wManager.getWidgetByLabel(a.label))this.attTableOpenedbySearch=
!a.showing,this.wManager.openWidget(a),a._activeTable.refresh()},_getServiceUrlByLayerUrl:function(a){var b=a.lastIndexOf("/");return a.slice(0,b)},_isServiceSupportsOrderBy:function(a){var b=!1;a.advancedQueryCapabilities&&a.advancedQueryCapabilities.supportsOrderBy&&(b=!0);return b},_getLayerInfoWithRelationships:function(a){var b=new V;Z({url:a,content:{f:"json"},handleAs:"json",callbackParamName:"callback"}).then(y.hitch(this,function(c){c.relationships||(c.relationships=[]);c._origLayerURL=a;
var d=this._getServiceUrlByLayerUrl(a);c._origServiceURL=d;var e=J.map(c.relationships,y.hitch(this,function(a){return Z({url:d+"/"+a.relatedTableId,content:{f:"json"},handleAs:"json",callbackParamName:"callback"})}));qa(e).then(y.hitch(this,function(a){J.forEach(a,y.hitch(this,function(a,b){b=c.relationships[b];b.name=a.name;b.fields=J.filter(a.fields,y.hitch(this,function(a){return"esriFieldTypeGeometry"!==a.type}))}));b.resolve({state:"success",value:c})}),y.hitch(this,function(a){b.resolve({state:"failure",
value:a})}));b.resolve({state:"success",value:c})}),y.hitch(this,function(a){b.resolve({state:"failure",value:a})}));return b},_queryFromURL:function(a,b,c,d,e){b="undefined"!==typeof b?b:0;c="undefined"!==typeof c?c:0;this.AttributeLayerIndex=b;this.expressIndex=c;1<e&&this.selectLayerAttribute.set("value",b);setTimeout(y.hitch(this,function(){this.selectExpression.set("value",c||0);setTimeout(y.hitch(this,function(){var d=y.clone(this.config.layers[b].expressions.expression[c||0].values.value);
this.paramsDijit.setSingleParamValues(d,a)}),200)}),200);e=this._buildSearchValues(a);this._getSumFields(b);0<this.sumFields.length?(z.addClass(this.list.domNode,"sum"),z.setStyle(this.divSum,"display","")):(z.removeClass(this.list,"sum"),z.setStyle(this.divSum,"display","none"));this.search(null,b,c,e,null,d)},_createSearchResultLayer:function(a){var b=null,c=this.config.layers[a],d=y.clone(this.resultLayers[a]),e=!1,f=null,g=[],b=c.hasOwnProperty("disablePopups")&&c.disablePopups?!0:!1;this.config.disablePopups||
b||(c.popupfrom&&"webmap"===c.popupfrom?J.forEach(this.operLayerInfos.getLayerInfoArray(),function(a){if(a.layerObject&&a.layerObject.url===d._origServiceURL||a.layerObject.url===d._origLayerURL)a.controlPopupInfo.hasOwnProperty("infoTemplates")?a.controlPopupInfo.infoTemplates[d.id]?(a.controlPopupInfo.infoTemplates[d.id].infoTemplate._fieldLabels&&(g=this._addPopupFields(a.controlPopupInfo.infoTemplates[d.id].infoTemplate._fieldLabels)),f=a.controlPopupInfo.infoTemplates[d.id].infoTemplate,e=!0):
e=!1:(a.controlPopupInfo.infoTemplate._fieldLabels&&(g=this._addPopupFields(a.controlPopupInfo.infoTemplate._fieldLabels)),f=a.controlPopupInfo.infoTemplate,e=!0)},this):e=!1);if(c.shareResult){var h=this._getOutputFields(a,g);d.fields=J.filter(d.fields,y.hitch(this,function(a){return c.fields.all?!0:0<=h.indexOf(a.name)}));J.map(d.fields,y.hitch(this,function(b){if(0<=h.indexOf(b.name)){var c=this._getConfigFieldObject(b.name,a);c&&c.alias!==b.alias&&(b.alias=c.alias)}}));b=new r({layerDefinition:d,
featureSet:null})}else this._resetAndAddTempResultLayer(a),b=this.tempResultLayer;e?(b._hasInfoTemplate=!0,b.infoTemplate=f):b._hasInfoTemplate=!1;return b},_addPopupFields:function(a){var b=[],c;for(c in a)b.push(a[c]);return b},_getConfigFieldObject:function(a,b){var c=null;J.some(this.config.layers[b].fields.field,y.hitch(this,function(b){return b.name===a?(c=b,!0):!1}));return c},_getRelateConfigFieldObject:function(a,b,c){var d=null;J.some(this.config.layers[b].relates.relate[c].fields.field,
y.hitch(this,function(b){return b.name===a?(d=b,!0):!1}));return d},_getOutputFields:function(a,b){var c=this.config.layers[a],d=J.map(c.fields.field,y.hitch(this,function(a){return a.name})),e=c.objectIdField;0>J.indexOf(d,e)&&d.push(e);e=c.titlefield;0>J.indexOf(d,e)&&d.push(e);var f=J.map(this.resultLayers[a].fields,y.hitch(this,function(a){return a.name})),d=J.filter(d,y.hitch(this,function(a){return 0<=f.indexOf(a)}));J.map(b,y.hitch(this,function(a){0>J.indexOf(d,a)&&d.push(a)}));c.fields.all&&
(d=f);return d},_bufferGeometries:function(a,b,c,d,e){if(a){var f=new F,g;f.geometries=a;f.bufferSpatialReference=b;f.unit=R[d];f.distances=c;f.unionResults=!0;f.geodesic=!0;f.outSpatialReference=this.map.spatialReference;C.defaults.geometryService.buffer(f,y.hitch(this,function(a){g=a[0];a=new D;a.geometry=g;a.symbol=new X(this.config.bufferDefaults.simplefillsymbol);this.graphicsLayerBuffer.clear();this.graphicsLayerBuffer.add(a);z.setStyle(this.btnClearBuffer2,"display","block");z.setStyle(this.btnClearBuffer3,
"display","block");e&&this.search(g,this.graphicLayerIndex)}))}},_buildSearchValues:function(a){var b=[];a=a.split("|");J.forEach(a,y.hitch(this,function(a){var c={};-1<a.indexOf("~")?(a=a.split("~"),c.value1=a[0],c.value2=a[1]):c.value=a;b.push(c)}));return b},getUrlParams:function(){var a=window.location.search;return""===a?{}:Pa.queryToObject(a.substr(1))},_initProgressBar:function(){this.progressBar=new U({indeterminate:!0},this.progressbar);z.setStyle(this.progressBar.domNode,"display","none")},
_initSelectedLayerExpressions:function(){this.selectExpression.removeOption(this.selectExpression.getOptions());for(var a=[],b=this.config.layers[this.AttributeLayerIndex].expressions.expression.length,c=0;c<b;c++)a.push({value:c,label:this.config.layers[this.AttributeLayerIndex].expressions.expression[c].alias}),0===c&&(a[c].selected=!0);this.selectExpression.addOption(a);1===b?za.hide(this.expressionDiv):za.show(this.expressionDiv)},_initDrawBox:function(){this.keepgraphicalsearchenabled=this.config.graphicalsearchoptions.keepgraphicalsearchenabled||
!1;Ea.before(this.drawBox,"_activate",y.hitch(this,function(){this.publishData({message:"Deactivate_DrawTool"})}));this.drawBox.setMap(this.map);var a=[];this.config.graphicalsearchoptions.enablepointselect&&a.push("POINT");this.config.graphicalsearchoptions.enablelineselect&&a.push("LINE");this.config.graphicalsearchoptions.enablepolylineselect&&a.push("POLYLINE");this.config.graphicalsearchoptions.enablefreehandlineselect&&a.push("FREEHAND_POLYLINE");this.config.graphicalsearchoptions.enabletriangleselect&&
a.push("TRIANGLE");this.config.graphicalsearchoptions.enableextentselect&&a.push("EXTENT");this.config.graphicalsearchoptions.enablecircleselect&&a.push("CIRCLE");this.config.graphicalsearchoptions.enableellipseselect&&a.push("ELLIPSE");this.config.graphicalsearchoptions.enablepolyselect&&a.push("POLYGON");this.config.graphicalsearchoptions.enablefreehandpolyselect&&a.push("FREEHAND_POLYGON");this.drawBox.geoTypes=a;this.drawBox._initTypes();this.keepgraphicalsearchenabled&&(this.drawBox.deactivateAfterDrawing=
!1);this.own(S(this.drawBox,"IconSelected",y.hitch(this,function(a,b,c){if(this.lastDrawCommonType&&this.lastDrawCommonType!==c&&0<this.garr.length)var d=new f({type:"question",titleLabel:this.nls.warning,message:this.nls.graphicgeomtypemsg1+"\n\n"+this.nls.graphicgeomtypemsg2,buttons:[{label:this.nls._continue,onClick:y.hitch(this,y.hitch(this,function(){d.close();this.lastDrawCommonType=c;this.lastDrawTool=b;this.drawBox.clear();this.garr=[]}))},{label:this.nls.cancel,onClick:y.hitch(this,y.hitch(this,
function(){d.close();this.drawBox.activate(this.lastDrawTool)}))}]});else this.lastDrawCommonType=c,this.lastDrawTool=b})));this.own(S(this.drawBox,"DrawEnd",y.hitch(this,function(a){this.cbxMultiGraphic.getValue()?this.garr.push(a):"point"===a.geometry.type&&this.cbxAddTolerance.getValue()?(a=this.pointToExtent(a.geometry,this.pointSearchTolerance),this.search(a,this.graphicLayerIndex)):this.cbxBufferGraphic.getValue()?this._bufferGeometries([a.geometry],new fa({wkid:this.bufferWKID}),[parseFloat(this.txtBufferValue.get("value"))],
this.bufferUnits.get("value"),!0):this.search(a.geometry,this.graphicLayerIndex)})));this.own(S(this.btnClear2,"click",y.hitch(this,this.clear,!0)));this.own(S(this.btnClear3,"click",y.hitch(this,this.clear,!0)));this.own(S(this.btnClear4,"click",y.hitch(this,this.clearFields,!0)));this.own(S(this.btnClearBuffer2,"click",y.hitch(this,this.clearbuffer)));this.own(S(this.btnClearBuffer3,"click",y.hitch(this,this.clearbuffer)));z.setStyle(this.btnClearBuffer2,"display","none");z.setStyle(this.btnClearBuffer3,
"display","none");z.setStyle(this.btnClear2,"display","none");z.setStyle(this.btnClear3,"display","none")},exportURL:function(){var b,c,d=window.location.protocol+"//"+window.location.host+window.location.pathname,e=a.urlToObject(window.location.href);e.query=e.query||{};for(var f=this.paramsDijit.getSingleParamValues(),g=0;g<f.length;g++)c=f[g].value.toString();e.query.esearch=c;e.query.slayer=this.AttributeLayerIndex.toString();e.query.exprnum=this.expressIndex.toString();for(var h in e.query)e.query[h]&&
"config"!==e.query[h]&&(b?d+="\x26":(d+="?",b=!0),d+=h+"\x3d"+e.query[h]);window.prompt(this.nls.copyurlprompt,d)},_bufferFeatures:function(){if(this.currentLayerAdded&&0<this.currentLayerAdded.graphics.length){var a=J.map(this.currentLayerAdded.graphics,function(a){return a.geometry});this._bufferGeometries(a,new fa({wkid:this.bufferWKID}),[parseFloat(this.txtBufferValueSpat.get("value"))],this.bufferUnitsSpat.get("value"),!1)}else new f({titleLabel:this.nls.bufferSearchErrorTitle,message:this.nls.bufferMessage})},
onSearch:function(){var a=this.paramsDijit.getSingleParamValues();a&&0!==a.length&&this.config.layers.length&&this.search(null,this.AttributeLayerIndex,this.expressIndex)},_onBtnGraSearchClicked:function(){if(0<this.garr.length)if(this.keepgraphicalsearchenabled||this.map.enableMapNavigation(),this.lastDrawTool=this.lastDrawCommonType=null,this.cbxBufferGraphic.getValue()){var a=J.map(this.garr,function(a){return a.geometry});this._bufferGeometries(a,new fa({wkid:this.bufferWKID}),[parseFloat(this.txtBufferValue.get("value"))],
this.bufferUnits.get("value"),!0)}else this.search(this.unionGeoms(this.garr),this.graphicLayerIndex)},_onCbxMultiGraphicClicked:function(){this.cbxMultiGraphic.getValue()?(this.drawBox.deactivateAfterDrawing=!1,z.setStyle(this.btnGraSearch,"display","inline-block")):(this.drawBox.deactivateAfterDrawing=this.keepgraphicalsearchenabled?!1:!0,z.setStyle(this.btnGraSearch,"display","none"))},unionGeoms:function(a){var b,c=new x(this.map.spatialReference),d=new B(this.map.spatialReference),e=new L(this.map.spatialReference),
f;this.polygonsToDiscard=[];0<a.length&&"polygon"===a[0].geometry.type&&dojo.forEach(a,y.hitch(this,function(a){var b=a.geometry;dojo.forEach(this.gArray,y.hitch(this,function(a){a=a.geometry;!a.extent.contains(this.graphic.geometry)||a.extent.center.x===b.extent.center.x&&a.extent.center.y===b.extent.center.y||this.polygonsToDiscard.push(b)}))}));var g,h,k,K,l;dojo.forEach(a,y.hitch(this,function(a){"point"!==a.geometry.type||this.cbxAddTolerance.getValue()?"point"===a.geometry.type&&this.cbxAddTolerance.getValue()&&
(h=this.pointToExtent(a.geometry,this.pointSearchTolerance),l=this.extentToMPArray(h),d.addRing(l),f="poly",d.spatialReference=h.spatialReference):(c.addPoint(a.geometry),f="point");if("multipoint"===a.geometry.type){for(var b=a.geometry,m=0;m<b.points.length;m++)c.addPoint(b.points[m]);f="point"}if("polyline"===a.geometry.type){b=a.geometry;for(m=b.paths.length-1;0<=m;m--){var n=[];for(k=0;k<b.paths[m].length;k++)K=b.getPoint(m,k),K.spatialReference=b.spatialReference,n.push(K);e.addPath(n)}f="line"}"extent"===
a.geometry.type&&(h=a.geometry,l=this.extentToMPArray(h),d.addRing(l),f="poly",d.spatialReference=h.spatialReference);if("polygon"===a.geometry.type){g=a.geometry;a=[];for(b=0;b<g.rings.length;b++){var p,m=[],n=new B([g.rings[b]],g.spatialReference),aa=!0;if(0<this.polygonsToDiscard.length){for(p in this.polygonsToDiscard)if(aa=!0,n.extent.center.x===p.extent.center.x&&n.extent.center.y===p.extent.center.y){aa=!1;break}aa&&(m[0]=b,m[1]=g.rings[b],a.push(m))}else m[0]=b,m[1]=g.rings[b],a.push(m)}for(p=
a.length-1;0<=p;p--){l=[];for(b=0;b<a[p][1].length;b++)m=g.getPoint(p,b),m.spatialReference=g.spatialReference,l.push(m);d.addRing(l)}f="poly";d.spatialReference=g.spatialReference}}));switch(f){case "point":b=c;break;case "poly":b=d;break;case "line":b=e}this.garr=[];return b},pointToExtent:function(a,b){var c=b||6;b=new N(a.x,a.y,a.spatialReference);var d=this.map.extent.getWidth()/this.map.width,c=c*d;return(new Y(1,1,c,c,a.spatialReference)).centerAt(b)},extentToPolygon:function(a){a=new B([a.xmax,
a.ymax],[a.xmax,a.ymin],[a.xmin,a.ymin],[a.xmin,a.ymax],[a.xmax,a.ymax]);a.setSpatialReference(this.map.spatialReference);return a},extentToMPArray:function(a){return[[a.xmax,a.ymax],[a.xmax,a.ymin],[a.xmin,a.ymin],[a.xmin,a.ymax],[a.xmax,a.ymax]]},checkforenterkey:function(a){13===(void 0!==a.keyCode?a.keyCode:a.which)&&this.search(null,this.AttributeLayerIndex,this.expressIndex)},onNewSelection:function(){this.gSelectTypeVal="new"},onAddSelection:function(){this.gSelectTypeVal="add"},onRemoveSelection:function(){this.gSelectTypeVal=
"rem"},onNewSelection2:function(){z.replaceClass(this.aSelectType.iconNode,"newSelIcon","removeSelIcon");z.replaceClass(this.aSelectType.iconNode,"newSelIcon","addSelIcon");this.aSelectTypeVal="new"},onAddSelection2:function(){z.replaceClass(this.aSelectType.iconNode,"addSelIcon","newSelIcon");z.replaceClass(this.aSelectType.iconNode,"addSelIcon","removeSelIcon");this.aSelectTypeVal="add"},onRemoveSelection2:function(){z.replaceClass(this.aSelectType.iconNode,"removeSelIcon","newSelIcon");z.replaceClass(this.aSelectType.iconNode,
"removeSelIcon","addSelIcon");this.aSelectTypeVal="rem"},search:function(a,c,d,g,h,k){var l=!1,m=!1;"undefined"===typeof k&&(k=!1);this.oidArray=[];if(this.config.layers&&0!==this.config.layers.length){a?("add"===this.gSelectTypeVal&&(l=!0),"rem"===this.gSelectTypeVal&&(m=!0)):("add"===this.aSelectTypeVal&&(l=!0),"rem"===this.aSelectTypeVal&&(m=!0));var K=new b;l||m?(this._clearLayers(),this._clearRelateLayers(),this.drawBox.clear(),this.garr=[],this.lastDrawTool=this.lastDrawCommonType=null):this.clear();
this.currentSearchLayer=this._createSearchResultLayer(c||0);this.currentLayerIndex=c;var n=this.config.layers[c];a?(this.initiator="graphic",K.geometry=a.getExtent().getCenter(),this.map_click_point=a.getExtent().getCenter(),this.add_click_point_graphic(this.map_click_point),K.spatialRelationship=h||b.SPATIAL_REL_INTERSECTS,this.cbxAddTextQuery.getValue()&&(a=this.buildWhereClause(c,this.expressIndex,g),(K.where=this.lastWhere=a)?console.info(a):console.info("No SQL expression found")),n.definitionexpression&&
(K.where=n.definitionexpression,this.lastWhere&&(K.where+=" AND "+this.lastWhere),console.info("SQL Where with layers definition expression: ",K.where))):(this.initiator="attribute",a=this.buildWhereClause(c,d,g),K.where=this.lastWhere=a,this.limitMapExtentCbx.getValue()&&(K.geometry=this.map.extent),n.definitionexpression&&-1===this.lastWhere.indexOf(n.definitionexpression)&&(K.where=n.definitionexpression+" AND "+this.lastWhere),console.info("SQL Where with layers definition expression: ",K.where));
if(("attribute"===this.initiator||"graphic"===this.initiator&&this.cbxAddTextQuery.getValue())&&!this.checkForRequiredFieldsEntered())new f({titleLabel:this.nls.requiredWarning,message:this.nls.requiredErrorMessage});else{this.rsltsTab&&this.tabContainer.selectTab(this.nls.results);z.setStyle(this.progressBar.domNode,"display","block");z.setStyle(this.divOptions,"display","none");a=[];if(this.config.layers[c].fields.all)a[0]="*";else for(d=0,g=this.config.layers[c].fields.field.length;d<g;d++)a[d]=
this.config.layers[c].fields.field[d].name;!this.config.layers[c].existObjectId&&0>a.indexOf(this.config.layers[c].objectIdField)&&(this.config.layers[c].fields.all||a.push(this.config.layers[c].objectIdField));K.returnGeometry=!0;K.outSpatialReference=this.map.spatialReference;K.outFields=a;this._isServiceSupportsOrderBy(this.resultLayers[c])&&(a=this.config.layers[c].orderByFields)&&0<a.length&&(K.orderByFields=a,a=J.map(a,y.hitch(this,function(a){return a.split(" ")[0]})),J.forEach(a,y.hitch(this,
function(a){0>K.outFields.indexOf(a)&&K.outFields.push(a)})));n=new e(n.url);z.empty(this.divResultMessage);z.place(z.toDom(this.nls.searching),this.divResultMessage);n.execute(K,y.hitch(this,this._onSearchFinish,c,k,m,l),y.hitch(this,this._onSearchError))}}},checkForRequiredFieldsEntered:function(){var a=this.paramsDijit.getSingleParamValues();if(!a||0===a.length||!this.config.layers.length)return!1;for(var b=0;b<a.length;b++){var c=this.config.layers[this.AttributeLayerIndex].expressions.expression[this.expressIndex].values.value[b].required||
!1,d=!1;if(a[b].hasOwnProperty("value")&&null!==a[b].value)d=""===a[b].value||"nan"===a[b].value.toString().toLowerCase()?!1:!0;else{if(!a[b].hasOwnProperty("value1")||null===a[b].value1)continue;"NaN"!==a[b].value1.toString()&&"NaN"!==a[b].value2.toString()&&(d=!1)}if(c&&!d)return!1}return!0},isSelTabVisible:function(){switch(this.selTab){case this.nls.selectByAttribute:return this.attribTab;case this.nls.selectFeatures:return this.shapeTab;case this.nls.selectSpatial:return this.spatTab;case this.nls.results:return this.rsltsTab}},
clearFields:function(){if(this.AttributeLayerIndex||0===this.AttributeLayerIndex){var a=this.expressIndex||0;if(0<a)this.onAttributeLayerExpressionChange(this.expressIndex);else this.onAttributeLayerChange(this.AttributeLayerIndex);var b=y.clone(this.config.layers[this.AttributeLayerIndex].expressions.expression[a].values.value);J.map(b,y.hitch(this,function(a){-1<a.operation.toLowerCase().indexOf("date")&&(a.valueObj.hasOwnProperty("value")&&(a.valueObj.value=""),a.valueObj.hasOwnProperty("value1")&&
(a.valueObj.value1=""),a.valueObj.hasOwnProperty("value2")&&(a.valueObj.value2=""),this.paramsDijit.setSingleParamValues(b,""))}))}},clear:function(a){this.sumDivEvt&&this.sumDivEvt.remove();z.removeClass(this.list.domNode,"sum");z.setStyle(this.divSum,"display","none");z.setStyle(this.divOptions,"display","none");this.lastWhere=this.initiator=this.currentCSVResults=this.currentLayerIndex=null;HUC12_numberOnly=[];this.oidArray=[];this.currentFeatures=[];this._hideInfoWindow();this._clearLayers();
this._clearRelateLayers();this.divSum.innerHTML="";this.zoomAttempt=0;this.aSelectTypeVal=this.gSelectTypeVal="new";this.sumResultArr=[];a&&0<this.list.items.length&&this.isSelTabVisible()&&this.tabContainer.selectTab(this.selTab);this.list.clear();z.empty(this.divResultMessage);this.drawBox.clear();this.garr=[];this.lastDrawTool=this.lastDrawCommonType=null;dojo.style(ca.byId("gridNavResults"),"display","none");dojo.style(ca.byId("gridHUC12"),"display","none");this.navHUC12Layer&&this.map.removeLayer(this.navHUC12Layer);
this.navHUC12Layer=null;this.navHUC8Layer&&this.map.removeLayer(this.navHUC8Layer);this.navHUC8Layer=null;z.empty(this.clickAgainMessage);this.results_json={};a&&this.wManager&&this.attTableOpenedbySearch&&(a=this._getWidgetConfig("AttributeTable"))&&((a=this.wManager.getWidgetByLabel(a.label))&&a._closeTable(),this.attTableOpenedbySearch=!1);return!1},clearbuffer:function(){this.garr=[];this.graphicsLayerBuffer.clear();z.setStyle(this.btnClearBuffer2,"display","none");z.setStyle(this.btnClearBuffer3,
"display","none");return!1},buildWhereClause:function(a,b,c){var d=/\[value\]/g,e=/\[value1\]/g,f=/\[value2\]/g,g=/\[value\]/,h="",k,l;if((c=c||this.paramsDijit.getSingleParamValues())&&0!==c.length&&this.config.layers.length){for(var m=0;m<c.length;m++){var n=this.config.layers[a].expressions.expression[b].values.value[m]&&"undefined"!==typeof this.config.layers[a].expressions.expression[b].values.value[m].operator?this.config.layers[a].expressions.expression[b].values.value[m].operator:"OR",K=this.config.layers[a].expressions.expression[b].values.value[m].operation,
p=this.config.layers[a].expressions.expression[b].values.value[m].sqltext;if(c[m].hasOwnProperty("value")&&null!==c[m].value)if("stringOperatorContains"===K)for(n=c[m].value.toString().split(" "),w=0;w<n.length;w++)l=n[w],l=p.replace(d,l),h=this.AppendTo(h,l,"AND");else if("dateOperatorIsOn"===K||"dateOperatorIsNotOn"===K)k=c[m].value.toString(),l=p.replace(g,k),l=l.replace(g,k.replace("00:00:00","23:59:59")),h=this.AppendTo(h,l,n);else if("dateOperatorIsAfter"===K)k=c[m].value.toString(),l=p.replace(d,
k.replace("00:00:00","23:59:59")),h=this.AppendTo(h,l,n);else if(k="[value]"===p||0<p.toLowerCase().indexOf(" in (")?c[m].value.toString():c[m].value.toString().replace(/'/g,"''"),0<p.toLowerCase().indexOf(" in (")&&-1<p.toLowerCase().indexOf("'[value]'")&&(k=k.replace(/^'|'$/g,"").replace(/,|','/g,"','")),"all"===c[m].value.toString().toLowerCase().trim())p=-1<p.indexOf("\x3d")?p.replace("\x3d","IN(")+")":p,l=this.config.layers[a].expressions.expression[b].values.value[m].userlist,-1<l.indexOf("','")?
(k=/,\s*'all'/gi,l=l.replace(k,""),k=this.trimArray(l.split("','")),"'"===String(k[0]).substring(0,1)&&(k[0]=String(k[0]).substring(1)),K=String(k[k.length-1]),"'"===K.substring(K.length-1)&&(k[k.length-1]=K.substring(0,K.length-1))):(k=/,\s*all/gi,l=l.replace(k,""),k=this.trimArray(l.split(","))),-1<p.indexOf("'[value]'")&&(l=k.join("','")),l=p.replace(d,l),h=this.AppendTo(h,l,n);else if("allu"===c[m].value.toString().toLowerCase())h=this.AppendTo(h,"1\x3d1",n);else if("null"===c[m].value.toString().toLowerCase()||
"nan"===c[m].value.toString().toLowerCase())!0===c[m].isValueRequired&&(p=p.substr(0,p.indexOf("\x3d"))+" is null",h=this.AppendTo(h,p,n));else{if(""!==k&&(l=p.replace(d,k),h=this.AppendTo(h,l,n)),"stringOperatorIsBlank"===K||"stringOperatorIsNotBlank"===K||"numberOperatorIsBlank"===K||"numberOperatorIsNotBlank"===K||"dateOperatorIsBlank"===K||"dateOperatorIsNotBlank"===K)h=this.AppendTo(h,p,n)}else c[m].hasOwnProperty("value1")&&null!==c[m].value1&&"NaN"!==c[m].value1.toString()&&"NaN"!==c[m].value2.toString()&&
(l=c[m].value1.toString(),k=c[m].value2.toString(),l=p.replace(e,l),l=l.replace(f,k),h=this.AppendTo(h,l,n))}return h}},AppendTo:function(a,b,c){return 0<a.length?a+" "+c+" "+b:b},trimArray:function(a){for(var b=0;b<a.length;b++)a[b]=a[b].replace(/^\s*/,"").replace(/\s*$/,"");return a},zoomall:function(){var a=this.config.layers[this.currentLayerIndex].zoomScale||1E4;if(!this.currentLayerAdded)return!1;if(1===this.currentLayerAdded.graphics.length&&"point"===this.currentLayerAdded.graphics[0].geometry.type){var b=
this.currentLayerAdded.graphics[0].geometry;this.map.setScale(a);this.map.centerAt(b)}else 0===this.currentLayerAdded.graphics.length&&(10>=this.zoomAttempt?(setTimeout(y.hitch(this,function(){this.zoomall()}),300),this.zoomAttempt++):(this.zoomAttempt=0,new f({titleLabel:this.nls.warning,message:this.nls.zoomErrorMessage}))),(b=E.graphicsExtent(this.currentLayerAdded.graphics))?this.map.setExtent(b.expand(1),!0):(b=this.currentLayerAdded.graphics[0].geometry,this.map.setScale(a),this.map.centerAt(b));
return!1},_clearLayers:function(){this._removeAllResultLayers();z.setStyle(this.btnClear2,"display","none");z.setStyle(this.btnClear3,"display","none")},_clearRelateLayers:function(){this._removeAllRelateLayers()},_onSearchError:function(a){this.clear();z.setStyle(this.progressBar.domNode,"display","none");new f({message:this.nls.searchError});console.debug(a)},_substitute:function(a,b,c){for(var d=this._getFieldsfromLink(a),e=0;e<d.length;e++)b[d[e]]&&(a="esriFieldTypeString"===this._getField(c,
d[e]).type?a.replace(new RegExp("{"+y.trim(d[e])+"}","g"),y.trim(b[d[e]])):a.replace(new RegExp("{"+y.trim(d[e])+"}","g"),b[d[e]]));return a},_getFieldsfromLink:function(a){var b=[],c=0,d=0,c="";do{c=a.indexOf("{",d);if(-1===c)break;d=a.indexOf("}",c);c=a.substring(c+1,d);b.push(c)}while(d<a.length-1);return b},_getAllLyrFields:function(){return J.filter(this.resultLayers[this.currentLayerIndex].fields,y.hitch(this,function(a){return"esriFieldTypeGeometry"!==a.type}))},initHUC12Grid:function(){this.g_gridHUC12=
new xa({visibility:"hidden",autoHeight:!0,selectable:!0,structure:[{name:"HUC12",field:"HUC12",width:"120px"},{name:"HUC12 Name",field:"HU_12_Name",width:"249px"}]},"gridHUC12");this.g_gridHUC12.startup();dijit.byId("gridHUC12").resize();dojo.style(ca.byId("gridHUC12"),"display","none")},initNavigationGrid:function(){this.g_gridNavResults=new xa({visibility:"hidden",autoHeight:!0,selectable:!0,structure:[{name:"Attribute",field:"key",width:"175px"},{name:"Value",field:"value",width:"194px"}]},"gridNavResults");
this.g_gridNavResults.startup();dijit.byId("gridNavResults").resize();dojo.style(ca.byId("gridNavResults"),"display","none")},label_huc12s:function(a){var b=this;J.forEach(a,function(a){b.results_json.hasOwnProperty("huc12")||(b.results_json.huc12=[]);b.results_json.huc12.push({HUC12:a.attributes.HUC_12,HU_12_Name:a.attributes.HU_12_Name});var c=a.attributes.HUC_12+(void 0!==a.attributes.HU_12_Name?" HUC12_NAME:"+a.attributes.HU_12_Name:"");b.add_label(a.geometry.getExtent().getCenter(),c)})},navigate_upstream:function(a){var c=
this,d=a.features[0].attributes;a=d.HUC_12;this.results_json={};var f=document.getElementsByName("huc12_mapserver");if(0<f.length){var g="";for(i=0;i<f.length;i++)1==f[i].checked&&(g=f[i].value);this.huc12_mapserver="WatersGEO"==g?this.watersgeo_huc12_mapserver:this.enviroatlas_huc12_mapserver}else this.huc12_mapserver=this.enviroatlas_huc12_mapserver;this.qtHUC12=new e(this.huc12_mapserver);this.qHUC12=new b;this.qHUC12.returnGeometry=!0;this.qHUC12.outFields=["HUC_12"];this.qtHUC8=new e(this.huc8_mapserver);
this.qHUC8=new b;this.qHUC8.returnGeometry=!0;this.qHUC8.outFields=["*"];z.addClass(this.list.domNode,"sum");z.setStyle(this.divSum,"display","");this.results_json.hasOwnProperty("huc12")||(this.results_json.huc12=[]);this.results_json.huc12.push({HUC12:a,HU_12_Name:d.HU_12_Name});d="Upstream";f=document.getElementsByName("navigation_direction");for(i=0;i<f.length;i++)1==f[i].checked&&(d=f[i].value);a=Z({url:this.navigator_url,content:{navigation_direction:d,code:a},handleAs:"json"});z.setStyle(this.progressBar.domNode,
"display","block");"UPSTREAM"==d.toUpperCase()?a.then(function(a){c.upstreamNavigationSucceeded(a)},function(a){c.navigationFailed}):a.then(function(a){c.downstreamNavigationSucceeded(a)},function(a){c.navigationFailed})},withinMyHUC8_slice:function(a,b,c){if(a.length<=b)return a;var d=[],e;for(e in a)if(id=a[e],id.slice(0,8)==c.slice(0,8)&&(d.push(id),d.length==b))break;return d},closest_slice:function(a,b,c){if(a.length<=b)return a;var d=[];for(i=0;i<c.length;i++){for(var e in a)if(id=a[e],id.slice(0,
12-i)==c.slice(0,12-i)&&(console.log("matched id\x3d\x3d"+id.slice(0,12-i)+" for target_huc_id\x3d\x3d"+c),d.push(id),d.length==b))break;if(d.length==b)break}return d},upstreamNavigationSucceeded:function(a){HUC12_numberOnly=[];var c=this;huc_json=this.results_json.huc12;huc_json.pop();var d=[];if(0<a.us_huc12_ids.value.length){huc12_ids_len=a.us_huc12_ids.value.length;var f=[];HUC12_numberOnly.push({HUC12_num:a.huc12.value});J.forEach(a.us_huc12_ids.value,function(b){b!=a.huc12.value&&HUC12_numberOnly.push({HUC12_num:b});
b=b.substring(0,8);b!=a.huc8.value&&-1===f.indexOf(b)&&f.push(b)});a.upstream_huc8_count_nu.value=f.length;var g=[];if(a.upstream_huc8_count_nu.value<this.numHUC8Tolerance){var h,k,g=0;for(h=a.us_huc12_ids.value.length;g<h;g+=this.huc12_array_slice_size){k=a.us_huc12_ids.value.slice(g,g+this.huc12_array_slice_size);var l=new b;l.where="HUC_12 in ('"+k.join("','")+"')";l.returnGeometry=!0;l.outFields=["HUC_12"];this.qtHUC12=new e(this.huc12_mapserver);this.qtHUC12.requestOptions={usePost:!0};l=this.qtHUC12.execute(l);
d.push(l)}my_len=a.us_huc12_ids.value.length-1;console.log("There are "+my_len+" upstream HUC12s. Running "+d.length+" HUC12 Upstream GIS queries with "+this.huc12_array_slice_size+" HUC12s in each query.")}else g=this.withinMyHUC8_slice(a.us_huc12_ids.value,90,a.huc12.value),l=new b,l.where="HUC_12 in ('"+g.join("','")+"')",l.returnGeometry=!0,l.outFields=["*"],this.qtHUC12=new e(this.huc12_mapserver),this.qtHUC12.requestOptions={usePost:!0},l=this.qtHUC12.execute(l),d.push(l),console.log("There are "+
g.length+" upstream HUC12s until the HUC8s. Running 1 HUC12 ArcGIS query.");0<f.length&(null==ca.byId("showAllHUC12")||!ca.byId("showAllHUC12").checked)&&(g=new b,g.where=this.huc8_id_field_name+" in ('"+f.join("','")+"')",g.returnGeometry=!0,g.outFields=["*"],this.qtHUC8=new e(this.huc8_mapserver),this.qtHUC8.requestOptions={usePost:!0},exHUC8=this.qtHUC8.execute(g),d.push(exHUC8),console.log("There are "+f.length+" upstream HUC8s. Running 1 HUC8 ArcGIS query."))}else l=new b,l.where="HUC_12 \x3d '"+
a.huc12+"'",l.returnGeometry=!0,l.outFields=["HUC_12"],this.qtHUC12=new e(this.huc12_mapserver),l=this.qtHUC12.execute(l),d.push(l),console.log("running single HUC12 Upstream queries");console.time("ArcGIS Query");promises=qa(d);promises.then(function(a){c.handleUpstreamNavigationQueryResults(a)});huc_json.push({NAVIGATION_RESULTS:a});this.populate_gridNavResults(a);this.g_gridNavResults.render();dijit.byId("gridNavResults").resize();dojo.style(ca.byId("gridNavResults"),"display","");this.results_json.huc12=
huc_json;ca.byId("results").innerHTML=""},handleUpstreamNavigationQueryResults:function(a){console.timeEnd("ArcGIS Query");console.time("ArcGIS Display Results");var b=this;this.navHUC12Layer&&this.map.removeLayer(this.navHUC12Layer);this.navHUC12Layer=null;this.navHUC8Layer&&this.map.removeLayer(this.navHUC8Layer);this.navHUC8Layer=null;var c={layerDefinition:{type:"Feature Layer",description:"",definitionExpression:"",name:"Navigated HUC12 Subwatershed",geometryType:"esriGeometryPolygon",objectIdField:"ObjectID",
drawingInfo:{renderer:{type:"simple",label:"HUC12",description:"Subwatershed",symbol:this.huc12_symbol()}},fields:[{name:"HUC_12",alias:"HUC12 ID",type:"esriFieldTypeString"},{name:"HU_12_Name",alias:"HUC12 Name",type:"esriFieldTypeString"}]},featureSet:null};this.navHUC12Layer=new r(c);this.map.addLayer(this.navHUC12Layer);c={layerDefinition:{type:"Feature Layer",description:"",definitionExpression:"",name:"Navigated HUC8 Subbasin",geometryType:"esriGeometryPolygon",objectIdField:"ObjectID",drawingInfo:{renderer:{type:"simple",
label:"HUC8",description:"Watershed",symbol:this.huc8_symbol()}},fields:[{name:this.huc8_id_field_name,alias:"HUC8 ID",type:"esriFieldTypeString"},{name:"HU_8_NAME",alias:"HUC8 Name",type:"esriFieldTypeString"}]},featureSet:null};this.navHUC8Layer=new r(c);huc_json=this.results_json.huc12;huc_json.pop();ca.byId("results").innerHTML="";a[0].hasOwnProperty("features")||console.log("exHUC12 query failed.");1<a.length?a[a.length-1].hasOwnProperty("features")?null!=ca.byId("showAllHUC12")&&ca.byId("showAllHUC12").checked||
(this.map.addLayer(this.navHUC8Layer),featHUC8=a[a.length-1].features,this.map.setExtent(E.graphicsExtent(featHUC8)),J.forEach(featHUC8,function(a){a.setSymbol(b.huc8_symbol());b.navHUC8Layer.add(a)})):console.log("exHUC8s query failed."):(featHUC12=a[0].features,this.map.setExtent(E.graphicsExtent(featHUC12)));this.map.graphics.clear();z.empty(this.divResultMessage);J.forEach(a,function(a){if(a.hasOwnProperty("features")&1==a.features[0].attributes.hasOwnProperty("HUC_12"))for(i=0;i<a.features.length;i+=
1)a.features[i].setSymbol(b.huc12_symbol()),b.navHUC12Layer.add(a.features[i]);else if(a.hasOwnProperty("features")&0==a.features[0].attributes.hasOwnProperty("HUC_12"))for(i=0;i<a.features.length;i+=1)a.features[i].setSymbol(b.huc8_symbol()),b.navHUC8Layer.add(a.features[i])});a=E.graphicsExtent(this.navHUC12Layer.graphics).expand(1.2);0<this.navHUC8Layer.graphics.length&&(a=a.union(E.graphicsExtent(this.navHUC8Layer.graphics).expand(1.2)));this.map.setExtent(a);z.setStyle(this.progressBar.domNode,
"display","none");this.add_click_point_graphic(this.map_click_point);console.timeEnd("ArcGIS Display Results")},downstreamNavigationSucceeded:function(a){var c=this;huc_json=this.results_json.huc12;huc_json.pop();if(0<a.ds_huc12_ids.value.length){huc12_ids_len=a.ds_huc12_ids.value.length;var d=[];J.forEach(a.ds_huc12_ids.value,function(b){b=b.substring(0,8);b!=a.huc8.value&&-1===d.indexOf(b)&&("10160010"==b&&d.push("10160011"),"10160011"==b&&d.push("10160010"),d.push(b))});a.downstream_huc8_count_nu.value=
d.length;var f=[],g,h,k;g=0;for(h=a.ds_huc12_ids.value.length;g<h;g+=this.huc12_array_slice_size){k=a.ds_huc12_ids.value.slice(g,g+this.huc12_array_slice_size);var l=new b;l.where="HUC_12 in ('"+k.join("','")+"')";l.returnGeometry=!0;l.outFields=["*"];this.qtHUC12=new e(this.huc12_mapserver);k=this.qtHUC12.execute(l);f.push(k)}0<d.length&&(g=new b,g.where=this.huc8_id_field_name+" in ('"+d.join("','")+"')",g.returnGeometry=!0,g.outFields=["*"],this.qtHUC8=new e(this.huc8_mapserver),exHUC8=this.qtHUC8.execute(g));
promises=qa(f);promises.then(function(a){c.handleUpstreamNavigationQueryResults(a)});console.log("running "+f.length+" HUC8 Downstream GIS queries")}else l=new b,l.where="HUC_12 \x3d '"+a.huc12+"'",l.returnGeometry=!0,l.outFields=["*"],this.qtHUC12=new e(this.huc12_mapserver),k=this.qtHUC12.execute(l),promises=qa([k]),promises.then(function(a){c.handleUpstreamNavigationQueryResults(a)}),console.log("running single HUC12 Downstream queries");huc_json.push({NAVIGATION_RESULTS:a});this.populate_gridNavResults(a);
dojo.style(ca.byId("gridNavResults"),"display","");this.results_json.huc12=huc_json;ca.byId("results").innerHTML=""},navigationFailed:function(a){console.log("HUC12 Navigation Failed: ",a.message);this.results_json.HUC12_Navigation={NAVIGATION_FAILED:a.message}},populate_gridHUC12:function(a){var b=[],c;for(c in a.huc12)values=a.huc12[c],values.hasOwnProperty("HUC12")&&b.push(values);a=new wa({data:b});gridStore=new dojo.data.ObjectStore({objectStore:a});this.g_gridHUC12.store=gridStore;z.setStyle(this.listDiv,
"display","none");this.g_gridHUC12.render();dojo.style(ca.byId("gridHUC12"),"display","");dijit.byId("gridHUC12").resize()},populate_gridNavResults:function(a){attribute_list="area_sq_km water_area_sq_km upstream_count_nu downstream_count_nu us_area_sq_km ds_area_sq_km us_water_area_sq_km ds_water_area_sq_km huc8 upstream_huc8_count_nu downstream_huc8_count_nu".split(" ");var b=[];attribute_list.forEach(function(c){a.hasOwnProperty(c)&&(result_data=a[c],value_display=result_data.value,result_data.hasOwnProperty("units")&&
(value_display=value_display+" "+result_data.units),b.push({key:result_data.name,value:value_display}))});var c=new wa({data:b});results2Store=new dojo.data.ObjectStore({objectStore:c});this.g_gridNavResults.store=results2Store;this.g_gridNavResults.render();dojo.style(ca.byId("gridNavResults"),"display","");dijit.byId("gridNavResults").resize()},add_click_point_graphic:function(a){var b=this;dojo.some(this.map.graphics.graphics,function(a){if(a&&"clickPoint"===a.id)return b.map.graphics.remove(a),
!1});var c=new esri.symbol.SimpleMarkerSymbol(esri.symbol.SimpleMarkerSymbol.STYLE_CROSS,22,new esri.symbol.SimpleLineSymbol(esri.symbol.SimpleLineSymbol.STYLE_SOLID,new dojo.Color([0,128,0]),4));a=new esri.Graphic(a,c);a.id="clickPoint";this.map.graphics.add(a)},huc12_symbol:function(){var a,b;b=new esri.symbol.SimpleFillSymbol({type:"esriSFS",style:"esriSFSSolid",color:[0,255,0,40]});a=new esri.symbol.SimpleLineSymbol(esri.symbol.SimpleLineSymbol.STYLE_DASHDOT,new dojo.Color([0,0,0,50]),1);b.setOutline(a);
return b},huc8_symbol:function(){var a=new esri.symbol.SimpleFillSymbol({type:"esriSFS",style:"esriSFSSolid",color:[255,0,0,40]}),b=new esri.symbol.SimpleLineSymbol(esri.symbol.SimpleLineSymbol.STYLE_DASHDOTDOT,new dojo.Color([0,0,0,50]),1);a.setOutline(b);return a},add_huc8_label:function(a,b){new esri.symbol.Font("12pt",esri.symbol.Font.STYLE_NORMAL,esri.symbol.Font.VARIANT_NORMAL,esri.symbol.Font.WEIGHT_BOLD,"Arial");var c=new esri.symbol.TextSymbol(b);c.setColor(new dojo.Color([0,0,0]));c.setAlign(esri.symbol.TextSymbol.ALIGN_MIDDLE);
c.setFont(b);a=new esri.Graphic(a,c);this.map.graphics.add(a)},add_label:function(a,b){new esri.symbol.Font("14pt",esri.symbol.Font.STYLE_NORMAL,esri.symbol.Font.VARIANT_NORMAL,esri.symbol.Font.WEIGHT_BOLD,"Arial");var c=new esri.symbol.TextSymbol(b);c.setColor(new dojo.Color([0,0,0]));c.setAlign(esri.symbol.TextSymbol.ALIGN_MIDDLE);c.setFont(b);a=new esri.Graphic(a,c);this.map.graphics.add(a)},_onSearchFinish:function(a,b,c,d,e){var g=this.config.layers[a],h;J.map(this.currentSearchLayer.fields,
y.hitch(this,function(a){if(g.fields.all)a.show=!0;else{a.show=!1;for(var b=0;b<g.fields.field.length;b++)g.fields.field[b].name==a.name&&(a.show=!0)}}));h=this.currentSearchLayer;"server"===g.layersymbolfrom?h.setRenderer(this._setCurentLayerRenderer("server")):"layer"===g.layersymbolfrom?h.setRenderer(this._setCurentLayerRenderer("layer")):h.setRenderer(this._setCurentLayerRenderer("config"));this.rsltsTab&&this.tabContainer.selectTab(this.nls.results);z.setStyle(this.progressBar.domNode,"display",
"none");z.setStyle(this.divOptions,"display","block");var k="",l=g.titlefield,m=g.objectIdField,n=g.existObjectId,p=g.typeIdField,q;d&&this.currentFeatures&&0<this.currentFeatures.length?(q=this.currentCSVResults.data||[],J.forEach(e.features,y.hitch(this,function(a){0>this.currentFeatures.indexOf(a)&&this.currentFeatures.push(a)}))):c&&this.currentFeatures&&0<this.currentFeatures.length?(q=this.currentCSVResults.data||[],J.forEach(e.features,y.hitch(this,function(a){for(var b=this.currentFeatures.length-
1;0<=b;b--)if(this.currentFeatures[b].attributes[m]==a.attributes[m]){this.currentFeatures.splice(b,1);break}for(b=q.length-1;0<=b;b--)if(q[b].OID==a.attributes[m]){q.splice(b,1);break}}))):(q=[],this.currentCSVResults=null,this.currentFeatures=e.features);d=this.list.items.length;var r=e.features.length;if(0===this.currentFeatures.length)z.empty(this.divResultMessage),z.place(z.toDom(this.nls.noResults),this.divResultMessage),this.list.clear(),this.aSelectTypeVal=this.gSelectTypeVal="new",z.setStyle(this.divOptions,
"display","none"),z.empty(this.clickAgainMessage),z.setStyle(this.clickAgainMessage,"display","none");else{1<this.currentFeatures.length?(z.empty(this.divResultMessage),z.empty(this.clickAgainMessage),z.place(z.toDom('\x3clabel style\x3d"font-size: 18px;"\x3eSelect one of the '+this.currentFeatures.length+" highlighted HUCs to continue navigating and to see additional details.\x3c/label\x3e"),this.clickAgainMessage),z.setStyle(this.clickAgainMessage,"display","")):z.empty(this.divResultMessage);var t,
u,v,K,x,aa,T,A;this._getSumFields(a);0<this.sumFields.length?(z.addClass(this.list.domNode,"sum"),z.setStyle(this.divSum,"display","")):(z.removeClass(this.list.domNode,"sum"),z.setStyle(this.divSum,"display","none"));0<this.sumFields.length&&(this.sumResultArr=[],this.sumDivEvt&&this.sumDivEvt.remove(),J.map(this.sumFields,y.hitch(this,function(b){t=v=0;for(u=this.currentFeatures.length;t<u;t++)v+=Number(this.currentFeatures[t].attributes[b.field]);if(K=this._getNumberFormat(b.field,a))aa=K.split("|"),
T=this._formatNumber(v,aa[0]||null,aa[1]||null,aa[2]||null);if(x=this._getCurrencyFormat(b.field,a))A=x.split("|"),T=this._formatCurrency(v,A[1]||null,A[0]||null,A[2]||null,A[3]||null);this.sumResultArr.push(b.sumlabel+" "+T)})),1<this.sumFields.length?(this.divSum.innerHTML=this.sumResultArr[0]+"\x26nbsp;\x26nbsp;"+this.nls.more+"...",z.setStyle(this.divSum,"cursor","pointer"),this.sumDivEvt=S(this.divSum,"click",y.hitch(this,function(){new f({titleLabel:this.nls.summaryresults,message:this.sumResultArr.join("\x3cbr\x3e")})}))):
1===this.sumFields.length&&(z.setStyle(this.divSum,"cursor","default"),this.divSum.innerHTML=this.sumResultArr[0]));if(0<e.features.length)if(this.label_huc12s(e.features),this.populate_gridHUC12(this.results_json,this),1===e.features.length){var B=e.features[0].attributes;console.log("Click point found HUC12: "+B.HUC_12+(void 0!==B.HU_12_Name?", HUC12_NAME:"+B.HU_12_Name:""));console.time("Navigate HUC12");this.navigate_upstream(e);console.timeEnd("Navigate HUC12")}else console.log("Click point found "+
e.features.length+" HUC12s.");var E=[];for(t=0;t<r;t++){var D=e.features[t].attributes,C=[];g.links&&g.links.link&&(C=g.links.link);for(var B=[],F=0;F<C.length;F++){var ua="",G="",H="",I=!1,va=!1;C[F].disableinpopup&&(va=!0);if(C[F].disablelinksifnull)for(ua=this._getFieldsfromLink(C[F].content),G=0;G<ua.length;G++)if(!D[ua[G]]||""===D[ua[G]]){I=!0;break}ua=I?"":this._substitute(C[F].content,D,e);G=(G=this._substitute(C[F].alias,D,e))?G:C[F].alias;H=this._substitute(C[F].icon||this.folderUrl+"images/w_link.png",
D,e);va={link:ua,icon:H,alias:G,disableinpopup:va,popuptype:C[F].popuptype};I||B.push(va)}var M=g.hasOwnProperty("hidenullvalue")&&g.hidenullvalue?!0:!1,N="",O="",L="",P={},Q,E=[],C=y.clone(this.config.layers[a].fields.field);this.config.layers[a].fields.all&&(C=this._getAllLyrFields());!n&&m&&0>C.indexOf({name:m})&&C.push({name:m});J.map(C,y.hitch(this,function(b){b=b.name;var c=this._getField(e,b);c||console.info(b,e);c.name===m?(Q=D[b],n&&(E.push(this._getAlias(b,a)),P[this._getAlias(b,a)]=Q),
P.OID=Q):E.push(this._getAlias(b,a));this.initiator&&("graphic"===this.initiator||this.limitMapExtentCbx.getValue())&&c.name===m&&this.oidArray.push(Q);if(n||c.name!==m){var d=D[b];L=null!==d?String(d):"";if(""!==L){var f;c&&(f="esriFieldTypeDate"===c.type);f&&(f=Number(d),isNaN(f)||(L=""!==this._getDateFormat(b,a)?this._formatDate(f,this._getDateFormat(b,a)):this._formatDate(f,"MM/dd/yyyy")));if(K=this._getNumberFormat(b,a))aa=K.split("|"),L=this._formatNumber(d,aa[0]||null,aa[1]||null,aa[2]||null);
if(x=this._getCurrencyFormat(b,a))A=x.split("|"),L=this._formatCurrency(d,A[1]||null,A[0]||null,A[2]||null,A[3]||null);f=p?D[p]:null;if(b===p)(d=this._getFeatureType(this.resultLayers[a],f))&&d.name&&(L=d.name);else if(d=this._getCodedValue(this.resultLayers[a],b,d,null))L=d.name}d=b.toUpperCase();l&&d===l.toUpperCase()?(k=L,P[this._getAlias(b,a)]=L):this._isVisible(b,a)&&(M&&""===L?console.log("Removed "+b):(N+=this.resultFormatString.replace("[attribname]",this._getAlias(b,a)).replace("[attribvalue]",
L),this._isPopupOnly(b,a)||(O+=this.resultFormatString.replace("[attribname]",this._getAlias(b,a)).replace("[attribvalue]",L))),P[this._getAlias(b,a)]=L)}}));N.lastIndexOf("\x3cbr\x3e")===N.length-4&&(N=N.substr(0,N.length-4));O.lastIndexOf("\x3cbr\x3e")===O.length-4&&(O=O.substr(0,O.length-4));C=h.renderer.getSymbol(e.features[t]);c?(B=this._returnListIndexFromOID(Q),-1<B&&this.list.remove(B)):(q.push(P),this.list.add({id:"id_"+t+d,OID:Q,title:k,content:N,rsltcontent:O,alt:0===t%2,sym:C,links:B,
removeResultMsg:this.nls.removeResultMsg,showRelate:g.relates&&g.relates.relate,relalias:this.nls.showrelates}))}this.list.addComplete();this.currentCSVResults={data:q,columns:E};z.setStyle(this.btnClear2,"display","block");z.setStyle(this.btnClear3,"display","block");this._drawResults(a,e,h,b)}},_returnListIndexFromOID:function(a){var b=-1;J.some(this.list.items,y.hitch(this,function(c,d){if(c.OID===a)return b=d,!0}));return b},_setCurentLayerRenderer:function(a){if("server"===a)return G.fromJson(this.resultLayers[this.currentLayerIndex].drawingInfo.renderer);
var b,c=this.resultLayers[this.currentLayerIndex].geometryType;if("layer"===a&&(a=this.config.layers[this.currentLayerIndex],a.symbology))return b=ga.fromJson(a.symbology),b=new A(b),b.label=b.description=this.config.layers[this.currentLayerIndex].name,b;switch(c){case "esriGeometryMultipoint":case "esriGeometryPoint":this.config.symbols&&this.config.symbols.simplemarkersymbol?b=new I(this.config.symbols.simplemarkersymbol):this.config.symbols&&this.config.symbols.picturemarkersymbol?(b=y.clone(this.config.symbols.picturemarkersymbol),
b.url=this.folderUrl+b.url,b=new P(b)):b=new I;break;case "esriGeometryPolyline":b=this.config.symbols&&this.config.symbols.simplelinesymbol?new Q(this.config.symbols.simplelinesymbol):new Q;break;case "esriGeometryEnvelope":case "esriGeometryPolygon":b=this.config.symbols&&this.config.symbols.simplefillsymbol?new X(this.config.symbols.simplefillsymbol):new X}b=new A(b);b.label=b.description=this.config.layers[this.currentLayerIndex].name;return b},_openResultInAttributeTable:function(a){var b=this.config.layers[this.currentLayerIndex],
c=b.hasOwnProperty("autozoomtoresults")&&!b.autozoomtoresults?!1:!0;this.autozoomtoresults&&c&&setTimeout(y.hitch(this,function(){this.zoomall()}),300);a=this.operLayerInfos.getLayerInfoById(a.id);if(!b.fields.all){var d=[];J.map(a.layerObject.fields,y.hitch(this,function(a){(a=this._getConfigFieldObject(a.name,this.currentLayerIndex))&&d.push({fieldName:a.name,label:a.alias,show:!0,format:this._convertFormatInfo(a)})}));a.originOperLayer.popupInfo={fieldInfos:d}}this.publishData({target:"AttributeTable",
layer:a})},_convertFormatInfo:function(a){var b=null;a.currencyformat&&(b=a.currencyformat.split("|"),b={places:parseInt(b[1]||0),digitSeparator:b[2]?!0:!1});if(a.dateformat){switch(a.dateformat){case "M/d/yyyy":b="shortDate";break;case "d MMM yyyy":b="dayShortMonthYear";break;case "EEEE, MMMM d, yyyy":b="longDate";break;case "MMMM d, yyyy":b="longMonthDayYear";break;case "MMMM yyyy":b="longMonthYear";break;case "M/d/yyyy h:mm:ss a":b="shortDateLongTime";break;case "M/d/yyyy H:mm:ss":b="shortDateLongTime24";
break;case "M/d/yyyy h:mm a":b="shortDateShortTime";break;case "M/d/yyyy h:mm":b="shortDateShortTime24";break;case "MMM yyyy":b="shortMonthYear";break;case "yyyy":b="year";break;default:b="shortDate"}b={dateFormat:b};a.useutc&&(b.timezone="utc")}a.numberformat&&(a=a.numberformat.split("|"),b={places:parseInt(a[0]||0),digitSeparator:a[1]?!0:!1});return b},_getFeatureType:function(a,b){var c;if(a)for(var d=0;d<a.types.length;d++){var e=a.types[d];if(b===e.id){c=e;break}}return c},_getCodedValue:function(a,
b,c,d){var e,f;if(d)(a=this._getFeatureType(a,d))&&(f=a.domains[b]);else if(b=this._getField(a,b))f=b.domain;if(f&&"codedValue"===f.type)for(b=0;b<f.codedValues.length;b++)if(a=f.codedValues[b],c===a.code){e=a;break}return e},_getField:function(a,b){var c;if(a)for(var d=0;d<a.fields.length;d++){var e=a.fields[d];if(b===e.name){c=e;break}}return c},_formatDate:function(a,b){b&&(b=b.replace(/D/g,"d").replace(/Y/g,"y"));return Na.format(new Date(a),{selector:"date",datePattern:b})},_getAlias:function(a,
b){b=this.config.layers[b].fields.field;var c,d;for(d in b)if((c=b[d])&&c.name&&c.name.toLowerCase()===a.toLowerCase()&&c.alias)return c.alias;return a},_isVisible:function(a,b){b=this.config.layers[b].fields.field;var c,d;for(d in b)if((c=b[d])&&c.name&&c.name.toLowerCase()===a.toLowerCase()){if(c.hasOwnProperty("visible")&&!1===c.visible)return!1;break}return!0},_isPopupOnly:function(a,b){b=this.config.layers[b].fields.field;var c,d;for(d in b)if((c=b[d])&&c.name&&c.name.toLowerCase()===a.toLowerCase()){if(c.hasOwnProperty("popuponly")&&
!0===c.popuponly)return!0;break}return!1},_getDateFormat:function(a,b){b=this.config.layers[b].fields.field;var c,d;for(d in b)if((c=b[d])&&c.name&&c.name.toLowerCase()===a.toLowerCase()&&c.dateformat)return c.dateformat;return""},_getCurrencyFormat:function(a,b){b=this.config.layers[b].fields.field;var c,d;for(d in b)if((c=b[d])&&c.name&&c.name.toLowerCase()===a.toLowerCase()&&c.currencyformat)return c.currencyformat;return null},_formatCurrency:function(a,b,c,d,e){a=a||0;b=isNaN(b=Math.abs(b))?
2:b;c=void 0!==c?c:"$";d=d||",";e=e||".";var f=0>a?"-":"",g=parseInt(a=Math.abs(+a||0).toFixed(b),10)+"",h=3<(h=g.length)?h%3:0;return c+f+(h?g.substr(0,h)+d:"")+g.substr(h).replace(/(\d{3})(?=\d)/g,"$1"+d)+(b?e+Math.abs(a-g).toFixed(b).slice(2):"")},_getNumberFormat:function(a,b){b=this.config.layers[b].fields.field;var c,d;for(d in b)if((c=b[d])&&c.name&&c.name.toLowerCase()===a.toLowerCase()&&c.numberformat)return c.numberformat;return null},_formatNumber:function(a,b,c,d){a=a||0;b=isNaN(b=Math.abs(b))?
2:b;c=c||",";d=d||".";var e=0>a?"-":"",f=parseInt(a=Math.abs(+a||0).toFixed(b),10)+"",g=3<(g=f.length)?g%3:0;return e+(g?f.substr(0,g)+c:"")+f.substr(g).replace(/(\d{3})(?=\d)/g,"$1"+c)+(b?d+Math.abs(a-f).toFixed(b).slice(2):"")},_drawResults:function(a,b,c,d){a=this.config.layers[a];this.graphicsLayerBuffer instanceof r&&this._addOperationalLayer(this.graphicsLayerBuffer);c instanceof r&&this._addOperationalLayer(c);var e,f;b=0;for(var g=this.currentFeatures.length;b<g;b++){var h=this.currentFeatures[b],
k=this.list.items[this._returnListIndexFromOID(h.attributes[a.objectIdField])];e=h.geometry.type;switch(e){case "multipoint":case "point":f=h.geometry;break;case "polyline":f=h.geometry.getPoint(0,0);break;case "extent":case "polygon":f=h.geometry.getExtent().getCenter()}k.centerpoint=f;e=a.hasOwnProperty("disablePopups")&&a.disablePopups?!0:!1;this.config.disablePopups||e||c._hasInfoTemplate||h.setInfoTemplate(this._configurePopupTemplate(k));h.setSymbol(k.sym);h.geometry&&(c.add(h),k.graphic=h)}this.zoomAttempt=
0;a.shareResult&&a.addToAttrib?(this.wManager&&((f=this._getWidgetConfig("AttributeTable"))?(a=this.wManager.getWidgetByLabel(f.label))?(this.attTableOpenedbySearch=!a.showing,this.wManager.openWidget(a),a._openTable().then(y.hitch(this,this._openResultInAttributeTable,c))):this.wManager.loadWidget(f).then(y.hitch(this,function(a){a&&(this.attTableOpenedbySearch=!0,a.setPosition(this.getOffPanelWidgetPosition(a)),this.wManager.openWidget(a),a._openTable().then(y.hitch(this,this._openResultInAttributeTable,
c)))})):(console.warn("The Attribute Table Widget is not configured for use in this application."),this._zoomAndClose(d))),d&&setTimeout(y.hitch(this,function(){this.pManager.closePanel(this.id+"_panel")}),500)):this._zoomAndClose(d);this.mouseovergraphics&&S(c,"mouse-over",y.hitch(this,this.onMouseOverGraphic));this.currentLayerAdded=c},_zoomAndClose:function(a){var b=this.config.layers[this.currentLayerIndex],b=b.hasOwnProperty("autozoomtoresults")&&!b.autozoomtoresults?!1:!0;this.autozoomtoresults&&
b&&setTimeout(y.hitch(this,function(){this.zoomall()}),300);a&&setTimeout(y.hitch(this,function(){this.pManager.closePanel(this.id+"_panel")}),500)},_getWidgetConfig:function(a){var b=null;J.some(this.wManager.appConfig.widgetPool.widgets,function(c){return c.name==a?(b=c,!0):!1});b||J.some(this.wManager.appConfig.widgetOnScreen.widgets,function(c){return c.name==a?(b=c,!0):!1});return b},getOffPanelWidgetPosition:function(a){var b={relativeTo:a.position.relativeTo},c=z.getMarginBox(this.domNode);
a=this.widgetManager.getWidgetMarginBox(a);var d=z.getMarginBox("map"===b.relativeTo?this.map.id:jimuConfig.layoutId),e=c.t+c.h+1;e+a.h>d.h?b.bottom=d.h-c.t+1:b.top=e;window.isRTL?b.right=0>c.l+c.w-a.w?0:c.l+c.w-a.w:c.l+a.w>d.w?b.right=0:b.left=c.l;return b},_searchResultListByOID:function(a){for(var b=this.config.layers[this.currentLayerIndex],c=b.hasOwnProperty("disablePopups")&&b.disablePopups?!0:!1,d=0;d<this.list.items.length;d++){var e=this.list.items[d],f=e.centerpoint;if(e.OID===a){var g=
dojo.byId(this.list.id.toLowerCase()+e.id);g&&g.scrollIntoView(!1);this.list.setSelectedItem(this.list.id.toLowerCase()+e.id);this.map.infoWindow&&this.config.enablePopupsOnResultClick&&!c&&(this.map.infoWindow.setFeatures([e.graphic]),this.map.infoWindow.reposition&&this.map.infoWindow.reposition(),b.showattachments&&this._addAttachment(e.OID),this.map.infoWindow.show(f))}}},onMouseOverGraphic:function(a){this._searchResultListByOID(a.target.e_graphic.attributes[this.config.layers[this.currentLayerIndex].objectIdField])},
_configurePopupTemplate:function(a){for(var b={title:a.title,description:a.content,showAttachments:!0},c=[],d,e=0;e<a.links.length;e++)if(a.links[e].link)if(d=String(a.links[e].link).substr(a.links[e].link.length-4,4).toLowerCase(),".jpg"!==d&&".png"!==d&&".gif"!==d||"text"===a.links[e].popuptype)""!==a.links[e].icon&&"text"!==a.links[e].popuptype?a.links[e].disableinpopup||(d={type:"image",value:{}},d.value.sourceURL=a.links[e].icon,d.value.linkURL=a.links[e].link,d.caption=a.links[e].alias,c.push(d)):
a.links[e].disableinpopup||(b.description+="\x3cbr\x3e\x3ca href\x3d'"+a.links[e].link+"'\x3e"+(""!==a.links[e].alias?a.links[e].alias:a.links[e].link)+"\x3c/a\x3e");else if(!a.links[e].disableinpopup){d={type:"image"};var f={};f.sourceURL=a.links[e].link;f.linkURL=a.links[e].link;d.value=f;d.caption=a.links[e].alias;c.push(d)}0<c.length&&(b.mediaInfos=c);return new O(b)},_selectResultItem:function(a,b){new r(this.resultLayers[this.currentLayerIndex]._origLayerURL);var c=b.centerpoint,d=this.config.layers[this.currentLayerIndex],
e=d.hasOwnProperty("disablePopups")&&d.disablePopups?!0:!1;a=d.zoomScale||1E4;if("point"===b.graphic.geometry.type)(this.map.getScale()>a||d.forceZoomScale)&&!e?this.map.setScale(a).then(y.hitch(this,this.map.centerAt(c).then(y.hitch(this,function(){this.map.infoWindow&&this.config.enablePopupsOnResultClick&&(this.map.infoWindow.setFeatures([b.graphic]),this.map.infoWindow.reposition&&this.map.infoWindow.reposition(),d.showattachments&&this._addAttachment(b.OID),this.map.infoWindow.show(c))})))):
this.map.centerAt(c).then(y.hitch(this,function(){this.map.infoWindow&&this.config.enablePopupsOnResultClick&&!e&&(this.map.infoWindow.setFeatures([b.graphic]),this.map.infoWindow.reposition&&this.map.infoWindow.reposition(),d.showattachments&&this._addAttachment(b.OID),this.map.infoWindow.show(c))}));else{var f=E.graphicsExtent([b.graphic]);f&&!d.forceZoomScale?this.map.setExtent(f.expand(1),!0).then(y.hitch(this,function(){this.map.infoWindow&&this.config.enablePopupsOnResultClick&&!e&&(this.map.infoWindow.setFeatures([b.graphic]),
this.map.infoWindow.reposition&&this.map.infoWindow.reposition(),d.showattachments&&this._addAttachment(b.OID),this.map.infoWindow.show(c))})):this.map.getScale()>a||d.forceZoomScale?this.map.setScale(a).then(y.hitch(this,this.map.centerAt(c).then(y.hitch(this,function(){this.map.infoWindow&&this.config.enablePopupsOnResultClick&&!e&&(this.map.infoWindow.setFeatures([b.graphic]),this.map.infoWindow.reposition&&this.map.infoWindow.reposition(),d.showattachments&&this._addAttachment(b.OID),this.map.infoWindow.show(c))})))):
this.map.centerAt(c).then(y.hitch(this,function(){this.map.infoWindow&&this.config.enablePopupsOnResultClick&&!e&&(this.map.infoWindow.setFeatures([b.graphic]),this.map.infoWindow.reposition&&this.map.infoWindow.reposition(),d.showattachments&&this._addAttachment(b.OID),this.map.infoWindow.show(c))}))}},_addAttachment:function(a){var b=new r(this.resultLayers[this.currentLayerIndex]._origLayerURL);b.queryAttachmentInfos(a,y.hitch(this,function(a){if(0<a.length){var b=ba(".attachmentsSection",this.map.infoWindow.domNode)[0],
c=dijit.getEnclosingWidget(b);J.map(a,y.hitch(this,function(a){a=Fa.toDom('\x3cli\x3e\x3ca href\x3d"'+a.url+'" target\x3d"_blank"\x3e'+a.name+"\x3c/a\x3e\x3c/li\x3e");Fa.place(a,c._attachmentsList)}));Ja.remove(b,"hidden");c=null}}));b=null},_hideInfoWindow:function(){this.map&&this.map.infoWindow&&this.map.infoWindow.hide()}})});