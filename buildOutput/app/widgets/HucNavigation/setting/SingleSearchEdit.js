//>>built
require({cache:{"url:widgets/HucNavigation/setting/SingleSearchEdit.html":'\x3cdiv style\x3d"width:100%;padding-bottom:10px;"\x3e\r\n  \x3cdiv class\x3d"error-message-div" data-dojo-attach-point\x3d"errorMessage"\x3e\x3c/div\x3e\r\n  \x3cdiv data-dojo-attach-point\x3d"singlesearchSection"\x3e\r\n    \x3ctable class\x3d"input-table" style\x3d"width:100%;" cellspacing\x3d"0"\x3e\r\n      \x3ctbody\x3e\r\n        \x3ctr\x3e\r\n          \x3ctd style\x3d"width:115px;text-align:left;"\x3e${nls.searchUrl}\x3c/td\x3e\r\n          \x3ctd style\x3d"width:auto;"\x3e\r\n            \x3cinput type\x3d"text" data-dojo-type\x3d"jimu/dijit/ServiceURLInput" data-dojo-attach-point\x3d"layerUrl" data-dojo-props\x3d"style:{width:\'100%\'}" required\x3d"true" /\x3e\r\n          \x3c/td\x3e\r\n        \x3c/tr\x3e\r\n        \x3ctr\x3e\r\n          \x3ctd colspan\x3d"3"\x3e\r\n            \x3ctable style\x3d"width:100%;" cellspacing\x3d"0"\x3e\r\n              \x3ctr\x3e\r\n                \x3ctd style\x3d"width:40%;"\x3e\r\n                  \x3ctable style\x3d"width:100%;" cellspacing\x3d"0"\x3e\r\n                    \x3ctbody\x3e\r\n                      \x3ctr\x3e\r\n                        \x3ctd style\x3d"width:115px;text-align:left;"\x3e\r\n                          \x3cspan\x3e${nls.title}\x3c/span\x3e\r\n                        \x3c/td\x3e\r\n                        \x3ctd style\x3d"width:auto;"\x3e\r\n                          \x3cinput type\x3d"text" data-dojo-type\x3d"dijit/form/TextBox" data-dojo-attach-point\x3d"layerName" style\x3d"width:100%;" /\x3e\r\n                        \x3c/td\x3e\r\n                      \x3c/tr\x3e\r\n                    \x3c/tbody\x3e\r\n                  \x3c/table\x3e\r\n                \x3c/td\x3e\r\n                \x3ctd style\x3d"width:60%;"\x3e\r\n                  \x3ctable style\x3d"width:100%;" cellspacing\x3d"0"\x3e\r\n                    \x3ctbody\x3e\r\n                      \x3ctr\x3e\r\n                        \x3ctd style\x3d"width:190px;text-align:left;"\x3e\r\n                          \x3cspan style\x3d"margin-left:20px;"\x3e${nls.definitionexpr}\x3c/span\x3e\r\n                        \x3c/td\x3e\r\n                        \x3ctd style\x3d"width:auto;"\x3e\r\n                          \x3cinput type\x3d"text" data-dojo-type\x3d"dijit/form/TextBox" data-dojo-attach-point\x3d"definitionExpression" style\x3d"width:100%;" placeholder\x3d"${nls.defExprPlaceholder}" /\x3e\r\n                        \x3c/td\x3e\r\n                      \x3c/tr\x3e\r\n                    \x3c/tbody\x3e\r\n                  \x3c/table\x3e\r\n                \x3c/td\x3e\r\n              \x3c/tr\x3e\r\n            \x3c/table\x3e\r\n          \x3c/td\x3e\r\n        \x3c/tr\x3e\r\n        \x3ctr\x3e\r\n          \x3ctd colspan\x3d"3"\x3e\r\n            \x3ctable style\x3d"width:100%;" cellspacing\x3d"0"\x3e\r\n              \x3ctr\x3e\r\n                \x3ctd style\x3d"width:100%;"\x3e\r\n                  \x3ctable style\x3d"width:100%;" cellspacing\x3d"0"\x3e\r\n                    \x3ctbody\x3e\r\n                      \x3ctr\x3e\r\n                        \x3ctd style\x3d"width:155px;"\x3e\r\n                          \x3cspan\x3e${nls.usePopupFrom}\x3c/span\x3e\r\n                        \x3c/td\x3e\r\n                        \x3ctd style\x3d"width:200px;text-align:left;"\x3e\r\n                          \x3cdiv data-dojo-type\x3d"dijit/form/Form" data-dojo-attach-point\x3d"popupFormDijit"\x3e\r\n                            \x3cinput data-dojo-attach-point\x3d"popupWebmapRadio" type\x3d"radio" /\x3e\r\n                            \x3clabel data-dojo-attach-point\x3d"popupWebmapLabel" title\x3d"${nls.popupWebmapTip}"\x3e${nls.popupWebmap}\x3c/label\x3e\x26nbsp;\x26nbsp;\r\n                            \x3cinput data-dojo-attach-point\x3d"popupeSearchRadio" checked\x3d"true" type\x3d"radio" /\x3e\r\n                            \x3clabel data-dojo-attach-point\x3d"popupeSearchLabel"\x3e${nls.popupeSearch}\x3c/label\x3e\r\n                          \x3c/div\x3e\r\n                        \x3c/td\x3e\r\n                        \x3ctd\x3e\x3cspan\x3e${nls.usePopupFrom2}\x3c/span\x3e\x3c/td\x3e\r\n                        \x3ctd style\x3d"width:auto;"\x3e\r\n                          \x3ctable style\x3d"width:100%;margin-top:9px;" cellspacing\x3d"0"\x3e\r\n                            \x3ctbody\x3e\r\n                              \x3ctr\x3e\r\n                                \x3ctd style\x3d"width:auto;"\x3e\r\n                                  \x3cdiv data-dojo-type\x3d"jimu/dijit/CheckBox" data-dojo-attach-point\x3d"allowCSVExport" data-dojo-props\x3d"label:\'${nls.allowcsvexport}\'" /\x3e\r\n                                \x3c/td\x3e\r\n                              \x3c/tr\x3e\r\n                            \x3c/tbody\x3e\r\n                          \x3c/table\x3e\r\n                        \x3c/td\x3e\r\n                        \x3ctd style\x3d"width:auto;"\x3e\r\n                          \x3ctable style\x3d"width:100%;margin-top:9px;" cellspacing\x3d"0"\x3e\r\n                            \x3ctbody\x3e\r\n                              \x3ctr\x3e\r\n                                \x3ctd style\x3d"width:auto;"\x3e\r\n                                  \x3cdiv data-dojo-type\x3d"jimu/dijit/CheckBox" data-dojo-attach-point\x3d"allowFCExport" data-dojo-props\x3d"label:\'${nls.allowfcexport}\'" /\x3e\r\n                                \x3c/td\x3e\r\n                              \x3c/tr\x3e\r\n                            \x3c/tbody\x3e\r\n                          \x3c/table\x3e\r\n                        \x3c/td\x3e\r\n                      \x3c/tr\x3e\r\n                    \x3c/tbody\x3e\r\n                  \x3c/table\x3e\r\n                \x3c/td\x3e\r\n              \x3c/tr\x3e\r\n            \x3c/table\x3e\r\n          \x3c/td\x3e\r\n        \x3c/tr\x3e\r\n        \x3ctr\x3e\r\n          \x3ctd colspan\x3d"3"\x3e\r\n            \x3ctable style\x3d"width:100%;" cellspacing\x3d"0"\x3e\r\n              \x3ctr\x3e\r\n                \x3ctd style\x3d"width:20%;"\x3e\r\n                  \x3ctable style\x3d"width:100%;margin-top:9px;" cellspacing\x3d"0"\x3e\r\n                    \x3ctbody\x3e\r\n                      \x3ctr\x3e\r\n                        \x3ctd style\x3d"width:auto;"\x3e\r\n                          \x3cdiv data-dojo-type\x3d"jimu/dijit/CheckBox" data-dojo-attach-point\x3d"allowGeoExport" data-dojo-props\x3d"label:\'${nls.allowgeoexport}\'" /\x3e\r\n                        \x3c/td\x3e\r\n                      \x3c/tr\x3e\r\n                    \x3c/tbody\x3e\r\n                  \x3c/table\x3e\r\n                \x3c/td\x3e\r\n                \x3ctd style\x3d"width:20%;"\x3e\r\n                  \x3ctable style\x3d"width:100%;margin-top:9px;" cellspacing\x3d"0"\x3e\r\n                    \x3ctbody\x3e\r\n                      \x3ctr\x3e\r\n                        \x3ctd style\x3d"width:auto;"\x3e\r\n                          \x3cdiv data-dojo-type\x3d"jimu/dijit/CheckBox" data-dojo-attach-point\x3d"isSpatialLayer" data-dojo-props\x3d"label:\'${nls.spatialSearchLayer}\'" /\x3e\r\n                        \x3c/td\x3e\r\n                      \x3c/tr\x3e\r\n                    \x3c/tbody\x3e\r\n                  \x3c/table\x3e\r\n                \x3c/td\x3e\r\n                \x3ctd style\x3d"width:60%;"\x3e\r\n                  \x3ctable style\x3d"width:100%;" cellspacing\x3d"0"\x3e\r\n                    \x3ctbody\x3e\r\n                      \x3ctr\x3e\r\n                        \x3ctd style\x3d"width:190px;text-align:left;"\x3e\r\n                          \x3cspan style\x3d"margin-left:20px;"\x3e${nls.layerSymbology}\x3c/span\x3e\r\n                        \x3c/td\x3e\r\n                        \x3ctd style\x3d"width:auto;"\x3e\r\n                          \x3cdiv data-dojo-type\x3d"dijit/form/Form" data-dojo-attach-point\x3d"symFormDijit"\x3e\r\n                            \x3cinput data-dojo-attach-point\x3d"serverSymRadio" checked\x3d"true" type\x3d"radio" /\x3e\r\n                            \x3clabel data-dojo-attach-point\x3d"serverSymRadioLabel"\x3e${nls.symbolServer}\x3c/label\x3e\x26nbsp;\x26nbsp;\r\n                            \x3cinput data-dojo-attach-point\x3d"defaultSymRadio" type\x3d"radio" /\x3e\r\n                            \x3clabel data-dojo-attach-point\x3d"defaultSymRadioLabel"\x3e${nls.symbolConfig}\x3c/label\x3e\r\n                            \x3cinput data-dojo-attach-point\x3d"layerSymRadio" type\x3d"radio" style\x3d"margin-left: 6px;" /\x3e\r\n                            \x3clabel data-dojo-attach-point\x3d"layerSymRadioLabel"\x3e${nls.symbolLayer}\x3c/label\x3e\r\n                          \x3c/div\x3e\r\n                          \x3cdiv class\x3d"btn-add-section" data-dojo-attach-point\x3d"btnAddSymbol"\x3e\r\n                            \x3cspan class\x3d"btn-add-icon"\x3e\x3c/span\x3e\r\n                            \x3cspan class\x3d"btn-add-label"\x3e${nls.addSymbol}\x3c/span\x3e\r\n                          \x3c/div\x3e\r\n                        \x3c/td\x3e\r\n                      \x3c/tr\x3e\r\n                    \x3c/tbody\x3e\r\n                  \x3c/table\x3e\r\n                \x3c/td\x3e\r\n              \x3c/tr\x3e\r\n            \x3c/table\x3e\r\n          \x3c/td\x3e\r\n        \x3c/tr\x3e\r\n        \x3ctr\x3e\r\n          \x3ctd colspan\x3d"3"\x3e\r\n            \x3ctable style\x3d"width:100%;" cellspacing\x3d"0"\x3e\r\n              \x3ctr\x3e\r\n                \x3ctd style\x3d"width:40%;"\x3e\r\n                  \x3ctable class\x3d"zoom-scale-table"\x3e\r\n                    \x3ctbody\x3e\r\n                      \x3ctr\x3e\r\n                        \x3ctd style\x3d"vertical-align:text-top;"\x3e${nls.zoomScale}\x3c/td\x3e\r\n                        \x3ctd style\x3d"vertical-align:text-top;"\x3e\r\n                          \x3cdiv\x3e\r\n                            \x3cspan\x3e1:\x3c/span\x3e\r\n                            \x3cinput type\x3d"text" data-dojo-attach-point\x3d"zoomScale" data-dojo-type\x3d"dijit/form/NumberTextBox" data-dojo-props\x3d"style:{width:\'120px\'},required:true,value:10000,constraints:{min:0,places:0}" /\x3e\r\n                          \x3c/div\x3e\r\n                        \x3c/td\x3e\r\n                        \x3ctd\x3e\r\n                          \x3cdiv style\x3d"padding-left:8px;padding-top:8px;"\x3e\r\n                            \x3cdiv data-dojo-type\x3d"jimu/dijit/CheckBox" data-dojo-attach-point\x3d"forceScaleCbx" data-dojo-props\x3d"label:\'${nls.forceScale}\'" title\x3d"${nls.zoomscaletip}" /\x3e\r\n                          \x3c/div\x3e\r\n                        \x3c/td\x3e\r\n                      \x3c/tr\x3e\r\n                    \x3c/tbody\x3e\r\n                  \x3c/table\x3e\r\n                \x3c/td\x3e\r\n                \x3ctd style\x3d"width:60%;"\x3e\r\n                  \x3ctable style\x3d"width:100%;margin-top: 9px;" cellspacing\x3d"0"\x3e\r\n                    \x3ctbody\x3e\r\n                      \x3ctr\x3e\r\n                        \x3ctd style\x3d"vertical-align:text-top;"\x3e\r\n                          \x3cdiv\x3e\r\n                            \x3cdiv data-dojo-type\x3d"jimu/dijit/CheckBox" data-dojo-attach-point\x3d"shareCbx" data-dojo-props\x3d"label:\'${nls.operationalLayerTip}\'" /\x3e\r\n                          \x3c/div\x3e\r\n                        \x3c/td\x3e\r\n                        \x3ctd style\x3d"vertical-align:text-top;"\x3e\r\n                          \x3cdiv\x3e\r\n                            \x3cdiv data-dojo-type\x3d"jimu/dijit/CheckBox" data-dojo-attach-point\x3d"attribTableCbx" data-dojo-props\x3d"label:\'${nls.showinattributetable}\'" /\x3e\r\n                          \x3c/div\x3e\r\n                        \x3c/td\x3e\r\n                      \x3c/tr\x3e\r\n                    \x3c/tbody\x3e\r\n                  \x3c/table\x3e\r\n                \x3c/td\x3e\r\n              \x3c/tr\x3e\r\n            \x3c/table\x3e\r\n          \x3c/td\x3e\r\n        \x3c/tr\x3e\r\n        \x3ctr\x3e\r\n          \x3ctd colspan\x3d"3"\x3e\r\n            \x3ctable style\x3d"width:100%;" cellspacing\x3d"0"\x3e\r\n              \x3ctr\x3e\r\n                \x3ctd style\x3d"width:100%;"\x3e\r\n                  \x3ctable style\x3d"width:100%;" cellspacing\x3d"0"\x3e\r\n                    \x3ctbody\x3e\r\n                      \x3ctr\x3e\r\n                        \x3ctd style\x3d"vertical-align:text-top;"\x3e\r\n                          \x3cdiv\x3e\r\n                            \x3cdiv data-dojo-type\x3d"jimu/dijit/CheckBox" data-dojo-attach-point\x3d"showAttachmentsCbx" data-dojo-props\x3d"label:\'${nls.showattachments}\'" /\x3e\r\n                          \x3c/div\x3e\r\n                        \x3c/td\x3e\r\n                        \x3ctd style\x3d"vertical-align:text-top;"\x3e\r\n                          \x3cdiv\x3e\r\n                            \x3cdiv data-dojo-type\x3d"jimu/dijit/CheckBox" data-dojo-attach-point\x3d"hideNullDataCbx" data-dojo-props\x3d"label:\'${nls.hidenulldata}\'" /\x3e\r\n                          \x3c/div\x3e\r\n                        \x3c/td\x3e\r\n                      \x3c/tr\x3e\r\n                    \x3c/tbody\x3e\r\n                  \x3c/table\x3e\r\n                \x3c/td\x3e\r\n                \x3ctd style\x3d"width:60%;"\x3e\r\n                \x3c/td\x3e\r\n              \x3c/tr\x3e\r\n            \x3c/table\x3e\r\n          \x3c/td\x3e\r\n        \x3c/tr\x3e\r\n        \x3ctr\x3e\r\n          \x3ctd colspan\x3d"3"\x3e\r\n            \x3ctable style\x3d"width:100%;" cellspacing\x3d"0"\x3e\r\n              \x3ctr\x3e\r\n                \x3ctd style\x3d"width:100%;"\x3e\r\n                  \x3ctable style\x3d"width:100%;margin-top: 9px;" cellspacing\x3d"0"\x3e\r\n                    \x3ctbody\x3e\r\n                      \x3ctr\x3e\r\n                        \x3ctd style\x3d"width:300px;"\x3e\r\n                          \x3cspan\x3e${nls.globalOverrides}\x3c/span\x3e\r\n                        \x3c/td\x3e\r\n                        \x3ctd style\x3d"vertical-align:text-top;"\x3e\r\n                          \x3cdiv\x3e\r\n                            \x3cdiv data-dojo-type\x3d"jimu/dijit/CheckBox" data-dojo-attach-point\x3d"autoZoomCbx" data-dojo-props\x3d"label:\'${nls.autoZoom}\'" /\x3e\r\n                          \x3c/div\x3e\r\n                        \x3c/td\x3e\r\n                        \x3ctd style\x3d"vertical-align:text-top;"\x3e\r\n                          \x3cdiv\x3e\r\n                            \x3cdiv data-dojo-type\x3d"jimu/dijit/CheckBox" data-dojo-attach-point\x3d"disPopupCbx" data-dojo-props\x3d"label:\'${nls.disablePopups}\'" /\x3e\r\n                          \x3c/div\x3e\r\n                        \x3c/td\x3e\r\n                      \x3c/tr\x3e\r\n                    \x3c/tbody\x3e\r\n                  \x3c/table\x3e\r\n                \x3c/td\x3e\r\n              \x3c/tr\x3e\r\n            \x3c/table\x3e\r\n          \x3c/td\x3e\r\n        \x3c/tr\x3e\r\n\r\n        \x3ctr\x3e\r\n          \x3ctd colspan\x3d"3"\x3e\r\n            \x3ctable style\x3d"width:100%;" cellspacing\x3d"0"\x3e\r\n              \x3ctbody\x3e\r\n                \x3ctr\x3e\r\n                  \x3ctd style\x3d"width:auto;vertical-align:top;"\x3e\r\n                    \x3cdiv class\x3d"btn-add-section" data-dojo-attach-point\x3d"btnAddExpression"\x3e\r\n                      \x3cspan class\x3d"btn-add-icon"\x3e\x3c/span\x3e\r\n                      \x3cspan class\x3d"btn-add-label"\x3e${nls.addExpression}\x3c/span\x3e\r\n                    \x3c/div\x3e\r\n                    \x3cdiv class\x3d"expressions-table" style\x3d"width:100%;" data-dojo-attach-point\x3d"expressionsTable" data-dojo-type\x3d"jimu/dijit/SimpleTable" data-dojo-props\x3d"_rowHeight:40,autoHeight:true,selectable:true,fields:[{name:\'alias\',title:\'${nls.expressionsTitle}\',type:\'text\',editable:false},{name:\'actions\',title:\'${nls.actions}\',width:\'120px\',type:\'actions\',actions:[\'up\',\'down\',\'edit\',\'delete\']}]"\x3e\x3c/div\x3e\r\n                  \x3c/td\x3e\r\n                \x3c/tr\x3e\r\n              \x3c/tbody\x3e\r\n            \x3c/table\x3e\r\n          \x3c/td\x3e\r\n        \x3c/tr\x3e\r\n      \x3c/tbody\x3e\r\n    \x3c/table\x3e\r\n    \x3ctable style\x3d"width:100%;margin-top:15px;"\x3e\r\n      \x3ctbody\x3e\r\n        \x3ctr\x3e\r\n          \x3ctd style\x3d"width:171px;vertical-align:top;"\x3e\r\n            \x3cdiv style\x3d"margin-bottom:10px;"\x3e${nls.availableFields}\x3c/div\x3e\r\n            \x3cdiv data-dojo-attach-point\x3d"allFieldsTableDiv" style\x3d"width:100%;"\x3e\x3c/div\x3e\r\n          \x3c/td\x3e\r\n          \x3ctd style\x3d"width:75px;vertical-align:middle;padding-left:10px;padding-right:10px;"\x3e\r\n            \x3cdiv data-dojo-attach-point\x3d"includeButtonDiv"\x3e\x3c/div\x3e\r\n            \x3cdiv data-dojo-attach-point\x3d"includeAllButtonDiv"\x3e\x3c/div\x3e\r\n          \x3c/td\x3e\r\n          \x3ctd style\x3d"width:auto;vertical-align:top;"\x3e\r\n            \x3cdiv style\x3d"margin-bottom:10px;"\x3e${nls.includedFields}\x3c/div\x3e\r\n            \x3cdiv style\x3d"width:100%;" class\x3d"searchLayerFieldsTableDiv" data-dojo-attach-point\x3d"displayFieldsTableDiv"\x3e\x3c/div\x3e\r\n          \x3c/td\x3e\r\n        \x3c/tr\x3e\r\n      \x3c/tbody\x3e\r\n    \x3c/table\x3e\r\n    \x3ctable class\x3d"sorting-table"\x3e\r\n      \x3ccolgroup\x3e\r\n        \x3ccol width\x3d"170px" /\x3e\r\n        \x3ccol width\x3d"auto" /\x3e\r\n        \x3ccol width\x3d"24px" /\x3e\r\n      \x3c/colgroup\x3e\r\n      \x3ctbody\x3e\r\n        \x3ctr\x3e\r\n          \x3ctd\x3e\r\n            \x3cspan\x3e${nls.resultItemSorting}:\x3c/span\x3e\r\n          \x3c/td\x3e\r\n          \x3ctd data-dojo-attach-point\x3d"tdSortFields"\x3e\r\n            \x3cdiv data-dojo-attach-point\x3d"sortFieldsDiv" class\x3d"sort-fields-div jimu-ellipsis"\x3e\x3c/div\x3e\r\n          \x3c/td\x3e\r\n          \x3ctd\x3e\r\n            \x3cdiv data-dojo-attach-point\x3d"btnSortFields" class\x3d"btn-sort-fields jimu-float-trailing" data-dojo-attach-event\x3d"onclick:_onBtnSortFieldsClicked" title\x3d"${nls.sortDisabledMsg}"\x3e\x3c/div\x3e\r\n          \x3c/td\x3e\r\n        \x3c/tr\x3e\r\n      \x3c/tbody\x3e\r\n    \x3c/table\x3e\r\n    \x3ctable style\x3d"width:100%;margin-top:8px;"\x3e\r\n      \x3ctbody\x3e\r\n        \x3ctr\x3e\r\n          \x3ctd colspan\x3d"3"\x3e\r\n            \x3ctable style\x3d"width:100%;" cellspacing\x3d"0"\x3e\r\n              \x3ctbody\x3e\r\n                \x3ctr\x3e\r\n                  \x3ctd style\x3d"width:auto;vertical-align:top;"\x3e\r\n                    \x3cdiv class\x3d"btn-add-section" data-dojo-attach-point\x3d"btnAddLink"\x3e\r\n                      \x3cspan class\x3d"btn-add-icon"\x3e\x3c/span\x3e\r\n                      \x3cspan class\x3d"btn-add-label"\x3e${nls.addLink}\x3c/span\x3e\r\n                    \x3c/div\x3e\r\n                    \x3cdiv class\x3d"link-table" style\x3d"width:100%;" data-dojo-attach-point\x3d"linksTable" data-dojo-type\x3d"jimu/dijit/SimpleTable" data-dojo-props\x3d"_rowHeight:40,autoHeight:true,selectable:true,fields:[\r\n                                          {name:\'alias\',title:\'${nls.linksTitle}\',type:\'text\',editable:false},\r\n                                          {name:\'actions\',title:\'${nls.actions}\',width:\'120px\',type:\'actions\',actions:[\'up\',\'down\',\'edit\',\'delete\']}\r\n                                          ]"\x3e\x3c/div\x3e\r\n                  \x3c/td\x3e\r\n                \x3c/tr\x3e\r\n              \x3c/tbody\x3e\r\n            \x3c/table\x3e\r\n          \x3c/td\x3e\r\n        \x3c/tr\x3e\r\n      \x3c/tbody\x3e\r\n    \x3c/table\x3e\r\n    \x3ctable style\x3d"width:100%;margin-top:8px;"\x3e\r\n      \x3ctbody\x3e\r\n        \x3ctr\x3e\r\n          \x3ctd colspan\x3d"3"\x3e\r\n            \x3ctable style\x3d"width:100%;" cellspacing\x3d"0"\x3e\r\n              \x3ctbody\x3e\r\n                \x3ctr\x3e\r\n                  \x3ctd style\x3d"width:auto;vertical-align:top;"\x3e\r\n                    \x3cdiv class\x3d"btn-add-section" data-dojo-attach-point\x3d"btnAddRelate"\x3e\r\n                      \x3cspan class\x3d"btn-add-icon"\x3e\x3c/span\x3e\r\n                      \x3cspan class\x3d"btn-add-label"\x3e${nls.addRelate}\x3c/span\x3e\r\n                    \x3c/div\x3e\r\n                    \x3cdiv class\x3d"relate-table" style\x3d"width:100%;" data-dojo-attach-point\x3d"relatesTable" data-dojo-type\x3d"jimu/dijit/SimpleTable" data-dojo-props\x3d"_rowHeight:40,autoHeight:true,selectable:true,fields:[\r\n                                          {name:\'alias\',title:\'${nls.relatesTitle}\',type:\'text\',editable:false},\r\n                                          {name:\'actions\',title:\'${nls.actions}\',width:\'120px\',type:\'actions\',actions:[\'up\',\'down\',\'edit\',\'delete\']}\r\n                                          ]"\x3e\x3c/div\x3e\r\n                  \x3c/td\x3e\r\n                \x3c/tr\x3e\r\n              \x3c/tbody\x3e\r\n            \x3c/table\x3e\r\n          \x3c/td\x3e\r\n        \x3c/tr\x3e\r\n      \x3c/tbody\x3e\r\n    \x3c/table\x3e\r\n  \x3c/div\x3e\r\n  \x3cdiv class\x3d"single-expressions-section" style\x3d"display:none;" data-dojo-attach-point\x3d"singleExpressionsSection"\x3e\r\n  \x3c/div\x3e\r\n  \x3cdiv class\x3d"single-links-section" style\x3d"display:none;" data-dojo-attach-point\x3d"singleLinksSection"\x3e\r\n  \x3c/div\x3e\r\n  \x3cdiv class\x3d"single-relates-section" style\x3d"display:none;" data-dojo-attach-point\x3d"singleRelatesSection"\x3e\r\n  \x3c/div\x3e\r\n\x3c/div\x3e\r\n'}});
define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/html dojo/_base/query dojo/dom-attr dojo/on dojo/json dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dijit/Tooltip dojo/text!./SingleSearchEdit.html dijit/form/TextBox dijit/form/RadioButton dijit/form/Form ./LayerFieldChooser ./IncludeAllButton ./IncludeButton jimu/dijit/SimpleTable ./SimpleTable jimu/dijit/ServiceURLInput esri/request jimu/dijit/Popup ./SingleExpressionEdit ./FieldFormatEdit ./SingleLinkEdit ./SingleRelateEdit ./LayerSearchSymEdit dojo/keys jimu/dijit/Message jimu/utils ./SortFields dojo/Deferred dojo/promise/all jimu/dijit/CheckBox".split(" "),
function(u,c,g,f,L,p,e,M,v,w,x,q,y,N,O,P,z,A,B,Q,C,R,r,m,D,E,F,G,H,h,t,l,I,J,K){return u([v,w,x],{baseClass:"widget-esearch-singlesearch-setting",templateString:y,nls:null,config:null,mainConfig:null,searchSetting:null,_url:"",_layerDef:null,_links:null,_spatialsearchlayer:null,layerUniqueCache:null,layerInfoCache:null,disableuvcache:!1,popup2:null,popup3:null,popup4:null,popup5:null,popup6:null,fieldformatedit:null,singleExpressionedit:null,singleLinkedit:null,singleRelateedit:null,tr:null,featureLayerDetails:null,
_currentOrderByFields:null,_validSortFieldTypes:"esriFieldTypeOID esriFieldTypeString esriFieldTypeDate esriFieldTypeSmallInteger esriFieldTypeInteger esriFieldTypeSingle esriFieldTypeDouble".split(" "),postCreate:function(){this.inherited(arguments);this.allFieldsTable=new z({},this.allFieldsTableDiv);this.includeButton=new B({nls:this.nls},this.includeButtonDiv);this.includeAllButton=new A({nls:this.nls},this.includeAllButtonDiv);this.displayFieldsTable=new C({_rowHeight:40,autoHeight:!0,selectable:!0,
fields:[{name:"name",title:this.nls.name,type:"text",editable:!1,unique:!0,width:"25%"},{name:"alias",title:this.nls.alias,type:"text",editable:!0,width:"30%"},{name:"title",title:this.nls.title,type:"radio",width:"60px"},{name:"popuponly",title:this.nls.popuponly,type:"checkbox",width:"100px"},{name:"actions",width:"85px",title:this.nls.actions,type:"actions",actions:["up","down","edit","delete"]},{name:"isdate",type:"text",hidden:!0},{name:"isnumber",type:"text",hidden:!0},{name:"useutc",type:"text",
hidden:!0},{name:"dateformat",type:"text",hidden:!0},{name:"numberformat",type:"text",hidden:!0},{name:"currencyformat",type:"text",hidden:!0},{name:"sumlabel",type:"text",hidden:!0},{name:"sumfield",type:"text",hidden:!0},{name:"excludestat",type:"text",hidden:!0}]},this.displayFieldsTableDiv);this.displayFieldsTable.startup();f.addClass(this.displayFieldsTable.domNode,"searchLayerFieldsTable");this._initRadios();this._setConfig(this.config);this._bindEvents();this._initTables()},startup:function(){this.inherited(arguments);
this.popup.disableButton(0)},_setConfig:function(a){this.config=a;this.resetAll();this.config.url&&(this.showAttachmentsCbx.setValue(this.config.showattachments||!1),this.shareCbx.setValue(this.config.shareResult||!1),this.attribTableCbx.setValue(this.config.addToAttrib||!1),this.hideNullDataCbx.setValue(this.config.hidenullvalue||!1),this.mainConfig.hasOwnProperty("autozoomtoresults")&&!this.config.hasOwnProperty("autozoomtoresults")?this.autoZoomCbx.setValue(this.mainConfig.autozoomtoresults||!1):
(a=this.config.hasOwnProperty("autozoomtoresults")&&!this.config.autozoomtoresults?!1:!0,this.autoZoomCbx.setValue(a)),this.mainConfig.hasOwnProperty("disablePopups")&&!this.config.hasOwnProperty("disablePopups")?this.disPopupCbx.setValue(this.mainConfig.disablePopups||!1):(a=this.config.hasOwnProperty("disablePopups")&&!this.config.disablePopups?!1:!0,this.disPopupCbx.setValue(a)),this._url=c.trim(this.config.url||""),this._links=this.config.links,this.config.zoomScale&&this.zoomScale.set("value",
parseInt(this.config.zoomScale,10)),this.forceScaleCbx.setValue(this.config.forceZoomScale||!1),this.config.layersymbolfrom&&"config"===this.config.layersymbolfrom?this.defaultSymRadio.checked=!0:this.config.layersymbolfrom&&"layer"===this.config.layersymbolfrom?this.layerSymRadio.checked=!0:this.serverSymRadio.checked=!0,this.config.popupfrom&&"webmap"===this.config.popupfrom?this.popupWebmapRadio.checked=!0:this.popupeSearchRadio.checked=!0,this.isSpatialLayer.setValue(this.config.spatialsearchlayer||
!1),this.allowCSVExport.setValue(this.config.export2Csv||!1),this.allowGeoExport.setValue(this.config.export2Geo||!1),this.allowFCExport.setValue(this.config.export2FC||!1),this.layerUrl.set("value",this._url),this.config.name?(this.layerName.set("value",c.trim(this.config.name)),this.layerName.proceedValue=!0):this.layerName.proceedValue=!1,this.definitionExpression.set("value",c.trim(this.config.definitionexpression||"")),this._layerDef=c.trim(this.config.definitionexpression||""),this._addDisplayFields(this.config.fields.field,
this.config.titlefield),this.allFieldsTable.refresh(this._url),this._url&&(this.includeAllButton.enable(),this.layerUrl.proceedValue=!0),this._initExpressionsTable(),this.config.links&&this._initLinksTable(),this.config.relates&&this._initRelatesTable(),this._setOrderByFields(this.config.orderByFields),this._getLayerInfoWithRelationships(this._url).then(c.hitch(this,function(a){this.layerInfoCache[this._url]=a.value})))},_getServiceUrlByLayerUrl:function(a){var b=a.lastIndexOf("/");return a.slice(0,
b)},_getLayerInfoWithRelationships:function(a){var b=new J;r({url:a,content:{f:"json"},handleAs:"json",callbackParamName:"callback"}).then(c.hitch(this,function(k){k.relationships||(k.relationships=[]);k._origLayerURL=a;var d=this._getServiceUrlByLayerUrl(a);k._origServiceURL=d;var n=g.map(k.relationships,c.hitch(this,function(a){return r({url:d+"/"+a.relatedTableId,content:{f:"json"},handleAs:"json",callbackParamName:"callback"})}));K(n).then(c.hitch(this,function(a){g.forEach(a,c.hitch(this,function(a,
b){b=k.relationships[b];b.name=a.name;b.fields=g.filter(a.fields,c.hitch(this,function(a){return"esriFieldTypeGeometry"!==a.type}))}));b.resolve({state:"success",value:k})}),c.hitch(this,function(a){b.resolve({state:"failure",value:a})}));b.resolve({state:"success",value:k})}),c.hitch(this,function(a){b.resolve({state:"failure",value:a})}));return b},getConfig:function(){if(!this.validate(!1))return!1;var a=this._getAllSingleExpressions(),b=this._getAllSingleLinks(),k=this._getAllSingleRelates(),
d={name:c.trim(this.layerName.get("value")),url:this._url,definitionexpression:c.trim(this.definitionExpression.get("value")),spatialsearchlayer:this.isSpatialLayer.getValue(),export2Csv:this.allowCSVExport.getValue(),export2Geo:this.allowGeoExport.getValue(),export2FC:this.allowFCExport.getValue(),zoomScale:parseInt(this.zoomScale.get("value"),10),forceZoomScale:this.forceScaleCbx.getValue(),shareResult:this.shareCbx.getValue(),addToAttrib:this.attribTableCbx.getValue(),expressions:{expression:[]},
titlefield:this._getTitleField(),fields:{all:!1,field:[]},links:{link:[]},relates:{relate:[]},orderByFields:[],showattachments:this.showAttachmentsCbx.getValue()};this.hideNullDataCbx.getValue()?d.hidenullvalue=!0:d.hasOwnProperty("hidenullvalue")&&delete d.hidenullvalue;this.mainConfig.hasOwnProperty("autozoomtoresults")?this.mainConfig.autozoomtoresults&&!this.autoZoomCbx.getValue()?d.autozoomtoresults=!1:!this.mainConfig.autozoomtoresults&&this.autoZoomCbx.getValue()?d.autozoomtoresults=!0:delete d.autozoomtoresults:
this.autoZoomCbx.getValue()?d.autozoomtoresults=!0:d.autozoomtoresults=!1;this.mainConfig.hasOwnProperty("disablePopups")?this.mainConfig.disablePopups&&!this.disPopupCbx.getValue()?d.disablePopups=!1:!this.mainConfig.disablePopups&&this.disPopupCbx.getValue()?d.disablePopups=!0:delete d.disablePopups:this.disPopupCbx.getValue()?d.disablePopups=!0:d.disablePopups=!1;this.config.sumfield&&(d.sumfield=this.config.sumfield,d.sumlabel=this.config.sumlabel);this.serverSymRadio.checked?(d.layersymbolfrom=
"server",d.symbology&&delete d.symbology):this.layerSymRadio.checked?(d.layersymbolfrom="layer",d.symbology=this.config.symbology):(d.layersymbolfrom="config",d.symbology&&delete d.symbology);this.popupWebmapRadio.checked?d.popupfrom="webmap":d.popupfrom&&delete d.popupfrom;var n=this.displayFieldsTable.getData(),e,n=g.map(n,c.hitch(this,function(a){e={name:a.name,alias:a.alias};a.sumfield&&(e.sumfield=a.sumfield,e.sumlabel=a.sumlabel);a.dateformat&&(e.dateformat=a.dateformat);a.useutc&&(e.useutc=
!0);a.numberformat&&(e.numberformat=a.numberformat);a.currencyformat&&(e.currencyformat=a.currencyformat);a.isnumber&&(e.isnumber=!0);a.isdate&&(e.isdate=!0);a.popuponly&&(e.popuponly=!0);a.excludestat?e.excludestat=!0:delete e.excludestat;return e}));d.fields.field=n;d.expressions.expression=a;d.links.link=b;d.relates.relate=k;this._addLinkFields(d.fields.field,d.links.link);this._shouldEnableSorting(this.featureLayerDetails)&&(d.orderByFields=this._getOrderByFields());return this.config=d},_initRadios:function(){var a=
"radio_"+l.getRandomString();this.serverSymRadio.name=a;this.defaultSymRadio.name=a;this.layerSymRadio.name=a;l.combineRadioCheckBoxWithLabel(this.serverSymRadio,this.serverSymRadioLabel);l.combineRadioCheckBoxWithLabel(this.defaultSymRadio,this.defaultSymRadioLabel);l.combineRadioCheckBoxWithLabel(this.layerSymRadio,this.layerSymRadioLabel);a="radio_"+l.getRandomString();this.popupWebmapRadio.name=a;this.popupeSearchRadio.name=a;l.combineRadioCheckBoxWithLabel(this.popupWebmapRadio,this.popupWebmapLabel);
l.combineRadioCheckBoxWithLabel(this.popupeSearchRadio,this.popupeSearchLabel)},_addLinkFields:function(a,b){for(var c=[],d=0;d<b.length;d++)for(var e=this._getFieldsfromLink(b[d].content),f=0;f<e.length;f++)c.push(e[f]);d=!1;for(e=0;e<c.length;e++){var d=!1,g;for(g in a)if(b=a[g],b.name.toLowerCase()===c[e].toLowerCase()){d=!0;break}d||a.push({name:c[e],visible:!1})}},_getFieldsfromLink:function(a){var b=[],c=0,d=0,c="";do{c=a.indexOf("{",d);if(-1===c)break;d=a.indexOf("}",c);c=a.substring(c+1,d);
b.push(c)}while(d<a.length-1);return b},_initExpressionsTable:function(){this.expressionsTable.clear();g.forEach(this.config&&this.config.expressions.expression,c.hitch(this,function(a){this._createSingleExpression({config:a})}))},_initRelatesTable:function(){this.relatesTable.clear();g.forEach(this.config&&this.config.relates.relate,c.hitch(this,function(a){this._createSingleRelate({config:a})}))},_createSingleRelate:function(a){var b=this.relatesTable.addRow({alias:a.config&&a.config.label||""});
if(!b.success)return null;b.tr.singleRelate=a.config;return b.tr},_initLinksTable:function(){this.linksTable.clear();g.forEach(this.config&&this.config.links.link,c.hitch(this,function(a){this._createSingleLink({config:a})}))},_createSingleLink:function(a){var b=this.linksTable.addRow({alias:a.config&&a.config.alias||""});if(!b.success)return null;b.tr.singleLink=a.config;return b.tr},_createSingleExpression:function(a){var b=this.expressionsTable.addRow({alias:a.config&&a.config.alias||""});if(!b.success)return null;
b.tr.singleExpression=a.config;return b.tr},_onServiceUrlChange:function(){this.popup.disableButton(0)},_onServiceFetch:function(a,b){var e=!1,e=b.url.replace(/\/*$/g,"");this._checkForFeatureLayer(e)?(e=a.proceedValue=!0,this.featureLayerDetails=b,""===this.layerName.get("value")&&this.layerName.set("value",c.trim(this.featureLayerDetails.data.name)),this.layerName.proceedValue=!0,this._refreshLayerFields()):(e=a.proceedValue=!1,this.featureLayerDetails=null);return e},_onServiceFetchError:function(){},
_checkForFeatureLayer:function(a){var b=/\/featureserver\//gi.test(a),c=/\/mapserver\//gi.test(a);if(b||c)return/\/\d+$/.test(a)},_need2ChkOpLyr:function(){!this.attribTableCbx.getValue()&&!this.showAttachmentsCbx.getValue()||this.shareCbx.getValue()||(this.shareCbx.setValue(!0),new t({titleLabel:this.nls.operationalLayerTip,message:this.nls.showinattributetable+" "+this.nls.andor+" "+this.nls.showattachments+" requires "+this.nls.operationalLayerTip+" "+this.nls.tobeenabled+"."}))},_bindEvents:function(){this.attribTableCbx.onChange=
c.hitch(this,this._need2ChkOpLyr);this.shareCbx.onChange=c.hitch(this,this._need2ChkOpLyr);this.own(e(this.layerName,"change",c.hitch(this,this._checkProceed)));this.own(e(this.displayFieldsTable,"row-add",c.hitch(this,this._checkProceed)));this.own(e(this.displayFieldsTable,"row-delete",c.hitch(this,this._checkProceed)));this.own(e(this.layerUrl,"Change",c.hitch(this,"_onServiceUrlChange")));this.layerUrl.proceedValue=!1;this.layerUrl.setProcessFunction(c.hitch(this,"_onServiceFetch",this.layerUrl),
c.hitch(this,"_onServiceFetchError"));this.own(e(this.includeButton,"Click",c.hitch(this,this.onIncludeClick)));this.own(e(this.includeAllButton,"Click",c.hitch(this,this.onIncludeAllClick)));this.own(e(this.btnAddExpression,"click",c.hitch(this,function(){var a=this._createSingleExpression({config:null});a&&(this.popupState="ADD",this._showSingleExpressionsEdit(a))})));this.own(e(this.btnAddSymbol,"click",c.hitch(this,function(){this.layerSymRadio.checked=!0;this.featureLayerDetails&&this._openSymbolEdit(this.nls.addSymbol,
this.config,this.featureLayerDetails.data.geometryType)})));this.own(e(this.btnAddLink,"click",c.hitch(this,function(){var a=this._createSingleLink({config:null});a&&(this.popupState="ADD",this._showSingleLinksEdit(a))})));this.own(e(this.btnAddRelate,"click",c.hitch(this,function(){var a=this._createSingleRelate({config:null});a&&(this.popupState="ADD",this._showSingleRelatesEdit(a))})));this.own(e(this.displayFieldsTable,"actions-edit",c.hitch(this,function(a){a.fieldInfo&&this._openFieldEdit(this.nls.edit+
": "+a.fieldInfo.name,a)})));this.own(e(this.expressionsTable,"actions-edit",c.hitch(this,function(a){this.popupState="EDIT";this._showSingleExpressionsEdit(a)})));this.own(e(this.linksTable,"actions-edit",c.hitch(this,function(a){this.popupState="EDIT";this._showSingleLinksEdit(a)})));this.own(e(this.linksTable,"row-delete",c.hitch(this,function(a){delete a.singleLink})));this.own(e(this.relatesTable,"actions-edit",c.hitch(this,function(a){this.popupState="EDIT";this._showSingleRelatesEdit(a)})));
this.own(e(this.relatesTable,"row-delete",c.hitch(this,function(a){delete a.singleRelate})));this.own(e(this.expressionsTable,"row-delete",c.hitch(this,function(a){delete a.singleSearch})));this.own(e(this.layerUrl,"keydown",c.hitch(this,function(a){13===(void 0!==a.keyCode?a.keyCode:a.which)&&this.layerUrl._onServiceUrlChange(this.layerUrl.get("value"))})))},_onSymbolEditOk:function(){var a=this.layerSearchSymedit.getConfig();0>a.length?new t({message:this.nls.warning}):(this.config.symbology=a,
this.popup5.close())},_onSymbolEditClose:function(){this.popup5=this.layerSearchSymedit=null},_openSymbolEdit:function(a,b,e){this.layerSearchSymedit=new H({nls:this.nls,config:b||{},geomType:e,widget:this});this.popup5=new m({titleLabel:a,autoHeight:!0,content:this.layerSearchSymedit,container:"main-page",buttons:[{label:this.nls.ok,key:h.ENTER,onClick:c.hitch(this,"_onSymbolEditOk")},{label:this.nls.cancel,key:h.ESCAPE}],onClose:c.hitch(this,"_onSymbolEditClose")});f.addClass(this.popup5.domNode,
"widget-setting-popup");this.layerSearchSymedit.startup()},_openFieldEdit:function(a,b){this.fieldformatedit=new E({nls:this.nls,tr:b});this.fieldformatedit.setConfig(b.fieldInfo||{});this.popup4=new m({titleLabel:a,autoHeight:!0,content:this.fieldformatedit,container:"main-page",width:660,buttons:[{label:this.nls.ok,key:h.ENTER,onClick:c.hitch(this,"_onFieldEditOk")},{label:this.nls.cancel,key:h.ESCAPE}],onClose:c.hitch(this,"_onFieldEditClose")});f.addClass(this.popup4.domNode,"widget-setting-popup");
this.fieldformatedit.startup()},_onFieldEditOk:function(){var a={},b=this.fieldformatedit.getConfig();b.sumfield&&(a.sumfield=!0,a.sumlabel=b.sumlabel);a.excludestat=b.excludestat?!0:!1;b.dateformat&&(a.dateformat=b.dateformat);a.useutc=b.useutc?!0:!1;b.dateformat&&(a.dateformat=b.dateformat);b.numberformat&&(a.numberformat=b.numberformat);b.currencyformat&&(a.currencyformat=b.currencyformat);this.displayFieldsTable.editRow(this.fieldformatedit.tr,a);this.popup4.close()},_onFieldEditClose:function(){this.popup4=
this.fieldformatedit=null},_initTables:function(){this.own(e(this.allFieldsTable,"row-select",c.hitch(this,function(){this.includeButton.enable()})));this.own(e(this.allFieldsTable,"rows-clear",c.hitch(this,function(){this.includeButton.disable();this.includeAllButton.disable()})));this.own(e(this.allFieldsTable,"row-dblclick",c.hitch(this,function(){this.includeButton.enable();this.includeButton.onClick()})))},validate:function(a){return""===c.trim(this.layerUrl.get("value"))?(a&&this._showTooltip(this.layerUrl.domNode,
"Please input value."),!1):""===c.trim(this.layerName.get("value"))?(a&&this._showTooltip(this.layerName.domNode,"Please input value."),!1):0===this.displayFieldsTable._getNotEmptyRows().length?(a&&this._showTooltip(this.displayFieldsTable,"Please select display fields."),!1):!0},_showTooltip:function(a,b,c){this._scrollToDom(a);q.show(b,a);setTimeout(function(){q.hide(a)},c||2E3)},_scrollToDom:function(a){var b=this.searchSetting.domNode.parentNode,c=f.position(b).y;a=f.position(a).y;b.scrollTop=
a-c},onIncludeClick:function(){var a=this.allFieldsTable.getSelectedRow();a&&this._createDisplayField(a.fieldInfo)},onIncludeAllClick:function(){for(var a=this.allFieldsTable.getRows(),b=0,b=0;b<a.length;b++)this._createDisplayField(a[b].fieldInfo)},resetAll:function(){this.resetTables();this._url="";this.layerUrl.set("value",this._url);this.layerName.set("value","");this.definitionExpression.set("value","")},resetTables:function(){this.includeButton.disable();this.includeAllButton.disable();this.allFieldsTable.clear();
this.displayFieldsTable.clear()},_refreshLayerFields:function(){var a=c.trim(this.layerUrl.get("value"));a!==this._url&&(this._url=a,this.resetTables(),this.allFieldsTable.refresh(this._url),this.featureLayerDetails.data.fields&&this.includeAllButton.enable());this.updateSortingIcon(this.featureLayerDetails);this.layerUrl.proceedValue=!0;this._checkProceed()},_addDisplayFields:function(a,b){for(var c=0,c=0;c<a.length;c++)this._createDisplayField(a[c],b)},_isNumberType:function(a){return 0<=g.indexOf(["esriFieldTypeOID",
"esriFieldTypeSmallInteger","esriFieldTypeInteger","esriFieldTypeSingle","esriFieldTypeDouble"],a)},_checkProceed:function(){""!==this.layerName.get("value")&&(this.layerName.proceedValue=!0);var a="",b=!0;f.setAttr(this.errorMessage,"innerHTML","");b=this.layerName.proceedValue?b&&this.layerUrl.proceedValue&&0<this.displayFieldsTable.getData().length:!1;this.layerName.proceedValue||(a+=this.nls.title+" "+this.nls.requiredfield+" ");this.layerUrl.proceedValue||(a=""===a?a+(this.nls.searchUrl+" "+
this.nls.requiredfield):a+(", "+this.nls.searchUrl+" "+this.nls.requiredfield));0===this.displayFieldsTable.getData().length&&(a=""===a?a+(this.nls.includedFields+" "+this.nls.isempty):a+(", "+this.nls.includedFields+" "+this.nls.isempty));b?this.popup.enableButton(0):(this.popup.disableButton(0),a&&f.setAttr(this.errorMessage,"innerHTML",a))},_createDisplayField:function(a,b){var c=this._isNumberType(a.type)||a.isnumber;b={name:a.name,alias:a.alias||a.name,title:a.name===b,popuponly:a.popuponly,
isnumber:c,isdate:"esriFieldTypeDate"===a.type||a.isdate};if(a.hasOwnProperty("visible")&&!1===a.visible)return!1;a.dateformat&&(b.dateformat=a.dateformat);a.numberformat&&(b.numberformat=a.numberformat);a.currencyformat&&(b.currencyformat=a.currencyformat);a.useutc&&(b.useutc=a.useutc);a.sumfield&&(b.sumfield=a.sumfield,b.sumlabel=a.sumlabel);b.excludestat=a.excludestat?a.excludestat:!1;this.displayFieldsTable.addRow(b).tr.fieldInfo=a},_getTitleField:function(){var a=null,b=this.displayFieldsTable.getRowDataArrayByFieldValue("title",
!0);0<b.length&&(a=b[0].name);return a},_showSingleLinksEdit:function(a){this._openSingleLinksEdit("EDIT"===this.popupState?this.nls.updateLink:this.nls.addLink,a)},_showSingleRelatesEdit:function(a){this._openSingleRelatesEdit("EDIT"===this.popupState?this.nls.updateRelate:this.nls.addRelate,a)},_showSingleExpressionsEdit:function(a){this._openSingleExprEdit("EDIT"===this.popupState?this.nls.updateSearchExpr:this.nls.addSearchExpr,a)},_getAllSingleExpressions:function(){var a=this.expressionsTable._getNotEmptyRows();
return g.map(a,c.hitch(this,function(a){return a.singleExpression}))},_getAllSingleRelates:function(){var a=this.relatesTable._getNotEmptyRows();return g.map(a,c.hitch(this,function(a){return a.singleRelate}))},_openSingleRelatesEdit:function(a,b){this.singleRelateedit=new G({nls:this.nls,tr:b,searchSetting:this,layerURL:this._url,layerInfoCache:this.layerInfoCache});this.singleRelateedit.setConfig(b.singleRelate||{});this.popup6=new m({titleLabel:a,autoHeight:!0,content:this.singleRelateedit,container:"main-page",
buttons:[{label:this.nls.ok,key:h.ENTER,onClick:c.hitch(this,"_onSingleRelatesEditOk")},{label:this.nls.cancel,key:h.ESCAPE}],onClose:c.hitch(this,"_onSingleRelatesEditClose")});f.addClass(this.popup6.domNode,"widget-setting-popup");this.singleRelateedit.startup()},_onSingleRelatesEditOk:function(){var a={},b=this.singleRelateedit.getConfig();a.alias=b.alias;this.singleRelateedit.tr.singleRelate=b;this.relatesTable.editRow(this.singleRelateedit.tr,a);this.popupState="";this.popup6.close()},_onSingleRelatesEditClose:function(){"ADD"===
this.popupState&&this.relatesTable.deleteRow(this.singleRelateedit.tr);this.popup6=this.singleRelateedit=null},_getAllSingleLinks:function(){var a=this.linksTable._getNotEmptyRows();return g.map(a,c.hitch(this,function(a){return a.singleLink}))},_openSingleLinksEdit:function(a,b){this.singleLinkedit=new F({nls:this.nls,tr:b,searchSetting:this,layerURL:this._url,layerInfoCache:this.layerInfoCache});this.singleLinkedit.setConfig(b.singleLink||{});this.popup2=new m({titleLabel:a,autoHeight:!0,content:this.singleLinkedit,
container:"main-page",buttons:[{label:this.nls.ok,key:h.ENTER,onClick:c.hitch(this,"_onSingleLinksEditOk")},{label:this.nls.cancel,key:h.ESCAPE}],onClose:c.hitch(this,"_onSingleLinksEditClose")});f.addClass(this.popup2.domNode,"widget-setting-popup");this.singleLinkedit.startup()},_onSingleLinksEditOk:function(){var a={},b=this.singleLinkedit.getConfig();a.alias=b.alias;this.singleLinkedit.tr.singleLink=b;this.linksTable.editRow(this.singleLinkedit.tr,a);this.popupState="";this.popup2.close()},_onSingleLinksEditClose:function(){"ADD"===
this.popupState&&this.linksTable.deleteRow(this.singleLinkedit.tr);this.popup2=this.singleLinkedit=null},_openSingleExprEdit:function(a,b){this.singleExpressionedit=new D({nls:this.nls,tr:b,searchSetting:this,layerURL:this._url,layerDef:this._layerDef,layerUniqueCache:this.layerUniqueCache,layerInfoCache:this.layerInfoCache,config:b.singleExpression||{},disableuvcache:this.disableuvcache});this.popup3=new m({titleLabel:a,autoHeight:!0,content:this.singleExpressionedit,container:"main-page",buttons:[{label:this.nls.ok,
key:h.ENTER,onClick:c.hitch(this,"_onSingleExprEditOk")},{label:this.nls.cancel,key:h.ESCAPE}],onClose:c.hitch(this,"_onSingleExprEditClose")});f.addClass(this.popup3.domNode,"widget-setting-popup");this.singleExpressionedit.startup()},_onSingleExprEditOk:function(){var a={},b=this.singleExpressionedit.getConfig();a.alias=b.alias;this.singleExpressionedit.tr.singleExpression=b;this.expressionsTable.editRow(this.singleExpressionedit.tr,a);this.popupState="";this.popup3.close()},_onSingleExprEditClose:function(){"ADD"===
this.popupState&&this.expressionsTable.deleteRow(this.singleExpressionedit.tr);this.popup3=this.singleExpressionedit=null},_onBtnSortFieldsClicked:function(){var a=this.featureLayerDetails;if(a&&this._shouldEnableSorting(a))var b=new I({nls:this.nls,layerDefinition:a.data,orderByFields:c.clone(this._currentOrderByFields),validSortFieldTypes:this._validSortFieldTypes}),e=new m({width:640,height:380,titleLabel:this.nls.setSortingFields,content:b,onClose:c.hitch(this,function(){b.destroy()}),buttons:[{label:this.nls.ok,
onClick:c.hitch(this,function(){var a=b.getOrderByFields();this._setOrderByFields(a);e.close()})},{label:this.nls.cancel,onClick:c.hitch(this,function(){e.close()})}]})},_shouldEnableSorting:function(a){return this._isServiceSupportsOrderBy(a.data)},_isServiceSupportsOrderBy:function(a){var b=!1;a.advancedQueryCapabilities&&a.advancedQueryCapabilities.supportsOrderBy&&(b=!0);return b},updateSortingIcon:function(a){this._shouldEnableSorting(a)?(f.addClass(this.btnSortFields,"enabled"),p.set(this.btnSortFields,
"title",this.nls.editSortBy)):(f.removeClass(this.btnSortFields,"enabled"),p.set(this.btnSortFields,"title",this.nls.sortDisabledMsg))},_getOrderByFields:function(){return this._currentOrderByFields},clear:function(){f.removeClass(this.btnSortFields,"enabled");this._currentOrderByFields=[]},_setOrderByFields:function(a){a=a||[];var b=this.sortFieldsDiv.innerHTML="";a=g.map(a,c.hitch(this,function(c,e){var d=c.split(" ");c=d[0];var f="ASC";d[1]&&"string"===typeof d[1]&&(d[1]=d[1].toUpperCase(),"DESC"===
d[1]&&(f="DESC"));d=f.toLowerCase();d="\x3cspan\x3e"+c+'\x3c/span\x3e\x3cspan class\x3d"sort-arrow '+d+'"\x3e\x3c/span\x3e';e!==a.length-1&&(d+="\x3cspan\x3e,\x26nbsp;\x3c/span\x3e");b+=d;return c+" "+f}));b&&(b="\x3cspan\x3e\x26nbsp;\x26nbsp;\x3c/span\x3e"+b);this.sortFieldsDiv.innerHTML=b;this._currentOrderByFields=a}})});