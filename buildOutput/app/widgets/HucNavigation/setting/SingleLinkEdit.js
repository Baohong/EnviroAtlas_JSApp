//>>built
require({cache:{"url:widgets/HucNavigation/setting/SingleLinkEdit.html":'\x3cdiv style\x3d"width:100%;"\x3e\r\n  \x3cdiv data-dojo-attach-point\x3d"singleLinksSection"\x3e\r\n    \x3ctable class\x3d"input-table" style\x3d"width:100%;" cellspacing\x3d"0"\x3e\r\n      \x3ctbody\x3e\r\n        \x3ctr\x3e\r\n          \x3ctd colspan\x3d"3"\x3e\r\n            \x3ctable style\x3d"width:100%;" cellspacing\x3d"0"\x3e\r\n              \x3ctr\x3e\r\n                \x3ctd style\x3d"width:50%;"\x3e\r\n                  \x3ctable style\x3d"width:100%;" cellspacing\x3d"0"\x3e\r\n                    \x3ctbody\x3e\r\n                      \x3ctr\x3e\r\n                        \x3ctd style\x3d"width:115px;text-align:left;"\x3e\r\n                          \x3cspan\x3e${nls.linkAlias}\x3c/span\x3e\r\n                        \x3c/td\x3e\r\n                        \x3ctd style\x3d"width:auto;"\x3e\r\n                          \x3cinput type\x3d"text" data-dojo-type\x3d"dijit/form/TextBox" data-dojo-attach-point\x3d"linkAlias" style\x3d"width:100%;" placeholder\x3d"Name for the link" /\x3e\r\n                        \x3c/td\x3e\r\n                      \x3c/tr\x3e\r\n                    \x3c/tbody\x3e\r\n                  \x3c/table\x3e\r\n                \x3c/td\x3e\r\n                \x3ctd style\x3d"width:50%;" /\x3e\r\n              \x3c/tr\x3e\r\n            \x3c/table\x3e\r\n          \x3c/td\x3e\r\n        \x3c/tr\x3e\r\n        \x3ctr\x3e\r\n          \x3ctd colspan\x3d"3"\x3e\r\n            \x3ctable style\x3d"width:100%;" cellspacing\x3d"0"\x3e\r\n              \x3ctr\x3e\r\n                \x3ctd style\x3d"width:30%;"\x3e\r\n                  \x3ctable style\x3d"width:100%;margin-top:9px;" cellspacing\x3d"0"\x3e\r\n                    \x3ctbody\x3e\r\n                      \x3ctr\x3e\r\n                        \x3c!--\x3ctd style\x3d"width:auto;text-align:right;padding-right:15px;"\x3e\r\n                          \x3cspan\x3e${nls.disablenulllink}\x3c/span\x3e\r\n                        \x3c/td\x3e--\x3e\r\n                        \x3ctd style\x3d"width:115px;"\x3e\r\n                          \x3cdiv data-dojo-type\x3d"jimu/dijit/CheckBox" data-dojo-attach-point\x3d"disableNullLinkCbx"\r\n                               data-dojo-props\x3d"label:\'${nls.disablenulllink}\'"/\x3e\r\n                        \x3c/td\x3e\r\n                      \x3c/tr\x3e\r\n                    \x3c/tbody\x3e\r\n                  \x3c/table\x3e\r\n                \x3c/td\x3e\r\n                \x3ctd style\x3d"width:30%;"\x3e\r\n                  \x3ctable style\x3d"width:100%;margin-top:9px;" cellspacing\x3d"0"\x3e\r\n                    \x3ctbody\x3e\r\n                      \x3ctr\x3e\r\n                        \x3c!--\x3ctd style\x3d"width:auto;text-align:right;padding-right:15px;"\x3e\r\n                          \x3cspan\x3e${nls.disablelinkinpopup}\x3c/span\x3e\r\n                        \x3c/td\x3e--\x3e\r\n                        \x3ctd style\x3d"width:115px;"\x3e\r\n                          \x3cdiv data-dojo-type\x3d"jimu/dijit/CheckBox" data-dojo-attach-point\x3d"disableLinkinPopUpCbx"\r\n                               data-dojo-props\x3d"label:\'${nls.disablelinkinpopup}\'"/\x3e\r\n                        \x3c/td\x3e\r\n                      \x3c/tr\x3e\r\n                    \x3c/tbody\x3e\r\n                  \x3c/table\x3e\r\n                \x3c/td\x3e\r\n                \x3ctd style\x3d"width:40%;"\x3e\r\n                  \x3ctable style\x3d"width:100%;" cellspacing\x3d"0"\x3e\r\n                    \x3ctbody\x3e\r\n                      \x3ctr\x3e\r\n                        \x3ctd style\x3d"width:155px;text-align:left;"\x3e\r\n                          \x3cspan\x3e${nls.popuplinktype}\x3c/span\x3e\r\n                        \x3c/td\x3e\r\n                        \x3ctd style\x3d"width:auto;"\x3e\r\n                          \x3cselect data-dojo-attach-point\x3d"selectLinkType" data-dojo-type\x3d"dijit/form/Select" data-dojo-props\x3d"style:{width:\'200px\'}"\x3e\r\n                            \x3coption value\x3d"image" selected\x3d"selected"\x3e${nls.linkimage}\x3c/option\x3e\r\n                            \x3coption value\x3d"text"\x3e${nls.linktext}\x3c/option\x3e\r\n                          \x3c/select\x3e\r\n                        \x3c/td\x3e\r\n                      \x3c/tr\x3e\r\n                    \x3c/tbody\x3e\r\n                  \x3c/table\x3e\r\n                \x3c/td\x3e\r\n              \x3c/tr\x3e\r\n            \x3c/table\x3e\r\n          \x3c/td\x3e\r\n        \x3c/tr\x3e\r\n        \x3ctr\x3e\r\n          \x3ctd colspan\x3d"3"\x3e\r\n            \x3ctable style\x3d"width:100%;" cellspacing\x3d"0"\x3e\r\n              \x3ctr\x3e\r\n                \x3ctd style\x3d"width:100%;"\x3e\r\n                  \x3ctable style\x3d"width:100%;" cellspacing\x3d"0"\x3e\r\n                    \x3ctbody\x3e\r\n                      \x3ctr\x3e\r\n                        \x3ctd style\x3d"width:155px;text-align:left;"\x3e\r\n                          \x3cspan\x3e${nls.linkcontent}\x3c/span\x3e\r\n                          \x3cdiv class\x3d"help-icon" style\x3d"width:20px;height:20px;padding-left:6px; margin-left:8px;" title\x3d"${nls.linkcontenthint}"\x3e\x3cspan\x3e?\x3c/span\x3e\r\n                          \x3c/div\x3e\r\n                        \x3c/td\x3e\r\n                      \x3c/tr\x3e\r\n                      \x3ctr data-dojo-attach-point\x3d"linkContentRow"\x3e\r\n                        \x3ctd style\x3d"width:100%;"\x3e\r\n                          \x3ctextarea style\x3d"width:100%;padding:3px 3px;" rows\x3d"4" data-dojo-attach-point\x3d"linkContentTA"\x3e\x3c/textarea\x3e\r\n                        \x3c/td\x3e\r\n                        \x3ctd style\x3d"width:115px;vertical-align:top;"\x3e\r\n                          \x3cdiv data-dojo-attach-point\x3d"linkContentAddButtonDiv" /\x3e\r\n                        \x3c/td\x3e\r\n                      \x3c/tr\x3e\r\n                    \x3c/tbody\x3e\r\n                  \x3c/table\x3e\r\n                \x3c/td\x3e\r\n              \x3c/tr\x3e\r\n            \x3c/table\x3e\r\n          \x3c/td\x3e\r\n        \x3c/tr\x3e\r\n        \x3ctr\x3e\r\n          \x3ctd colspan\x3d"3"\x3e\r\n            \x3ctable style\x3d"width:100%;" cellspacing\x3d"0"\x3e\r\n              \x3ctr\x3e\r\n                \x3ctd style\x3d"width:100%;"\x3e\r\n                  \x3ctable style\x3d"width:100%;" cellspacing\x3d"0"\x3e\r\n                    \x3ctbody\x3e\r\n                      \x3ctr\x3e\r\n                        \x3ctd style\x3d"width:155px;text-align:left;"\x3e\r\n                          \x3cspan\x3e${nls.linkiconcontent}\x3c/span\x3e\r\n                          \x3cdiv class\x3d"help-icon" style\x3d"width:20px;height:20px;padding-left:6px; margin-left:8px;" title\x3d"${nls.linkiconcontenthint}"\x3e\x3cspan\x3e?\x3c/span\x3e\r\n                          \x3c/div\x3e\r\n                        \x3c/td\x3e\r\n                      \x3c/tr\x3e\r\n                      \x3ctr data-dojo-attach-point\x3d"linkIconContentRow"\x3e\r\n                        \x3ctd style\x3d"width:100%;"\x3e\r\n                          \x3ctextarea style\x3d"width:100%;padding:3px 3px;" rows\x3d"4" data-dojo-attach-point\x3d"linkIconContentTA"\x3e\x3c/textarea\x3e\r\n                        \x3c/td\x3e\r\n                        \x3ctd style\x3d"width:115px;vertical-align:top;"\x3e\r\n                          \x3cdiv data-dojo-attach-point\x3d"linkIconContentAddButtonDiv" /\x3e\r\n                        \x3c/td\x3e\r\n                      \x3c/tr\x3e\r\n                    \x3c/tbody\x3e\r\n                  \x3c/table\x3e\r\n                \x3c/td\x3e\r\n              \x3c/tr\x3e\r\n            \x3c/table\x3e\r\n          \x3c/td\x3e\r\n        \x3c/tr\x3e\r\n      \x3c/tbody\x3e\r\n    \x3c/table\x3e\r\n  \x3c/div\x3e\r\n\x3c/div\x3e\r\n'}});
define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/html dojo/_base/query dojo/on dojo/Deferred dojo/json dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dijit/Tooltip dojo/text!./SingleLinkEdit.html dijit/form/TextBox ./LayerFieldChooser esri/request jimu/dijit/CheckBox ./AddFieldBtn".split(" "),function(m,b,d,g,u,h,n,v,p,q,r,k,t,w,x,e,y,l){return m([p,q,r],{baseClass:"widget-esearch-singlelink-setting",templateString:t,nls:null,config:null,searchSetting:null,
layerInfoCache:null,_layerInfo:null,layerURL:null,tr:null,postCreate:function(){this.inherited(arguments);this.linkContentAddButton=new l({},this.linkContentAddButtonDiv);this.linkIconContentAddButton=new l({},this.linkIconContentAddButtonDiv);this._bindEvents();this.setConfig(this.config);this.getLayerInfo()},getLayerInfo:function(){this._layerInfo=this.layerInfoCache[this.layerURL];if(!this._layerInfo)return this._requestLayerInfo(this.layerURL);if(this._layerInfo.fields){var a=d.filter(this._layerInfo.fields,
function(a){return"esriFieldTypeOID"!==a.type&&"esriFieldTypeBlob"!==a.type&&"esriFieldTypeGeometry"!==a.type&&"esriFieldTypeRaster"!==a.type&&"esriFieldTypeGUID"!==a.type&&"esriFieldTypeGlobalID"!==a.type&&"esriFieldTypeXML"!==a.type});0<a.length&&this._initFieldsAdds(a)}},_initFieldsAdds:function(a){a=d.map(a,b.hitch(this,function(a,c){a=b.mixin({},a);a.id=c;a.key="{"+a.name+"}";a.label=a.alias+" {"+a.name+"}";return a}));0<a.length&&(this.linkContentAddButton.items=a,this.linkIconContentAddButton.items=
a)},_requestLayerInfo:function(a){if(a){e.setRequestPreCallback(function(a){a.failOk=!0;return a});var f=new n;this._def&&!this._def.isFulfilled()&&this._def.cancel("new layer info was requested");this._def=e({url:a,content:{f:"json"},handleAs:"json",callbackParamName:"callback",timeout:2E4},{useProxy:!1});this._def.then(b.hitch(this,function(a){this._layerInfo=a;this.layerInfoCache[this.layerURL]=this._layerInfo;a&&a.fields&&(a=d.filter(a.fields,function(a){return"esriFieldTypeOID"!==a.type&&"esriFieldTypeBlob"!==
a.type&&"esriFieldTypeGeometry"!==a.type&&"esriFieldTypeRaster"!==a.type&&"esriFieldTypeGUID"!==a.type&&"esriFieldTypeGlobalID"!==a.type&&"esriFieldTypeXML"!==a.type}),0<a.length&&this._initFieldsAdds(a))}),b.hitch(this,function(a){"Request canceled"!=a.message&&console.error("request layer info failed",a);this._layerInfo=null}));e.setRequestPreCallback();return f}},setConfig:function(a){a&&(this.config=a,this.resetAll(),this.linkAlias.set("value",b.trim(this.config.alias||"")),this.disableNullLinkCbx.setValue(this.config.disablelinksifnull||
!0),this.disableLinkinPopUpCbx.setValue(this.config.disableinpopup||!1),this.selectLinkType.set("value",this.config.popuptype||"image"),this.linkContentTA.value=this.config.content||"",this.linkIconContentTA.value=this.config.icon||"")},getConfig:function(){return this.validate(!1)?this.config={alias:b.trim(this.linkAlias.get("value")),disablelinksifnull:this.disableNullLinkCbx.getValue(),disableinpopup:this.disableLinkinPopUpCbx.getValue(),popuptype:this.selectLinkType.get("value"),content:b.trim(this.linkContentTA.value),
icon:b.trim(this.linkIconContentTA.value)}:!1},resetAll:function(){this.linkAlias.set("value","")},_bindEvents:function(){this.own(h(this.linkContentAddButton,"onMenuClick",b.hitch(this,function(a){this._insertAtCursor(this.linkContentTA,a.key)})));this.own(h(this.linkIconContentAddButton,"onMenuClick",b.hitch(this,function(a){this._insertAtCursor(this.linkIconContentTA,a.key)})))},_insertAtCursor:function(a,b){if(document.selection)a.focus(),a=document.selection.createRange(),a.text=b;else if(a.selectionStart||
"0"==a.selectionStart){var c=a.selectionStart,f=a.selectionEnd;a.value=a.value.substring(0,c)+b+a.value.substring(f,a.value.length);a.selectionStart=c+b.length;a.selectionEnd=c+b.length}else a.value+=b},validate:function(a){return""===b.trim(this.linkAlias.get("value"))?(a&&this._showTooltip(this.linkAlias.domNode,"Please input value."),!1):""===b.trim(this.linkContentTA.value)?(a&&this._showTooltip(this.linkContentTA,"Please input value."),!1):!0},_showTooltip:function(a,b,c){this._scrollToDom(a);
k.show(b,a);setTimeout(function(){k.hide(a)},c?c:2E3)},_scrollToDom:function(a){var b=this.searchSetting.domNode.parentNode,c=g.position(b).y;a=g.position(a).y;b.scrollTop=a-c}})});