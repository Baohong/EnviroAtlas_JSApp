//>>built
require({cache:{"dojo/fx/easing":function(){define(["../_base/lang"],function(h){var m={linear:function(e){return e},quadIn:function(e){return Math.pow(e,2)},quadOut:function(e){return e*(e-2)*-1},quadInOut:function(e){e*=2;return 1>e?Math.pow(e,2)/2:-1*(--e*(e-2)-1)/2},cubicIn:function(e){return Math.pow(e,3)},cubicOut:function(e){return Math.pow(e-1,3)+1},cubicInOut:function(e){e*=2;return 1>e?Math.pow(e,3)/2:(Math.pow(e-2,3)+2)/2},quartIn:function(e){return Math.pow(e,4)},quartOut:function(e){return-1*
(Math.pow(e-1,4)-1)},quartInOut:function(e){e*=2;return 1>e?Math.pow(e,4)/2:-.5*(Math.pow(e-2,4)-2)},quintIn:function(e){return Math.pow(e,5)},quintOut:function(e){return Math.pow(e-1,5)+1},quintInOut:function(e){e*=2;return 1>e?Math.pow(e,5)/2:(Math.pow(e-2,5)+2)/2},sineIn:function(e){return-1*Math.cos(Math.PI/2*e)+1},sineOut:function(e){return Math.sin(Math.PI/2*e)},sineInOut:function(e){return-1*(Math.cos(Math.PI*e)-1)/2},expoIn:function(e){return 0==e?0:Math.pow(2,10*(e-1))},expoOut:function(e){return 1==
e?1:-1*Math.pow(2,-10*e)+1},expoInOut:function(e){if(0==e)return 0;if(1==e)return 1;e*=2;if(1>e)return Math.pow(2,10*(e-1))/2;--e;return(-1*Math.pow(2,-10*e)+2)/2},circIn:function(e){return-1*(Math.sqrt(1-Math.pow(e,2))-1)},circOut:function(e){return Math.sqrt(1-Math.pow(e-1,2))},circInOut:function(e){e*=2;return 1>e?-.5*(Math.sqrt(1-Math.pow(e,2))-1):.5*(Math.sqrt(1-Math.pow(e-2,2))+1)},backIn:function(e){return Math.pow(e,2)*(2.70158*e-1.70158)},backOut:function(e){--e;return Math.pow(e,2)*(2.70158*
e+1.70158)+1},backInOut:function(e){e*=2;if(1>e)return Math.pow(e,2)*(3.5949095*e-2.5949095)/2;e-=2;return(Math.pow(e,2)*(3.5949095*e+2.5949095)+2)/2},elasticIn:function(e){if(0==e||1==e)return e;--e;return-1*Math.pow(2,10*e)*Math.sin(2*(e-.075)*Math.PI/.3)},elasticOut:function(e){return 0==e||1==e?e:Math.pow(2,-10*e)*Math.sin(2*(e-.075)*Math.PI/.3)+1},elasticInOut:function(e){if(0==e)return 0;e*=2;if(2==e)return 1;var l=.3*1.5,k=l/4;if(1>e)return--e,-.5*Math.pow(2,10*e)*Math.sin(2*(e-k)*Math.PI/
l);--e;return.5*Math.pow(2,-10*e)*Math.sin(2*(e-k)*Math.PI/l)+1},bounceIn:function(e){return 1-m.bounceOut(1-e)},bounceOut:function(e){return e<1/2.75?7.5625*Math.pow(e,2):e<2/2.75?7.5625*Math.pow(e-1.5/2.75,2)+.75:e<2.5/2.75?7.5625*Math.pow(e-2.25/2.75,2)+.9375:7.5625*Math.pow(e-2.625/2.75,2)+.984375},bounceInOut:function(e){return.5>e?m.bounceIn(2*e)/2:m.bounceOut(2*e-1)/2+.5}};h.setObject("dojo.fx.easing",m);return m})},"dojox/charting/Chart":function(){define("../main dojo/_base/lang dojo/_base/array dojo/_base/declare dojo/dom-style dojo/dom dojo/dom-geometry dojo/dom-construct dojo/_base/Color dojo/sniff ./Element ./SimpleTheme ./Series ./axis2d/common dojox/gfx/shape dojox/gfx dojo/has!dojo-bidi?./bidi/Chart dojox/lang/functional dojox/lang/functional/fold dojox/lang/functional/reversed".split(" "),
function(h,m,e,l,k,d,f,c,b,a,g,p,n,r,E,F,L,t){function I(a,b){a&&b&&(a.min=Math.min(a.min,b.min),a.max=Math.max(a.max,b.max));return a||b}function C(a,b){var c={},g={};e.forEach(a,function(a){var b=c[a.name]=a.getSeriesStats();a.hAxis&&(g[a.hAxis]=I(g[a.hAxis],{min:b.hmin,max:b.hmax}));a.vAxis&&(g[a.vAxis]=I(g[a.vAxis],{min:b.vmin,max:b.vmax}))});e.forEach(a,function(a){var d=c[a.name];if(a.hAxis){var f=g[a.hAxis];d.hmin=f.min;d.hmax=f.max}a.vAxis&&(f=g[a.vAxis],d.vmin=f.min,d.vmax=f.max);a.initializeScalers(b,
d)})}var q=m.getObject("charting",!0,h),B=t.lambda("item.clear()"),y=t.lambda("item.purgeGroup()"),w=t.lambda("item.destroy()"),G=t.lambda("item.dirty \x3d false"),u=t.lambda("item.dirty \x3d true"),A=t.lambda("item.name"),z={l:10,t:10,r:10,b:10};h=l(a("dojo-bidi")?"dojox.charting.NonBidiChart":"dojox.charting.Chart",null,{constructor:function(a,b){b||(b={});this.margins=b.margins||z;this._customMargins=!!b.margins;this.stroke=b.stroke;this.fill=b.fill;this.delayInMs=b.delayInMs||200;this.title=b.title;
this.titleGap=b.titleGap;this.titlePos=b.titlePos;this.titleFont=b.titleFont;this.titleFontColor=b.titleFontColor;this.titleAlign=b.titleAlign;this.chartTitle=null;this.htmlLabels=!0;"htmlLabels"in b&&(this.htmlLabels=b.htmlLabels);this.theme=null;this.axes={};this.stack=[];this.plots={};this.series=[];this.runs={};this.dirty=!0;this.node=d.byId(a);a=f.getMarginBox(a);this.surface=F.createSurface(this.node,a.w||400,a.h||300);-1==this.surface.declaredClass.indexOf("vml")&&(this._nativeClip=!0)},destroy:function(){e.forEach(this.series,
w);e.forEach(this.stack,w);t.forIn(this.axes,w);this.surface.destroy();this.chartTitle&&this.chartTitle.tagName&&c.destroy(this.chartTitle)},getCoords:function(){var a=this.node,b=k.getComputedStyle(a),b=f.getMarginBox(a,b),a=f.position(a,!0);b.x=a.x;b.y=a.y;return b},setTheme:function(a){this.theme=a.clone();this._customMargins||(this.margins=this.theme.chart.margins||z);this.dirty=!0;return this},addAxis:function(a,b){var c=b&&b.type||"Default";if("string"==typeof c){if(!q.axis2d||!q.axis2d[c])throw Error("Can't find axis: "+
c+" - Check require() dependencies.");b=new q.axis2d[c](this,b)}else b=new c(this,b);b.name=a;b.dirty=!0;a in this.axes&&this.axes[a].destroy();this.axes[a]=b;this.dirty=!0;return this},getAxis:function(a){return this.axes[a]},removeAxis:function(a){a in this.axes&&(this.axes[a].destroy(),delete this.axes[a],this.dirty=!0);return this},addPlot:function(a,b){var c=b&&b.type||"Default";if("string"==typeof c){if(!q.plot2d||!q.plot2d[c])throw Error("Can't find plot: "+c+" - didn't you forget to dojo.require() it?");
b=new q.plot2d[c](this,b)}else b=new c(this,b);b.name=a;b.dirty=!0;a in this.plots?(this.stack[this.plots[a]].destroy(),this.stack[this.plots[a]]=b):(this.plots[a]=this.stack.length,this.stack.push(b));this.dirty=!0;return this},getPlot:function(a){return this.stack[this.plots[a]]},removePlot:function(a){if(a in this.plots){var b=this.plots[a];delete this.plots[a];this.stack[b].destroy();this.stack.splice(b,1);t.forIn(this.plots,function(a,c,g){a>b&&(g[c]=a-1)});var c=e.filter(this.series,function(b){return b.plot!=
a});c.length<this.series.length&&(e.forEach(this.series,function(b){b.plot==a&&b.destroy()}),this.runs={},e.forEach(c,function(a,b){this.runs[a.plot]=b},this),this.series=c);this.dirty=!0}return this},getPlotOrder:function(){return t.map(this.stack,A)},setPlotOrder:function(a){var b={},c=t.filter(a,function(a){if(!(a in this.plots)||a in b)return!1;b[a]=1;return!0},this);c.length<this.stack.length&&t.forEach(this.stack,function(a){a=a.name;a in b||c.push(a)});a=t.map(c,function(a){return this.stack[this.plots[a]]},
this);t.forEach(a,function(a,b){this.plots[a.name]=b},this);this.stack=a;this.dirty=!0;return this},movePlotToFront:function(a){if(a in this.plots){var b=this.plots[a];if(b){var c=this.getPlotOrder();c.splice(b,1);c.unshift(a);return this.setPlotOrder(c)}}return this},movePlotToBack:function(a){if(a in this.plots){var b=this.plots[a];if(b<this.stack.length-1){var c=this.getPlotOrder();c.splice(b,1);c.push(a);return this.setPlotOrder(c)}}return this},addSeries:function(a,b,c){b=new n(this,b,c);b.name=
a;a in this.runs?(this.series[this.runs[a]].destroy(),this.series[this.runs[a]]=b):(this.runs[a]=this.series.length,this.series.push(b));this.dirty=!0;!("ymin"in b)&&"min"in b&&(b.ymin=b.min);!("ymax"in b)&&"max"in b&&(b.ymax=b.max);return this},getSeries:function(a){return this.series[this.runs[a]]},removeSeries:function(a){if(a in this.runs){var b=this.runs[a];delete this.runs[a];this.series[b].destroy();this.series.splice(b,1);t.forIn(this.runs,function(a,c,g){a>b&&(g[c]=a-1)});this.dirty=!0}return this},
updateSeries:function(a,b,c){a in this.runs&&(a=this.series[this.runs[a]],a.update(b),c?this.dirty=!0:(this._invalidateDependentPlots(a.plot,!1),this._invalidateDependentPlots(a.plot,!0)));return this},getSeriesOrder:function(a){return t.map(t.filter(this.series,function(b){return b.plot==a}),A)},setSeriesOrder:function(a){var b,c={},g=t.filter(a,function(a){if(!(a in this.runs)||a in c)return!1;var g=this.series[this.runs[a]];if(b){if(g.plot!=b)return!1}else b=g.plot;c[a]=1;return!0},this);t.forEach(this.series,
function(a){var d=a.name;d in c||a.plot!=b||g.push(d)});this.series=t.map(g,function(a){return this.series[this.runs[a]]},this).concat(t.filter(this.series,function(a){return a.plot!=b}));t.forEach(this.series,function(a,b){this.runs[a.name]=b},this);this.dirty=!0;return this},moveSeriesToFront:function(a){if(a in this.runs){var b=this.runs[a],c=this.getSeriesOrder(this.series[b].plot);if(a!=c[0])return c.splice(b,1),c.unshift(a),this.setSeriesOrder(c)}return this},moveSeriesToBack:function(a){if(a in
this.runs){var b=this.runs[a],c=this.getSeriesOrder(this.series[b].plot);if(a!=c[c.length-1])return c.splice(b,1),c.push(a),this.setSeriesOrder(c)}return this},resize:function(a,b){switch(arguments.length){case 1:f.setMarginBox(this.node,a);break;case 2:f.setMarginBox(this.node,{w:a,h:b})}var c=f.getMarginBox(this.node),g=this.surface.getDimensions();return g.width!=c.w||g.height!=c.h?(this.surface.setDimensions(c.w,c.h),this.dirty=!0,this.render()):this},getGeometry:function(){var a={};t.forIn(this.axes,
function(b){b.initialized()&&(a[b.name]={name:b.name,vertical:b.vertical,scaler:b.scaler,ticks:b.ticks})});return a},setAxisWindow:function(a,b,c,g){var d=this.axes[a];d&&(d.setWindow(b,c),e.forEach(this.stack,function(b){if(b.hAxis==a||b.vAxis==a)b.zoom=g}));return this},setWindow:function(a,b,c,g,d){"plotArea"in this||this.calculateGeometry();t.forIn(this.axes,function(d){var f,n;f=d.getScaler().bounds;n=f.span/(f.upper-f.lower);d.vertical?(f=b,n=g/n/f):(f=a,n=c/n/f);d.setWindow(f,n)});e.forEach(this.stack,
function(a){a.zoom=d});return this},zoomIn:function(a,b,c){var g=this.axes[a];if(g){var g=g.getScaler().bounds,d=Math.min(b[0],b[1]),f=Math.max(b[0],b[1]),d=b[0]<g.lower?g.lower:d,f=b[1]>g.upper?g.upper:f;this.setAxisWindow(a,(g.upper-g.lower)/(f-d),d-g.lower);c?this.delayedRender():this.render()}},calculateGeometry:function(){if(this.dirty)return this.fullGeometry();var a=e.filter(this.stack,function(a){return a.dirty||a.hAxis&&this.axes[a.hAxis].dirty||a.vAxis&&this.axes[a.vAxis].dirty},this);C(a,
this.plotArea);return this},fullGeometry:function(){this._makeDirty();e.forEach(this.stack,B);this.theme||this.setTheme(new p);e.forEach(this.series,function(a){if(!(a.plot in this.plots)){if(!q.plot2d||!q.plot2d.Default)throw Error("Can't find plot: Default - didn't you forget to dojo.require() it?");var b=new q.plot2d.Default(this,{});b.name=a.plot;this.plots[a.plot]=this.stack.length;this.stack.push(b)}this.stack[this.plots[a.plot]].addSeries(a)},this);e.forEach(this.stack,function(a){a.assignAxes&&
a.assignAxes(this.axes)},this);var b=this.dim=this.surface.getDimensions();b.width=F.normalizedLength(b.width);b.height=F.normalizedLength(b.height);t.forIn(this.axes,B);C(this.stack,b);var c=this.offsets={l:0,r:0,t:0,b:0},g=this;t.forIn(this.axes,function(b){a("dojo-bidi")&&g._resetLeftBottom(b);t.forIn(b.getOffsets(),function(a,b){c[b]=Math.max(a,c[b])})});if(this.title){this.titleGap=0==this.titleGap?0:this.titleGap||this.theme.chart.titleGap||20;this.titlePos=this.titlePos||this.theme.chart.titlePos||
"top";this.titleFont=this.titleFont||this.theme.chart.titleFont;this.titleFontColor=this.titleFontColor||this.theme.chart.titleFontColor||"black";this.titleAlign=this.titleAlign||this.theme&&this.theme.chart&&this.theme.chart.titleAlign||"middle";var d=F.normalizedLength(F.splitFontString(this.titleFont).size);c["top"==this.titlePos?"t":"b"]+=d+this.titleGap}t.forIn(this.margins,function(a,b){c[b]+=a});this.plotArea={width:b.width-c.l-c.r,height:b.height-c.t-c.b};t.forIn(this.axes,B);C(this.stack,
this.plotArea);return this},render:function(){this._delayedRenderHandle&&(clearTimeout(this._delayedRenderHandle),this._delayedRenderHandle=null);this.theme&&this.theme.clear();if(this.dirty)return this.fullRender();this.calculateGeometry();t.forEachRev(this.stack,function(a){a.render(this.dim,this.offsets)},this);t.forIn(this.axes,function(a){a.render(this.dim,this.offsets)},this);this._makeClean();return this},fullRender:function(){this.fullGeometry();var a=this.offsets,b=this.dim,g=Math.max(0,
b.width-a.l-a.r),d=Math.max(0,b.height-a.t-a.b);e.forEach(this.series,y);t.forIn(this.axes,y);e.forEach(this.stack,y);var f=this.surface.children;if(E.dispose)for(var n=0;n<f.length;++n)E.dispose(f[n]);this.chartTitle&&this.chartTitle.tagName&&c.destroy(this.chartTitle);this.surface.clear();this.chartTitle=null;this._renderChartBackground(b,a);this._renderPlotBackground(b,a,g,d);t.foldr(this.stack,function(c,g){return g.render(b,a),0},0);this._nativeClip||this._renderChartBackground(b,a);this.title&&
this._renderTitle(b,a);t.forIn(this.axes,function(c){c.render(b,a)});this._makeClean();return this},_renderTitle:function(b,c){var g="canvas"==F.renderer&&this.htmlLabels||!a("ie")&&!a("opera")&&this.htmlLabels?"html":"gfx",d=F.normalizedLength(F.splitFontString(this.titleFont).size),f=F._base._getTextBox(this.title,{font:this.titleFont}),n=this.titleAlign,e=a("dojo-bidi")&&this.isRightToLeft(),p=b.width/2;"edge"===n?(n="left",p=e?b.width-(c.r+f.w):c.l):"middle"!=n&&(e&&(n="left"===n?"right":"left"),
"left"===n?p=this.margins.l:"right"===n&&(n="left",p=b.width-(this.margins.l+f.w)));this.chartTitle=r.createText[g](this,this.surface,p,"top"==this.titlePos?d+this.margins.t:b.height-this.margins.b,n,this.title,this.titleFont,this.titleFontColor)},_renderChartBackground:function(a,c){var d=this.theme,f,n=void 0!==this.fill?this.fill:d.chart&&d.chart.fill,d=void 0!==this.stroke?this.stroke:d.chart&&d.chart.stroke;if("inherit"==n)for(f=this.node,n=new b(k.get(f,"backgroundColor"));0==n.a&&f!=document.documentElement;)n=
new b(k.get(f,"backgroundColor")),f=f.parentNode;n&&(this._nativeClip?(n=g.prototype._shapeFill(g.prototype._plotFill(n,a),{x:0,y:0,width:a.width+1,height:a.height+1}),this.surface.createRect({width:a.width+1,height:a.height+1}).setFill(n)):(n=g.prototype._plotFill(n,a,c),c.l&&(f={x:0,y:0,width:c.l,height:a.height+1},this.surface.createRect(f).setFill(g.prototype._shapeFill(n,f))),c.r&&(f={x:a.width-c.r,y:0,width:c.r+1,height:a.height+2},this.surface.createRect(f).setFill(g.prototype._shapeFill(n,
f))),c.t&&(f={x:0,y:0,width:a.width+1,height:c.t},this.surface.createRect(f).setFill(g.prototype._shapeFill(n,f))),c.b&&(f={x:0,y:a.height-c.b,width:a.width+1,height:c.b+2},this.surface.createRect(f).setFill(g.prototype._shapeFill(n,f)))));d&&this.surface.createRect({width:a.width-1,height:a.height-1}).setStroke(d)},_renderPlotBackground:function(a,b,c,d){var f=this.theme,n=f.plotarea&&f.plotarea.fill,f=f.plotarea&&f.plotarea.stroke,e={x:b.l-1,y:b.t-1,width:c+2,height:d+2};n&&(n=g.prototype._shapeFill(g.prototype._plotFill(n,
a,b),e),this.surface.createRect(e).setFill(n));f&&this.surface.createRect({x:b.l,y:b.t,width:c+1,height:d+1}).setStroke(f)},delayedRender:function(){this._delayedRenderHandle||(this._delayedRenderHandle=setTimeout(m.hitch(this,function(){this.render()}),this.delayInMs));return this},connectToPlot:function(a,b,c){return a in this.plots?this.stack[this.plots[a]].connect(b,c):null},fireEvent:function(a,b,c){if(a in this.runs){var g=this.series[this.runs[a]].plot;g in this.plots&&(g=this.stack[this.plots[g]])&&
g.fireEvent(a,b,c)}return this},_makeClean:function(){e.forEach(this.axes,G);e.forEach(this.stack,G);e.forEach(this.series,G);this.dirty=!1},_makeDirty:function(){e.forEach(this.axes,u);e.forEach(this.stack,u);e.forEach(this.series,u);this.dirty=!0},_invalidateDependentPlots:function(a,b){if(a in this.plots){var c=this.stack[this.plots[a]],g=b?"vAxis":"hAxis";c[g]?(a=this.axes[c[g]])&&a.dependOnData()&&(a.dirty=!0,e.forEach(this.stack,function(a){a[g]&&a[g]==c[g]&&(a.dirty=!0)})):c.dirty=!0}},setDir:function(a){return this},
_resetLeftBottom:function(a){},formatTruncatedLabel:function(a,b,c){}});return a("dojo-bidi")?l("dojox.charting.Chart",[h,L]):h})},"dojox/charting/Element":function(){define(["dojo/_base/array","dojo/dom-construct","dojo/_base/declare","dojox/gfx","dojox/gfx/shape"],function(h,m,e,l,k){return e("dojox.charting.Element",null,{chart:null,group:null,htmlElements:null,dirty:!0,renderingOptions:null,constructor:function(d,f){this.chart=d;this.group=null;this.htmlElements=[];this.dirty=!0;this.trailingSymbol=
"...";this._events=[];f&&f.renderingOptions&&(this.renderingOptions=f.renderingOptions)},purgeGroup:function(){this.destroyHtmlElements();if(this.group){this.getGroup().removeShape();var d=this.getGroup().children;if(k.dispose)for(var f=0;f<d.length;++f)k.dispose(d[f],!0);this.getGroup().rawNode&&m.empty(this.getGroup().rawNode);this.getGroup().clear();k.dispose&&k.dispose(this.getGroup(),!0);this.getGroup()!=this.group&&(this.group.rawNode&&m.empty(this.group.rawNode),this.group.clear(),k.dispose&&
k.dispose(this.group,!0));this.group=null}this.dirty=!0;this._events.length&&(h.forEach(this._events,function(c){c.shape.disconnect(c.handle)}),this._events=[]);return this},cleanGroup:function(d){this.destroyHtmlElements();d||(d=this.chart.surface);if(this.group){var f;d=this.getGroup().children;if(k.dispose)for(var c=0;c<d.length;++c)k.dispose(d[c],!0);this.getGroup().rawNode&&(f=this.getGroup().bgNode,m.empty(this.getGroup().rawNode));this.getGroup().clear();f&&this.getGroup().rawNode.appendChild(f)}else if(this.group=
d.createGroup(),this.renderingOptions&&this.group.rawNode&&"http://www.w3.org/2000/svg"==this.group.rawNode.namespaceURI)for(c in this.renderingOptions)this.group.rawNode.setAttribute(c,this.renderingOptions[c]);this.dirty=!0;return this},getGroup:function(){return this.group},destroyHtmlElements:function(){this.htmlElements.length&&(h.forEach(this.htmlElements,m.destroy),this.htmlElements=[])},destroy:function(){this.purgeGroup()},overrideShape:function(d,f){},getTextWidth:function(d,f){return l._base._getTextBox(d,
{font:f}).w||0},getTextWithLimitLength:function(d,f,c,b){if(!d||0>=d.length)return{text:"",truncated:b||!1};if(!c||0>=c)return{text:d,truncated:b||!1};var a=d.substring(0,1)+this.trailingSymbol,g=this.getTextWidth(a,f);if(c<=g)return{text:a,truncated:!0};if(this.getTextWidth(d,f)<=c)return{text:d,truncated:b||!1};b=0;for(a=d.length;b<a;){if(2>=a-b){for(;this.getTextWidth(d.substring(0,b)+this.trailingSymbol,f)>c;)--b;return{text:d.substring(0,b)+this.trailingSymbol,truncated:!0}}g=b+Math.round(.618*
(a-b));this.getTextWidth(d.substring(0,g),f)<c?b=g:a=g}},getTextWithLimitCharCount:function(d,f,c,b){return!d||0>=d.length?{text:"",truncated:b||!1}:!c||0>=c||d.length<=c?{text:d,truncated:b||!1}:{text:d.substring(0,c)+this.trailingSymbol,truncated:!0}},_plotFill:function(d,f,c){if(!d||!d.type||!d.space)return d;var b=d.space,a;switch(d.type){case "linear":if("plot"===b||"shapeX"===b||"shapeY"===b){d=l.makeParameters(l.defaultLinearGradient,d);d.space=b;if("plot"===b||"shapeX"===b)a=f.height-c.t-
c.b,d.y1=c.t+a*d.y1/100,d.y2=c.t+a*d.y2/100;if("plot"===b||"shapeY"===b)a=f.width-c.l-c.r,d.x1=c.l+a*d.x1/100,d.x2=c.l+a*d.x2/100}break;case "radial":"plot"===b&&(d=l.makeParameters(l.defaultRadialGradient,d),d.space=b,b=f.width-c.l-c.r,f=f.height-c.t-c.b,d.cx=c.l+b*d.cx/100,d.cy=c.t+f*d.cy/100,d.r=d.r*Math.sqrt(b*b+f*f)/200);break;case "pattern":if("plot"===b||"shapeX"===b||"shapeY"===b){d=l.makeParameters(l.defaultPattern,d);d.space=b;if("plot"===b||"shapeX"===b)a=f.height-c.t-c.b,d.y=c.t+a*d.y/
100,d.height=a*d.height/100;if("plot"===b||"shapeY"===b)a=f.width-c.l-c.r,d.x=c.l+a*d.x/100,d.width=a*d.width/100}}return d},_shapeFill:function(d,f){if(!d||!d.space)return d;var c=d.space,b;switch(d.type){case "linear":if("shape"===c||"shapeX"===c||"shapeY"===c){d=l.makeParameters(l.defaultLinearGradient,d);d.space=c;if("shape"===c||"shapeX"===c)b=f.width,d.x1=f.x+b*d.x1/100,d.x2=f.x+b*d.x2/100;if("shape"===c||"shapeY"===c)b=f.height,d.y1=f.y+b*d.y1/100,d.y2=f.y+b*d.y2/100}break;case "radial":"shape"===
c&&(d=l.makeParameters(l.defaultRadialGradient,d),d.space=c,d.cx=f.x+f.width/2,d.cy=f.y+f.height/2,d.r=d.r*f.width/200);break;case "pattern":if("shape"===c||"shapeX"===c||"shapeY"===c){d=l.makeParameters(l.defaultPattern,d);d.space=c;if("shape"===c||"shapeX"===c)b=f.width,d.x=f.x+b*d.x/100,d.width=b*d.width/100;if("shape"===c||"shapeY"===c)b=f.height,d.y=f.y+b*d.y/100,d.height=b*d.height/100}}return d},_pseudoRadialFill:function(d,f,c,b,a){if(!d||"radial"!==d.type||"shape"!==d.space)return d;var g=
d.space;d=l.makeParameters(l.defaultRadialGradient,d);d.space=g;if(4>arguments.length)return d.cx=f.x,d.cy=f.y,d.r=d.r*c/100,d;g=5>arguments.length?b:(a+b)/2;return{type:"linear",x1:f.x,y1:f.y,x2:f.x+d.r*c*Math.cos(g)/100,y2:f.y+d.r*c*Math.sin(g)/100,colors:d.colors}}})})},"dojox/charting/SimpleTheme":function(){define("dojo/_base/lang dojo/_base/array dojo/_base/declare dojo/_base/Color dojox/lang/utils dojox/gfx/gradutils".split(" "),function(h,m,e,l,k,d){var f=e("dojox.charting.SimpleTheme",null,
{shapeSpaces:{shape:1,shapeX:1,shapeY:1},constructor:function(c){c=c||{};var b=f.defaultTheme;m.forEach("chart plotarea axis grid series marker indicator".split(" "),function(a){this[a]=h.delegate(b[a],c[a])},this);c.seriesThemes&&c.seriesThemes.length?(this.colors=null,this.seriesThemes=c.seriesThemes.slice(0)):(this.seriesThemes=null,this.colors=(c.colors||f.defaultColors).slice(0));this.markerThemes=null;c.markerThemes&&c.markerThemes.length&&(this.markerThemes=c.markerThemes.slice(0));this.markers=
c.markers?h.clone(c.markers):h.delegate(f.defaultMarkers);this.noGradConv=c.noGradConv;this.noRadialConv=c.noRadialConv;c.reverseFills&&this.reverseFills();this._current=0;this._buildMarkerArray()},clone:function(){var c=new this.constructor({chart:this.chart,plotarea:this.plotarea,axis:this.axis,grid:this.grid,series:this.series,marker:this.marker,colors:this.colors,markers:this.markers,indicator:this.indicator,seriesThemes:this.seriesThemes,markerThemes:this.markerThemes,noGradConv:this.noGradConv,
noRadialConv:this.noRadialConv,pieInnerRadius:this.pieInnerRadius});m.forEach("clone clear next skip addMixin post getTick".split(" "),function(b){this.hasOwnProperty(b)&&(c[b]=this[b])},this);return c},clear:function(){this._current=0},next:function(c,b,a){var g=k.merge,d;if(this.colors){d=h.delegate(this.series);var g=h.delegate(this.marker),f=new l(this.colors[this._current%this.colors.length]),e;d.stroke&&d.stroke.color?(d.stroke=h.delegate(d.stroke),e=new l(d.stroke.color),d.stroke.color=new l(f),
d.stroke.color.a=e.a):d.stroke={color:f};g.stroke&&g.stroke.color?(g.stroke=h.delegate(g.stroke),e=new l(g.stroke.color),g.stroke.color=new l(f),g.stroke.color.a=e.a):g.stroke={color:f};!d.fill||d.fill.type?d.fill=f:(e=new l(d.fill),d.fill=new l(f),d.fill.a=e.a);!g.fill||g.fill.type?g.fill=f:(e=new l(g.fill),g.fill=new l(f),g.fill.a=e.a)}else d=this.seriesThemes?g(this.series,this.seriesThemes[this._current%this.seriesThemes.length]):this.series,g=this.markerThemes?g(this.marker,this.markerThemes[this._current%
this.markerThemes.length]):d;d={series:d,marker:g,symbol:g&&g.symbol||this._markers[this._current%this._markers.length]};++this._current;b&&(d=this.addMixin(d,c,b));a&&(d=this.post(d,c));return d},skip:function(){++this._current},addMixin:function(c,b,a,d){if(h.isArray(a))m.forEach(a,function(a){c=this.addMixin(c,b,a)},this);else{var g={};"color"in a&&("line"==b||"area"==b?(h.setObject("series.stroke.color",a.color,g),h.setObject("marker.stroke.color",a.color,g)):h.setObject("series.fill",a.color,
g));m.forEach("stroke outline shadow fill filter font fontColor labelWiring".split(" "),function(b){var c="marker"+b.charAt(0).toUpperCase()+b.substr(1),d=c in a;b in a&&(h.setObject("series."+b,a[b],g),d||h.setObject("marker."+b,a[b],g));d&&h.setObject("marker."+b,a[c],g)});"marker"in a&&(g.symbol=a.marker,g.symbol=a.marker);c=k.merge(c,g)}d&&(c=this.post(c,b));return c},post:function(c,b){var a=c.series.fill,d;return!this.noGradConv&&this.shapeSpaces[a.space]&&"linear"==a.type&&("bar"==b?d={x1:a.y1,
y1:a.x1,x2:a.y2,y2:a.x2}:this.noRadialConv||"shape"!=a.space||"slice"!=b&&"circle"!=b||(d={type:"radial",cx:0,cy:0,r:100}),d)?k.merge(c,{series:{fill:d}}):c},getTick:function(c,b){var a=this.axis.tick;c+="Tick";var d=k.merge;a?this.axis[c]&&(a=d(a,this.axis[c])):a=this.axis[c];b&&(a?b[c]&&(a=d(a,b[c])):a=b[c]);return a},inspectObjects:function(c){m.forEach("chart plotarea axis grid series marker indicator".split(" "),function(b){c(this[b])},this);this.seriesThemes&&m.forEach(this.seriesThemes,c);
this.markerThemes&&m.forEach(this.markerThemes,c)},reverseFills:function(){this.inspectObjects(function(c){c&&c.fill&&(c.fill=d.reverse(c.fill))})},addMarker:function(c,b){this.markers[c]=b;this._buildMarkerArray()},setMarkers:function(c){this.markers=c;this._buildMarkerArray()},_buildMarkerArray:function(){this._markers=[];for(var c in this.markers)this._markers.push(this.markers[c])}});h.mixin(f,{defaultMarkers:{CIRCLE:"m-3,0 c0,-4 6,-4 6,0 m-6,0 c0,4 6,4 6,0",SQUARE:"m-3,-3 l0,6 6,0 0,-6 z",DIAMOND:"m0,-3 l3,3 -3,3 -3,-3 z",
CROSS:"m0,-3 l0,6 m-3,-3 l6,0",X:"m-3,-3 l6,6 m0,-6 l-6,6",TRIANGLE:"m-3,3 l3,-6 3,6 z",TRIANGLE_INVERTED:"m-3,-3 l3,6 3,-6 z"},defaultColors:["#54544c","#858e94","#6e767a","#948585","#474747"],defaultTheme:{chart:{stroke:null,fill:"white",pageStyle:null,titleGap:20,titlePos:"top",titleFont:"normal normal bold 14pt Tahoma",titleFontColor:"#333",titleAlign:"middle"},plotarea:{stroke:null,fill:"white"},axis:{stroke:{color:"#333",width:1},tick:{color:"#666",position:"center",font:"normal normal normal 7pt Tahoma",
fontColor:"#333",labelGap:4},majorTick:{width:1,length:6},minorTick:{width:.8,length:3},microTick:{width:.5,length:1},title:{gap:15,font:"normal normal normal 11pt Tahoma",fontColor:"#333",orientation:"axis"}},series:{stroke:{width:1.5,color:"#333"},outline:{width:.1,color:"#ccc"},shadow:null,fill:"#ccc",font:"normal normal normal 8pt Tahoma",fontColor:"#000",labelWiring:{width:1,color:"#ccc"}},marker:{stroke:{width:1.5,color:"#333"},outline:{width:.1,color:"#ccc"},shadow:null,fill:"#ccc",font:"normal normal normal 8pt Tahoma",
fontColor:"#000"},indicator:{lineStroke:{width:1.5,color:"#333"},lineOutline:{width:.1,color:"#ccc"},lineShadow:null,lineFill:null,stroke:{width:1.5,color:"#333"},outline:{width:.1,color:"#ccc"},shadow:null,fill:"#ccc",radius:3,font:"normal normal normal 10pt Tahoma",fontColor:"#000",markerFill:"#ccc",markerSymbol:"m-3,0 c0,-4 6,-4 6,0 m-6,0 c0,4 6,4 6,0",markerStroke:{width:1.5,color:"#333"},markerOutline:{width:.1,color:"#ccc"},markerShadow:null}}});return f})},"dojox/lang/utils":function(){define(["..",
"dojo/_base/lang"],function(h,m){var e=m.getObject("lang.utils",!0,h),l={},k=Object.prototype.toString,d=function(d){if(d)switch(k.call(d)){case "[object Array]":return d.slice(0);case "[object Object]":return m.delegate(d)}return d};m.mixin(e,{coerceType:function(d,c){switch(typeof d){case "number":return Number(eval("("+c+")"));case "string":return String(c);case "boolean":return!!eval("("+c+")")}return eval("("+c+")")},updateWithObject:function(f,c,b){if(!c)return f;for(var a in f)if(a in c&&!(a in
l)){var g=f[a];g&&"object"==typeof g?e.updateWithObject(g,c[a],b):f[a]=b?e.coerceType(g,c[a]):d(c[a])}return f},updateWithPattern:function(f,c,b,a){if(!c||!b)return f;for(var g in b)g in c&&!(g in l)&&(f[g]=a?e.coerceType(b[g],c[g]):d(c[g]));return f},merge:function(d,c){if(c){var b=k.call(d),a=k.call(c),g,f;switch(a){case "[object Array]":if(a==b){b=Array(Math.max(d.length,c.length));g=0;for(a=b.length;g<a;++g)b[g]=e.merge(d[g],c[g]);return b}return c.slice(0);case "[object Object]":if(a==b&&d){b=
m.delegate(d);for(g in c)g in d?(a=d[g],f=c[g],f!==a&&(b[g]=e.merge(a,f))):b[g]=m.clone(c[g]);return b}return m.clone(c)}}return c}});return e})},"dojox/gfx/gradutils":function(){define(["./_base","dojo/_base/lang","./matrix","dojo/_base/Color"],function(h,m,e,l){function k(d,f){if(0>=d)return f[0].color;var c=f.length;if(1<=d)return f[c-1].color;for(var b=0;b<c;++b){var a=f[b];if(a.offset>=d)return b?(f=f[b-1],l.blendColors(new l(f.color),new l(a.color),(d-f.offset)/(a.offset-f.offset))):a.color}return f[c-
1].color}h=h.gradutils={};h.getColor=function(d,f){var c;if(d){switch(d.type){case "linear":c=e.rotate(-Math.atan2(d.y2-d.y1,d.x2-d.x1));var b=e.project(d.x2-d.x1,d.y2-d.y1);f=e.multiplyPoint(b,f);var a=e.multiplyPoint(b,d.x1,d.y1),b=e.multiplyPoint(b,d.x2,d.y2),b=e.multiplyPoint(c,b.x-a.x,b.y-a.y).x;c=e.multiplyPoint(c,f.x-a.x,f.y-a.y).x/b;break;case "radial":c=f.x-d.cx,f=f.y-d.cy,c=Math.sqrt(c*c+f*f)/d.r}return k(c,d.colors)}return new l(d||[0,0,0,0])};h.reverse=function(d){if(d)switch(d.type){case "linear":case "radial":if(d=
m.delegate(d),d.colors){for(var f=d.colors,c=f.length,b=0,a,g=d.colors=Array(f.length);b<c;++b)a=f[b],g[b]={offset:1-a.offset,color:a.color};g.sort(function(a,b){return a.offset-b.offset})}}return d};return h})},"dojox/charting/Series":function(){define(["dojo/_base/lang","dojo/_base/declare","./Element"],function(h,m,e){return m("dojox.charting.Series",e,{constructor:function(e,k,d){h.mixin(this,d);"string"!=typeof this.plot&&(this.plot="default");this.update(k)},clear:function(){this.dyn={}},update:function(e){h.isArray(e)?
this.data=e:(this.source=e,this.data=this.source.data,this.source.setSeriesObject&&this.source.setSeriesObject(this));this.dirty=!0;this.clear()}})})},"dojox/charting/axis2d/common":function(){define(["dojo/_base/lang","dojo/_base/window","dojo/dom-geometry","dojox/gfx","dojo/has"],function(h,m,e,l,k){var d=h.getObject("dojox.charting.axis2d.common",!0),f=function(c){c.marginLeft="0px";c.marginTop="0px";c.marginRight="0px";c.marginBottom="0px";c.paddingLeft="0px";c.paddingTop="0px";c.paddingRight=
"0px";c.paddingBottom="0px";c.borderLeftWidth="0px";c.borderTopWidth="0px";c.borderRightWidth="0px";c.borderBottomWidth="0px"};return h.mixin(d,{createText:{gfx:function(c,b,a,d,f,n,e,k){return b.createText({x:a,y:d,text:n,align:f}).setFont(e).setFill(k)},html:function(c,b,a,d,p,n,r,E,h){b=m.doc.createElement("div");var g=b.style,t;c.getTextDir&&(b.dir=c.getTextDir(n));f(g);g.font=r;b.innerHTML=String(n).replace(/\s/g,"\x26nbsp;");g.color=E;g.position="absolute";g.left="-10000px";m.body().appendChild(b);
var F=l.normalizedLength(l.splitFontString(r).size);h||(b.getBoundingClientRect?(t=b.getBoundingClientRect(),t=t.width||t.right-t.left):t=e.getMarginBox(b).w);"rtl"==b.dir&&(a+=h?h:t);m.body().removeChild(b);g.position="relative";if(h)switch(g.width=h+"px",p){case "middle":g.textAlign="center";g.left=a-h/2+"px";break;case "end":g.textAlign="right";g.left=a-h+"px";break;default:g.left=a+"px",g.textAlign="left"}else switch(p){case "middle":g.left=Math.floor(a-t/2)+"px";break;case "end":g.left=Math.floor(a-
t)+"px";break;default:g.left=Math.floor(a)+"px"}g.top=Math.floor(d-F)+"px";g.whiteSpace="nowrap";h=m.doc.createElement("div");g=h.style;f(g);g.width="0px";g.height="0px";h.appendChild(b);c.node.insertBefore(h,c.node.firstChild);k("dojo-bidi")&&c.htmlElementsRegistry.push([h,a,d,p,n,r,E]);return h}}})})},"dojox/lang/functional":function(){define(["./functional/lambda","./functional/array","./functional/object"],function(h){return h})},"dojox/lang/functional/lambda":function(){define(["../..","dojo/_base/lang",
"dojo/_base/array"],function(h,m,e){var l=m.getObject("lang.functional",!0,h),k={},d=1<"ab".split(/a*/).length?String.prototype.split:function(b){var a=this.split.call(this,b);(b=b.exec(this))&&0==b.index&&a.unshift("");return a},f=function(b){var a=[],c=d.call(b,/\s*->\s*/m);if(1<c.length)for(;c.length;)b=c.pop(),a=c.pop().split(/\s*,\s*|\s+/m),c.length&&c.push("(function("+a.join(", ")+"){ return ("+b+"); })");else if(b.match(/\b_\b/))a=["_"];else{var c=b.match(/^\s*(?:[+*\/%&|\^\.=<>]|!=)/m),f=
b.match(/[+\-*\/%&|\^\.=<>!]\s*$/m);if(c||f)c&&(a.push("$1"),b="$1"+b),f&&(a.push("$2"),b+="$2");else{var c=b.replace(/(?:\b[A-Z]|\.[a-zA-Z_$])[a-zA-Z_$\d]*|[a-zA-Z_$][a-zA-Z_$\d]*:|this|true|false|null|undefined|typeof|instanceof|in|delete|new|void|arguments|decodeURI|decodeURIComponent|encodeURI|encodeURIComponent|escape|eval|isFinite|isNaN|parseFloat|parseInt|unescape|dojo|dijit|dojox|window|document|'(?:[^'\\]|\\.)*'|"(?:[^"\\]|\\.)*"/g,"").match(/([a-z_$][a-z_$\d]*)/gi)||[],n={};e.forEach(c,
function(b){n.hasOwnProperty(b)||(a.push(b),n[b]=1)})}}return{args:a,body:b}},c=function(b){return b.length?function(){var a=b.length-1,c=l.lambda(b[a]).apply(this,arguments);for(--a;0<=a;--a)c=l.lambda(b[a]).call(this,c);return c}:function(a){return a}};m.mixin(l,{rawLambda:function(b){return f(b)},buildLambda:function(b){b=f(b);return"function("+b.args.join(",")+"){return ("+b.body+");}"},lambda:function(b){if("function"==typeof b)return b;if(b instanceof Array)return c(b);if(k.hasOwnProperty(b))return k[b];
var a=f(b);return k[b]=new Function(a.args,"return ("+a.body+");")},clearLambdaCache:function(){k={}}});return l})},"dojox/lang/functional/array":function(){define(["dojo/_base/kernel","dojo/_base/lang","dojo/_base/array","./lambda"],function(h,m,e,l){var k={};m.mixin(l,{filter:function(d,f,c){"string"==typeof d&&(d=d.split(""));c=c||h.global;f=l.lambda(f);var b=[],a,g,e;if(m.isArray(d))for(g=0,e=d.length;g<e;++g)a=d[g],f.call(c,a,g,d)&&b.push(a);else if("function"==typeof d.hasNext&&"function"==
typeof d.next)for(g=0;d.hasNext();)a=d.next(),f.call(c,a,g++,d)&&b.push(a);else for(g in d)g in k||(a=d[g],f.call(c,a,g,d)&&b.push(a));return b},forEach:function(d,f,c){"string"==typeof d&&(d=d.split(""));c=c||h.global;f=l.lambda(f);var b,a;if(m.isArray(d))for(b=0,a=d.length;b<a;f.call(c,d[b],b,d),++b);else if("function"==typeof d.hasNext&&"function"==typeof d.next)for(b=0;d.hasNext();f.call(c,d.next(),b++,d));else for(b in d)b in k||f.call(c,d[b],b,d);return c},map:function(d,f,c){"string"==typeof d&&
(d=d.split(""));c=c||h.global;f=l.lambda(f);var b,a,g;if(m.isArray(d))for(b=Array(a=d.length),g=0;g<a;b[g]=f.call(c,d[g],g,d),++g);else if("function"==typeof d.hasNext&&"function"==typeof d.next)for(b=[],g=0;d.hasNext();b.push(f.call(c,d.next(),g++,d)));else for(g in b=[],d)g in k||b.push(f.call(c,d[g],g,d));return b},every:function(d,f,c){"string"==typeof d&&(d=d.split(""));c=c||h.global;f=l.lambda(f);var b,a;if(m.isArray(d))for(b=0,a=d.length;b<a;++b){if(!f.call(c,d[b],b,d))return!1}else if("function"==
typeof d.hasNext&&"function"==typeof d.next)for(b=0;d.hasNext();){if(!f.call(c,d.next(),b++,d))return!1}else for(b in d)if(!(b in k||f.call(c,d[b],b,d)))return!1;return!0},some:function(d,f,c){"string"==typeof d&&(d=d.split(""));c=c||h.global;f=l.lambda(f);var b,a;if(m.isArray(d))for(b=0,a=d.length;b<a;++b){if(f.call(c,d[b],b,d))return!0}else if("function"==typeof d.hasNext&&"function"==typeof d.next)for(b=0;d.hasNext();){if(f.call(c,d.next(),b++,d))return!0}else for(b in d)if(!(b in k)&&f.call(c,
d[b],b,d))return!0;return!1}});return l})},"dojox/lang/functional/object":function(){define(["dojo/_base/kernel","dojo/_base/lang","./lambda"],function(h,m,e){var l={};m.mixin(e,{keys:function(e){var d=[],f;for(f in e)f in l||d.push(f);return d},values:function(e){var d=[],f;for(f in e)f in l||d.push(e[f]);return d},filterIn:function(k,d,f){f=f||h.global;d=e.lambda(d);var c={},b,a;for(a in k)a in l||(b=k[a],d.call(f,b,a,k)&&(c[a]=b));return c},forIn:function(k,d,f){f=f||h.global;d=e.lambda(d);for(var c in k)c in
l||d.call(f,k[c],c,k);return f},mapIn:function(k,d,f){f=f||h.global;d=e.lambda(d);var c={},b;for(b in k)b in l||(c[b]=d.call(f,k[b],b,k));return c}});return e})},"dojox/lang/functional/fold":function(){define(["dojo/_base/lang","dojo/_base/array","dojo/_base/kernel","./lambda"],function(h,m,e,l){var k={};h.mixin(l,{foldl:function(d,f,c,b){"string"==typeof d&&(d=d.split(""));b=b||e.global;f=l.lambda(f);var a,g;if(h.isArray(d))for(a=0,g=d.length;a<g;c=f.call(b,c,d[a],a,d),++a);else if("function"==typeof d.hasNext&&
"function"==typeof d.next)for(a=0;d.hasNext();c=f.call(b,c,d.next(),a++,d));else for(a in d)a in k||(c=f.call(b,c,d[a],a,d));return c},foldl1:function(d,f,c){"string"==typeof d&&(d=d.split(""));c=c||e.global;f=l.lambda(f);var b,a,g;if(h.isArray(d))for(b=d[0],a=1,g=d.length;a<g;b=f.call(c,b,d[a],a,d),++a);else if("function"==typeof d.hasNext&&"function"==typeof d.next){if(d.hasNext())for(b=d.next(),a=1;d.hasNext();b=f.call(c,b,d.next(),a++,d));}else for(a in g=!0,d)a in k||(g?(b=d[a],g=!1):b=f.call(c,
b,d[a],a,d));return b},foldr:function(d,f,c,b){"string"==typeof d&&(d=d.split(""));b=b||e.global;f=l.lambda(f);for(var a=d.length;0<a;--a,c=f.call(b,c,d[a],a,d));return c},foldr1:function(d,f,c){"string"==typeof d&&(d=d.split(""));c=c||e.global;f=l.lambda(f);for(var b=d.length,a=d[b-1],b=b-1;0<b;--b,a=f.call(c,a,d[b],b,d));return a},reduce:function(d,f,c){return 3>arguments.length?l.foldl1(d,f):l.foldl(d,f,c)},reduceRight:function(d,f,c){return 3>arguments.length?l.foldr1(d,f):l.foldr(d,f,c)},unfold:function(d,
f,c,b,a){a=a||e.global;f=l.lambda(f);c=l.lambda(c);d=l.lambda(d);for(var g=[];!d.call(a,b);g.push(f.call(a,b)),b=c.call(a,b));return g}})})},"dojox/lang/functional/reversed":function(){define(["dojo/_base/lang","dojo/_base/kernel","./lambda"],function(h,m,e){h.mixin(e,{filterRev:function(l,k,d){"string"==typeof l&&(l=l.split(""));d=d||m.global;k=e.lambda(k);for(var f=[],c,b=l.length-1;0<=b;--b)c=l[b],k.call(d,c,b,l)&&f.push(c);return f},forEachRev:function(l,k,d){"string"==typeof l&&(l=l.split(""));
d=d||m.global;k=e.lambda(k);for(var f=l.length-1;0<=f;k.call(d,l[f],f,l),--f);},mapRev:function(l,k,d){"string"==typeof l&&(l=l.split(""));d=d||m.global;k=e.lambda(k);for(var f=l.length,c=Array(f),f=f-1,b=0;0<=f;c[b++]=k.call(d,l[f],f,l),--f);return c},everyRev:function(l,k,d){"string"==typeof l&&(l=l.split(""));d=d||m.global;k=e.lambda(k);for(var f=l.length-1;0<=f;--f)if(!k.call(d,l[f],f,l))return!1;return!0},someRev:function(l,k,d){"string"==typeof l&&(l=l.split(""));d=d||m.global;k=e.lambda(k);
for(var f=l.length-1;0<=f;--f)if(k.call(d,l[f],f,l))return!0;return!1}});return e})},"dojox/charting/axis2d/Default":function(){define("dojo/_base/lang dojo/_base/array dojo/sniff dojo/_base/declare dojo/_base/connect dojo/dom-geometry ./Invisible ../scaler/linear ./common dojox/gfx dojox/lang/utils dojox/lang/functional dojo/has!dojo-bidi?../bidi/axis2d/Default".split(" "),function(h,m,e,l,k,d,f,c,b,a,g,p,n){f=l(e("dojo-bidi")?"dojox.charting.axis2d.NonBidiDefault":"dojox.charting.axis2d.Default",
f,{defaultParams:{vertical:!1,fixUpper:"none",fixLower:"none",natural:!1,leftBottom:!0,includeZero:!1,fixed:!0,majorLabels:!0,minorTicks:!0,minorLabels:!0,microTicks:!1,rotation:0,htmlLabels:!0,enableCache:!1,dropLabels:!0,labelSizeChange:!1,position:"leftOrBottom"},optionalParams:{min:0,max:1,from:0,to:1,majorTickStep:4,minorTickStep:2,microTickStep:1,labels:[],labelFunc:null,maxLabelSize:0,maxLabelCharCount:0,trailingSymbol:null,stroke:{},majorTick:{},minorTick:{},microTick:{},tick:{},font:"",fontColor:"",
title:"",titleGap:0,titleFont:"",titleFontColor:"",titleOrientation:""},constructor:function(a,b){this.opt=h.clone(this.defaultParams);g.updateWithObject(this.opt,b);g.updateWithPattern(this.opt,b,this.optionalParams);this.opt.enableCache&&(this._textFreePool=[],this._lineFreePool=[],this._textUsePool=[],this._lineUsePool=[]);this._invalidMaxLabelSize=!0;b&&"position"in b||(this.opt.position=this.opt.leftBottom?"leftOrBottom":"rightOrTop");this.renderingOptions={"shape-rendering":"crispEdges"}},setWindow:function(a,
b){a!=this.scale&&(this._invalidMaxLabelSize=!0);return this.inherited(arguments)},_groupLabelWidth:function(b,c,d){if(!b.length)return 0;50<b.length&&(b.length=50);h.isObject(b[0])&&(b=p.map(b,function(a){return a.text}));d&&(b=p.map(b,function(a){return 0==h.trim(a).length?"":a.substring(0,d)+this.trailingSymbol},this));b=b.join("\x3cbr\x3e");return a._base._getTextBox(b,{font:c}).w||0},_getMaxLabelSize:function(a,b,d,g,f,n){if(null==this._maxLabelSize&&6==arguments.length){var e=this.opt;this.scaler.minMinorStep=
this._prevMinMinorStep=0;var r=h.clone(e);delete r.to;delete r.from;var p=c.buildScaler(a,b,d,r,e.to-e.from);p.minMinorStep=0;this._majorStart=p.major.start;e=c.buildTicks(p,e);if(n&&e){var k=p=0,t=function(a){a.label&&this.push(a.label)},E=[];this.opt.majorLabels&&(m.forEach(e.major,t,E),p=this._groupLabelWidth(E,f,r.maxLabelCharCount),r.maxLabelSize&&(p=Math.min(r.maxLabelSize,p)));E=[];this.opt.dropLabels&&this.opt.minorLabels&&(m.forEach(e.minor,t,E),k=this._groupLabelWidth(E,f,r.maxLabelCharCount),
r.maxLabelSize&&(k=Math.min(r.maxLabelSize,k)));this._maxLabelSize={majLabelW:p,minLabelW:k,majLabelH:n,minLabelH:n}}else this._maxLabelSize=null}return this._maxLabelSize},calculate:function(b,d,g){this.inherited(arguments);this.scaler.minMinorStep=this._prevMinMinorStep;if((this._invalidMaxLabelSize||g!=this._oldSpan)&&Infinity!=b&&-Infinity!=d){this._invalidMaxLabelSize=!1;this.opt.labelSizeChange&&(this._maxLabelSize=null);this._oldSpan=g;var f=this.opt,e=this.chart.theme.axis,n=f.rotation%360,
r=this.chart.theme.axis.tick.labelGap,p=f.font||e.majorTick&&e.majorTick.font||e.tick&&e.tick.font,e=p?a.normalizedLength(a.splitFontString(p).size):0,p=this._getMaxLabelSize(b,d,g,n,p,e);"number"!=typeof r&&(r=4);if(p&&f.dropLabels){var f=Math.abs(Math.cos(n*Math.PI/180)),k=Math.abs(Math.sin(n*Math.PI/180));0>n&&(n+=360);switch(n){case 0:case 180:this.vertical?n=e:(n=p.majLabelW,e=p.minLabelW);break;case 90:case 270:this.vertical?(n=p.majLabelW,e=p.minLabelW):n=e;break;default:n=this.vertical?Math.min(p.majLabelW,
e/f):Math.min(p.majLabelW,e/k),e=Math.min(Math.sqrt(p.minLabelW*p.minLabelW+e*e),this.vertical?e*f+p.minLabelW*k:p.minLabelW*f+e*k)}this.scaler.minMinorStep=this._prevMinMinorStep=Math.max(n,e)+r;this._skipInterval=this.scaler.minMinorStep<=this.scaler.minor.tick*this.scaler.bounds.scale?0:Math.floor((n+r)/(this.scaler.major.tick*this.scaler.bounds.scale))}else this._skipInterval=0}this.ticks=c.buildTicks(this.scaler,this.opt);return this},getOffsets:function(){var b={l:0,r:0,t:0,b:0};if(!this.scaler)return b;
var c=this.opt,d=this.chart.theme.axis,g=this.chart.theme.axis.tick.labelGap,f=c.titleFont||d.title&&d.title.font,d=0==c.titleGap?0:c.titleGap||d.title&&d.title.gap,e=this.chart.theme.getTick("major",c),n=this.chart.theme.getTick("minor",c),f=f?a.normalizedLength(a.splitFontString(f).size):0,p=c.rotation%360,k=c.position,l="rightOrTop"!==k,h=Math.abs(Math.cos(p*Math.PI/180)),m=Math.abs(Math.sin(p*Math.PI/180));this.trailingSymbol=void 0===c.trailingSymbol||null===c.trailingSymbol?this.trailingSymbol:
c.trailingSymbol;"number"!=typeof g&&(g=4);0>p&&(p+=360);var u=this._getMaxLabelSize();if(u){var A=Math.ceil(Math.max(u.majLabelW,u.minLabelW))+1,z=Math.ceil(Math.max(u.majLabelH,u.minLabelH))+1;if(this.vertical)switch(u=l?"l":"r",p){case 0:case 180:b[u]="center"===k?0:A;b.t=b.b=z/2;break;case 90:case 270:b[u]=z;b.t=b.b=A/2;break;default:45>=p||180<p&&225>=p?(b[u]=z*m/2+A*h,b[l?"t":"b"]=z*h/2+A*m,b[l?"b":"t"]=z*h/2):315<p||180>p&&135<p?(b[u]=z*m/2+A*h,b[l?"b":"t"]=z*h/2+A*m,b[l?"t":"b"]=z*h/2):90>
p||180<p&&270>p?(b[u]=z*m+A*h,b[l?"t":"b"]=z*h+A*m):(b[u]=z*m+A*h,b[l?"b":"t"]=z*h+A*m)}else switch(u=l?"b":"t",p){case 0:case 180:b[u]="center"===k?0:z;b.l=b.r=A/2;break;case 90:case 270:b[u]=A;b.l=b.r=z/2;break;default:45<=p&&90>=p||225<=p&&270>=p?(b[u]=z*h/2+A*m,b[l?"r":"l"]=z*m/2+A*h,b[l?"l":"r"]=z*m/2):90<=p&&135>=p||270<=p&&315>=p?(b[u]=z*h/2+A*m,b[l?"l":"r"]=z*m/2+A*h,b[l?"r":"l"]=z*m/2):45>p||180<p&&225>p?(b[u]=z*h+A*m,b[l?"r":"l"]=z*m+A*h):(b[u]=z*h+A*m,b[l?"l":"r"]=z*m+A*h)}b[u]="center"===
k?0:b[u]+(g+Math.max(0<e.length?e.length:0,0<n.length?n.length:0)+(c.title?f+d:0))}return b},cleanGroup:function(a){this.opt.enableCache&&this.group&&(this._lineFreePool=this._lineFreePool.concat(this._lineUsePool),this._lineUsePool=[],this._textFreePool=this._textFreePool.concat(this._textUsePool),this._textUsePool=[]);this.inherited(arguments)},createText:function(a,c,d,g,f,e,n,p,k){if(!this.opt.enableCache||"html"==a)return b.createText[a](this.chart,c,d,g,f,e,n,p,k);0<this._textFreePool.length?
(a=this._textFreePool.pop(),a.setShape({x:d,y:g,text:e,align:f}),c.add(a)):a=b.createText[a](this.chart,c,d,g,f,e,n,p);this._textUsePool.push(a);return a},createLine:function(a,b){var c;this.opt.enableCache&&0<this._lineFreePool.length?(c=this._lineFreePool.pop(),c.setShape(b),a.add(c)):c=a.createLine(b);this.opt.enableCache&&this._lineUsePool.push(c);return c},render:function(d,g){var f,n,p,k,r,h,l,E,w,G,u,A,z,U,N=this._isRtl();if(!this.dirty||!this.scaler)return this;var x=this.opt;w=this.chart.theme.axis;
var R=x.position,P="rightOrTop"!==R,v=x.rotation%360,H=0,J,D,H=this.chart.theme.axis.tick.labelGap,M=x.font||w.majorTick&&w.majorTick.font||w.tick&&w.tick.font,V=x.titleFont||w.title&&w.title.font,Q=x.fontColor||w.majorTick&&w.majorTick.fontColor||w.tick&&w.tick.fontColor||"black",S=x.titleFontColor||w.title&&w.title.fontColor||"black";r=0==x.titleGap?0:x.titleGap||w.title&&w.title.gap||15;var T=x.titleOrientation||w.title&&w.title.orientation||"axis",W=this.chart.theme.getTick("major",x),K=this.chart.theme.getTick("minor",
x),ea=this.chart.theme.getTick("micro",x),fa="stroke"in x?x.stroke:w.stroke,O=M?a.normalizedLength(a.splitFontString(M).size):0;h=Math.abs(Math.cos(v*Math.PI/180));J=Math.abs(Math.sin(v*Math.PI/180));var Z=V?a.normalizedLength(a.splitFontString(V).size):0;"number"!=typeof H&&(H=4);0>v&&(v+=360);var aa=this._getMaxLabelSize(),aa=aa&&aa.majLabelW;if(this.vertical){z=d.height-g.b;U=void 0;u=g.t;A=void 0;w=(d.height-g.b+g.t)/2;G=void 0;J=O*J+(aa||0)*h+H+Math.max(0<W.length?W.length:0,0<K.length?K.length:
0)+Z+r;l=0;E=-1;n=f=0;r=1;h=0;p=H;k=0;switch(v){case 0:D="end";n=.4*O;break;case 90:D="middle";f=-O;break;case 180:D="start";n=.4*-O;break;case 270:D="middle";break;default:45>v?(D="end",n=.4*O):90>v?(D="end",n=.4*O):135>v?D="start":225>v?(D="start",n=.4*-O):270>v?(D="start",f=P?0:.4*O):315>v?(D="end",f=P?0:.4*O):(D="end",n=.4*O)}if(P)U=A="center"===R?d.width/2:g.l,H=T&&"away"==T?90:270,G=g.l-J+(270==H?Z:0),r=-1,p=-p;else switch(U=A=d.width-g.r,H=T&&"axis"==T?90:270,G=d.width-g.r+J-(270==H?0:Z),D){case "start":D=
"end";break;case "end":D="start";break;case "middle":f+=O}}else{U=g.l;z=void 0;A=d.width-g.r;u=void 0;G=(d.width-g.r+g.l)/2;w=void 0;J=O*h+(aa||0)*J+H+Math.max(0<W.length?W.length:0,0<K.length?K.length:0)+Z+r;l=N?-1:1;r=n=f=E=0;h=1;p=0;k=H;switch(v){case 0:D="middle";n=O;break;case 90:D="start";f=.4*-O;break;case 180:D="middle";break;case 270:D="end";f=.4*O;break;default:45>v?(D="start",n=P?O:0):135>v?(D="start",f=.4*-O):180>v?(D="start",n=P?0:-O):225>v?(D="end",n=P?0:-O):315>v?(D="end",n=P?.4*O:
0):(D="end",n=P?O:0)}if(P)z=u="center"===R?d.height/2:d.height-g.b,H=T&&"axis"==T?180:0,w=d.height-g.b+J-(H?Z:0);else switch(z=u=g.t,H=T&&"away"==T?180:0,w=g.t-J+(H?0:Z),h=-1,k=-k,D){case "start":D="end";break;case "end":D="start";break;case "middle":n-=O}}this.cleanGroup();var ba=this.group;d=this.scaler;g=this.ticks;var da=c.getTransformerFromModel(this.scaler),X=x.title&&H||v||!this.opt.htmlLabels||e("ie")||e("opera")?"gfx":"html",Y=r*W.length,ca=h*W.length,ga=this._skipInterval;ba.createLine({x1:U,
y1:z,x2:A,y2:u}).setStroke(fa);x.title&&(V=b.createText[X](this.chart,ba,G,w,"middle",x.title,V,S),"html"==X?this.htmlElements.push(V):V.setTransform(a.matrix.rotategAt(H,G,w)));if(null==g)return this.dirty=!1,this;var ia=0<g.major.length?(g.major[0].value-this._majorStart)/d.major.tick:0,ha=this.opt.majorLabels;m.forEach(g.major,function(b,c){var d=da(b.value),g=(N?A:U)+l*d,d=z+E*d;c+=ia;this.createLine(ba,{x1:g,y1:d,x2:g+Y,y2:d+ca}).setStroke(W);if(b.label&&(!ga||0==(c-(1+ga))%(1+ga))){var e=x.maxLabelCharCount?
this.getTextWithLimitCharCount(b.label,M,x.maxLabelCharCount):{text:b.label,truncated:!1},e=x.maxLabelSize?this.getTextWithLimitLength(e.text,M,x.maxLabelSize,e.truncated):e;c=this.createText(X,ba,g+(0<W.length?Y:0)+p+(v?0:f),d+(0<W.length?ca:0)+k+(v?0:n),D,e.text,M,Q);e.truncated&&this.chart.formatTruncatedLabel(c,b.label,X);e.truncated&&this.labelTooltip(c,this.chart,b.label,e.text,M,X);"html"==X?this.htmlElements.push(c):v&&c.setTransform([{dx:f,dy:n},a.matrix.rotategAt(v,g+(0<W.length?Y:0)+p,
d+(0<W.length?ca:0)+k)])}},this);Y=r*K.length;ca=h*K.length;ha=this.opt.minorLabels&&d.minMinorStep<=d.minor.tick*d.bounds.scale;m.forEach(g.minor,function(b){var c=da(b.value),d=(N?A:U)+l*c,g=z+E*c;this.createLine(ba,{x1:d,y1:g,x2:d+Y,y2:g+ca}).setStroke(K);if(ha&&b.label){var e=x.maxLabelCharCount?this.getTextWithLimitCharCount(b.label,M,x.maxLabelCharCount):{text:b.label,truncated:!1},e=x.maxLabelSize?this.getTextWithLimitLength(e.text,M,x.maxLabelSize,e.truncated):e,c=this.createText(X,ba,d+(0<
K.length?Y:0)+p+(v?0:f),g+(0<K.length?ca:0)+k+(v?0:n),D,e.text,M,Q);e.truncated&&this.chart.formatTruncatedLabel(c,b.label,X);e.truncated&&this.labelTooltip(c,this.chart,b.label,e.text,M,X);"html"==X?this.htmlElements.push(c):v&&c.setTransform([{dx:f,dy:n},a.matrix.rotategAt(v,d+(0<K.length?Y:0)+p,g+(0<K.length?ca:0)+k)])}},this);Y=r*ea.length;ca=h*ea.length;m.forEach(g.micro,function(a){var b=da(a.value);a=U+l*b;b=z+E*b;this.createLine(ba,{x1:a,y1:b,x2:a+Y,y2:b+ca}).setStroke(ea)},this);this.dirty=
!1;return this},labelTooltip:function(b,c,g,f,e,n){var p=["dijit/Tooltip"],r={type:"rect"},l=["above","below"];f=a._base._getTextBox(f,{font:e}).w||0;e=e?a.normalizedLength(a.splitFontString(e).size):0;"html"==n?(h.mixin(r,d.position(b.firstChild,!0)),r.width=Math.ceil(f),r.height=Math.ceil(e),this._events.push({shape:dojo,handle:k.connect(b.firstChild,"onmouseover",this,function(a){require(p,function(a){a.show(g,r,l)})})}),this._events.push({shape:dojo,handle:k.connect(b.firstChild,"onmouseout",
this,function(a){require(p,function(a){a.hide(r)})})})):(n=b.getShape(),c=c.getCoords(),r=h.mixin(r,{x:n.x-f/2,y:n.y}),r.x+=c.x,r.y+=c.y,r.x=Math.round(r.x),r.y=Math.round(r.y),r.width=Math.ceil(f),r.height=Math.ceil(e),this._events.push({shape:b,handle:b.connect("onmouseenter",this,function(a){require(p,function(a){a.show(g,r,l)})})}),this._events.push({shape:b,handle:b.connect("onmouseleave",this,function(a){require(p,function(a){a.hide(r)})})}))},_isRtl:function(){return!1}});return e("dojo-bidi")?
l("dojox.charting.axis2d.Default",[f,n]):f})},"dojox/charting/axis2d/Invisible":function(){define(["dojo/_base/lang","dojo/_base/declare","./Base","../scaler/linear","dojox/lang/utils"],function(h,m,e,l,k){return m("dojox.charting.axis2d.Invisible",e,{defaultParams:{vertical:!1,fixUpper:"none",fixLower:"none",natural:!1,leftBottom:!0,includeZero:!1,fixed:!0},optionalParams:{min:0,max:1,from:0,to:1,majorTickStep:4,minorTickStep:2,microTickStep:1},constructor:function(d,f){this.opt=h.clone(this.defaultParams);
k.updateWithObject(this.opt,f);k.updateWithPattern(this.opt,f,this.optionalParams)},dependOnData:function(){return!("min"in this.opt)||!("max"in this.opt)},clear:function(){delete this.scaler;delete this.ticks;this.dirty=!0;return this},initialized:function(){return"scaler"in this&&!(this.dirty&&this.dependOnData())},setWindow:function(d,f){this.scale=d;this.offset=f;return this.clear()},getWindowScale:function(){return"scale"in this?this.scale:1},getWindowOffset:function(){return"offset"in this?
this.offset:0},calculate:function(d,f,c,b){if(this.initialized())return this;var a=this.opt;this.labels=a.labels;this.scaler=(b||l).buildScaler(d,f,c,a);var g=this.scaler.bounds;"scale"in this&&(a.from=g.lower+this.offset,a.to=(g.upper-g.lower)/this.scale+a.from,!isFinite(a.from)||isNaN(a.from)||!isFinite(a.to)||isNaN(a.to)||a.to-a.from>=g.upper-g.lower?(delete a.from,delete a.to,delete this.scale,delete this.offset):(a.from<g.lower?(a.to+=g.lower-a.from,a.from=g.lower):a.to>g.upper&&(a.from+=g.upper-
a.to,a.to=g.upper),this.offset=a.from-g.lower),this.scaler=(b||l).buildScaler(d,f,c,a),g=this.scaler.bounds,1==this.scale&&0==this.offset&&(delete this.scale,delete this.offset));return this},getScaler:function(){return this.scaler},getTicks:function(){return this.ticks}})})},"dojox/charting/axis2d/Base":function(){define(["dojo/_base/declare","../Element"],function(h,m){return h("dojox.charting.axis2d.Base",m,{constructor:function(e,h){this.vertical=h&&h.vertical;this.opt={};this.opt.min=h&&h.min;
this.opt.max=h&&h.max},clear:function(){return this},initialized:function(){return!1},calculate:function(e,h,k){return this},getScaler:function(){return null},getTicks:function(){return null},getOffsets:function(){return{l:0,r:0,t:0,b:0}},render:function(e,h){this.dirty=!1;return this},isNullValue:function(e){return!1},naturalBaseline:0})})},"dojox/charting/scaler/linear":function(){define(["dojo/_base/lang","./common"],function(h,m){function e(d,c){d=d.toLowerCase();for(var b=c.length-1;0<=b;--b)if(d===
c[b])return!0;return!1}var l=h.getObject("dojox.charting.scaler.linear",!0),k=m.getNumericLabel,d=function(d,c,b,a,g,p,n){b=h.delegate(b);a||("major"==b.fixUpper&&(b.fixUpper="minor"),"major"==b.fixLower&&(b.fixLower="minor"));g||("minor"==b.fixUpper&&(b.fixUpper="micro"),"minor"==b.fixLower&&(b.fixLower="micro"));p||("micro"==b.fixUpper&&(b.fixUpper="none"),"micro"==b.fixLower&&(b.fixLower="none"));var f=e(b.fixLower,["major"])?Math.floor(b.min/a)*a:e(b.fixLower,["minor"])?Math.floor(b.min/g)*g:
e(b.fixLower,["micro"])?Math.floor(b.min/p)*p:b.min,k=e(b.fixUpper,["major"])?Math.ceil(b.max/a)*a:e(b.fixUpper,["minor"])?Math.ceil(b.max/g)*g:e(b.fixUpper,["micro"])?Math.ceil(b.max/p)*p:b.max;b.useMin&&(d=f);b.useMax&&(c=k);var m=!a||b.useMin&&e(b.fixLower,["major"])?d:Math.ceil(d/a)*a,L=!g||b.useMin&&e(b.fixLower,["major","minor"])?d:Math.ceil(d/g)*g,t=!p||b.useMin&&e(b.fixLower,["major","minor","micro"])?d:Math.ceil(d/p)*p,I=a?(b.useMax&&e(b.fixUpper,["major"])?Math.round((c-m)/a):Math.floor((c-
m)/a))+1:0,C=g?(b.useMax&&e(b.fixUpper,["major","minor"])?Math.round((c-L)/g):Math.floor((c-L)/g))+1:0;b=p?(b.useMax&&e(b.fixUpper,["major","minor","micro"])?Math.round((c-t)/p):Math.floor((c-t)/p))+1:0;var q=g?Math.round(a/g):0,B=p?Math.round(g/p):0,y=a?Math.floor(Math.log(a)/Math.LN10):0,w=g?Math.floor(Math.log(g)/Math.LN10):0,G=n/(c-d);isFinite(G)||(G=1);return{bounds:{lower:f,upper:k,from:d,to:c,scale:G,span:n},major:{tick:a,start:m,count:I,prec:y},minor:{tick:g,start:L,count:C,prec:w},micro:{tick:p,
start:t,count:b,prec:0},minorPerMajor:q,microPerMinor:B,scaler:l}};return h.mixin(l,{buildScaler:function(f,c,b,a,g,e){var n={fixUpper:"none",fixLower:"none",natural:!1};a&&("fixUpper"in a&&(n.fixUpper=String(a.fixUpper)),"fixLower"in a&&(n.fixLower=String(a.fixLower)),"natural"in a&&(n.natural=!!a.natural));e=!e||3>e?3:e;"min"in a&&(f=a.min);"max"in a&&(c=a.max);a.includeZero&&(0<f&&(f=0),0>c&&(c=0));n.min=f;n.useMin=!0;n.max=c;n.useMax=!0;"from"in a&&(f=a.from,n.useMin=!1);"to"in a&&(c=a.to,n.useMax=
!1);if(c<=f)return d(f,c,n,0,0,0,b);g||(g=c-f);g=Math.floor(Math.log(g)/Math.LN10);g=a&&"majorTickStep"in a?a.majorTickStep:Math.pow(10,g);var p=0,k=0,h;if(a&&"minorTickStep"in a)p=a.minorTickStep;else{do{p=g/10;if(!n.natural||.9<p)if(h=d(f,c,n,g,p,0,b),h.bounds.scale*h.minor.tick>e)break;p=g/5;if(!n.natural||.9<p)if(h=d(f,c,n,g,p,0,b),h.bounds.scale*h.minor.tick>e)break;p=g/2;if(!n.natural||.9<p)if(h=d(f,c,n,g,p,0,b),h.bounds.scale*h.minor.tick>e)break;return d(f,c,n,g,0,0,b)}while(0)}if(a&&"microTickStep"in
a)k=a.microTickStep,h=d(f,c,n,g,p,k,b);else{do{k=p/10;if(!n.natural||.9<k)if(h=d(f,c,n,g,p,k,b),3<h.bounds.scale*h.micro.tick)break;k=p/5;if(!n.natural||.9<k)if(h=d(f,c,n,g,p,k,b),3<h.bounds.scale*h.micro.tick)break;k=p/2;if(!n.natural||.9<k)if(h=d(f,c,n,g,p,k,b),3<h.bounds.scale*h.micro.tick)break;k=0}while(0)}return k?h:d(f,c,n,g,p,0,b)},buildTicks:function(d,c){var b,a,g,f=d.major.start,e=d.minor.start,h=d.micro.start;if(c.microTicks&&d.micro.tick)b=d.micro.tick,a=h;else if(c.minorTicks&&d.minor.tick)b=
d.minor.tick,a=e;else if(d.major.tick)b=d.major.tick,a=f;else return null;var l=1/d.bounds.scale;if(d.bounds.to<=d.bounds.from||isNaN(l)||!isFinite(l)||0>=b||isNaN(b)||!isFinite(b))return null;for(var m=[],L=[],t=[];a<=d.bounds.to+l;)Math.abs(f-a)<b/2?(g={value:f},c.majorLabels&&(g.label=k(f,d.major.prec,c)),m.push(g),f+=d.major.tick,e+=d.minor.tick):Math.abs(e-a)<b/2?(c.minorTicks&&(g={value:e},c.minorLabels&&d.minMinorStep<=d.minor.tick*d.bounds.scale&&(g.label=k(e,d.minor.prec,c)),L.push(g)),e+=
d.minor.tick):c.microTicks&&t.push({value:h}),h+=d.micro.tick,a+=b;return{major:m,minor:L,micro:t}},getTransformerFromModel:function(d){var c=d.bounds.from,b=d.bounds.scale;return function(a){return(a-c)*b}},getTransformerFromPlot:function(d){var c=d.bounds.from,b=d.bounds.scale;return function(a){return a/b+c}}})})},"dojox/charting/scaler/common":function(){define(["dojo/_base/lang"],function(h){var m=function(e,d){return Math.abs(e-d)<=1E-6*(Math.abs(e)+Math.abs(d))},e=h.getObject("dojox.charting.scaler.common",
!0),l={};return h.mixin(e,{doIfLoaded:function(e,d,f){if(void 0===l[e])try{l[e]=require(e)}catch(c){l[e]=null}return l[e]?d(l[e]):f()},getNumericLabel:function(k,d,f){var c="";e.doIfLoaded("dojo/number",function(a){c=(f.fixed?a.format(k,{places:0>d?-d:0}):a.format(k))||""},function(){c=f.fixed?k.toFixed(0>d?-d:0):k.toString()});if(f.labelFunc){var b=f.labelFunc(c,k,d);if(b)return b}if(f.labels){for(var b=f.labels,a=0,g=b.length;a<g;){var p=Math.floor((a+g)/2);b[p].value<k?a=p+1:g=p}if(a<b.length&&
m(b[a].value,k))return b[a].text;--a;if(0<=a&&a<b.length&&m(b[a].value,k))return b[a].text;a+=2;if(a<b.length&&m(b[a].value,k))return b[a].text}return c}})})},"dojox/charting/plot2d/Grid":function(){define("dojo/_base/lang dojo/_base/declare dojo/_base/array dojo/sniff ./CartesianBase ./common dojox/lang/utils dojox/gfx/fx".split(" "),function(h,m,e,l,k,d,f,c){var b=function(a,b){return a.value-b.value};return m("dojox.charting.plot2d.Grid",k,{defaultParams:{hMajorLines:!0,hMinorLines:!1,vMajorLines:!0,
vMinorLines:!1,hStripes:!1,vStripes:!1,animate:null,enableCache:!1,renderOnAxis:!0},optionalParams:{majorHLine:{},minorHLine:{},majorVLine:{},minorVLine:{},hFill:{},vFill:{},hAlternateFill:{},vAlternateFill:{}},constructor:function(a,b){this.opt=h.clone(this.defaultParams);f.updateWithObject(this.opt,b);f.updateWithPattern(this.opt,b,this.optionalParams);this.animate=this.opt.animate;this.opt.enableCache&&(this._lineFreePool=[],this._lineUsePool=[],this._rectFreePool=[],this._rectUsePool=[])},addSeries:function(a){return this},
getSeriesStats:function(){return h.delegate(d.defaultStats)},cleanGroup:function(){this.inherited(arguments);this.opt.enableCache&&(this._lineFreePool=this._lineFreePool.concat(this._lineUsePool),this._lineUsePool=[],this._rectFreePool=this._rectFreePool.concat(this._rectUsePool),this._rectUsePool=[])},createLine:function(a,b){var c;this.opt.enableCache&&0<this._lineFreePool.length?(c=this._lineFreePool.pop(),c.setShape(b),a.add(c)):c=a.createLine(b);this.opt.enableCache&&this._lineUsePool.push(c);
return c},createRect:function(a,b){var c;this.opt.enableCache&&0<this._rectFreePool.length?(c=this._rectFreePool.pop(),c.setShape(b),a.add(c)):c=a.createRect(b);this.opt.enableCache&&this._rectUsePool.push(c);return c},render:function(a,b){if(this.zoom)return this.performZoom(a,b);this.dirty=this.isDirty();if(!this.dirty)return this;this.cleanGroup();var c=this.getGroup(),d=this.chart.theme,g;(l("ios")&&6>l("ios")||l("android")||l("safari")&&!l("ios"))&&c.createRect({x:b.l,y:b.t,width:Math.max(0,
a.width-b.l-b.r),height:Math.max(0,a.height-b.t-b.b)});if(this._vAxis){g=this._vAxis.getTicks();var e=this._vAxis.getScaler();if(null!=g&&null!=e){var f=e.scaler.getTransformerFromModel(e);this.opt.hStripes&&this._renderHRect(g,d.grid,a,b,e,f);this.opt.hMinorLines&&(c=this.opt.minorHLine||d.grid&&d.grid.minorLine||d.axis.minorTick,this._renderHLines(g.minor,c,a,b,e,f));this.opt.hMajorLines&&(c=this.opt.majorHLine||d.grid&&d.grid.majorLine||d.axis.majorTick,this._renderHLines(g.major,c,a,b,e,f))}}this._hAxis&&
(g=this._hAxis.getTicks(),e=this._hAxis.getScaler(),null!=g&&null!=e&&(f=e.scaler.getTransformerFromModel(e),this.opt.vStripes&&this._renderVRect(g,d.grid,a,b,e,f),g&&this.opt.vMinorLines&&(c=this.opt.minorVLine||d.grid&&d.grid.minorLine||d.axis.minorTick,this._renderVLines(g.minor,c,a,b,e,f)),g&&this.opt.vMajorLines&&(c=this.opt.majorVLine||d.grid&&d.grid.majorLine||d.axis.majorTick,this._renderVLines(g.major,c,a,b,e,f))));this.dirty=!1;return this},_renderHLines:function(a,b,c,d,f,k){var g=this.getGroup();
e.forEach(a,function(a){if(this.opt.renderOnAxis||a.value!=(this._vAxis.opt.leftBottom?f.bounds.from:f.bounds.to))a=c.height-d.b-k(a.value),a=this.createLine(g,{x1:d.l,y1:a,x2:c.width-d.r,y2:a}).setStroke(b),this.animate&&this._animateGrid(a,"h",d.l,d.r+d.l-c.width)},this)},_renderVLines:function(a,b,c,d,f,k){var g=this.getGroup();e.forEach(a,function(a){if(this.opt.renderOnAxis||a.value!=(this._hAxis.opt.leftBottom?f.bounds.from:f.bounds.to))a=d.l+k(a.value),a=this.createLine(g,{x1:a,y1:d.t,x2:a,
y2:c.height-d.b}).setStroke(b),this.animate&&this._animateGrid(a,"v",c.height-d.b,c.height-d.b-d.t)},this)},_renderHRect:function(a,c,d,e,f,k){var g,n,p;a=a.major.concat(a.minor);a.sort(b);a[0].value>f.bounds.from&&a.splice(0,0,{value:f.bounds.from});a[a.length-1].value<f.bounds.to&&a.push({value:f.bounds.to});f=this.getGroup();for(var h=0;h<a.length-1;h++)if(g=a[h],n=d.height-e.b-k(g.value),p=d.height-e.b-k(a[h+1].value),g=0==h%2?this.opt.hAlternateFill||c&&c.alternateFill:this.opt.hFill||c&&c.fill)g=
this.createRect(f,{x:e.l,y:n,width:d.width-e.r,height:n-p}).setFill(g),this.animate&&this._animateGrid(g,"h",e.l,e.r+e.l-d.width)},_renderVRect:function(a,c,d,e,f,k){var g,n,p;a=a.major.concat(a.minor);a.sort(b);a[0].value>f.bounds.from&&a.splice(0,0,{value:f.bounds.from});a[a.length-1].value<f.bounds.to&&a.push({value:f.bounds.to});f=this.getGroup();for(var h=0;h<a.length-1;h++)if(g=a[h],n=e.l+k(g.value),p=e.l+k(a[h+1].value),g=0==h%2?this.opt.vAlternateFill||c&&c.alternateFill:this.opt.vFill||c&&
c.fill)g=this.createRect(f,{x:n,y:e.t,width:p-n,height:d.width-e.r}).setFill(g),this.animate&&this._animateGrid(g,"v",d.height-e.b,d.height-e.b-e.t)},_animateGrid:function(a,b,d,e){c.animateTransform(h.delegate({shape:a,duration:1200,transform:[{name:"translate",start:"h"==b?[d,0]:[0,d],end:[0,0]},{name:"scale",start:"h"==b?[1/e,1]:[1,1/e],end:[1,1]},{name:"original"}]},this.animate)).play()}})})},"dojox/charting/plot2d/CartesianBase":function(){define("dojo/_base/lang dojo/_base/declare dojo/_base/connect dojo/has ./Base ../scaler/primitive dojox/gfx dojox/gfx/fx dojox/lang/utils".split(" "),
function(h,m,e,l,k,d,f,c,b){var a=function(){return!1};return m("dojox.charting.plot2d.CartesianBase",k,{baseParams:{hAxis:"x",vAxis:"y",labels:!1,labelOffset:10,fixed:!0,precision:1,labelStyle:"inside",htmlLabels:!0,omitLabels:!0,labelFunc:null},constructor:function(a,c){this.axes=["hAxis","vAxis"];this.zoom=null;this.zoomQueue=[];this.lastWindow={vscale:1,hscale:1,xoffset:0,yoffset:0};this.hAxis=c&&c.hAxis||"x";this.vAxis=c&&c.vAxis||"y";this.series=[];this.opt=h.clone(this.baseParams);b.updateWithObject(this.opt,
c)},clear:function(){this.inherited(arguments);this._vAxis=this._hAxis=null;return this},cleanGroup:function(a,b){this.inherited(arguments);if(!b&&this.chart._nativeClip){var c=this.chart.offsets,d=this.chart.dim;this.group.setClip({x:c.l,y:c.t,width:Math.max(0,d.width-c.l-c.r),height:Math.max(0,d.height-c.t-c.b)});this._clippedGroup||(this._clippedGroup=this.group.createGroup())}},purgeGroup:function(){this.inherited(arguments);this._clippedGroup=null},getGroup:function(){return this._clippedGroup||
this.group},setAxis:function(a){a&&(this[a.vertical?"_vAxis":"_hAxis"]=a);return this},toPage:function(a){var b=this._hAxis,c=this._vAxis,d=b.getScaler(),g=c.getScaler(),e=d.scaler.getTransformerFromModel(d),f=g.scaler.getTransformerFromModel(g),k=this.chart.getCoords(),h=this.chart.offsets,l=this.chart.dim,d=function(a){var d={};d.x=e(a[b.name])+k.x+h.l;d.y=k.y+l.height-h.b-f(a[c.name]);return d};return a?d(a):d},toData:function(a){var b=this._hAxis,c=this._vAxis,d=b.getScaler(),g=c.getScaler(),
e=d.scaler.getTransformerFromPlot(d),f=g.scaler.getTransformerFromPlot(g),k=this.chart.getCoords(),h=this.chart.offsets,l=this.chart.dim,d=function(a){var d={};d[b.name]=e(a.x-k.x-h.l);d[c.name]=f(k.y+l.height-a.y-h.b);return d};return a?d(a):d},isDirty:function(){return this.dirty||this._hAxis&&this._hAxis.dirty||this._vAxis&&this._vAxis.dirty},createLabel:function(a,b,c,d){if(this.opt.labels){var g,e=this.opt.labelFunc?this.opt.labelFunc.apply(this,[b,this.opt.fixed,this.opt.precision]):this._getLabel(isNaN(b.y)?
b:b.y);if("inside"==this.opt.labelStyle){var n=f._base._getTextBox(e,{font:d.series.font});b=c.x+c.width/2;g=c.y+c.height/2+n.h/4;if(n.w>c.width||n.h>c.height)return}else b=c.x+c.width/2,g=c.y-this.opt.labelOffset;this.renderLabel(a,b,g,e,d,"inside"==this.opt.labelStyle)}},performZoom:function(a,b){var d=this._vAxis.scale||1,g=this._hAxis.scale||1;a=a.height-b.b;var f=this._hScaler.bounds,f=(f.from-f.lower)*f.scale,p=this._vScaler.bounds,p=(p.from-p.lower)*p.scale,k=d/this.lastWindow.vscale,l=g/this.lastWindow.hscale,
m=(this.lastWindow.xoffset-f)/(1==this.lastWindow.hscale?g:this.lastWindow.hscale),C=(p-this.lastWindow.yoffset)/(1==this.lastWindow.vscale?d:this.lastWindow.vscale),q=this.getGroup();b=c.animateTransform(h.delegate({shape:q,duration:1200,transform:[{name:"translate",start:[0,0],end:[b.l*(1-l),a*(1-k)]},{name:"scale",start:[1,1],end:[l,k]},{name:"original"},{name:"translate",start:[0,0],end:[m,C]}]},this.zoom));h.mixin(this.lastWindow,{vscale:d,hscale:g,xoffset:f,yoffset:p});this.zoomQueue.push(b);
e.connect(b,"onEnd",this,function(){this.zoom=null;this.zoomQueue.shift();0<this.zoomQueue.length&&this.zoomQueue[0].play()});1==this.zoomQueue.length&&this.zoomQueue[0].play();return this},initializeScalers:function(a,b){this._hAxis?(this._hAxis.initialized()||this._hAxis.calculate(b.hmin,b.hmax,a.width),this._hScaler=this._hAxis.getScaler()):this._hScaler=d.buildScaler(b.hmin,b.hmax,a.width);this._vAxis?(this._vAxis.initialized()||this._vAxis.calculate(b.vmin,b.vmax,a.height),this._vScaler=this._vAxis.getScaler()):
this._vScaler=d.buildScaler(b.vmin,b.vmax,a.height);return this},isNullValue:function(b){if(null===b||"undefined"==typeof b)return!0;var c=this._hAxis?this._hAxis.isNullValue:a,d=this._vAxis?this._vAxis.isNullValue:a;return"number"==typeof b?c(1)||d(b):c(isNaN(b.x)?1:b.x)||null===b.y||d(b.y)}})})},"dojox/charting/plot2d/Base":function(){define("dojo/_base/declare dojo/_base/array dojo/_base/lang dojox/gfx ../Element ./common ../axis2d/common dojo/has".split(" "),function(h,m,e,l,k,d,f,c){h=h("dojox.charting.plot2d.Base",
k,{constructor:function(b,a){a&&a.tooltipFunc&&(this.tooltipFunc=a.tooltipFunc)},clear:function(){this.series=[];this.dirty=!0;return this},setAxis:function(b){return this},assignAxes:function(b){m.forEach(this.axes,function(a){this[a]&&this.setAxis(b[this[a]])},this)},addSeries:function(b){this.series.push(b);return this},getSeriesStats:function(){return d.collectSimpleStats(this.series,e.hitch(this,"isNullValue"))},calculateAxes:function(b){this.initializeScalers(b,this.getSeriesStats());return this},
initializeScalers:function(){return this},isDataDirty:function(){return m.some(this.series,function(b){return b.dirty})},render:function(b,a){return this},renderLabel:function(b,a,c,d,e,k,h){b=f.createText[this.opt.htmlLabels&&"vml"!=l.renderer?"html":"gfx"](this.chart,b,a,c,h?h:"middle",d,e.series.font,e.series.fontColor);k&&(this.opt.htmlLabels&&"vml"!=l.renderer?b.style.pointerEvents="none":b.rawNode&&(b.rawNode.style.pointerEvents="none"));this.opt.htmlLabels&&"vml"!=l.renderer&&this.htmlElements.push(b);
return b},getRequiredColors:function(){return this.series.length},_getLabel:function(b){return d.getLabel(b,this.opt.fixed,this.opt.precision)}});c("dojo-bidi")&&h.extend({_checkOrientation:function(b,a,c){this.chart.applyMirroring(this.group,a,c)}});return h})},"dojox/charting/plot2d/common":function(){define("dojo/_base/lang dojo/_base/array dojo/_base/Color dojox/gfx dojox/lang/functional ../scaler/common".split(" "),function(h,m,e,l,k,d){var f=h.getObject("dojox.charting.plot2d.common",!0);return h.mixin(f,
{doIfLoaded:d.doIfLoaded,makeStroke:function(c){if(!c)return c;if("string"==typeof c||c instanceof e)c={color:c};return l.makeParameters(l.defaultStroke,c)},augmentColor:function(c,b){c=new e(c);b=new e(b);b.a=c.a;return b},augmentStroke:function(c,b){if(c=f.makeStroke(c))c.color=f.augmentColor(c.color,b);return c},augmentFill:function(c,b){new e(b);return"string"==typeof c||c instanceof e?f.augmentColor(c,b):c},defaultStats:{vmin:Number.POSITIVE_INFINITY,vmax:Number.NEGATIVE_INFINITY,hmin:Number.POSITIVE_INFINITY,
hmax:Number.NEGATIVE_INFINITY},collectSimpleStats:function(c,b){for(var a=h.delegate(f.defaultStats),d=0;d<c.length;++d)for(var e=c[d],n=0;n<e.data.length;n++)if(!b(e.data[n])){if("number"==typeof e.data[n]){var n=a.vmin,k=a.vmax;m.forEach(e.data,function(c,d){b(c)||(d+=1,isNaN(c)&&(c=0),a.hmin=Math.min(a.hmin,d),a.hmax=Math.max(a.hmax,d),a.vmin=Math.min(a.vmin,c),a.vmax=Math.max(a.vmax,c))})}else{var l=a.hmin,F=a.hmax,n=a.vmin,k=a.vmax;"xmin"in e&&"xmax"in e&&"ymin"in e&&"ymax"in e||m.forEach(e.data,
function(c,d){b(c)||(d="x"in c?c.x:d+1,c=c.y,isNaN(d)&&(d=0),isNaN(c)&&(c=0),a.hmin=Math.min(a.hmin,d),a.hmax=Math.max(a.hmax,d),a.vmin=Math.min(a.vmin,c),a.vmax=Math.max(a.vmax,c))});"xmin"in e&&(a.hmin=Math.min(l,e.xmin));"xmax"in e&&(a.hmax=Math.max(F,e.xmax))}"ymin"in e&&(a.vmin=Math.min(n,e.ymin));"ymax"in e&&(a.vmax=Math.max(k,e.ymax));break}return a},calculateBarSize:function(c,b,a){a||(a=1);var d=(c-2*b.gap)/a;"minBarSize"in b&&(d=Math.max(d,b.minBarSize));"maxBarSize"in b&&(d=Math.min(d,
b.maxBarSize));d=Math.max(d,1);return{size:d,gap:(c-d*a)/2}},collectStackedStats:function(c){var b=h.clone(f.defaultStats);if(c.length){b.hmin=Math.min(b.hmin,1);b.hmax=k.foldl(c,"seed, run -\x3e Math.max(seed, run.data.length)",b.hmax);for(var a=0;a<b.hmax;++a){var d=c[0].data[a],d=d&&("number"==typeof d?d:d.y);isNaN(d)&&(d=0);b.vmin=Math.min(b.vmin,d);for(var e=1;e<c.length;++e){var n=c[e].data[a],n=n&&("number"==typeof n?n:n.y);isNaN(n)&&(n=0);d+=n}b.vmax=Math.max(b.vmax,d)}}return b},curve:function(c,
b){var a=c.slice(0);"x"==b&&(a[a.length]=a[0]);return m.map(a,function(c,d){if(0==d)return"M"+c.x+","+c.y;if(!isNaN(b)){var e=c.x-a[d-1].x;return"C"+(c.x-e/b*(b-1))+","+a[d-1].y+" "+(c.x-e/b)+","+c.y+" "+c.x+","+c.y}if("X"==b||"x"==b||"S"==b){var f;c=a[d-1];var e=a[d],g,k,h;g=1/6;1==d?(f="x"==b?a[a.length-2]:c,g=1/3):f=a[d-2];d==a.length-1?(d="x"==b?a[1]:e,g=1/3):d=a[d+1];var p=Math.sqrt((e.x-c.x)*(e.x-c.x)+(e.y-c.y)*(e.y-c.y));k=Math.sqrt((e.x-f.x)*(e.x-f.x)+(e.y-f.y)*(e.y-f.y));h=Math.sqrt((d.x-
c.x)*(d.x-c.x)+(d.y-c.y)*(d.y-c.y));var l=k*g,m=h*g;l>p/2&&m>p/2?(l=p/2,m=p/2):l>p/2?(l=p/2,m=p/2*h/k):m>p/2&&(m=p/2,l=p/2*k/h);"S"==b&&(f==c&&(l=0),e==d&&(m=0));g=c.x+l*(e.x-f.x)/k;f=c.y+l*(e.y-f.y)/k;k=e.x-m*(d.x-c.x)/h;h=e.y-m*(d.y-c.y)/h}return"C"+(g+","+f+" "+k+","+h+" "+e.x+","+e.y)}).join(" ")},getLabel:function(c,b,a){return d.doIfLoaded("dojo/number",function(d){return(b?d.format(c,{places:a}):d.format(c))||""},function(){return b?c.toFixed(a):c.toString()})}})})},"dojox/charting/scaler/primitive":function(){define(["dojo/_base/lang"],
function(h){var m=h.getObject("dojox.charting.scaler.primitive",!0);return h.mixin(m,{buildScaler:function(e,h,k,d){e==h&&(e-=.5,h+=.5);return{bounds:{lower:e,upper:h,from:e,to:h,scale:k/(h-e),span:k},scaler:m}},buildTicks:function(e,h){return{major:[],minor:[],micro:[]}},getTransformerFromModel:function(e){var h=e.bounds.from,k=e.bounds.scale;return function(d){return(d-h)*k}},getTransformerFromPlot:function(e){var h=e.bounds.from,k=e.bounds.scale;return function(d){return d/k+h}}})})},"dojox/gfx/fx":function(){define("dojo/_base/lang ./_base ./matrix dojo/_base/Color dojo/_base/array dojo/_base/fx dojo/_base/connect dojo/sniff".split(" "),
function(h,m,e,l,k,d,f,c){function b(a,b){this.start=a;this.end=b}function a(a,b,c){this.start=a;this.end=b;this.units=c}function g(a,b){this.start=a;this.end=b;this.temp=new l}function p(a){this.values=a;this.length=a.length}function n(a,b){this.values=a;this.def=b?b:{}}function r(a,b){this.stack=a;this.original=b}function E(a,b,c,d){if(a.values)return new p(a.values);var e,f;f=a.start?m.normalizeColor(a.start):e=b?c?b[c]:b:d;a.end?a=m.normalizeColor(a.end):(e||(e=b?c?b[c]:b:d),a=e);return new g(f,
a)}var F=m.fx={};b.prototype.getValue=function(a){return(this.end-this.start)*a+this.start};a.prototype.getValue=function(a){return(this.end-this.start)*a+this.start+this.units};g.prototype.getValue=function(a){return l.blendColors(this.start,this.end,a,this.temp)};p.prototype.getValue=function(a){return this.values[Math.min(Math.floor(a*this.length),this.length-1)]};n.prototype.getValue=function(a){var b=h.clone(this.def),c;for(c in this.values)b[c]=this.values[c].getValue(a);return b};r.prototype.getValue=
function(a){var b=[];k.forEach(this.stack,function(c){if(c instanceof e.Matrix2D)b.push(c);else if("original"==c.name&&this.original)b.push(this.original);else if("matrix"==c.name){if(c.start instanceof e.Matrix2D&&c.end instanceof e.Matrix2D){var d=new e.Matrix2D,f;for(f in c.start)d[f]=(c.end[f]-c.start[f])*a+c.start[f];b.push(d)}}else c.name in e&&(d=e[c.name],"function"!=typeof d?b.push(d):(f=k.map(c.start,function(b,d){return(c.end[d]-b)*a+b}),d=d.apply(e,f),d instanceof e.Matrix2D&&b.push(d)))},
this);return b};var L=new l(0,0,0,0);F.animateStroke=function(a){a.easing||(a.easing=d._defaultEasing);var c=new d.Animation(a),e=a.shape,g;f.connect(c,"beforeBegin",c,function(){g=e.getStroke();var c=a.color,d={},f;c&&(d.color=E(c,g,"color",L));(c=a.style)&&c.values&&(d.style=new p(c.values));if(c=a.width){var h=c,k=g;h.values?f=new p(h.values):(c=h.start?h.start:f=k?k.width:1,h.end?f=h.end:"number"!=typeof f&&(f=k?k.width:1),f=new b(c,f));d.width=f}(c=a.cap)&&c.values&&(d.cap=new p(c.values));if(c=
a.join)c.values?d.join=new p(c.values):(f=c.start?c.start:g&&g.join||0,c=c.end?c.end:g&&g.join||0,"number"==typeof f&&"number"==typeof c&&(d.join=new b(f,c)));this.curve=new n(d,g)});f.connect(c,"onAnimate",e,"setStroke");return c};F.animateFill=function(a){a.easing||(a.easing=d._defaultEasing);var b=new d.Animation(a),c=a.shape,e;f.connect(b,"beforeBegin",b,function(){e=c.getFill();var b=a.color;b&&(this.curve=E(b,e,"",L))});f.connect(b,"onAnimate",c,"setFill");return b};F.animateFont=function(b){b.easing||
(b.easing=d._defaultEasing);var c=new d.Animation(b),e=b.shape,g;f.connect(c,"beforeBegin",c,function(){g=e.getFont();var c=b.style,d={},f,h;c&&c.values&&(d.style=new p(c.values));(c=b.variant)&&c.values&&(d.variant=new p(c.values));(c=b.weight)&&c.values&&(d.weight=new p(c.values));(c=b.family)&&c.values&&(d.family=new p(c.values));(c=b.size)&&c.units&&(f=parseFloat(c.start?c.start:e.font&&e.font.size||"0"),h=parseFloat(c.end?c.end:e.font&&e.font.size||"0"),d.size=new a(f,h,c.units));this.curve=
new n(d,g)});f.connect(c,"onAnimate",e,"setFont");return c};F.animateTransform=function(a){a.easing||(a.easing=d._defaultEasing);var b=new d.Animation(a),e=a.shape,g;f.connect(b,"beforeBegin",b,function(){g=e.getTransform();this.curve=new r(a.transform,g)});f.connect(b,"onAnimate",e,"setTransform");if("svg"===m.renderer&&(9<=c("ie")||c("ff")))var n=[f.connect(b,"onBegin",b,function(){for(var a=e.getParent();a&&a.getParent;)a=a.getParent();a&&(e.__svgContainer=a.rawNode.parentNode,e.__svgRoot=a.rawNode,
e.__svgRoot&&e.__svgRoot.getAttribute&&(e.__svgWidth=parseInt(e.__svgRoot.getAttribute("width"),10),isNaN(e.__svgWidth)&&delete e.__svgWidth))}),f.connect(b,"onAnimate",b,function(){try{if(e.__svgContainer){var a=e.__svgContainer.style.visibility;e.__svgContainer.style.visibility="visible";e.__svgContainer.style.visibility=a;var b=e.__svgWidth;if(!isNaN(b))try{e.__svgRoot.setAttribute("width",b-5E-6),e.__svgRoot.setAttribute("width",b)}catch(G){}}}catch(G){}}),f.connect(b,"onEnd",b,function(){k.forEach(n,
f.disconnect);if(e.__svgContainer){var a=e.__svgContainer;if(null==a.getAttribute("__gotVis")){a.setAttribute("__gotVis",!0);var b=e.__svgContainer.style.visibility,c=e.__svgRoot,d=e.__svgWidth;a.style.visibility="visible";setTimeout(function(){try{a.style.visibility=b;a.removeAttribute("__gotVis");a=null;try{isNaN(d)||(c.setAttribute("width",d-5E-6),c.setAttribute("width",d))}catch(A){}}catch(A){}},100)}}delete e.__svgContainer;delete e.__svgRoot;delete e.__svgWidth})];return b};return F})},"dojox/charting/plot2d/Areas":function(){define(["dojo/_base/declare",
"./Default"],function(h,m){return h("dojox.charting.plot2d.Areas",m,{constructor:function(){this.opt.lines=!0;this.opt.areas=!0}})})},"dojox/charting/plot2d/Default":function(){define("dojo/_base/lang dojo/_base/declare dojo/_base/array dojo/has ./CartesianBase ./_PlotEvents ./common dojox/lang/functional dojox/lang/functional/reversed dojox/lang/utils dojox/gfx/fx".split(" "),function(h,m,e,l,k,d,f,c,b,a,g){var p=b.lambda("item.purgeGroup()");return m("dojox.charting.plot2d.Default",[k,d],{defaultParams:{lines:!0,
areas:!1,markers:!1,tension:"",animate:!1,enableCache:!1,interpolate:!1},optionalParams:{stroke:{},outline:{},shadow:{},fill:{},filter:{},styleFunc:null,font:"",fontColor:"",marker:"",markerStroke:{},markerOutline:{},markerShadow:{},markerFill:{},markerFont:"",markerFontColor:"",zeroLine:0},constructor:function(b,c){this.opt=h.clone(h.mixin(this.opt,this.defaultParams));a.updateWithObject(this.opt,c);a.updateWithPattern(this.opt,c,this.optionalParams);this.animate=this.opt.animate},createPath:function(a,
b,c){var d;this.opt.enableCache&&0<a._pathFreePool.length?(d=a._pathFreePool.pop(),d.setShape(c),b.add(d)):d=b.createPath(c);this.opt.enableCache&&a._pathUsePool.push(d);return d},buildSegments:function(a,b){a=this.series[a];for(var c=b?Math.min(a.data.length,Math.ceil(this._hScaler.bounds.to)):a.data.length,d=null,e=[],f=b?Math.max(0,Math.floor(this._hScaler.bounds.from-1)):0;f<c;f++)if(!this.isNullValue(a.data[f]))d||(d=[],e.push({index:f,rseg:d})),d.push(b&&a.data[f].hasOwnProperty("y")?a.data[f].y:
a.data[f]);else if(!this.opt.interpolate||b)d=null;return e},render:function(a,b){if(this.zoom&&!this.isDataDirty())return this.performZoom(a,b);this.resetEvents();this.dirty=this.isDirty();var d;this.dirty&&(e.forEach(this.series,p),this._eventSeries={},this.cleanGroup(),this.getGroup().setTransform(null),d=this.getGroup(),c.forEachRev(this.series,function(a){a.cleanGroup(d)}));for(var n=this.chart.theme,k,m,r=this.events(),C=0;C<this.series.length;C++){var q=this.series[C];if(this.dirty||q.dirty)if(q.cleanGroup(),
this.opt.enableCache&&(q._pathFreePool=(q._pathFreePool?q._pathFreePool:[]).concat(q._pathUsePool?q._pathUsePool:[]),q._pathUsePool=[]),q.data.length){var B=n.next(this.opt.areas?"area":"line",[this.opt,q],!0),y,w=this._hScaler.scaler.getTransformerFromModel(this._hScaler),G=this._vScaler.scaler.getTransformerFromModel(this._vScaler),u=this._eventSeries[q.name]=Array(q.data.length);d=q.group;if(q.hidden){this.opt.lines&&(q.dyn.stroke=B.series.stroke);if(q.markers||void 0===q.markers&&this.opt.markers)q.dyn.markerFill=
B.marker.fill,q.dyn.markerStroke=B.marker.stroke,q.dyn.marker=B.symbol;this.opt.areas&&(q.dyn.fill=B.series.fill)}else{for(var A=e.some(q.data,function(a){return"number"==typeof a||a&&!a.hasOwnProperty("x")}),z=this.buildSegments(C,A),U=0;U<z.length;U++){var N=z[U];y=A?e.map(N.rseg,function(c,d){return{x:w(d+N.index+1)+b.l,y:a.height-b.b-G(c),data:c}},this):e.map(N.rseg,function(c){return{x:w(c.x)+b.l,y:a.height-b.b-G(c.y),data:c}},this);if(A&&this.opt.interpolate)for(;U<z.length;)U++,(N=z[U])&&(y=
y.concat(e.map(N.rseg,function(c,d){return{x:w(d+N.index+1)+b.l,y:a.height-b.b-G(c),data:c}},this)));var x=this.opt.tension?f.curve(y,this.opt.tension):"";if(this.opt.areas&&1<y.length){var R=this._plotFill(B.series.fill,a,b),P=h.clone(y),v=a.height-b.b;isNaN(this.opt.zeroLine)||(v=Math.max(b.t,Math.min(a.height-b.b-G(this.opt.zeroLine),v)));this.opt.tension?q.dyn.fill=d.createPath(x+" "+("L"+P[P.length-1].x+","+v+" L"+P[0].x+","+v+" L"+P[0].x+","+P[0].y)).setFill(R).getFill():(P.push({x:y[y.length-
1].x,y:v}),P.push({x:y[0].x,y:v}),P.push(y[0]),q.dyn.fill=d.createPolyline(P).setFill(R).getFill())}if(this.opt.lines||this.opt.markers)k=B.series.stroke,B.series.outline&&(m=q.dyn.outline=f.makeStroke(B.series.outline),m.width=2*m.width+(k&&k.width||0));this.opt.markers&&(q.dyn.marker=B.symbol);var H=null,J=null,D=null;if(k&&B.series.shadow&&1<y.length){var M=B.series.shadow,R=e.map(y,function(a){return{x:a.x+M.dx,y:a.y+M.dy}});this.opt.lines&&(q.dyn.shadow=this.opt.tension?d.createPath(f.curve(R,
this.opt.tension)).setStroke(M).getStroke():d.createPolyline(R).setStroke(M).getStroke());this.opt.markers&&B.marker.shadow&&(M=B.marker.shadow,D=e.map(R,function(a){return this.createPath(q,d,"M"+a.x+" "+a.y+" "+B.symbol).setStroke(M).setFill(M.color)},this))}if(this.opt.lines&&1<y.length){var V;m&&(q.dyn.outline=this.opt.tension?d.createPath(x).setStroke(m).getStroke():d.createPolyline(y).setStroke(m).getStroke());q.dyn.stroke=this.opt.tension?(V=d.createPath(x)).setStroke(k).getStroke():(V=d.createPolyline(y)).setStroke(k).getStroke();
V.setFilter&&B.series.filter&&V.setFilter(B.series.filter)}x=null;if(this.opt.markers){var Q=B,H=Array(y.length),J=Array(y.length);m=null;Q.marker.outline&&(m=f.makeStroke(Q.marker.outline),m.width=2*m.width+(Q.marker.stroke?Q.marker.stroke.width:0));e.forEach(y,function(a,b){if(this.opt.styleFunc||"number"!=typeof a.data){var c="number"!=typeof a.data?[a.data]:[];this.opt.styleFunc&&c.push(this.opt.styleFunc(a.data));Q=n.addMixin(B,"marker",c,!0)}else Q=n.post(B,"marker");a="M"+a.x+" "+a.y+" "+Q.symbol;
m&&(J[b]=this.createPath(q,d,a).setStroke(m));H[b]=this.createPath(q,d,a).setStroke(Q.marker.stroke).setFill(Q.marker.fill)},this);q.dyn.markerFill=Q.marker.fill;q.dyn.markerStroke=Q.marker.stroke;!x&&this.opt.labels&&(x=H[0].getBoundingBox());r?e.forEach(H,function(a,b){a={element:"marker",index:b+N.index,run:q,shape:a,outline:J[b]||null,shadow:D&&D[b]||null,cx:y[b].x,cy:y[b].y};A?(a.x=b+N.index+1,a.y=q.data[b+N.index]):(a.x=N.rseg[b].x,a.y=q.data[b+N.index].y);this._connectEvents(a);u[b+N.index]=
a},this):delete this._eventSeries[q.name]}if(this.opt.labels){var S=x?x.width:2,T=x?x.height:2;e.forEach(y,function(a,b){if(this.opt.styleFunc||"number"!=typeof a.data){var c="number"!=typeof a.data?[a.data]:[];this.opt.styleFunc&&c.push(this.opt.styleFunc(a.data));Q=n.addMixin(B,"marker",c,!0)}else Q=n.post(B,"marker");this.createLabel(d,N.rseg[b],{x:a.x-S/2,y:a.y-T/2,width:S,height:T},Q)},this)}}q.dirty=!1}}else q.dirty=!1,n.skip();else n.skip(),this._reconnectEvents(q.name)}l("dojo-bidi")&&this._checkOrientation(this.group,
a,b);this.animate&&(k=this.getGroup(),g.animateTransform(h.delegate({shape:k,duration:1200,transform:[{name:"translate",start:[0,a.height-b.b],end:[0,0]},{name:"scale",start:[1,0],end:[1,1]},{name:"original"}]},this.animate)).play());this.dirty=!1;return this}})})},"dojox/charting/plot2d/_PlotEvents":function(){define(["dojo/_base/lang","dojo/_base/array","dojo/_base/declare","dojo/_base/connect"],function(h,m,e,l){return e("dojox.charting.plot2d._PlotEvents",null,{constructor:function(){this._shapeEvents=
[];this._eventSeries={}},destroy:function(){this.resetEvents();this.inherited(arguments)},plotEvent:function(e){},raiseEvent:function(e){this.plotEvent(e);var d=h.delegate(e);d.originalEvent=e.type;d.originalPlot=e.plot;d.type="onindirect";m.forEach(this.chart.stack,function(e){e!==this&&e.plotEvent&&(d.plot=e,e.plotEvent(d))},this)},connect:function(e,d){this.dirty=!0;return l.connect(this,"plotEvent",e,d)},events:function(){return!!this.plotEvent.after},resetEvents:function(){this._shapeEvents.length&&
(m.forEach(this._shapeEvents,function(e){e.shape.disconnect(e.handle)}),this._shapeEvents=[]);this.raiseEvent({type:"onplotreset",plot:this})},_connectSingleEvent:function(e,d){this._shapeEvents.push({shape:e.eventMask,handle:e.eventMask.connect(d,this,function(f){e.type=d;e.event=f;this.raiseEvent(e);e.event=null})})},_connectEvents:function(e){e&&(e.chart=this.chart,e.plot=this,e.hAxis=this.hAxis||null,e.vAxis=this.vAxis||null,e.eventMask=e.eventMask||e.shape,this._connectSingleEvent(e,"onmouseover"),
this._connectSingleEvent(e,"onmouseout"),this._connectSingleEvent(e,"onclick"))},_reconnectEvents:function(e){(e=this._eventSeries[e])&&m.forEach(e,this._connectEvents,this)},fireEvent:function(e,d,f,c){(e=this._eventSeries[e])&&e.length&&f<e.length&&(f=e[f],f.type=d,f.event=c||null,this.raiseEvent(f),f.event=null)}})})},"dojox/charting/action2d/MouseIndicator":function(){define("dojo/_base/lang dojo/_base/declare dojo/_base/connect dojo/_base/window dojo/sniff ./ChartAction ./_IndicatorElement dojox/lang/utils dojo/_base/event dojo/_base/array".split(" "),
function(h,m,e,l,k,d,f,c,b,a){return m("dojox.charting.action2d.MouseIndicator",d,{defaultParams:{series:"",vertical:!0,autoScroll:!0,fixed:!0,precision:0,lines:!0,labels:!0,markers:!0},optionalParams:{lineStroke:{},outlineStroke:{},shadowStroke:{},lineFill:{},stroke:{},outline:{},shadow:{},fill:{},fillFunc:null,labelFunc:null,font:"",fontColor:"",markerStroke:{},markerOutline:{},markerShadow:{},markerFill:{},markerSymbol:"",offset:{},start:!1,mouseOver:!1},constructor:function(a,b,d){this.opt=h.clone(this.defaultParams);
c.updateWithObject(this.opt,d);c.updateWithPattern(this.opt,d,this.optionalParams);this._listeners=this.opt.mouseOver?[{eventName:"onmousemove",methodName:"onMouseMove"}]:[{eventName:"onmousedown",methodName:"onMouseDown"}];this._uName="mouseIndicator"+this.opt.series;this._handles=[];this.connect()},_disconnectHandles:function(){k("ie")&&this.chart.node.releaseCapture();a.forEach(this._handles,e.disconnect);this._handles=[]},connect:function(){this.inherited(arguments);this.chart.addPlot(this._uName,
{type:f,inter:this})},disconnect:function(){if(this._isMouseDown)this.onMouseUp();this.chart.removePlot(this._uName);this.inherited(arguments);this._disconnectHandles()},onChange:function(a){},onMouseDown:function(a){this._isMouseDown=!0;k("ie")?(this._handles.push(e.connect(this.chart.node,"onmousemove",this,"onMouseMove")),this._handles.push(e.connect(this.chart.node,"onmouseup",this,"onMouseUp")),this.chart.node.setCapture()):(this._handles.push(e.connect(l.doc,"onmousemove",this,"onMouseMove")),
this._handles.push(e.connect(l.doc,"onmouseup",this,"onMouseUp")));this._onMouseSingle(a)},onMouseMove:function(a){(this._isMouseDown||this.opt.mouseOver)&&this._onMouseSingle(a)},_onMouseSingle:function(a){var c=this.chart.getPlot(this._uName);c.pageCoord={x:a.pageX,y:a.pageY};c.dirty=!0;this.chart.render();b.stop(a)},onMouseUp:function(a){a=this.chart.getPlot(this._uName);a.stopTrack();this._isMouseDown=!1;this._disconnectHandles();a.pageCoord=null;a.dirty=!0;this.chart.render()}})})},"dojox/charting/action2d/ChartAction":function(){define(["dojo/_base/connect",
"dojo/_base/declare","./Base"],function(h,m,e){return m("dojox.charting.action2d.ChartAction",e,{constructor:function(e,h){},connect:function(){for(var e=0;e<this._listeners.length;++e)this._listeners[e].handle=h.connect(this.chart.node,this._listeners[e].eventName,this,this._listeners[e].methodName)},disconnect:function(){for(var e=0;e<this._listeners.length;++e)h.disconnect(this._listeners[e].handle),delete this._listeners[e].handle}})})},"dojox/charting/action2d/Base":function(){define(["dojo/_base/lang",
"dojo/_base/declare","dojo/Evented"],function(h,m,e){return m("dojox.charting.action2d.Base",e,{constructor:function(e,k){this.chart=e;this.plot=k?h.isString(k)?this.chart.getPlot(k):k:this.chart.getPlot("default")},connect:function(){},disconnect:function(){},destroy:function(){this.disconnect()}})})},"dojox/charting/action2d/_IndicatorElement":function(){define("dojo/_base/lang dojo/_base/array dojo/_base/declare ../plot2d/Indicator dojo/has ../plot2d/common ../axis2d/common dojox/gfx".split(" "),
function(h,m,e,l,k){var d=function(d,c,b){var a,e=d?{x:c[0],y:b[0][0]}:{x:b[0][0],y:c[0]};1<c.length&&(a=d?{x:c[1],y:b[1][0]}:{x:b[1][0],y:c[1]});return[e,a]};e=e("dojox.charting.action2d._IndicatorElement",l,{constructor:function(d,c){c||(c={});this.inter=c.inter},_updateVisibility:function(d,c,b){var a="x"==b?this._hAxis:this._vAxis,e=a.getWindowScale();this.chart.setAxisWindow(a.name,e,a.getWindowOffset()+(d[b]-c[b])/e);this._noDirty=!0;this.chart.render();this._noDirty=!1;this._initTrack()},_trackMove:function(){this._updateIndicator(this.pageCoord);
this._tracker=setTimeout(h.hitch(this,this._trackMove),100)},_initTrack:function(){this._tracker||(this._tracker=setTimeout(h.hitch(this,this._trackMove),500))},stopTrack:function(){this._tracker&&(clearTimeout(this._tracker),this._tracker=null)},render:function(){if(this.isDirty()){var e=this.inter,c=e.plot,b=e.opt.vertical;this.opt.offset=e.opt.offset||(b?{x:0,y:5}:{x:5,y:0});e.opt.labelFunc&&(this.opt.labelFunc=function(a,c,f,n,h){a=d(b,c,f);return e.opt.labelFunc(a[0],a[1],n,h)});e.opt.fillFunc&&
(this.opt.fillFunc=function(a,c,f){a=d(b,c,f);return e.opt.fillFunc(a[0],a[1])});this.opt=h.delegate(e.opt,this.opt);this.pageCoord?(this.opt.values=[],this.opt.labels=this.secondCoord?"trend":"markers"):(this.opt.values=null,this.inter.onChange({}));this.hAxis=c.hAxis;this.vAxis=c.vAxis;this.inherited(arguments)}},_updateIndicator:function(){var d=this._updateCoordinates(this.pageCoord,this.secondCoord);if(1<d.length){var c=this.opt.vertical;this._data=[];this.opt.values=[];m.forEach(d,function(b){b&&
(this.opt.values.push(c?b.x:b.y),this._data.push([c?b.y:b.x]))},this);this.inherited(arguments)}else this.inter.onChange({})},_renderText:function(e,c,b,a,g,h,n,k){this.inter.opt.labels&&this.inherited(arguments);var f=d(this.opt.vertical,n,k);this.inter.onChange({start:f[0],end:f[1],label:c})},_updateCoordinates:function(d,c){k("dojo-bidi")&&this._checkXCoords(d,c);var b=this.inter,a=b.plot,e=b.opt.vertical,f=this.chart.getAxis(a.hAxis),n=this.chart.getAxis(a.vAxis),h=f.name,l=n.name,m=f.getScaler().bounds,
L=n.getScaler().bounds,n=e?"x":"y",f=e?h:l,t=e?m:L;if(c){var I;e?d.x>c.x&&(I=c,c=d,d=I):d.y>c.y&&(I=c,c=d,d=I)}var C=a.toData(d),q;c&&(q=a.toData(c));var B={};B[h]=m.from;B[l]=L.from;I=a.toPage(B);B[h]=m.to;B[l]=L.to;h=a.toPage(B);if(C[f]<t.from){if(q||!b.opt.autoScroll||b.opt.mouseOver){if(b.opt.mouseOver)return[];d[n]=I[n]}else return this._updateVisibility(d,I,n),[];C=a.toData(d)}else if(C[f]>t.to){if(q||!b.opt.autoScroll||b.opt.mouseOver){if(b.opt.mouseOver)return[];d[n]=h[n]}else return this._updateVisibility(d,
h,n),[];C=a.toData(d)}d=this._snapData(C,n,e);var y;if(null==d.y)return[];c&&(q[f]<t.from?(c[n]=I[n],q=a.toData(c)):q[f]>t.to&&(c[n]=h[n],q=a.toData(c)),y=this._snapData(q,n,e),null==y.y&&(y=null));return[d,y]},_snapData:function(d,c,b){var a=this.chart.getSeries(this.inter.opt.series).data,e,f,n=a.length;for(e=0;e<n;++e)if(f=a[e],null!=f)if("number"==typeof f){if(e+1>d[c])break}else if(f[c]>d[c])break;var h,k;"number"==typeof f?(n=e+1,0<e&&(h=e,k=a[e-1])):(n=f.x,f=f.y,0<e&&(h=a[e-1].x,k=a[e-1].y));
0<e&&d[c]<=(b?(n+h)/2:(f+k)/2)&&(n=h,f=k);return{x:n,y:f}},cleanGroup:function(d){this.inherited(arguments);this.group.moveToFront();return this},isDirty:function(){return!this._noDirty&&(this.dirty||this.inter.plot.isDirty())}});k("dojo-bidi")&&e.extend({_checkXCoords:function(d,c){if(this.chart.isRightToLeft()&&this.isDirty()){var b=function(b,c){return b.chart.dim.width+(b.chart.offsets.l-b.chart.offsets.r)-(c.x-a)+a},a=this.chart.node.offsetLeft;d&&(d.x=b(this,d));c&&(c.x=b(this,c))}}});return e})},
"dojox/charting/plot2d/Indicator":function(){define("dojo/_base/lang dojo/_base/array dojo/_base/declare ./CartesianBase ./_PlotEvents ./common ../axis2d/common dojox/gfx dojox/lang/utils dojox/gfx/fx dojo/has".split(" "),function(h,m,e,l,k,d,f,c,b,a,g){var p=function(a,b){b=a.declaredClass;var d;if(-1!=b.indexOf("svg"))try{return h.mixin({},a.rawNode.getBBox())}catch(I){}else{if(-1!=b.indexOf("vml")){var e=a.rawNode,f=e.style.display;e.style.display="inline";b=c.pt2px(parseFloat(e.currentStyle.width));
d=c.pt2px(parseFloat(e.currentStyle.height));b={x:0,y:0,width:b,height:d};n(a,b);e.style.display=f;return b}if(-1!=b.indexOf("silverlight"))return n(a,{width:a.rawNode.actualWidth,height:a.rawNode.actualHeight},.75);if(a.getTextWidth)return b=a.getTextWidth(),e=a.getFont(),d=c.normalizedLength(e?e.size:c.defaultFont.size),b={width:b,height:d},n(a,b,.75),b}return null},n=function(a,b,c){var d=b.width,e=b.height;a=a.getShape();switch(a.align){case "end":b.x=a.x-d;break;case "middle":b.x=a.x-d/2;break;
default:b.x=a.x}b.y=a.y-e*(c||1);return b};e=e("dojox.charting.plot2d.Indicator",[l,k],{defaultParams:{vertical:!0,fixed:!0,precision:0,lines:!0,labels:"line",markers:!0},optionalParams:{lineStroke:{},outlineStroke:{},shadowStroke:{},lineFill:{},stroke:{},outline:{},shadow:{},fill:{},fillFunc:null,labelFunc:null,font:"",fontColor:"",markerStroke:{},markerOutline:{},markerShadow:{},markerFill:{},markerSymbol:"",values:[],offset:{},start:!1,animate:!1},constructor:function(a,c){this.opt=h.clone(this.defaultParams);
b.updateWithObject(this.opt,c);"number"==typeof c.values&&(c.values=[c.values]);b.updateWithPattern(this.opt,c,this.optionalParams);this.animate=this.opt.animate},render:function(a,b){if(this.zoom)return this.performZoom(a,b);if(!this.isDirty())return this;this.cleanGroup(null,!0);if(!this.opt.values)return this;this._updateIndicator();return this},_updateIndicator:function(){var a=this.chart.theme,b=this._hAxis.name,c=this._vAxis.name,e=this._hAxis.getScaler().bounds,f=this._vAxis.getScaler().bounds,
g={};g[b]=e.from;g[c]=f.from;var n=this.toPage(g);g[b]=e.to;g[c]=f.to;var h=this.toPage(g),k=this.events(),e=m.map(this.opt.values,function(a,d){return this._renderIndicator(a,d,b,c,n,h,k,this.animate)},this),f=e.length;if("trend"==this.opt.labels){var g=this.opt.vertical,l=this._data[0][0],p=this._data[f-1][0]-l,l=this.opt.labelFunc?this.opt.labelFunc(-1,this.values,this._data,this.opt.fixed,this.opt.precision):d.getLabel(p,this.opt.fixed,this.opt.precision)+" ("+d.getLabel(100*p/l,!0,2)+"%)";this._renderText(this.getGroup(),
l,this.chart.theme,g?(e[0].x+e[f-1].x)/2:e[1].x,g?e[0].y:(e[1].y+e[f-1].y)/2,-1,this.opt.values,this._data)}(a=void 0!=this.opt.lineFill?this.opt.lineFill:a.indicator.lineFill)&&1<f&&(g=Math.min(e[0].x1,e[f-1].x1),l=Math.min(e[0].y1,e[f-1].y1),this.getGroup().createRect({x:g,y:l,width:Math.max(e[0].x2,e[f-1].x2)-g,height:Math.max(e[0].y2,e[f-1].y2)-l}).setFill(a).moveToBack())},_renderIndicator:function(a,b,c,e,f,n,k,l){var p=this.chart.theme,r=this.chart.getCoords(),w=this.opt.vertical,q=this.getGroup().createGroup(),
u={};u[c]=w?a:0;u[e]=w?0:a;g("dojo-bidi")&&(u.x=this._getMarkX(u.x));var u=this.toPage(u),t=w?u.x>=f.x&&u.x<=n.x:u.y>=n.y&&u.y<=f.y,L=u.x-r.x,E=u.y-r.y,C=w?L:f.x-r.x,x=w?f.y-r.y:E,I=w?C:n.x-r.x,F=w?n.y-r.y:x;if(this.opt.lines&&t){var v=this.opt.hasOwnProperty("lineShadow")?this.opt.lineShadow:p.indicator.lineShadow,H=this.opt.hasOwnProperty("lineStroke")?this.opt.lineStroke:p.indicator.lineStroke,J=this.opt.hasOwnProperty("lineOutline")?this.opt.lineOutline:p.indicator.lineOutline;v&&q.createLine({x1:C+
v.dx,y1:x+v.dy,x2:I+v.dx,y2:F+v.dy}).setStroke(v);J&&(J=d.makeStroke(J),J.width=2*J.width+(H?H.width:0),q.createLine({x1:C,y1:x,x2:I,y2:F}).setStroke(J));q.createLine({x1:C,y1:x,x2:I,y2:F}).setStroke(H)}var D;if(this.opt.markers&&t){var M=this._data[b],V=this;M&&(D=m.map(M,function(b,h){u[c]=w?a:b;u[e]=w?b:a;g("dojo-bidi")&&(u.x=V._getMarkX(u.x));u=this.toPage(u);if(w?u.y<=f.y&&u.y>=n.y:u.x>=f.x&&u.x<=n.x){L=u.x-r.x;E=u.y-r.y;h=this.opt.markerSymbol?this.opt.markerSymbol:p.indicator.markerSymbol;
var T="M"+L+" "+E+" "+h;v=void 0!=this.opt.markerShadow?this.opt.markerShadow:p.indicator.markerShadow;H=void 0!=this.opt.markerStroke?this.opt.markerStroke:p.indicator.markerStroke;J=void 0!=this.opt.markerOutline?this.opt.markerOutline:p.indicator.markerOutline;v&&q.createPath("M"+(L+v.dx)+" "+(E+v.dy)+" "+h).setFill(v.color).setStroke(v);J&&(J=d.makeStroke(J),J.width=2*J.width+(H?H.width:0),q.createPath(T).setStroke(J));h=q.createPath(T);T=this._shapeFill(void 0!=this.opt.markerFill?this.opt.markerFill:
p.indicator.markerFill,h.getBoundingBox());h.setFill(T).setStroke(H)}return b},this))}M=this.opt.start?{x:C,y:w?x:F}:{x:w?C:I,y:w?F:x};this.opt.labels&&"trend"!=this.opt.labels&&t&&(this.opt.labelFunc?t=this.opt.labelFunc(b,this.opt.values,this._data,this.opt.fixed,this.opt.precision,this.opt.labels):"markers"==this.opt.labels?(t=m.map(D,function(a){return d.getLabel(a,this.opt.fixed,this.opt.precision)},this),t=1!=t.length?"[ "+t.join(", ")+" ]":t[0]):t=d.getLabel(a,this.opt.fixed,this.opt.precision),
this._renderText(q,t,p,M.x,M.y,b,this.opt.values,this._data));k&&this._connectEvents({element:"indicator",run:this.run?this.run[b]:void 0,shape:q,value:a});l&&this._animateIndicator(q,w,w?x:C,w?x+F:C+I,l);return h.mixin(M,{x1:C,y1:x,x2:I,y2:F})},_animateIndicator:function(b,c,d,e,f){a.animateTransform(h.delegate({shape:b,duration:1200,transform:[{name:"translate",start:c?[0,d]:[d,0],end:[0,0]},{name:"scale",start:c?[1,1/e]:[1/e,1],end:[1,1]},{name:"original"}]},f)).play()},clear:function(){this.inherited(arguments);
this._data=[]},addSeries:function(a){this.inherited(arguments);this._data.push(a.data)},_renderText:function(a,b,c,e,g,n,h,k){this.opt.offset&&(e+=this.opt.offset.x,g+=this.opt.offset.y);b=f.createText.gfx(this.chart,a,e,g,this.opt.vertical?"middle":this.opt.start?"start":"end",b,this.opt.font?this.opt.font:c.indicator.font,this.opt.fontColor?this.opt.fontColor:c.indicator.fontColor);e=p(b,b.getShape().text);this.opt.vertical&&!this.opt.start&&(e.y+=e.height/2,b.setShape({y:g+e.height/2}));e.x-=2;
--e.y;e.width+=4;e.height+=2;e.r=this.opt.radius?this.opt.radius:c.indicator.radius;var l=void 0!=this.opt.shadow?this.opt.shadow:c.indicator.shadow;g=void 0!=this.opt.stroke?this.opt.stroke:c.indicator.stroke;var m=void 0!=this.opt.outline?this.opt.outline:c.indicator.outline;l&&a.createRect(e).setFill(l.color).setStroke(l);m&&(m=d.makeStroke(m),m.width=2*m.width+(g?g.width:0),a.createRect(e).setStroke(m));c=this.opt.fillFunc?this.opt.fillFunc(n,h,k):void 0!=this.opt.fill?this.opt.fill:c.indicator.fill;
a.createRect(e).setFill(this._shapeFill(c,e)).setStroke(g);b.moveToFront()},getSeriesStats:function(){return h.delegate(d.defaultStats)}});g("dojo-bidi")&&e.extend({_getMarkX:function(a){return this.chart.isRightToLeft()?this.chart.axes.x.scaler.bounds.to+this.chart.axes.x.scaler.bounds.from-a:a}});return e})},"dojox/charting/action2d/TouchIndicator":function(){define("dojo/_base/lang dojo/_base/declare dojo/_base/event dojo/has dojo/touch dojo/_base/connect ./ChartAction ./_IndicatorElement dojox/lang/utils".split(" "),
function(h,m,e,l,k,d,f,c,b){return m("dojox.charting.action2d.TouchIndicator",f,{defaultParams:{series:"",dualIndicator:!1,vertical:!0,autoScroll:!0,fixed:!0,precision:0,lines:!0,labels:!0,markers:!0},optionalParams:{lineStroke:{},outlineStroke:{},shadowStroke:{},lineFill:{},stroke:{},outline:{},shadow:{},fill:{},fillFunc:null,labelFunc:null,font:"",fontColor:"",markerStroke:{},markerOutline:{},markerShadow:{},markerFill:{},markerSymbol:"",offset:{},start:!1},constructor:function(a,c,d){l("touch-events")?
this._listeners=[{eventName:"touchstart",methodName:"onTouchStart"},{eventName:"touchmove",methodName:"onTouchMove"},{eventName:"touchend",methodName:"onTouchEnd"},{eventName:"touchcancel",methodName:"onTouchEnd"}]:this._listeners=[{eventName:k.press,methodName:"onTouchStart"},{eventName:k.move,methodName:"onTouchMove"},{eventName:k.cancel,methodName:"onTouchEnd"}];this.opt=h.clone(this.defaultParams);b.updateWithObject(this.opt,d);b.updateWithPattern(this.opt,d,this.optionalParams);this._uName="touchIndicator"+
this.opt.series;this.connect()},connect:function(){this.inherited(arguments);this.chart.addPlot(this._uName,{type:c,inter:this})},disconnect:function(){if(this.chart.getPlot(this._uName).pageCoord)this.onTouchEnd();this.chart.removePlot(this._uName);this.inherited(arguments)},onChange:function(a){},onTouchStart:function(a){a.touches&&1!=a.touches.length?this.opt.dualIndicator&&2==a.touches.length&&this._onTouchDual(a):this._onTouchSingle(a,!0)},onTouchMove:function(a){a.touches&&1!=a.touches.length?
this.opt.dualIndicator&&2==a.touches.length&&this._onTouchDual(a):this._onTouchSingle(a)},_onTouchSingle:function(a,b){l("touch-events")||this._onTouchEndHandler||(this._onTouchEndHandler=d.connect(this.chart.node.ownerDocument,k.release,this,"onTouchEnd"));this.chart._delayedRenderHandle&&!b&&this.chart.render();var c=this.chart.getPlot(this._uName);c.pageCoord={x:a.touches?a.touches[0].pageX:a.pageX,y:a.touches?a.touches[0].pageY:a.pageY};c.dirty=!0;b?this.chart.delayedRender():this.chart.render();
e.stop(a)},_onTouchDual:function(a){l("touch-events")||this._onTouchEndHandler||(this._onTouchEndHandler=d.connect(this.chart.node.ownerDocument,k.release,this,"onTouchEnd"));this.chart._delayedRenderHandle&&this.chart.render();var b=this.chart.getPlot(this._uName);b.pageCoord={x:a.touches[0].pageX,y:a.touches[0].pageY};b.secondCoord={x:a.touches[1].pageX,y:a.touches[1].pageY};b.dirty=!0;this.chart.render();e.stop(a)},onTouchEnd:function(a){!l("touch-events")&&this._onTouchEndHandler&&(d.disconnect(this._onTouchEndHandler),
this._onTouchEndHandler=null);a=this.chart.getPlot(this._uName);a.stopTrack();a.pageCoord=null;a.secondCoord=null;a.dirty=!0;this.chart.delayedRender()}})})},"dojox/charting/themes/ThreeD":function(){define("dojo/_base/lang dojo/_base/array ../Theme ./gradientGenerator ./PrimaryColors dojo/colors ./common".split(" "),function(h,m,e,l,k,d){var f={type:"linear",space:"shape",x1:0,y1:0,x2:100,y2:0},c=[{o:0,i:174},{o:.08,i:231},{o:.18,i:237},{o:.3,i:231},{o:.39,i:221},{o:.49,i:206},{o:.58,i:187},{o:.68,
i:165},{o:.8,i:128},{o:.9,i:102},{o:1,i:174}],b=m.map("#f00 #0f0 #00f #ff0 #0ff #f0f ./common".split(" "),function(a){var b=h.delegate(f);a=(b.colors=l.generateGradientByIntensity(a,c))[2].color;a.r+=100;a.g+=100;a.b+=100;a.sanitize();return b});d.ThreeD=k.clone();d.ThreeD.series.shadow={dx:1,dy:1,width:3,color:[0,0,0,.15]};d.ThreeD.next=function(a,c,d){if("bar"==a||"column"==a){var f=this._current%this.seriesThemes.length,g=this.seriesThemes[f],h=g.fill;g.fill=b[f];f=e.prototype.next.apply(this,
arguments);g.fill=h;return f}return e.prototype.next.apply(this,arguments)};return d.ThreeD})},"dojox/charting/Theme":function(){define("dojo/_base/lang dojo/_base/declare dojo/_base/Color ./SimpleTheme dojox/color/_base dojox/color/Palette dojox/gfx/gradutils".split(" "),function(h,m,e,l,k,d){var f=m("dojox.charting.Theme",l,{});h.mixin(f,{defineColors:function(c){c=c||{};var b,a=[],e=c.num||5;if(c.colors){b=c.colors.length;for(var f=0;f<e;f++)a.push(c.colors[f%b]);return a}return c.hue?d.generate(k.fromHsv(c.hue,
c.saturation||100,((c.high||90)+(c.low||30))/2),"monochromatic").colors:c.generator?k.Palette.generate(c.base,c.generator).colors:a},generateGradient:function(c,b,a){c=h.delegate(c);c.colors=[{offset:0,color:b},{offset:1,color:a}];return c},generateHslColor:function(c,b){c=new e(c);var a=c.toHsl();b=k.fromHsl(a.h,a.s,b);b.a=c.a;return b},generateHslGradient:function(c,b,a,d){c=new e(c);var g=c.toHsl();a=k.fromHsl(g.h,g.s,a);d=k.fromHsl(g.h,g.s,d);a.a=d.a=c.a;return f.generateGradient(b,a,d)}});f.defaultMarkers=
l.defaultMarkers;f.defaultColors=l.defaultColors;f.defaultTheme=l.defaultTheme;return f})},"dojox/color/Palette":function(){define(["dojo/_base/lang","dojo/_base/array","./_base"],function(h,m,e){function l(b,a,c){var d=new e.Palette;d.colors=[];m.forEach(b.colors,function(b){d.colors.push(new e.Color({r:Math.min(255,Math.max(0,"dr"==a?b.r+c:b.r)),g:Math.min(255,Math.max(0,"dg"==a?b.g+c:b.g)),b:Math.min(255,Math.max(0,"db"==a?b.b+c:b.b)),a:Math.min(1,Math.max(0,"da"==a?b.a+c:b.a))}))});return d}function k(b,
a,c){var d=new e.Palette;d.colors=[];m.forEach(b.colors,function(b){b=b.toCmy();d.colors.push(e.fromCmy(Math.min(100,Math.max(0,"dc"==a?b.c+c:b.c)),Math.min(100,Math.max(0,"dm"==a?b.m+c:b.m)),Math.min(100,Math.max(0,"dy"==a?b.y+c:b.y))))});return d}function d(b,a,c){var d=new e.Palette;d.colors=[];m.forEach(b.colors,function(b){b=b.toCmyk();d.colors.push(e.fromCmyk(Math.min(100,Math.max(0,"dc"==a?b.c+c:b.c)),Math.min(100,Math.max(0,"dm"==a?b.m+c:b.m)),Math.min(100,Math.max(0,"dy"==a?b.y+c:b.y)),Math.min(100,
Math.max(0,"dk"==a?b.b+c:b.b))))});return d}function f(b,a,c){var d=new e.Palette;d.colors=[];m.forEach(b.colors,function(b){b=b.toHsl();d.colors.push(e.fromHsl(("dh"==a?b.h+c:b.h)%360,Math.min(100,Math.max(0,"ds"==a?b.s+c:b.s)),Math.min(100,Math.max(0,"dl"==a?b.l+c:b.l))))});return d}function c(b,a,c){var d=new e.Palette;d.colors=[];m.forEach(b.colors,function(b){b=b.toHsv();d.colors.push(e.fromHsv(("dh"==a?b.h+c:b.h)%360,Math.min(100,Math.max(0,"ds"==a?b.s+c:b.s)),Math.min(100,Math.max(0,"dv"==
a?b.v+c:b.v))))});return d}e.Palette=function(b){this.colors=[];b instanceof e.Palette?this.colors=b.colors.slice(0):b instanceof e.Color?this.colors=[null,null,b,null,null]:h.isArray(b)?this.colors=m.map(b.slice(0),function(a){return h.isString(a)?new e.Color(a):a}):h.isString(b)&&(this.colors=[null,null,new e.Color(b),null,null])};h.extend(e.Palette,{transform:function(b){var a=l;if(b.use){var e=b.use.toLowerCase();0==e.indexOf("hs")?a="l"==e.charAt(2)?f:c:0==e.indexOf("cmy")&&(a="k"==e.charAt(3)?
d:k)}else if("dc"in b||"dm"in b||"dy"in b)a="dk"in b?d:k;else if("dh"in b||"ds"in b)a="dv"in b?c:f;var e=this,h;for(h in b)"use"!=h&&(e=a(e,h,b[h]));return e},clone:function(){return new e.Palette(this)}});h.mixin(e.Palette,{generators:{analogous:function(b){var a=b.high||60,c=b.low||18;b=(h.isString(b.base)?new e.Color(b.base):b.base).toHsv();var d=Math.max(10,95>=b.s?b.s+5:100-(b.s-95)),f=92<=b.v?b.v-9:Math.max(b.v+9,20),k=90>=b.v?Math.max(b.v+5,20):95+Math.ceil((b.v-90)/2),l=[d,1<b.s?b.s-1:21-
b.s,b.s,d,d],F=[f,k,b.v,f,k];return new e.Palette(m.map([(b.h+c+360)%360,(b.h+Math.round(c/2)+360)%360,b.h,(b.h-Math.round(a/2)+360)%360,(b.h-a+360)%360],function(a,b){return e.fromHsv(a,l[b],F[b])}))},monochromatic:function(b){b=h.isString(b.base)?new e.Color(b.base):b.base;var a=b.toHsv(),c=9<a.s-30?a.s-30:a.s+30,d=a.s,f=20<a.v-20?a.v-20:a.v+60,k=20<a.v-50?a.v-50:a.v+30;return new e.Palette([e.fromHsv(a.h,c,100-.8*(100-a.v)),e.fromHsv(a.h,d,k),b,e.fromHsv(a.h,c,k),e.fromHsv(a.h,d,f)])},triadic:function(b){b=
h.isString(b.base)?new e.Color(b.base):b.base;var a=b.toHsv(),c=(a.h-157+360)%360,d=90<a.s?a.s-10:a.s+10,f=95<a.s?a.s-5:a.s+5,k=20<a.v-20?a.v-20:a.v+20,l=20<a.v-30?a.v-30:a.v+30,m=70<a.v-30?a.v-30:a.v+30;return new e.Palette([e.fromHsv((a.h+57+360)%360,20<a.s?a.s-10:a.s+10,a.v),e.fromHsv(a.h,d,l),b,e.fromHsv(c,d,k),e.fromHsv(c,f,m)])},complementary:function(b){b=h.isString(b.base)?new e.Color(b.base):b.base;var a=b.toHsv(),c=360>2*a.h+137?2*a.h+137:Math.floor(a.h/2)-137,d=100-.9*(100-a.s),f=Math.min(100,
a.s+20),k=20<a.v?a.v-30:a.v+30;return new e.Palette([e.fromHsv(a.h,Math.max(a.s-10,0),Math.min(100,a.v+30)),e.fromHsv(a.h,d,k),b,e.fromHsv(c,f,k),e.fromHsv(c,a.s,a.v)])},splitComplementary:function(b){var a=h.isString(b.base)?new e.Color(b.base):b.base,c=b.da||30;b=a.toHsv();var d=360>2*b.h+137?2*b.h+137:Math.floor(b.h/2)-137,f=(d-c+360)%360,c=(d+c)%360,d=100-.9*(100-b.s),k=Math.min(100,b.s+20),l=20<b.v?b.v-30:b.v+30;return new e.Palette([e.fromHsv(f,Math.max(b.s-10,0),Math.min(100,b.v+30)),e.fromHsv(f,
d,l),a,e.fromHsv(c,k,l),e.fromHsv(c,b.s,b.v)])},compound:function(b){b=h.isString(b.base)?new e.Color(b.base):b.base;var a=b.toHsv(),c=360>2*a.h+18?2*a.h+18:Math.floor(a.h/2)-18,d=360>2*a.h+120?2*a.h+120:Math.floor(a.h/2)-120,f=360>2*a.h+99?2*a.h+99:Math.floor(a.h/2)-99,k=80<a.s-10?a.s-10:a.s+10,l=10<a.s-25?a.s-25:a.s+25,m=80<a.v-20?a.v-20:a.v+20,L=Math.max(a.v,20);return new e.Palette([e.fromHsv(c,10<a.s-40?a.s-40:a.s+40,10<a.v-40?a.v-40:a.v+40),e.fromHsv(c,k,m),b,e.fromHsv(d,l,L),e.fromHsv(f,k,
m)])},shades:function(b){b=h.isString(b.base)?new e.Color(b.base):b.base;var a=b.toHsv(),c=100==a.s&&0==a.v?0:a.s,d=20<=a.v-25?a.v-25:a.v+55,f=20<=a.v-75?a.v-75:a.v+5,k=Math.max(a.v-10,20);return new e.Palette([new e.fromHsv(a.h,c,20<a.v-50?a.v-50:a.v+30),new e.fromHsv(a.h,c,d),b,new e.fromHsv(a.h,c,f),new e.fromHsv(a.h,c,k)])}},generate:function(b,a){if(h.isFunction(a))return a({base:b});if(e.Palette.generators[a])return e.Palette.generators[a]({base:b});throw Error("dojox.color.Palette.generate: the specified generator ('"+
a+"') does not exist.");}});return e.Palette})},"dojox/charting/themes/gradientGenerator":function(){define("dojo/_base/lang dojo/_base/array dojo/_base/Color ../Theme dojox/color/_base ./common".split(" "),function(h,m,e,l,k,d){h=h.getObject("gradientGenerator",!0,d);h.generateFills=function(d,c,b,a){return m.map(d,function(d){return l.generateHslGradient(d,c,b,a)})};h.updateFills=function(d,c,b,a){m.forEach(d,function(d){d.fill&&!d.fill.type&&(d.fill=l.generateHslGradient(d.fill,c,b,a))})};h.generateMiniTheme=
function(d,c,b,a,e){return m.map(d,function(d){d=new k.Color(d);return{fill:l.generateHslGradient(d,c,b,a),stroke:{color:l.generateHslColor(d,e)}}})};h.generateGradientByIntensity=function(d,c){d=new e(d);return m.map(c,function(b){var a=b.i/255;return{offset:b.o,color:new e([d.r*a,d.g*a,d.b*a,d.a])}})};return h})},"dojox/charting/themes/common":function(){define(["dojo/_base/lang"],function(h){return h.getObject("dojox.charting.themes",!0)})},"dojox/charting/themes/PrimaryColors":function(){define(["../Theme",
"./gradientGenerator","./common"],function(h,m,e){e.PrimaryColors=new h({seriesThemes:m.generateMiniTheme("#f00 #0f0 #00f #ff0 #0ff #f0f ./common".split(" "),{type:"linear",space:"plot",x1:0,y1:0,x2:0,y2:100},90,40,25)});return e.PrimaryColors})},"esri/tasks/Geoprocessor":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/Deferred dojo/_base/json dojo/has dojo/io-query ../kernel ../request ../deferredUtils ../geometry/normalizeUtils ./Task ./FeatureSet ./JobInfo ./GPMessage ./LinearUnit ./DataFile ./RasterData ./Date ./ParameterValue ./GPResultImageLayer ../layers/ArcGISDynamicMapServiceLayer ../layers/MapImage".split(" "),
function(h,m,e,l,k,d,f,c,b,a,g,p,n,r,E,F,L,t,I,C,q,B,y){h=h(p,{declaredClass:"esri.tasks.Geoprocessor",_eventMap:{"execute-complete":["results","messages"],"get-result-data-complete":["result"],"get-result-image-complete":["mapImage"],"get-result-image-layer-complete":["layer"],"job-cancel":["jobInfo"],"job-complete":["jobInfo"],"status-update":["jobInfo"]},constructor:function(a){this._jobUpdateHandler=m.hitch(this,this._jobUpdateHandler);this._getJobStatus=m.hitch(this,this._getJobStatus);this._getResultDataHandler=
m.hitch(this,this._getResultDataHandler);this._getResultImageHandler=m.hitch(this,this._getResultImageHandler);this._executeHandler=m.hitch(this,this._executeHandler);this._updateTimers=[];this.registerConnectEvents()},updateDelay:1E3,processSpatialReference:null,outputSpatialReference:null,outSpatialReference:null,setUpdateDelay:function(a){this.updateDelay=a},setProcessSpatialReference:function(a){this.processSpatialReference=a},setOutputSpatialReference:function(a){this._setOutSR(a)},setOutSpatialReference:function(a){this._setOutSR(a)},
__msigns:[{n:"execute",c:3,a:[{i:0,p:["*"]}],e:2,f:1},{n:"submitJob",c:4,a:[{i:0,p:["*"]}],e:3}],_setOutSR:function(a){this.outSpatialReference=this.outputSpatialReference=a},_getOutSR:function(){return this.outSpatialReference||this.outputSpatialReference},_gpEncode:function(a,b,c){for(var d in a){var f=a[d];m.isArray(f)?a[d]=k.toJson(e.map(f,function(a){return this._gpEncode({item:a},!0).item},this)):f instanceof Date&&(a[d]=f.getTime())}return this._encode(a,b,c)},_decode:function(a){var b=a.dataType,
c=new C(a);if(-1!==e.indexOf(["GPBoolean","GPDouble","GPLong","GPString"],b))return c;if("GPLinearUnit"===b)c.value=new F(c.value);else if("GPFeatureRecordSetLayer"===b||"GPRecordSet"===b)c.value=new n(c.value);else if("GPDataFile"===b)c.value=new L(c.value);else if("GPDate"===b)a=c.value,m.isString(a)?c.value=new I({date:a}):c.value=new Date(a);else if("GPRasterData"===b||"GPRasterDataLayer"===b)a=a.value.mapImage,c.value=a?new y(a):new t(c.value);else if(-1!==b.indexOf("GPMultiValue:")){var d=b.split(":")[1];
a=c.value;c.value=e.map(a,function(a){return this._decode({paramName:"_name",dataType:d,value:a}).value},this)}else console.log(this.declaredClass+" : GP Data type not handled. : "+c.dataType),c=null;return c},submitJob:function(a,c,d,e,f){var g=this._getOutSR(),h=f.assembly;a=this._gpEncode(m.mixin({},this._url.query,{f:"json","env:outSR":g?g.wkid||k.toJson(g.toJson()):null,"env:processSR":this.processSpatialReference?this.processSpatialReference.wkid||k.toJson(this.processSpatialReference.toJson()):
null},a),null,h&&h[0]);var n=this._jobUpdateHandler,l=this._errorHandler;return b({url:this._url.path+"/submitJob",content:a,callbackParamName:"callback",load:function(a,b){n(a,b,!1,c,d,f.dfd)},error:function(a){l(a,e,f.dfd)}})},_jobUpdateHandler:function(a,b,c,d,e,f){var g=a.jobId;b=new r(a);if(this._successHandler([b],"onStatusUpdate",e,c&&f),!c)switch(clearTimeout(this._updateTimers[g]),this._updateTimers[g]=null,f&&f.progress(b),a.jobStatus){case r.STATUS_SUBMITTED:case r.STATUS_EXECUTING:case r.STATUS_WAITING:case r.STATUS_NEW:var h=
this._getJobStatus;this._updateTimers[g]=setTimeout(function(){h(g,c,d,e,f)},this.updateDelay);break;default:this._successHandler([b],"onJobComplete",d,f)}},_getJobStatus:function(a,c,d,e,f){var g=this._jobUpdateHandler;b({url:this._url.path+"/jobs/"+a,content:m.mixin({},this._url.query,{f:"json"}),callbackParamName:"callback",load:function(a,b){g(a,b,c,d,e,f)},error:this._errorHandler})},_getResultDataHandler:function(a,b,c,d,e){try{var f=this._decode(a);this._successHandler([f],"onGetResultDataComplete",
c,e)}catch(N){this._errorHandler(N,d,e)}},getResultData:function(c,d,e,f){var g=this._getResultDataHandler,h=this._errorHandler,k=new l(a._dfdCanceller);return k._pendingDfd=b({url:this._url.path+"/jobs/"+c+"/results/"+d,content:m.mixin({},this._url.query,{f:"json",returnType:"data"}),callbackParamName:"callback",load:function(a,b){g(a,b,e,f,k)},error:function(a){h(a,f,k)}}),k},checkJobStatus:function(c,d,e){var f=this._jobUpdateHandler,g=this._errorHandler,h=new l(a._dfdCanceller);return h._pendingDfd=
b({url:this._url.path+"/jobs/"+c,content:m.mixin({},this._url.query,{f:"json"}),callbackParamName:"callback",load:function(a,b){f(a,b,!0,null,d,h)},error:function(a){g(a,e,h)}}),h},cancelJob:function(c,d,e){var f=this._errorHandler,g=new l(a._dfdCanceller);return g._pendingDfd=b({url:this._url.path+"/jobs/"+c+"/cancel",content:m.mixin({},this._url.query,{f:"json"}),callbackParamName:"callback",load:m.hitch(this,function(a,b){this._successHandler([a],"onJobCancel",d,g)}),error:function(a){f(a,e,g)}}),
g},execute:function(a,c,d,e){var f=this._getOutSR(),g=e.assembly;a=this._gpEncode(m.mixin({},this._url.query,{f:"json","env:outSR":f?f.wkid||k.toJson(f.toJson()):null,"env:processSR":this.processSpatialReference?this.processSpatialReference.wkid||k.toJson(this.processSpatialReference.toJson()):null},a),null,g&&g[0]);var h=this._executeHandler,n=this._errorHandler;return b({url:this._url.path+"/execute",content:a,callbackParamName:"callback",load:function(a,b){h(a,b,c,d,e.dfd)},error:function(a){n(a,
d,e.dfd)}})},_executeHandler:function(a,b,c,d,e){try{var f,g,h=a.results,k=a.messages;f=0;for(g=h.length;f<g;f++)h[f]=this._decode(h[f]);f=0;for(g=k.length;f<g;f++)k[f]=new E(k[f]);this._successHandler([h,k],"onExecuteComplete",c,e)}catch(P){this._errorHandler(P,d,e)}},_getResultImageHandler:function(a,b,c,d,e){try{var f=this._decode(a);this._successHandler([f],"onGetResultImageComplete",c,e)}catch(N){this._errorHandler(N,d,e)}},getResultImage:function(c,d,e,f,g){var h=this._getResultImageHandler,
k=this._errorHandler;e=this._gpEncode(m.mixin({},this._url.query,{f:"json"},e.toJson()));var n=new l(a._dfdCanceller);return n._pendingDfd=b({url:this._url.path+"/jobs/"+c+"/results/"+d,content:e,callbackParamName:"callback",load:function(a,b){h(a,b,f,g,n)},error:function(a){k(a,g,n)}}),n},cancelJobStatusUpdates:function(a){clearTimeout(this._updateTimers[a]);this._updateTimers[a]=null},getResultImageLayer:function(a,b,c,d){var e;if(null==b){var g=this._url.path.indexOf("/GPServer/");a=this._url.path.substring(0,
g)+"/MapServer/jobs/"+a}else a=this._url.path+"/jobs/"+a+"/results/"+b;return this._url.query&&(a+="?"+f.objectToQuery(this._url.query)),e=null==b?new B(a,{imageParameters:c}):new q(a,{imageParameters:c},!0),this.onGetResultImageLayerComplete(e),d&&d(e),e},onStatusUpdate:function(){},onJobComplete:function(){},onExecuteComplete:function(){},onGetResultDataComplete:function(){},onGetResultImageComplete:function(){},onGetResultImageLayerComplete:function(){},onJobCancel:function(){}});return g._createWrappers(h),
d("extend-esri")&&m.setObject("tasks.Geoprocessor",h,c),h})},"esri/tasks/JobInfo":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","../kernel","./GPMessage"],function(h,m,e,l,k){h=h(null,{declaredClass:"esri.tasks.JobInfo",constructor:function(d){this.messages=[];m.mixin(this,d);var e=this.messages,c=e.length;for(d=0;d<c;d++)e[d]=new k(e[d])},jobId:"",jobStatus:""});return m.mixin(h,{STATUS_CANCELLED:"esriJobCancelled",STATUS_CANCELLING:"esriJobCancelling",STATUS_DELETED:"esriJobDeleted",
STATUS_DELETING:"esriJobDeleting",STATUS_EXECUTING:"esriJobExecuting",STATUS_FAILED:"esriJobFailed",STATUS_NEW:"esriJobNew",STATUS_SUBMITTED:"esriJobSubmitted",STATUS_SUCCEEDED:"esriJobSucceeded",STATUS_TIMED_OUT:"esriJobTimedOut",STATUS_WAITING:"esriJobWaiting"}),e("extend-esri")&&m.setObject("tasks.JobInfo",h,l),h})},"esri/tasks/GPMessage":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","../kernel"],function(h,m,e,l){h=h(null,{declaredClass:"esri.tasks.GPMessage",constructor:function(e){m.mixin(this,
e)}});return m.mixin(h,{TYPE_INFORMATIVE:"esriJobMessageTypeInformative",TYPE_PROCESS_DEFINITION:"esriJobMessageTypeProcessDefinition",TYPE_PROCESS_START:"esriJobMessageTypeProcessStart",TYPE_PROCESS_STOP:"esriJobMessageTypeProcessStop",TYPE_WARNING:"esriJobMessageTypeWarning",TYPE_ERROR:"esriJobMessageTypeError",TYPE_EMPTY:"esriJobMessageTypeEmpty",TYPE_ABORT:"esriJobMessageTypeAbort"}),e("extend-esri")&&m.setObject("tasks.GPMessage",h,l),h})},"esri/tasks/LinearUnit":function(){define(["dojo/_base/declare",
"dojo/_base/lang","dojo/has","../kernel"],function(h,m,e,l){h=h(null,{declaredClass:"esri.tasks.LinearUnit",constructor:function(e){e&&m.mixin(this,e)},distance:0,units:null,toJson:function(){var e={};return this.distance&&(e.distance=this.distance),this.units&&(e.units=this.units),e}});return e("extend-esri")&&m.setObject("tasks.LinearUnit",h,l),h})},"esri/tasks/DataFile":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","../kernel"],function(h,m,e,l){h=h(null,{declaredClass:"esri.tasks.DataFile",
constructor:function(e){e&&m.mixin(this,e)},url:null,itemID:null,toJson:function(){var e={};return this.url&&(e.url=this.url),this.itemID&&(e.itemID=this.itemID),e}});return e("extend-esri")&&m.setObject("tasks.DataFile",h,l),h})},"esri/tasks/RasterData":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","../kernel"],function(h,m,e,l){h=h(null,{declaredClass:"esri.tasks.RasterData",constructor:function(e){e&&m.mixin(this,e)},url:null,format:null,itemID:null,toJson:function(){var e=
{};return this.url&&(e.url=this.url),this.format&&(e.format=this.format),this.itemID&&(e.itemID=this.itemID),e}});return e("extend-esri")&&m.setObject("tasks.RasterData",h,l),h})},"esri/tasks/Date":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/date/locale","dojo/has","../kernel"],function(h,m,e,l,k){h=h(null,{declaredClass:"esri.tasks.Date",constructor:function(d){d&&(d.format&&(this.format=d.format),this.date=e.parse(d.date,{selector:"date",datePattern:this.format}))},date:new Date,
format:"EEE MMM dd HH:mm:ss zzz yyyy",toJson:function(){return{date:e.format(this.date,{selector:"date",datePattern:this.format}),format:this.format}}});return l("extend-esri")&&m.setObject("tasks.Date",h,k),h})},"esri/tasks/ParameterValue":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","../kernel"],function(h,m,e,l){h=h(null,{declaredClass:"esri.tasks.ParameterValue",constructor:function(e){m.mixin(this,e)}});return e("extend-esri")&&m.setObject("tasks.ParameterValue",h,l),
h})},"esri/tasks/GPResultImageLayer":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/json dojo/has dojo/io-query ../kernel ../layers/ArcGISDynamicMapServiceLayer".split(" "),function(h,m,e,l,k,d,f){h=h(f,{declaredClass:"esri.tasks._GPResultImageLayer",constructor:function(c,b){b&&b.imageParameters&&b.imageParameters.extent&&(this.initialExtent=this.fullExtent=b.imageParameters.extent,this.spatialReference=this.initialExtent.spatialReference);this.getImageUrl=m.hitch(this,this.getImageUrl);
this.loaded=!0;this.onLoad(this)},getImageUrl:function(c,b,a,d){var f=c.spatialReference.wkid;d(this._url.path+"?"+k.objectToQuery(m.mixin(this._params,{f:"image",bbox:e.toJson(c.toJson()),bboxSR:f,imageSR:f,size:b+","+a})))}});return l("extend-esri")&&m.setObject("tasks._GPResultImageLayer",h,d),h})},"esri/dijit/Measurement":function(){define("require dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/connect dojo/_base/Color dojo/debounce dojo/sniff dojo/dom-style dojo/dom-construct dojox/gfx dijit/_Widget dijit/registry dijit/Menu dijit/MenuItem ../symbols/PictureMarkerSymbol ../symbols/SimpleLineSymbol ../symbols/SimpleFillSymbol ../symbols/jsonUtils ../geometry/geodesicUtils ../geometry/webMercatorUtils ../geometry/Point ../geometry/Polyline ../geometry/Polygon ../graphic ../tasks/AreasAndLengthsParameters ../tasks/LengthsParameters ../tasks/GeometryService ../kernel ../config ../domUtils ../numberUtils ../lang ../units ../WKIDUnitConversion ../SpatialReference dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin ./_EventedWidget dojo/text!./templates/Measurement.html dojo/i18n!../nls/jsapi dijit/form/ToggleButton dijit/form/DropDownButton dijit/layout/ContentPane".split(" "),
function(h,m,e,l,k,d,f,c,b,a,g,p,n,r,E,F,L,t,I,C,q,B,y,w,G,u,A,z,U,N,x,R,P,v,H,J,D,M,V,Q,S){m=m([V,p,D,M],{declaredClass:"esri.dijit.Measurement",widgetsInTemplate:!0,templateString:Q,_map:null,_geometryService:null,_interpolatedMap:null,_mouseImgURL:null,_defaultPinURL:null,_measureGraphics:[],_measureGraphic:null,_locationGraphic:null,_tempGraphic:null,_polylineGraphics:null,_polygonGraphic:null,_pointSymbol:null,_useDefaultPointSymbol:!0,_defaultLineSymbol:null,_lineSymbol:null,_areaLineSymbol:null,
_defaultFillSymbol:null,_fillSymbol:null,_borderlessFillSymbol:null,_defaultCustomPointSymbolHeight:25,_defaultCustomPointSymbolWidth:25,_userGeometry:null,_currentGeometry:null,_inputPoints:[],_unitDictionary:[],_densificationRatio:.07848050723825097,numberPattern:"#,###,###,##0.0",result:null,_defaultDistanceUnit:null,_defaultAreaUnit:null,_defaultLocationUnit:null,currentDistanceUnit:null,currentAreaUnit:null,currentLocationUnit:null,_unitStrings:{},_locationUnitStrings:[],_locationUnitStringsLong:[],
_distanceUnitStrings:[],_distanceUnitStringsLong:[],_areaUnitStrings:[],_areaUnitStringsLong:[],_calculatingMsg:null,_gsErrorMsg:null,_NLS_Lat:null,_NLS_Lon:null,_mouseMoveMapHandler:null,_mouseClickMapHandler:null,_doubleClickMapHandler:null,_mouseDragMapHandler:null,_clickMapHandler:null,_mapExtentChangeHandler:null,_geometryAreaHandler:null,_snappingCallback:null,_calcTimer:null,_buttonDijits:{},previousTool:null,activeTool:null,markerLongitude:null,markerLatitude:null,mouseLongitude:null,mouseLatitude:null,
_eventMap:{"measure-start":["toolName","unitName"],measure:["toolName","geometry","values","unitName","segmentLength"],"measure-end":["toolName","geometry","values","unitName"],"tool-change":["toolName","unitName","previousToolName"],"unit-change":["unitName","toolName"]},constructor:function(a,b){if(!a||!a.map)return void console.log("Unable to find the required 'map' property in widget parameters");if(this._map=a.map,this._map.loaded)this._map.cs=this._checkCS(this._map.spatialReference),this._interpolatedMap=
!("Web Mercator"===this._map.cs||"PCS"===this._map.cs);else var c=k.connect(this._map,"onLoad",this,function(){k.disconnect(c);c=null;this._map.cs=this._checkCS(this._map.spatialReference);this._interpolatedMap=!("Web Mercator"===this._map.cs||"PCS"===this._map.cs)});this._geometryService=N.defaults.geometryService;this._mouseImgURL=h.toUrl("./images/cursor16x24.png");this._defaultPinURL=h.toUrl("./images/esriGreenPin16x26.png");this._defaultLineSymbol=new L(L.STYLE_SOLID,new d([0,128,255]),3);this._defaultFillSymbol=
new t(L.STYLE_SOLID,this._defaultLineSymbol,new d([0,0,0,.5]));a.pointSymbol?(this._pointSymbol=a.pointSymbol,this._useDefaultPointSymbol=!1):(this._pointSymbol=new F(this._defaultPinURL,16,26),this._pointSymbol.setOffset(0,12));this._fillSymbol=b=a.fillSymbol||this._defaultFillSymbol;this._areaLineSymbol=b.outline||this._defaultLineSymbol;this._borderlessFillSymbol=I.fromJson(b.toJson());this._borderlessFillSymbol.setOutline(null);a.lineSymbol?this._lineSymbol=a.lineSymbol:this._lineSymbol=this._defaultLineSymbol;
a.defaultLengthUnit?this._defaultDistanceUnit=a.defaultLengthUnit:this._defaultDistanceUnit=v.MILES;a.defaultAreaUnit?this._defaultAreaUnit=a.defaultAreaUnit:this._defaultAreaUnit=v.ACRES;a.defaultLocationUnit?this._defaultLocationUnit=a.defaultLocationUnit:this._defaultLocationUnit=v.DECIMAL_DEGREES;this._snappingCallback=e.hitch(this,this._snappingCallback);a.geometry&&(this._userGeometry=a.geometry);this._calcTimer=null;this.advancedLocationUnits=a.advancedLocationUnits||!1;this._NLS_Lon=S.widgets.measurement.NLS_longitude;
this._NLS_Lat=S.widgets.measurement.NLS_latitude;this._gsErrorMsg=S.widgets.measurement.NLS_geometry_service_error;this._calculatingMsg=S.widgets.measurement.NLS_calculating;this._geometryServiceLength=f(this._geometryServiceLength,250)},startup:function(){if(this._setupDictionaries(),a.create("img",{src:this._mouseImgURL,style:"vertical-align: middle"},this.mouseCell),this._useDefaultPointSymbol?a.create("img",{src:this._defaultPinURL,style:"vertical-align: middle"},this.pinCell):this._drawPointGraphics(this.pinCell),
this._userGeometry)if(this._map.loaded)this._measureCustomGeometry(this._userGeometry),this._userGeometry=null;else var b=k.connect(this._map,"onLoad",this,function(){k.disconnect(b);b=null;this._measureCustomGeometry(this._userGeometry);this._userGeometry=null})},destroy:function(){this._resetToolState();this.clearResult();this.inherited(arguments);this._map=this._geometryService=this._measureGraphics=this._measureGraphic=this._tempGraphic=null},setTool:function(a,c){this.previousTool=this.activeTool||
null;this._polylineGraphics=[];this._resetToolState();this._polygonGraphic&&(this._map.graphics.remove(this._polygonGraphic),this._polygonGraphic=null);var d=n.byNode(this._buttonDijits[a].domNode).checked;b.set(this._unitDropDown.domNode,"visibility","visible");n.byNode(this._buttonDijits.area.domNode).set("checked",!1);n.byNode(this._buttonDijits.distance.domNode).set("checked",!1);n.byNode(this._buttonDijits.location.domNode).set("checked",!1);!0!==c&&!1!==c||(d=c);n.byNode(this._buttonDijits[a].domNode).set("checked",
d);this._toggleLocationResultsTable(!1,!0);d?(this.activeTool=a,this._dblClickZoom=this._map.isDoubleClickZoom,this._dblClickZoom&&this._map.disableDoubleClickZoom(),"area"===a?this._setupAreaTool():"distance"===a?this._setupDistanceTool():"location"===a&&this._setupLocationTool(),this._map.snappingManager&&(this._map.snappingManager._startSelectionLayerQuery(),this._map.snappingManager._setUpSnapping())):(this.activeTool=null,b.set(this._unitDropDown.domNode,"visibility","hidden"));this.activeTool!==
this.previousTool&&this.onToolChange(this.activeTool,this.getUnit(),this.previousTool)},measure:function(a){a&&this._measureCustomGeometry(a)},clearResult:function(){var a,b=this._map;this.result=0;this.resultValue.setContent("\x26nbsp");for(a=0;a<this._measureGraphics.length;a++)b.graphics.remove(this._measureGraphics[a]);this._measureGraphic=this._locationGraphic=this._currentGeometry=null;this._measureGraphics=[];b.graphics.remove(this._tempGraphic);k.disconnect(this._mouseMoveMapHandler);this._mouseMoveMapHandler=
null},show:function(){x.show(this.domNode)},hide:function(){x.hide(this.domNode)},showTool:function(a){b.set(this._buttonDijits[a].domNode,"display","inline-block")},hideTool:function(a){b.set(this._buttonDijits[a].domNode,"display","none")},getTool:function(){if(this.activeTool)return{toolName:this.activeTool,unitName:this.getUnit()}},getUnit:function(){if("unit"!==this._unitDropDown.label)return this._unitDropDown.label},_setupLocationTool:function(){this._map.navigationManager.setImmediateClick(!0);
this._measureGraphics=[];this._map.graphics.remove(this._locationGraphic);this._createLocationUnitList();"PCS"===this._map.cs&&(this._projectMapExtent(this._map.extent),this._mapExtentChangeHandler=k.connect(this._map,"onExtentChange",e.hitch(this,this._projectMapExtent)));this._clickMapHandler=k.connect(this._map,"onClick",this,"_locationClickHandler");"esriDegreeMinuteSeconds"!==this.currentLocationUnit&&"esriDecimalDegrees"!==this.currentLocationUnit||(this._mouseMoveMapHandler=k.connect(this._map,
"onMouseMove",this,"_locationMoveHandler"))},_locationButtonToggle:function(){this.clearResult();this.setTool("location")},_measureCustomPoint:function(a){this.setTool("location",!0);"Web Mercator"===this._map.cs&&a.spatialReference!==this._map.spatialReference&&(a=q.geographicToWebMercator(a));this._measureGraphic=new G;this._measureGraphic.setSymbol(this._pointSymbol);this._measureGraphic.setGeometry(a);this._measureGraphics.push(this._measureGraphic);this._map.graphics.add(this._measureGraphic);
this._currentGeometry=a;this._calculateLocation(a,!0)},_calculateLocation:function(a,b){var c=!("esriDegreeMinuteSeconds"===this.currentLocationUnit||"esriDecimalDegrees"===this.currentLocationUnit);c&&this._mouseMoveMapHandler&&(k.disconnect(this._mouseMoveMapHandler),this._mouseMoveMapHandler=null);a=e.clone(a);if(b){if("Web Mercator"!==this.map.cs&&this.map.spatialReference&&4326!==this.map.spatialReference.wkid)return void this._projectLocation(a,c);this._updateMarkerLocation(a.x,a.y)}a=this._getGCSLocation(a);
this._advancedLocationDisplayHandler(a,c,b)},_projectLocation:function(a,b){this._geometryService.project([a],new J({wkid:4326}),e.hitch(this,function(a){this._advancedLocationDisplayHandler(a[0],b,!0)}),e.hitch(this,function(a){console.log(this._gsErrorMsg,a)}))},_advancedLocationDisplayHandler:function(a,b,c){var d;b?this._updateGeocoordinateStringLocation({coordinates:[[a.x,a.y]],sr:{wkid:4326},conversionType:this._unitStrings[this.currentLocationUnit]},a):(d=this._calculateXY(a.x,a.y),c?(this._updateClickLocation(d[0],
d[1]),this.onMeasureEnd(this.activeTool,a,[d[0],d[1]],this.getUnit())):this._updateMouseLocation(d[0],d[1]))},_updateMarkerLocation:function(a,b){this.markerLocationX=a;this.markerLocationY=b},_updateMouseLocation:function(a,b){this.mouseLongitude.innerHTML=a;this.mouseLatitude.innerHTML=b},_updateClickLocation:function(a,b){this._updateMouseLocation(a,b);this.markerLongitude.innerHTML=a;this.markerLatitude.innerHTML=b},_updateGeocoordinateStringLocation:function(a,b){this.resultValue.setContent("\x26nbsp");
this._geometryService.toGeoCoordinateString(a,e.hitch(this,function(a){clearTimeout(this._calcTimer);a?(this.resultValue.setContent(a[0]),this.onMeasureEnd(this.activeTool,b,a,this.getUnit())):(this.resultValue.setContent(this._gsErrorMsg),this.onMeasureEnd(this.activeTool,null,null,this.getUnit()))}));clearTimeout(this._calcTimer);this._calcTimer=setTimeout(e.hitch(this,function(){this.resultValue.setContent(this._calculatingMsg)},1E3))},_switchLocationUnit:function(a){if(n.byNode(this._unitDropDown.domNode).set("label",
this._unitStrings[a]),this.currentLocationUnit=a,k.disconnect(this._mouseMoveMapHandler),this._mouseMoveMapHandler=null,this.onUnitChange(this._unitStrings[a],this.activeTool),"esriDegreeMinuteSeconds"===a||"esriDecimalDegrees"===a)this._mouseMoveMapHandler=k.connect(this._map,"onMouseMove",this,"_locationMoveHandler"),this._toggleLocationResultsTable(!0,!1),this._locationGraphic&&this._calculateLocation(this._locationGraphic.geometry,!0);else if((this._toggleLocationResultsTable(!1,!1),null!==this.resultValue&&
(null!==this.markerLocationX||null!==this.markerLocationY))&&this._locationGraphic){var b=this._getGCSLocation(this._locationGraphic.geometry);this._updateGeocoordinateStringLocation({coordinates:[[b.x,b.y]],sr:{wkid:4326},conversionType:this._unitStrings[a]},this._locationGraphic.geometry)}},_toggleLocationResultsTable:function(a,b){b&&(this.resultValue.setContent("\x26nbsp"),this.markerLongitude.innerHTML="---",this.markerLatitude.innerHTML="---",this.mouseLongitude.innerHTML="---",this.mouseLatitude.innerHTML=
"---");a?(x.show(this.resultTable.domNode),x.hide(this.resultValueContainer.domNode)):(x.hide(this.resultTable.domNode),x.show(this.resultValueContainer.domNode),k.disconnect(this._mouseMoveMapHandler));"PCS"===this._map.cs&&x.hide(this._mouseRow)},_setupDistanceTool:function(){this._map.navigationManager.setImmediateClick(!0);"PCS"===this._map.cs&&(this._projectMapExtent(this._map.extent),this._mapExtentChangeHandler=k.connect(this._map,"onExtentChange",this,"_projectMapExtent"));this._inputPoints=
[];this._createDistanceUnitList();this._mouseClickMapHandler=k.connect(this._map,"onClick",this,"_measureDistanceMouseClickHandler");this._doubleClickMapHandler=k.connect(this._map,"onDblClick",this,"_measureDistanceDblClickHandler")},_distanceButtonToggle:function(){this.clearResult();this.setTool("distance")},_measureCustomDistance:function(a){if(1<a.paths[0].length){this.setTool("distance",!0);this._inputPoints=[];l.forEach(a.paths[0],e.hitch(this,function(b,c){this._inputPoints.push(b);var d=
new G(new B(b[0],b[1],a.spatialReference),this._pointSymbol);this._measureGraphics.push(d);this._map.graphics.add(d);0!==c&&(this.result+=this._geodesicDistance(b,a.paths[0][c-1]))}));this._measureGraphic=new G;this._measureGraphic.setSymbol(this._lineSymbol);this._measureGraphics.push(this._measureGraphic);var b=this._densifyGeometry(a);this._measureGraphic.setGeometry(b);this._map.graphics.add(this._measureGraphic);this._inputPoints=[];b=this._outputResult(this.result,this.getUnit());this._currentGeometry=
a;this.onMeasureEnd(this.activeTool,a,b,this.getUnit())}},_showDistance:function(a){a&&this._outputResult(a,n.byNode(this._unitDropDown.domNode).label)},_setupAreaTool:function(){this._map.navigationManager.setImmediateClick(!0);this._inputPoints=[];this._createAreaUnitList();this._tempGraphic=new G;this._tempGraphic.setSymbol(this._areaLineSymbol);this._tempGraphic.setGeometry(new y(this._map.spatialReference));this._map.graphics.add(this._tempGraphic);"PCS"===this._map.cs&&(this._geometryAreaHandler=
k.connect(this._geometryService,"onAreasAndLengthsComplete",this,"_outputArea"));this._mouseClickMapHandler=k.connect(this._map,"onClick",this,"_measureAreaMouseClickHandler");this._doubleClickMapHandler=k.connect(this._map,"onDblClick",this,"_measureAreaDblClickHandler")},_areaButtonToggle:function(){this.clearResult();this.setTool("area")},_generatePolygonFromPaths:function(){var a=[];l.forEach(this._polylineGraphics,e.hitch(this,function(b){l.forEach(b.geometry.paths,e.hitch(this,function(b){l.forEach(b,
e.hitch(this,function(b){a.push(b)}))}))}));a.push(a[0]);var b=new w(this._map.spatialReference);b.addRing(a);var b=this._densifyGeometry(b),c=new G;return c.setGeometry(b),c.setSymbol(this._borderlessFillSymbol),this._measureGraphic=c,this._measureGraphics.push(c),c},_getArea:function(a){var b=[],c=new u;if(c.areaUnit=z.UNIT_SQUARE_METERS,c.calculationType="geodesic",w.prototype.isSelfIntersecting(a))this._geometryService.simplify([a],e.hitch(this,function(a){l.forEach(a,e.hitch(this,function(d){if("PCS"===
this._map.cs)return c.polygons=a,void this._geometryService.areasAndLengths(c);"Web Mercator"===this._map.cs&&(d=q.webMercatorToGeographic(d));b.push(d)}));var d=C.geodesicAreas(b,v.SQUARE_METERS);this._showArea(d[0])}));else{if("Web Mercator"===this._map.cs&&(a=q.webMercatorToGeographic(a)),b.push(a),"PCS"===this._map.cs)return c.polygons=b,void this._geometryService.areasAndLengths(c);a=C.geodesicAreas(b,v.SQUARE_METERS);this._showArea(Math.abs(a[0]))}},_outputArea:function(a){this._showArea(Math.abs(a.areas[0]))},
_showArea:function(a){a&&(this.result=a,a=n.byNode(this._unitDropDown.domNode).label,a=this._outputResult(this.result,a),this._mouseMoveMapHandler?this.onMeasure(this.activeTool,this._currentGeometry,a,this.getUnit(),null):this.onMeasureEnd(this.activeTool,this._currentGeometry,a,this.getUnit()))},_measureCustomArea:function(a){this.setTool("area",!0);this._inputPoints=[];var b=this._densifyGeometry(a);this._currentGeometry=a;this._measureGraphic=new G;this._measureGraphic.setGeometry(b);this._measureGraphic.setSymbol(this._fillSymbol);
this._measureGraphics.push(this._measureGraphic);this._map.graphics.add(this._measureGraphic);this._getArea(a);this._inputPoints=[]},_resetToolState:function(){var a=this._map;a.navigationManager.setImmediateClick(!1);this._dblClickZoom&&a.enableDoubleClickZoom();this._inputPoints=[];k.disconnect(this._mouseClickMapHandler);k.disconnect(this._mouseMoveMapHandler);k.disconnect(this._doubleClickMapHandler);k.disconnect(this._mouseDragMapHandler);k.disconnect(this._clickMapHandler);k.disconnect(this._mapExtentChangeHandler);
k.disconnect(this._geometryAreaHandler);this._mouseClickMapHandler=this._mouseMoveMapHandler=this._doubleClickMapHandler=this._mouseDragMapHandler=this._clickMapHandler=this._mapExtentChangeHandler=this._geometryAreaHandler=null;a.snappingManager&&a.snappingManager._snappingGraphic&&a.graphics.remove(a.snappingManager._snappingGraphic);this._map.snappingManager&&(this._map.snappingManager._stopSelectionLayerQuery(),this._map.snappingManager._killOffSnapping());this._unitDropDown._opened&&this._unitDropDown.closeDropDown()},
_measureCustomGeometry:function(a){switch(this.clearResult(),a.type){case "point":this._measureCustomPoint(a);break;case "polyline":this._measureCustomDistance(a);break;case "polygon":this._measureCustomArea(a)}},_densifyGeometry:function(a){var b,c=this._map.cs;b=C.getSpheroidInfo(a.spatialReference).radius*this._densificationRatio;"Web Mercator"===c?(a=q.webMercatorToGeographic(a),b=C.geodesicDensify(a,b),b=q.geographicToWebMercator(b)):b="PCS"===c?a:C.geodesicDensify(a,b);return b},_geodesicDistance:function(a,
b){var c=new y(this._map.spatialReference);return"PCS"===this._map.cs&&(a=this._getGCSLocation(a),b=this._getGCSLocation(b)),c.addPath([a,b]),"Web Mercator"===this._map.cs&&(c=q.webMercatorToGeographic(c)),C.geodesicLengths([c],v.METERS)[0]},_calculateXY:function(a,b){var c,d,e=S.widgets.measurement,f=this._map.getScale();if(this.getUnit()===e.NLS_decimal_degrees)d=500<=f?6:500>f&&50<=f?7:50>f&&5<=f?8:9,c=a.toFixed(d),this._map.spatialReference._isWrappable()||(c=this._roundX(c)),c=R.format(c),d=
R.format(this._roundY(b.toFixed(d)));else if(this.getUnit()===e.NLS_deg_min_sec){var g,h,n=e=!1;d=9E4<=f?0:9E4>f&&9E3<=f?1:9E3>f&&900<=f?2:900>f&&90<f?3:4;0>a&&(e=!0,a=Math.abs(a));0>b&&(n=!0,b=Math.abs(b));b=this._roundY(b);this._map.spatialReference._isWrappable()||(a=this._roundX(a));g=Math.floor(b)+"\u00b0";c=Math.floor(a)+"\u00b0";h=Math.floor(this._getDegreeMinutes(b))+"'";f=Math.floor(this._getDegreeMinutes(a))+"'";b=R.format(this._getDegreeSeconds(b).toFixed(d))+'"';a=R.format(this._getDegreeSeconds(a).toFixed(d))+
'"';d=g+h+b;c=c+f+a;e&&(c="-"+c);n&&(d="-"+d)}return[c,d]},_getDegreeMinutes:function(a){return 60*(a-Math.floor(a))},_getDegreeSeconds:function(a){return 60*(60*(a-Math.floor(a))-Math.floor(60*(a-Math.floor(a))))},_roundY:function(a){return 90<a?a=90:-90>a&&(a=-90),a},_roundX:function(a){return 180<a?a=180:-180>a&&(a=-180),a},_getGCSLocation:function(a){a=e.clone(a);var b=this._map,c=b.extent,d=b._newExtent;"Web Mercator"===b.cs?a=q.webMercatorToGeographic(a):"PCS"===b.cs?d&&(a=new B((a.x-c.xmin)*
Math.abs((d.xmax-d.xmin)/(c.xmax-c.xmin))+d.xmin,(a.y-c.ymin)*Math.abs((d.ymax-d.ymin)/(c.ymax-c.ymin))+d.ymin,b.spatialReference)):a=a.normalize();return a},_projectMapExtent:function(a){a=new G(a);var b=new J({wkid:4326});this._geometryService.project([a.geometry],b,e.hitch(this,function(a){this._mouseMoveMapHandler||"location"!==this.activeTool||("esriDegreeMinuteSeconds"!==this.currentLocationUnit&&"esriDecimalDegrees"!==this.currentLocationUnit||(this._mouseMoveMapHandler=k.connect(this._map,
"onMouseMove",e.hitch(this,this._locationMoveHandler))),this._mouseMoveMapHandler=k.connect(this._map,"onMouseMove",e.hitch(this,this._locationMoveHandler)));this._map._newExtent=a[0]}))},_checkCS:function(a){return a.wkid?3857===a.wkid||102100===a.wkid||102113===a.wkid?"Web Mercator":P.isDefined(H[a.wkid])?"PCS":"GCS":a.wkt?-1!==a.wkt.indexOf("WGS_1984_Web_Mercator")?"Web Mercator":0===a.wkt.indexOf("PROJCS")?"PCS":"GCS":void 0},_switchUnit:function(a){if("distance"===this.activeTool?this.currentDistanceUnit=
a:"area"===this.activeTool?this.currentAreaUnit=a:"location"===this.activeTool&&(this.currentLocationUnit=a),n.byNode(this._unitDropDown.domNode).set("label",this._unitStrings[a]),null!==this.result){var b=this._outputResult(this.result,this._unitStrings[a]);if(this.onUnitChange(this._unitStrings[a],this.activeTool),null!==this._currentGeometry||null!==this._measureGraphic)a=this._currentGeometry||this._measureGraphic.geometry,this._mouseMoveMapHandler?this.onMeasure(this.activeTool,a,b,this.getUnit(),
null):this.onMeasureEnd(this.activeTool,a,b,this.getUnit())}},_setupDictionaries:function(){var a=S.widgets.measurement;this._unitDictionary[a.NLS_length_meters]=1;this._unitDictionary[a.NLS_length_kilometers]=1E3;this._unitDictionary[a.NLS_length_feet]=.3048;this._unitDictionary[a.NLS_length_miles]=1609.344;this._unitDictionary[a.NLS_length_yards]=.9144;this._unitDictionary[a.NLS_length_nautical_miles]=1852;this._unitDictionary[a.NLS_length_miles_us]=1609.347218694438;this._unitDictionary[a.NLS_length_feet_us]=
.3048006096012192;this._unitDictionary[a.NLS_length_yards_us]=.9144018288036576;this._unitDictionary[a.NLS_area_sq_meters]=1;this._unitDictionary[a.NLS_area_sq_kilometers]=1E6;this._unitDictionary[a.NLS_area_sq_feet]=.09290304;this._unitDictionary[a.NLS_area_acres]=4046.8564224;this._unitDictionary[a.NLS_area_sq_miles]=2589988.110336;this._unitDictionary[a.NLS_area_hectares]=1E4;this._unitDictionary[a.NLS_area_sq_yards]=.83612736;this._unitDictionary[a.NLS_area_sq_nautical_miles]=3429904;this._unitDictionary[a.NLS_area_acres_us]=
4046.872609874252;this._unitDictionary[a.NLS_area_sq_miles_us]=2589998.470319522;this._unitDictionary[a.NLS_area_sq_feet_us]=.09290341161327487;this._unitDictionary[a.NLS_area_sq_yards_us]=.8361307045194736;this._unitStrings={esriMiles:a.NLS_length_miles,esriKilometers:a.NLS_length_kilometers,esriFeet:a.NLS_length_feet,esriFeetUS:a.NLS_length_feet_us,esriMeters:a.NLS_length_meters,esriYards:a.NLS_length_yards,esriNauticalMiles:a.NLS_length_nautical_miles,esriMilesUS:a.NLS_length_miles_us,esriYardsUS:a.NLS_length_yards_us,
esriAcres:a.NLS_area_acres,esriSquareMiles:a.NLS_area_sq_miles,esriSquareKilometers:a.NLS_area_sq_kilometers,esriHectares:a.NLS_area_hectares,esriSquareYards:a.NLS_area_sq_yards,esriSquareFeet:a.NLS_area_sq_feet,esriSquareFeetUS:a.NLS_area_sq_feet_us,esriSquareMeters:a.NLS_area_sq_meters,esriAcresUS:a.NLS_area_acres_us,esriSquareMilesUS:a.NLS_area_sq_miles_us,esriSquareYardsUS:a.NLS_area_sq_yards_us,esriSquareNauticalMiles:a.NLS_area_sq_nautical_miles,esriDecimalDegrees:a.NLS_decimal_degrees,esriDegreeMinuteSeconds:a.NLS_deg_min_sec,
esriMGRS:a.NLS_MGRS,esriUSNG:a.NLS_USNG,esriUTM:a.NLS_UTM,esriGARS:a.NLS_GARS,esriGeoRef:a.NLS_GeoRef,esriDDM:a.NLS_DDM,esriDD:a.NLS_DD};this._locationUnitStrings=[a.NLS_decimal_degrees,a.NLS_deg_min_sec,a.NLS_MGRS,a.NLS_USNG,a.NLS_UTM,a.NLS_GeoRef,a.NLS_GARS];this._locationUnitStringsLong="esriDecimalDegrees esriDegreeMinuteSeconds esriMGRS esriUSNG esriUTM esriGeoRef esriGARS".split(" ");this._distanceUnitStrings=[a.NLS_length_miles,a.NLS_length_kilometers,a.NLS_length_feet,a.NLS_length_feet_us,
a.NLS_length_meters,a.NLS_length_yards,a.NLS_length_nautical_miles];this._distanceUnitStringsLong="esriMiles esriKilometers esriFeet esriFeetUS esriMeters esriYards esriNauticalMiles".split(" ");this._areaUnitStrings=[a.NLS_area_acres,a.NLS_area_sq_miles,a.NLS_area_sq_kilometers,a.NLS_area_hectares,a.NLS_area_sq_yards,a.NLS_area_sq_feet,a.NLS_area_sq_feet_us,a.NLS_area_sq_meters];this._areaUnitStringsLong="esriAcres esriSquareMiles esriSquareKilometers esriHectares esriSquareYards esriSquareFeet esriSquareFeetUS esriSquareMeters".split(" ");
this._buttonDijits={area:this._areaButton,distance:this._distanceButton,location:this._locationButton};n.byNode(this._distanceButton.domNode).setLabel(a.NLS_distance);n.byNode(this._areaButton.domNode).setLabel(a.NLS_area);n.byNode(this._locationButton.domNode).setLabel(a.NLS_location);n.byNode(this.resultLabel.domNode).setContent(a.NLS_resultLabel)},onToolChange:function(){},onUnitChange:function(){},onMeasureStart:function(){},onMeasure:function(){},onMeasureEnd:function(){},_measureAreaMouseClickHandler:function(a){var b;
this._map.snappingManager&&(b=this._map.snappingManager._snappingPoint);b=b||a.mapPoint;if(this._inputPoints.push(b),this._currentStartPt=b,1===this._inputPoints.length){this._tempGraphic.setGeometry(new y(this._map.spatialReference));for(a=0;a<this._measureGraphics.length;a++)this._map.graphics.remove(this._measureGraphics[a]);this._measureGraphics=[];this.result=0;this._outputResult(this.result,S.widgets.measurement.NLS_area_sq_meters);this._mouseMoveMapHandler=k.connect(this._map,"onMouseMove",
this,"_measureAreaMouseMoveHandler");this.onMeasureStart(this.activeTool,this.getUnit())}if(this._measureGraphic=new G,this._measureGraphic.setSymbol(this._areaLineSymbol),this._measureGraphics.push(this._measureGraphic),1<this._inputPoints.length){a=new y(this._map.spatialReference);a.addPath([this._inputPoints[this._inputPoints.length-2],b]);var c=new y(this._map.spatialReference);c.addPath([this._inputPoints[0],b]);b=this._densifyGeometry(a);c=this._densifyGeometry(c);this._tempGraphic.setGeometry(c);
this._measureGraphic.setGeometry(b);this._map.graphics.add(this._measureGraphic);b=new G;if(b.setGeometry(a),this._polylineGraphics.push(b),2<this._inputPoints.length){b=new w(this._map.spatialReference);c=[];for(a=0;a<this._inputPoints.length;a++)c.push([this._inputPoints[a].x,this._inputPoints[a].y]);c.push([this._inputPoints[0].x,this._inputPoints[0].y]);b.addRing(c);this._currentGeometry=b;this._polygonGraphic?(this._map.graphics.remove(this._polygonGraphic),this._polylineGraphics.push(this._tempGraphic),
this._polygonGraphic=this._generatePolygonFromPaths(),this._map.graphics.add(this._polygonGraphic),this._measureGraphic=this._polygonGraphic,this._polylineGraphics.pop()):(this._polygonGraphic=this._generatePolygonFromPaths(),this._map.graphics.add(this._polygonGraphic));this._getArea(b)}}else this._polygonGraphic&&(this._map.graphics.remove(this._polygonGraphic),this._polygonGraphic=null)},_measureAreaMouseMoveHandler:function(a){var b;if(0<this._inputPoints.length){var c,d=new y(this._map.spatialReference);
this._map.snappingManager&&(c=this._map.snappingManager._snappingPoint);b=c||a.mapPoint;d.addPath([this._currentStartPt,b]);a=this._densifyGeometry(d);this._tempGraphic.setGeometry(a)}1<this._inputPoints.length&&(a=new y(this._map.spatialReference),a.addPath([b,this._inputPoints[0]]),b=this._densifyGeometry(a),this._tempGraphic.setGeometry(this._tempGraphic.geometry.addPath(b.paths[0])))},_measureAreaDblClickHandler:function(a){k.disconnect(this._mouseMoveMapHandler);this._mouseMoveMapHandler=null;
"touch"===this._map.navigationManager.eventModel&&c("ios")&&this._measureAreaMouseClickHandler(a);var b=new w(this._map.spatialReference),d=[];for(a=0;a<this._inputPoints.length;a++)d.push([this._inputPoints[a].x,this._inputPoints[a].y]);d.push([this._inputPoints[0].x,this._inputPoints[0].y]);b.addRing(d);this._inputPoints=[];this._currentGeometry=b;this._polygonGraphic&&(this._map.graphics.remove(this._polygonGraphic),this._polylineGraphics.push(this._tempGraphic),this._polygonGraphic=this._generatePolygonFromPaths(),
this._map.graphics.add(this._polygonGraphic));this._getArea(b);this._polylineGraphics=[]},_measureDistanceMouseClickHandler:function(a){var b;this._map.snappingManager&&(b=this._map.snappingManager._snappingPoint);a=b||a.mapPoint;if(this._inputPoints.push(a),this._currentStartPt=a,1===this._inputPoints.length){for(b=0;b<this._measureGraphics.length;b++)this._map.graphics.remove(this._measureGraphics[b]);this._map.graphics.remove(this._tempGraphic);this._measureGraphics=[];this.result=0;this._outputResult(this.result,
S.widgets.measurement.NLS_length_meters);this._tempGraphic=new G;this._tempGraphic.setSymbol(this._lineSymbol);this._map.graphics.add(this._tempGraphic);this._mouseMoveMapHandler=k.connect(this._map,"onMouseMove",this,"_measureDistanceMouseMoveHandler");this.onMeasureStart(this.activeTool,this.getUnit())}this._tempGraphic.setGeometry(new y(this._map.spatialReference));b=new G;if(b.setSymbol(this._pointSymbol),b.setGeometry(a),this._measureGraphics.push(b),this._map.graphics.add(b),1<this._inputPoints.length){this._measureGraphic=
new G;this._measureGraphic.setSymbol(this._lineSymbol);this._measureGraphics.push(this._measureGraphic);b=new y(this._map.spatialReference);b.addPath([this._inputPoints[this._inputPoints.length-2],a]);var c=this._densifyGeometry(b);(this._measureGraphic.setGeometry(c),this._map.graphics.add(this._measureGraphic),"PCS"===this._map.cs)?this._geometryServiceLength(b,!1):(c=this._geodesicDistance(this._inputPoints[this._inputPoints.length-2],a),b=this._outputResult(c,this.getUnit()),this.result+=c,this._showDistance(this.result),
c=this._outputResult(this.result,this.getUnit()),this.onMeasure(this.activeTool,a,c,this.getUnit(),b))}else b.setSymbol(this._pointSymbol)},_measureDistanceMouseMoveHandler:function(a){if(0<this._inputPoints.length){var b,c=new y(this._map.spatialReference);this._map.snappingManager&&(b=this._map.snappingManager._snappingPoint);a=b||a.mapPoint;c.addPath([this._currentStartPt,a]);c=this._densifyGeometry(c);if(this._tempGraphic.setGeometry(c),"PCS"!==this._map.cs)b=this._geodesicDistance(this._currentStartPt,
a),c=this._outputResult(b,this.getUnit()),b+=this.result,this._showDistance(b),b=this._outputResult(b,this.getUnit()),this.onMeasure(this.activeTool,a,b,this.getUnit(),c)}},_measureDistanceDblClickHandler:function(a){var b;k.disconnect(this._mouseMoveMapHandler);this._mouseMoveMapHandler=null;"touch"===this._map.navigationManager.eventModel&&c("ios")&&this._measureDistanceMouseClickHandler(a);a=new y(this._map.spatialReference);a.addPath(this._inputPoints);this._currentGeometry=a;b=this._densifyGeometry(a);
this._measureGraphic.geometry=b;"PCS"===this._map.cs?this._geometryServiceLength(a,!0):(this._inputPoints=[],this.onMeasureEnd(this.activeTool,a,this._outputResult(this.result,this.getUnit()),this.getUnit()))},_geometryServiceLength:function(a,b){var c=new A;c.polylines=[a];c.lengthUnit=9001;c.calculationType="geodesic";this._geometryService.lengths(c,e.hitch(this,function(c){c=c.lengths[0];if(b)this.result=c,this._showDistance(this.result),this._inputPoints=[],this.onMeasureEnd(this.activeTool,a,
this._outputResult(this.result,this.getUnit()),this.getUnit());else{var d=this._outputResult(c,this.getUnit());this.result+=c;this._showDistance(this.result);this.onMeasure(this.activeTool,a,this._outputResult(this.result,this.getUnit()),this.getUnit(),d)}}))},_locationClickHandler:function(a){var b;this._map.snappingManager&&(b=this._map.snappingManager._snappingPoint);a=b||a.mapPoint;this._locationButtonToggle();this._locationGraphic=new G;this._locationGraphic.setGeometry(a);this._locationGraphic.setSymbol(this._pointSymbol);
this._map.graphics.add(this._locationGraphic);this._measureGraphics.push(this._locationGraphic);this._calculateLocation(a,!0)},_locationMoveHandler:function(a){var b;this._map.snappingManager&&(b=this._map.snappingManager._snappingPoint);this._calculateLocation(b||a.mapPoint,!1)},_outputResult:function(a,b){a/=this._unitDictionary[b];return 0===a?this.resultValue.setContent("\x26nbsp"):1E6<a?this.resultValue.setContent(R.format(a.toPrecision(9),{pattern:this.numberPattern})+" "+b):10>a?this.resultValue.setContent(R.format(a.toFixed(2),
{pattern:this.numberPattern+"0"})+" "+b):this.resultValue.setContent(R.format(a.toFixed(2),{pattern:this.numberPattern})+" "+b),a},_createDistanceUnitList:function(){var a,b=new r({style:"display: none;"});l.forEach(this._distanceUnitStrings,e.hitch(this,function(a,c){a=new E({label:a,onClick:e.hitch(this,function(){this._switchUnit(this._distanceUnitStringsLong[c])})});a.set("class","unitDropDown");b.addChild(a)}));n.byNode(this._unitDropDown.domNode).set("dropDown",b);this.currentDistanceUnit?(a=
this._unitStrings[this.currentDistanceUnit],n.byNode(this._unitDropDown.domNode).set("label",a)):(a=this._unitStrings[this._defaultDistanceUnit],n.byNode(this._unitDropDown.domNode).set("label",a),this.currentDistanceUnit=this._defaultDistanceUnit)},_createAreaUnitList:function(){var a,b=new r({style:"display: none;"});l.forEach(this._areaUnitStrings,e.hitch(this,function(a,c){a=new E({label:a,onClick:e.hitch(this,function(){this._switchUnit(this._areaUnitStringsLong[c])})});a.set("class","unitDropDown");
b.addChild(a)}));n.byNode(this._unitDropDown.domNode).set("dropDown",b);this.currentAreaUnit?(a=this._unitStrings[this.currentAreaUnit],n.byNode(this._unitDropDown.domNode).set("label",a)):(a=this._unitStrings[this._defaultAreaUnit],n.byNode(this._unitDropDown.domNode).set("label",a),this.currentAreaUnit=this._defaultAreaUnit)},_createLocationUnitList:function(){var a;a=this._locationUnitStrings;var b=new r({style:"display: none;"});null!==this._geometryService&&!1!==this.advancedLocationUnits||(a=
a.slice(0,2));l.forEach(a,e.hitch(this,function(a,c){a=new E({label:a,onClick:e.hitch(this,function(){this._switchLocationUnit(this._locationUnitStringsLong[c])})});a.set("class","unitDropDown");b.addChild(a)}));n.byNode(this._unitDropDown.domNode).set("dropDown",b);this.currentLocationUnit||(this.currentLocationUnit=this._defaultLocationUnit);a=this._unitStrings[this.currentLocationUnit];n.byNode(this._unitDropDown.domNode).set("label",a);"esriDegreeMinuteSeconds"!==this.currentLocationUnit&&"esriDecimalDegrees"!==
this.currentLocationUnit||this._toggleLocationResultsTable(!0,!1)},_drawPointGraphics:function(d){var f,h,n=this._pointSymbol,k=this._defaultCustomPointSymbolWidth,l=this._defaultCustomPointSymbolHeight;d=a.create("div",{class:"esriLocationResultSymbol"},d);d=g.createSurface(d,k,l);9>c("ie")&&(f=d.getEventSource(),b.set(f,"position","relative"),b.set(f.parentNode,"position","relative"));f=n.getShapeDescriptors();try{h=d.createShape(f.defaultShape).setFill(f.fill).setStroke(f.stroke)}catch(ba){return d.clear(),
void d.destroy()}var m=h.getBoundingBox();f=m.width;var n=m.height,p=-(m.x+f/2),m=-(m.y+n/2);d=d.getDimensions();d={dx:p+d.width/2,dy:m+d.height/2};if(f>k||n>l)p=f/k>n/l,k=((p?k:l)-5)/(p?f:n),e.mixin(d,{xx:k,yy:k});h.applyTransform(d)}});return c("extend-esri")&&e.setObject("dijit.Measurement",m,U),m})},"dijit/Menu":function(){define("require dojo/_base/array dojo/_base/declare dojo/dom dojo/dom-attr dojo/dom-geometry dojo/dom-style dojo/keys dojo/_base/lang dojo/on dojo/sniff dojo/_base/window dojo/window ./popup ./DropDownMenu dojo/ready".split(" "),
function(h,m,e,l,k,d,f,c,b,a,g,p,n,r,E,F){g("dijit-legacy-requires")&&F(0,function(){h(["dijit/MenuItem","dijit/PopupMenuItem","dijit/CheckedMenuItem","dijit/MenuSeparator"])});return e("dijit.Menu",E,{constructor:function(){this._bindings=[]},targetNodeIds:[],selector:"",contextMenuForWindow:!1,leftClickToOpen:!1,refocus:!0,postCreate:function(){this.contextMenuForWindow?this.bindDomNode(this.ownerDocumentBody):m.forEach(this.targetNodeIds,this.bindDomNode,this);this.inherited(arguments)},_iframeContentWindow:function(a){return n.get(this._iframeContentDocument(a))||
this._iframeContentDocument(a).__parent__||a.name&&document.frames[a.name]||null},_iframeContentDocument:function(a){return a.contentDocument||a.contentWindow&&a.contentWindow.document||a.name&&document.frames[a.name]&&document.frames[a.name].document||null},bindDomNode:function(d){d=l.byId(d,this.ownerDocument);var e;if("iframe"==d.tagName.toLowerCase()){var f=d;e=this._iframeContentWindow(f);e=p.body(e.document)}else e=d==p.body(this.ownerDocument)?this.ownerDocument.documentElement:d;var g={node:d,
iframe:f};k.set(d,"_dijitMenu"+this.id,this._bindings.push(g));var h=b.hitch(this,function(b){var d=this.selector,e=d?function(b){return a.selector(d,b)}:function(a){return a},g=this;return[a(b,e(this.leftClickToOpen?"click":"contextmenu"),function(a){a.stopPropagation();a.preventDefault();(new Date).getTime()<g._lastKeyDown+500||g._scheduleOpen(this,f,{x:a.pageX,y:a.pageY},a.target)}),a(b,e("keydown"),function(a){if(93==a.keyCode||a.shiftKey&&a.keyCode==c.F10||g.leftClickToOpen&&a.keyCode==c.SPACE)a.stopPropagation(),
a.preventDefault(),g._scheduleOpen(this,f,null,a.target),g._lastKeyDown=(new Date).getTime()})]});g.connects=e?h(e):[];f&&(g.onloadHandler=b.hitch(this,function(){var a=this._iframeContentWindow(f),a=p.body(a.document);g.connects=h(a)}),f.addEventListener?f.addEventListener("load",g.onloadHandler,!1):f.attachEvent("onload",g.onloadHandler))},unBindDomNode:function(a){var b;try{b=l.byId(a,this.ownerDocument)}catch(B){return}a="_dijitMenu"+this.id;if(b&&k.has(b,a)){for(var c=k.get(b,a)-1,d=this._bindings[c],
e;e=d.connects.pop();)e.remove();(e=d.iframe)&&(e.removeEventListener?e.removeEventListener("load",d.onloadHandler,!1):e.detachEvent("onload",d.onloadHandler));k.remove(b,a);delete this._bindings[c]}},_scheduleOpen:function(a,b,c,d){this._openTimer||(this._openTimer=this.defer(function(){delete this._openTimer;this._openMyself({target:d,delegatedTarget:a,iframe:b,coords:c})},1))},_openMyself:function(a){function b(){u.refocus&&E&&E.focus();r.close(u)}var c=a.target,e=a.iframe,h=a.coords,n=!h;this.currentTarget=
a.delegatedTarget;if(h){if(e){a=d.position(e,!0);var c=this._iframeContentWindow(e),c=d.docScroll(c.document),k=f.getComputedStyle(e),m=f.toPixelValue,p=(g("ie")&&g("quirks")?0:m(e,k.paddingLeft))+(g("ie")&&g("quirks")?m(e,k.borderLeftWidth):0),e=(g("ie")&&g("quirks")?0:m(e,k.paddingTop))+(g("ie")&&g("quirks")?m(e,k.borderTopWidth):0);h.x+=a.x+p-c.x;h.y+=a.y+e-c.y}}else h=d.position(c,!0),h.x+=10,h.y+=10;var u=this,e=this._focusManager.get("prevNode");a=this._focusManager.get("curNode");var E=!a||
l.isDescendant(a,this.domNode)?e:a;r.open({popup:this,x:h.x,y:h.y,onExecute:b,onCancel:b,orient:this.isLeftToRight()?"L":"R"});this.focus();n||this.defer(function(){this._cleanUp(!0)});this._onBlur=function(){this.inherited("_onBlur",arguments);r.close(this)}},destroy:function(){m.forEach(this._bindings,function(a){a&&this.unBindDomNode(a.node)},this);this.inherited(arguments)}})})},"esri/tasks/AreasAndLengthsParameters":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/json dojo/has ../kernel".split(" "),
function(h,m,e,l,k,d){h=h(null,{declaredClass:"esri.tasks.AreasAndLengthsParameters",polygons:null,lengthUnit:null,areaUnit:null,calculationType:null,toJson:function(){var d=e.map(this.polygons,function(b){return b.toJson()}),c={};c.polygons=l.toJson(d);d=this.polygons[0].spatialReference;return c.sr=d.wkid?d.wkid:l.toJson(d.toJson()),this.lengthUnit&&(c.lengthUnit=this.lengthUnit),this.areaUnit&&(m.isString(this.areaUnit)?c.areaUnit=l.toJson({areaUnit:this.areaUnit}):c.areaUnit=this.areaUnit),this.calculationType&&
(c.calculationType=this.calculationType),c}});return k("extend-esri")&&m.setObject("tasks.AreasAndLengthsParameters",h,d),h})},"esri/tasks/LengthsParameters":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/json dojo/has ../kernel".split(" "),function(h,m,e,l,k,d){h=h(null,{declaredClass:"esri.tasks.LengthsParameters",polylines:null,lengthUnit:null,geodesic:null,calculationType:null,toJson:function(){var d=e.map(this.polylines,function(b){return b.toJson()}),c={};
c.polylines=l.toJson(d);d=this.polylines[0].spatialReference;return c.sr=d.wkid?d.wkid:l.toJson(d.toJson()),this.lengthUnit&&(c.lengthUnit=this.lengthUnit),this.geodesic&&(c.geodesic=this.geodesic),this.calculationType&&(c.calculationType=this.calculationType),c}});return k("extend-esri")&&m.setObject("tasks.LengthsParameters",h,d),h})},"dijit/ProgressBar":function(){define("require dojo/_base/declare dojo/dom-class dojo/_base/lang dojo/number ./_Widget ./_TemplatedMixin dojo/text!./templates/ProgressBar.html".split(" "),
function(h,m,e,l,k,d,f,c){return m("dijit.ProgressBar",[d,f],{progress:"0",value:"",maximum:100,places:0,indeterminate:!1,label:"",name:"",templateString:c,_indeterminateHighContrastImagePath:h.toUrl("./themes/a11y/indeterminate_progress.gif"),postMixInProperties:function(){this.inherited(arguments);this.params&&"value"in this.params||(this.value=this.indeterminate?Infinity:this.progress)},buildRendering:function(){this.inherited(arguments);this.indeterminateHighContrastImage.setAttribute("src",this._indeterminateHighContrastImagePath.toString());
this.update()},_setDirAttr:function(b){var a="rtl"==b.toLowerCase();e.toggle(this.domNode,"dijitProgressBarRtl",a);e.toggle(this.domNode,"dijitProgressBarIndeterminateRtl",this.indeterminate&&a);this.inherited(arguments)},update:function(b){l.mixin(this,b||{});b=this.internalProgress;var a=this.domNode,c=1;this.indeterminate?a.removeAttribute("aria-valuenow"):(-1!=String(this.progress).indexOf("%")?(c=Math.min(parseFloat(this.progress)/100,1),this.progress=c*this.maximum):(this.progress=Math.min(this.progress,
this.maximum),c=this.maximum?this.progress/this.maximum:0),a.setAttribute("aria-valuenow",this.progress));a.setAttribute("aria-labelledby",this.labelNode.id);a.setAttribute("aria-valuemin",0);a.setAttribute("aria-valuemax",this.maximum);this.labelNode.innerHTML=this.report(c);e.toggle(this.domNode,"dijitProgressBarIndeterminate",this.indeterminate);e.toggle(this.domNode,"dijitProgressBarIndeterminateRtl",this.indeterminate&&!this.isLeftToRight());b.style.width=100*c+"%";this.onChange()},_setValueAttr:function(b){this._set("value",
b);Infinity==b?this.update({indeterminate:!0}):this.update({indeterminate:!1,progress:b})},_setLabelAttr:function(b){this._set("label",b);this.update()},_setIndeterminateAttr:function(b){this._set("indeterminate",b);this.update()},report:function(b){return this.label?this.label:this.indeterminate?"\x26#160;":k.format(b,{type:"percent",places:this.places,locale:this.lang})},onChange:function(){}})})},"dojox/gfx/utils":function(){define("dojo/_base/kernel dojo/_base/lang ./_base dojo/_base/html dojo/_base/array dojo/_base/window dojo/_base/json dojo/_base/Deferred dojo/_base/sniff require dojo/_base/config".split(" "),
function(h,m,e,l,k,d,f,c,b,a,g){var p=e.utils={};m.mixin(p,{forEach:function(a,b,c){c=c||h.global;b.call(c,a);(a instanceof e.Surface||a instanceof e.Group)&&k.forEach(a.children,function(a){p.forEach(a,b,c)})},serialize:function(a){var b={},c;if((c=a instanceof e.Surface)||a instanceof e.Group){if(b.children=k.map(a.children,p.serialize),c)return b.children}else b.shape=a.getShape();a.getTransform&&(c=a.getTransform())&&(b.transform=c);a.getStroke&&(c=a.getStroke())&&(b.stroke=c);a.getFill&&(c=a.getFill())&&
(b.fill=c);a.getFont&&(c=a.getFont())&&(b.font=c);return b},toJson:function(a,b){return f.toJson(p.serialize(a),b)},deserialize:function(a,b){if(b instanceof Array)return k.map(b,m.hitch(null,p.deserialize,a));a="shape"in b?a.createShape(b.shape):a.createGroup();"transform"in b&&a.setTransform(b.transform);"stroke"in b&&a.setStroke(b.stroke);"fill"in b&&a.setFill(b.fill);"font"in b&&a.setFont(b.font);"children"in b&&k.forEach(b.children,m.hitch(null,p.deserialize,a));return a},fromJson:function(a,
b){return p.deserialize(a,f.fromJson(b))},toSvg:function(a){var b=new c;if("svg"===e.renderer)try{var f=p._cleanSvg(p._innerXML(a.rawNode));b.callback(f)}catch(L){b.errback(L)}else{p._initSvgSerializerDeferred||p._initSvgSerializer();var g=p.toJson(a),f=function(){try{var c=a.getDimensions(),e=c.width,f=c.height,h=p._gfxSvgProxy.document.createElement("div");p._gfxSvgProxy.document.body.appendChild(h);d.withDoc(p._gfxSvgProxy.document,function(){l.style(h,"width",e);l.style(h,"height",f)},this);p._gfxSvgProxy[dojox._scopeName].gfx.createSurface(h,
e,f).whenLoaded(null,function(a){try{p._gfxSvgProxy[dojox._scopeName].gfx.utils.fromJson(a,g);var c=p._cleanSvg(h.innerHTML);a.clear();a.destroy();p._gfxSvgProxy.document.body.removeChild(h);b.callback(c)}catch(y){b.errback(y)}})}catch(q){b.errback(q)}};0<p._initSvgSerializerDeferred.fired?f():p._initSvgSerializerDeferred.addCallback(f)}return b},_gfxSvgProxy:null,_initSvgSerializerDeferred:null,_svgSerializerInitialized:function(){p._initSvgSerializerDeferred.callback(!0)},_initSvgSerializer:function(){if(!p._initSvgSerializerDeferred){p._initSvgSerializerDeferred=
new c;var e=d.doc.createElement("iframe");l.style(e,{display:"none",position:"absolute",width:"1em",height:"1em",top:"-10000px"});var f;b("ie")?e.onreadystatechange=function(){"complete"==e.contentWindow.document.readyState&&(e.onreadystatechange=function(){},f=setInterval(function(){e.contentWindow[h.scopeMap.dojo[1]._scopeName]&&e.contentWindow[h.scopeMap.dojox[1]._scopeName].gfx&&e.contentWindow[h.scopeMap.dojox[1]._scopeName].gfx.utils&&(clearInterval(f),e.contentWindow.parent[h.scopeMap.dojox[1]._scopeName].gfx.utils._gfxSvgProxy=
e.contentWindow,e.contentWindow.parent[h.scopeMap.dojox[1]._scopeName].gfx.utils._svgSerializerInitialized())},50))}:e.onload=function(){e.onload=function(){};f=setInterval(function(){e.contentWindow[h.scopeMap.dojo[1]._scopeName]&&e.contentWindow[h.scopeMap.dojox[1]._scopeName].gfx&&e.contentWindow[h.scopeMap.dojox[1]._scopeName].gfx.utils&&(clearInterval(f),e.contentWindow.parent[h.scopeMap.dojox[1]._scopeName].gfx.utils._gfxSvgProxy=e.contentWindow,e.contentWindow.parent[h.scopeMap.dojox[1]._scopeName].gfx.utils._svgSerializerInitialized())},
50)};var k=g.dojoxGfxSvgProxyFrameUrl||a.toUrl("dojox/gfx/resources/gfxSvgProxyFrame.html");e.setAttribute("src",k.toString());d.body().appendChild(e)}},_innerXML:function(a){return a.innerXML?a.innerXML:a.xml?a.xml:"undefined"!=typeof XMLSerializer?(new XMLSerializer).serializeToString(a):null},_cleanSvg:function(a){a&&(-1==a.indexOf('xmlns\x3d"http://www.w3.org/2000/svg"')&&(a=a.substring(4,a.length),a='\x3csvg xmlns\x3d"http://www.w3.org/2000/svg"'+a),-1==a.indexOf('xmlns:xlink\x3d"http://www.w3.org/1999/xlink"')&&
(a=a.substring(4,a.length),a='\x3csvg xmlns:xlink\x3d"http://www.w3.org/1999/xlink"'+a),-1===a.indexOf("xlink:href")&&(a=a.replace(/href\s*=/g,"xlink:href\x3d")),a=a.replace(/<img\b([^>]*)>/gi,"\x3cimage $1 /\x3e"),a=a.replace(/\bdojoGfx\w*\s*=\s*(['"])\w*\1/g,""),a=a.replace(/\b__gfxObject__\s*=\s*(['"])\w*\1/g,""),a=a.replace(/[=]([^"']+?)(\s|>)/g,'\x3d"$1"$2'),a=a.replace(/\bstroke-opacity\w*\s*=\s*(['"])undefined\1/g,""));return a}});return p})},"widgets/ElevationProfile/_build-generate_module":function(){define(["dojo/text!./Widget.html",
"dojo/text!./css/style.css","dojo/i18n!./nls/strings","dojo/text!widgets/ElevationProfile/config.json"],function(){})},"url:esri/dijit/templates/Measurement.html":"\x3cdiv class\x3d\"esriMeasurement\"\x3e\n  \x3cdiv dojoType\x3d'dijit.layout.ContentPane' class\x3d'esriMeasurementButtonContainer'\x3e\n    \x3cdiv dojoType\x3d'dijit.form.ToggleButton' baseClass\x3d'esriButton' dojoAttachPoint\x3d'_areaButton' iconClass\x3d'areaIcon' showLabel\x3d'false' dojoAttachEvent\x3d'onClick:_areaButtonToggle'\x3e\x3c/div\x3e\n    \x3cdiv dojoType\x3d'dijit.form.ToggleButton' baseClass\x3d'esriButton' dojoAttachPoint\x3d'_distanceButton' iconClass\x3d'distanceIcon' showLabel\x3d'false' dojoAttachEvent\x3d'onClick:_distanceButtonToggle'\x3e\x3c/div\x3e\n    \x3cdiv dojoType\x3d'dijit.form.ToggleButton' baseClass\x3d'esriButton' dojoAttachPoint\x3d'_locationButton' iconClass\x3d'locationIcon' showLabel\x3d'false' dojoAttachEvent\x3d'onClick:_locationButtonToggle'\x3e\x3c/div\x3e\n    \x3cdiv class\x3d\"esriMeasurementSeparator\"\x3e|\x3c/div\x3e\n    \x3cbutton dojoType\x3d'dijit.form.DropDownButton' baseClass\x3d'esriToggleButton' dojoAttachPoint\x3d'_unitDropDown' label\x3d'unit' value\x3d'unit' style\x3d'visibility:hidden;'\x3e\x3c/button\x3e\n  \x3c/div\x3e\n  \x3cdiv dojoType\x3d'dijit.layout.ContentPane' dojoAttachPoint\x3d'resultLabel' class\x3d'resultLabel esriMeasurementResultLabel'\x3e\x3c/div\x3e\n  \x3cdiv dojoType\x3d'dijit.layout.ContentPane' dojoAttachPoint\x3d'resultValueContainer' align\x3d'leading' class\x3d\"esriMeasurementResultValue\"\x3e\n    \x3cdiv dojoType\x3d'dijit.layout.ContentPane' dojoAttachPoint\x3d'resultValue' class\x3d'result'\x3e\x26nbsp;\x3c/div\x3e\n  \x3c/div\x3e\n  \x3cdiv dojoType\x3d'dijit.layout.ContentPane' dojoAttachPoint\x3d'resultTable' align\x3d'leading' class\x3d\"resultTable esriMeasurementTableContainer\" style\x3d\"display:none;\"\x3e\n    \x3ctable class\x3d\"esriMeasurementResultTable\"\x3e\n      \x3ctr\x3e\n        \x3ctd class\x3d\"esriMeasurementTableHeader\" colspan\x3d\"2\"\x3e${_NLS_Lat}\x3c/td\x3e\x3ctd class\x3d\"esriMeasurementTableHeader\"\x3e${_NLS_Lon}\x3c/td\x3e\n      \x3c/tr\x3e\n      \x3ctr class\x3d\"esriMeasurementTableRow\" dojoAttachPoint\x3d\"_mouseRow\"\x3e\n        \x3ctd dojoAttachPoint\x3d\"mouseCell\"\x3e\x3c/td\x3e\n        \x3ctd class\x3d\"esriMeasurementTableCell\"\x3e\n          \x3cspan dojoAttachPoint\x3d\"mouseLatitude\" dir\x3d'ltr'\x3e\x3c/span\x3e\n        \x3c/td\x3e\n        \x3ctd class\x3d\"esriMeasurementTableCell\"\x3e\n          \x3cspan dojoAttachPoint\x3d\"mouseLongitude\" dir\x3d'ltr'\x3e\x3c/span\x3e\n        \x3c/td\x3e\n      \x3c/tr\x3e\n      \x3ctr class\x3d\"esriMeasurementTableRow\"\x3e\n        \x3ctd dojoAttachPoint\x3d\"pinCell\"\x3e\x3c/td\x3e\n        \x3ctd class\x3d\"esriMeasurementTableCell\"\x3e\n          \x3cspan dojoAttachPoint\x3d\"markerLatitude\" dir\x3d'ltr'\x3e\x3c/span\x3e\n        \x3c/td\x3e\n        \x3ctd class\x3d\"esriMeasurementTableCell\"\x3e\n          \x3cspan dojoAttachPoint\x3d\"markerLongitude\" dir\x3d'ltr'\x3e\x3c/span\x3e\n        \x3c/td\x3e\n      \x3c/tr\x3e\n    \x3c/table\x3e\n  \x3c/div\x3e\n\x3c/div\x3e",
"url:dijit/templates/ProgressBar.html":'\x3cdiv class\x3d"dijitProgressBar dijitProgressBarEmpty" role\x3d"progressbar"\n\t\x3e\x3cdiv  data-dojo-attach-point\x3d"internalProgress" class\x3d"dijitProgressBarFull"\n\t\t\x3e\x3cdiv class\x3d"dijitProgressBarTile" role\x3d"presentation"\x3e\x3c/div\n\t\t\x3e\x3cspan style\x3d"visibility:hidden"\x3e\x26#160;\x3c/span\n\t\x3e\x3c/div\n\t\x3e\x3cdiv data-dojo-attach-point\x3d"labelNode" class\x3d"dijitProgressBarLabel" id\x3d"${id}_label"\x3e\x3c/div\n\t\x3e\x3cspan data-dojo-attach-point\x3d"indeterminateHighContrastImage"\n\t\t   class\x3d"dijitInline dijitProgressBarIndeterminateHighContrastImage"\x3e\x3c/span\n\x3e\x3c/div\x3e\n',
"url:widgets/ElevationProfile/Widget.html":'\x3cdiv\x3e\r\n  \x3cdiv data-dojo-attach-point\x3d"tabMain"\x3e\r\n    \x3cdiv class\x3d"${baseClass} profile-tab-node" data-dojo-attach-point\x3d"tabNode1"\x3e\r\n      \x3cdiv\x3e\r\n        \x3cp\x3eView the elevation profile of a selected line segment.\x3c/p\x3e\r\n          \x3cul\x3e\r\n            \x3cli\x3eSelect the ruler icon below\x3c/li\x3e\r\n            \x3cli\x3eChoose units\x3c/li\x3e\r\n            \x3cli\x3eClick on the map to start\x3c/li\x3e\r\n            \x3cli\x3eDouble click to end\x3c/li\x3e\r\n          \x3c/ul\x3e\r\n        \x3c/div\x3e\r\n      \x3ca target \x3d "_blank" href\x3d"http://enviroatlas.epa.gov/enviroatlas/interactivemap/AboutEnviroAtlas.pdf"\x3eLearn more in our User Guide (pdf)\x3c/a\x3e\r\n      \x3cbr\x3e\r\n      \x3cbr\x3e\r\n      \x3cdiv style\x3d"padding-top:8px;"\x3e\r\n        \x3cdiv data-dojo-attach-point\x3d"_measureNode" \x3e\x3c/div\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv class\x3d"${baseClass} profile-tab-node" data-dojo-attach-point\x3d"tabNode2"\x3e\r\n      \x3cdiv data-dojo-attach-point\x3d"progressbar"\x3e\x3c/div\x3e\r\n      \x3cdiv class\x3d"result-div" data-dojo-attach-point\x3d"divResult"\x3e\r\n        \x3clabel data-dojo-attach-point\x3d"divResultMessage"\x3e${nls.chartLabel}\x3c/label\x3e\r\n      \x3c/div\x3e\r\n      \x3cdiv class\x3d"result-div"\x3e\r\n        \x3cdiv data-dojo-attach-point\x3d"btnInfo"\x3e\x3cdiv class\x3d"${baseClass}info-icon"\x3e\x3cspan\x3ei\x3c/span\x3e\x3c/div\x3e\r\n          \x3cdiv class\x3d"${baseClass}-profile-info-label"\x3e${nls.profileinfo}\x3c/div\x3e\r\n        \x3c/div\x3e\r\n        \x3ca style\x3d"float:right; margin-right:10px" href\x3d"#" target \x3d "_blank" data-dojo-attach-point\x3d"btnDownload"\x3e${nls.download}\x3c/a\x3e\r\n        \x3ca style\x3d"float:right; margin-right:10px" href\x3d"#" data-dojo-attach-point\x3d"btnExport"\x3e${nls.prepare}\x3c/a\x3e\r\n        \x3ca style\x3d"float:right; margin-right:10px" href\x3d"#" data-dojo-attach-point\x3d"btnClear"\x3e${nls.clear}\x3c/a\x3e\r\n      \x3c/div\x3e\r\n      \x3cdiv data-dojo-attach-point\x3d"_chartNode" class\x3d"${baseClass}ChartNode"/\x3e\r\n    \x3c/div\x3e\r\n  \x3c/div\x3e\r\n  \x3cdiv data-dojo-type\x3d"jimu/dijit/LoadingShelter" data-dojo-attach-point\x3d"shelter" data-dojo-props\x3d"hidden:true"\x3e\x3c/div\x3e\r\n  \x3cinput id \x3d "butNullifyMeasureElevation" type\x3d"button" value\x3d"butNullifyMeasureElevation" style\x3d"display:none"  data-dojo-attach-event\x3d"onclick:NullifyMeasureClick"/\x3e \r\n\x3c/div\x3e\r\n',
"url:widgets/ElevationProfile/css/style.css":".widget-elevation-profile{position:relative; width:100%; height:100%; min-width:265px; min-height:279px;}.esriMeasurement .esriButton .dijitButtonNode {height: 32px;}.LaunchpadTheme .esriMeasurement .esriButton + .esriButton .dijitButtonNode {border: 1px solid #DDD !important;}.LaunchpadTheme .esriMeasurement:first-child .dijitButtonNode {border-radius: 2px !important;}.LaunchpadTheme .esriMeasurement .esriMeasurementSeparator {display: inline-block !important;}.LaunchpadTheme .esriMeasurement .esriToggleButton {display: inline-block !important;}.LaunchpadTheme .esriMeasurement {top: 36px !important;}.jimu-widget-frame\x3e.widget-elevation-profile\x3e.jimu-tab\x3e.control{margin:-14px -14px 0 -14.7px;}.widget-elevation-profileInfoDiv {cursor: default; -webkit-touch-callout: none; -webkit-user-select: none; -khtml-user-select: none; -moz-user-select: none; -moz-user-select:-moz-none; -ms-user-select: none; user-select: none; color: blue; float:left;}.widget-elevation-profile\x3e.jimu-tab\x3e.jimu-viewstack{position: absolute !important; top:45px !important; left:0 !important; right:0 !important; bottom:0 !important; height: auto; margin-bottom:-14px;}.widget-elevation-profileinfo-icon{cursor: pointer; display: inline-block; font-size: 18px; line-height: 20px; background: none repeat scroll 0% 0% #518DCA; color: #FFF; border-radius:99px; -moz-border-radius:99px; -webkit-border-radius:99px; font-weight:bold; -webkit-touch-callout: none; -webkit-user-select: none; -khtml-user-select: none; -moz-user-select: none; -moz-user-select:-moz-none; -ms-user-select: none; user-select: none; float:left; width:20px; height:20px; padding-left:7px;}.widget-elevation-profile-profile-info-label {float:left; cursor: pointer; padding-left: 4px;}.widget-elevation-profile .profile-tab-node{position:absolute !important; width:100% !important; height:auto !important; top:0 !important; bottom:0 !important; overflow: hidden;}.widget-elevation-profile .result-div{font-size:14px; padding-left:10px; padding-bottom:5px;}.widget-elevation-profileChartNode {height: 83%; width: 100%; min-height: 200px; overflow: hidden;}.widget-elevation-profile .PanelMax {height: 320px;}.widget-elevation-profileLabel {color: #000; font-weight: bolder; font-size: 0.8em; line-height: 1.0em;}.widget-elevation-profileGainLossLabel {width: 30%; position: absolute; bottom: 0; left: 10px; text-align: left; white-space: nowrap; display: inline-block; position: absolute;}.esriRTL .widget-elevation-profileGainLossLabel {right: 10px; text-align: right;}.widget-elevation-profileSourceLabel {width: 30%; position: absolute; bottom: 0; right: 10px; text-align: right; overflow: hidden; white-space: nowrap; word-break: keep-all; word-wrap: normal; text-overflow: ellipsis;}.esriRTL .widget-elevation-profileSourceLabel {left: 10px; text-align: left;}.widget-elevation-profilePopupRequirementLabel {color: #000; padding-left: 6px; font-size: smaller;}#tooltip{text-align: center; color: #fff; background: #111; position: absolute; z-index: 100; padding: 15px; border-radius: 8px; border: 1px solid white;}#tooltip:after {width: 0; height: 0; border-left: 10px solid transparent; border-right: 10px solid transparent; border-top: 10px solid #111; content: ''; position: absolute; left: 50%; bottom: -10px; margin-left: -10px;}#tooltip.top:after{border-top-color: transparent; border-bottom: 10px solid #111; top: -20px; bottom: auto;}#tooltip.left:after{left: 10px; margin: 0;}#tooltip.right:after{right: 10px; left: auto; margin: 0;}",
"url:widgets/ElevationProfile/config.json":'{\r\n  "profileTaskUrl": "https://elevation.arcgis.com/arcgis/rest/services/Tools/ElevationSync/GPServer",\r\n  "scalebarUnits": "feet",\r\n  "chartRenderingOptions": {\r\n    "chartTitleFontSize": 13,\r\n    "axisTitleFontSize": 11,\r\n    "axisLabelFontSize": 9,\r\n    "indicatorFontColor": "#eee",\r\n    "indicatorFillColor": "#777",\r\n    "titleFontColor": "#777",\r\n    "axisFontColor": "#777",\r\n    "axisMajorTickColor": "#777",\r\n    "skyTopColor": "#B0E0E6",\r\n    "skyBottomColor": "#4682B4",\r\n    "waterLineColor": "#eee",\r\n    "waterTopColor": "#ADD8E6",\r\n    "waterBottomColor": "#0000FF",\r\n    "elevationLineColor": "#D2B48C",\r\n    "elevationTopColor": "#8B4513",\r\n    "elevationBottomColor": "#CD853F",\r\n    "constrain": false\r\n  },\r\n  "symbols": {\r\n    "simplelinesymbol": {\r\n      "type": "esriSLS",\r\n      "style": "esriSLSSolid",\r\n      "color": [\r\n        68,\r\n        140,\r\n        203,\r\n        153\r\n      ],\r\n      "width": 2\r\n    }\r\n  }\r\n}\r\n',
"*now":function(h){h(['dojo/i18n!*preload*widgets/ElevationProfile/nls/Widget*["","ROOT"]'])}}});
define("dojo/_base/declare jimu/BaseWidget dojo/Evented dijit/_OnDijitClickMixin dijit/_WidgetsInTemplateMixin dojo/on dojo/aspect dojo/_base/lang dojo/_base/Deferred dojo/_base/array dojo/_base/json dojo/number dijit/registry dijit/form/Button dijit/form/ToggleButton put-selector/put dojo/dom-geometry dojo/dom-style dojo/dom-class dojo/_base/Color dojo/colors dojo/fx/easing dojox/charting/Chart dojox/charting/axis2d/Default dojox/charting/plot2d/Grid dojox/charting/plot2d/Areas dojox/charting/action2d/MouseIndicator dojox/charting/action2d/TouchIndicator dojox/charting/themes/ThreeD esri/sniff esri/request esri/tasks/Geoprocessor esri/geometry/Polyline esri/symbols/SimpleLineSymbol esri/symbols/SimpleMarkerSymbol esri/graphic esri/tasks/FeatureSet esri/tasks/LinearUnit esri/geometry/geodesicUtils esri/geometry/webMercatorUtils esri/units jimu/utils esri/dijit/Measurement dojo/_base/html dijit/ProgressBar jimu/dijit/TabContainer jimu/dijit/Message dojo/dom-construct dojo/dom-attr dojo/_base/window dojo/window dojo/_base/fx dojox/gfx/utils jimu/dijit/LoadingShelter".split(" "),function(h,
m,e,l,k,d,f,c,b,a,g,p,n,r,E,F,L,t,I,C,q,B,y,w,G,u,A,z,U,N,x,R,P,v,H,J,D,M,V,Q,S,T,W,K,ea,fa,O,Z,aa,ba,da,X,Y){return h([m,l,k,e],{baseClass:"widget-elevation-profile",declaredClass:"ElevationsProfile",samplingPointCount:199,profileService:null,loaded:!1,domNode:F("div#profileChartNode"),profileTaskUrl:null,scalebarUnits:null,elevLineSymbol:null,measureTool:null,lastMeasure:null,_sourceStr:null,_gainLossStr:null,_hasCanvasSupport:!1,isIE:!1,postCreate:function(){this.inherited(arguments);this.isIE=
T.has("ie")||T.has("edge");this._hasCanvasSupport=!!window.CanvasRenderingContext2D;var a=!1,b=!1,e=!1;d(this.btnInfo,"mouseenter",c.hitch(this,function(f){a=f.target;e=aa.get(a,"title");b=Z.create("div",{id:"tooltip",innerHTML:e,style:{opacity:0}},this.domNode);if(!e||""===e)return!1;aa.remove(a,"title");f=c.hitch(this,function(){da.getBox().w<1.5*b.clientWidth?t.set(b,"max-width",da.getBox().w/2):t.set(b,"max-width",340);var c=a.offsetLeft+a.clientWidth/2-b.clientWidth/2,d=a.offsetTop-b.clientHeight-
20;0>c?(c=a.offsetLeft+a.clientWidth/2-20,I.add(b,"left")):I.remove(b,"left");c+b.clientWidth>da.getBox().w?(c=a.offsetLeft-b.clientWidth+a.clientWidth/2+20,I.add(b,"right")):I.remove(b,"right");0>d?(d=a.offsetTop+a.clientHeight,I.add(b,"top")):I.remove(b,"top");t.set(b,"top",d+81+"px");X.animateProperty({node:b,duration:500,properties:{opacity:{end:1,start:0},top:"+\x3d10"}}).play()});f();d(n.getEnclosingWidget(this.domNode),"resize",f);f=function(){X.animateProperty({node:b,duration:50,properties:{opacity:{end:0,
start:.9},top:"-\x3d10"}}).play();Z.destroy(b);aa.set(a,"title",e)};d(a,"mouseleave",f);d(b,"click",f)}));this.scalebarUnits=this.config.scalebarUnits;this.chartRenderingOptions=c.mixin({},this.config.chartRenderingOptions);this.profileServiceUrl=c.replace("{0}/Profile",[this.config.profileTaskUrl]);this.own(f.after(n.getEnclosingWidget(this.domNode),"resize",c.hitch(this,this._resizeChart),!0));this._initProfileService=c.hitch(this,this._initProfileService);this.displayProfileChart=c.hitch(this,
this.displayProfileChart);this.clearProfileChart=c.hitch(this,this.clearProfileChart);this._updateProfileChart=c.hitch(this,this._updateProfileChart);this._createProfileChart=c.hitch(this,this._createProfileChart);this._getDisplayValue=c.hitch(this,this._getDisplayValue);this._initMeasureTool=c.hitch(this,this._initMeasureTool);this._initTabContainer();this._initProgressBar();this.elevLineSymbol=this.config.symbols&&this.config.symbols.simplelinesymbol?new v(this.config.symbols.simplelinesymbol):
new v;this._bindEvents();this._initMeasureTool();this.own(d(this.domNode,"mousedown",c.hitch(this,function(a){a.stopPropagation();a.altKey&&(a=this.nls.widgetverstr+": "+this.manifest.version,a+="\n"+this.nls.wabversionmsg+": "+this.manifest.wabVersion,a+="\n"+this.manifest.description,new O({titleLabel:this.nls.widgetversion,message:a}))})))},startup:function(){this.inherited(arguments);this._initUI()},_initTabContainer:function(){var a=[];a.push({title:this.nls.measurelabel,content:this.tabNode1});
a.push({title:this.nls.resultslabel,content:this.tabNode2});this.selTab=this.nls.measurelabel;this.tabContainer=new fa({tabs:a,selected:this.selTab},this.tabMain);this.tabContainer.startup();this.own(d(this.tabContainer,"tabChanged",c.hitch(this,function(a){a!==this.nls.resultslabel&&(this.selTab=a);this._resizeChart()})));T.setVerticalCenter(this.tabContainer.domNode)},_initProgressBar:function(){this.progressBar=new ea({indeterminate:!0},this.progressbar);K.setStyle(this.progressBar.domNode,"display",
"none")},onClose:function(){this.measureTool&&(this.measureTool.setTool("distance",!1),this.measureTool.clearResult(),this._displayChartLocation(-1));window.toggleOnElevation=!1;this.publishData({message:"mapClickForPopup"})},onOpen:function(){var a=this.domNode.parentNode.parentNode.parentNode.childNodes[0];"function"!==typeof a.onmousedown&&this.own(d(a,"mousedown",c.hitch(this,function(a){a.stopPropagation();a.altKey&&(a=this.nls.widgetverstr+": "+this.manifest.version,a+="\n"+this.nls.wabversionmsg+
": "+this.manifest.wabVersion,a+="\n"+this.manifest.description,new O({titleLabel:this.nls.widgetversion,message:a}))})));this.lastMeasure&&this.measureTool&&this.measureTool.measure(this.lastMeasure)},_initMeasureTool:function(){this.measureTool=new W({map:this.map,lineSymbol:this.elevLineSymbol,defaultAreaUnit:"metric"===this.scalebarUnits?S.SQUARE_KILOMETERS:S.SQUARE_MILES,defaultLengthUnit:"metric"===this.scalebarUnits?S.KILOMETERS:S.MILES},this._measureNode);f.after(this.measureTool,"setTool",
c.hitch(this,function(){this.measureTool.activeTool?(1==window.toggleOnRainDrop&&document.getElementById("selectPoint").click(),1==window.toggleOnHucNavigation&&document.getElementById("searchPointToggle").click(),window.toggleOnElevation=!0,this.publishData({message:"mapClickForPopup"}),this.map.setInfoWindowOnClick(!1),this.disableWebMapPopup()):(window.toggleOnElevation=!1,this.publishData({message:"mapClickForPopup"}),this.map.setInfoWindowOnClick(!0),this.enableWebMapPopup())}));this.measureTool.startup();
this.measureTool.hideTool("area");this.measureTool.hideTool("location");d.once(this.measureTool,"tool-change",c.hitch(this,function(){this.measureTool.setTool("distance",!1);this.measureTool.clearResult()}));this.measureTool.setTool("distance",!0);this.measureTool.on("measure-end",c.hitch(this,this._onMeasureEnd));this.measureTool._distanceButton.on("click",c.hitch(this,this._onMeasureClick));d(this.measureTool,"unit-change",c.hitch(this,this._unitsChanged),!0)},disableWebMapPopup:function(){if(this.map&&
this.map.webMapResponse){var a=this.map.webMapResponse.clickEventHandle;a&&(a.remove(),this.map.webMapResponse.clickEventHandle=null)}},enableWebMapPopup:function(){if(this.map&&this.map.webMapResponse){var a=this.map.webMapResponse.clickEventHandle,b=this.map.webMapResponse.clickEventListener;b&&!a&&(this.map.webMapResponse.clickEventHandle=d(this.map,"click",c.hitch(this.map,b)))}},_onMeasureClick:function(){this.clearProfileChart();this.map.infoWindow.clearFeatures();this.map.infoWindow.hide();
this.emit("measure-distance-checked",{checked:this.measureTool._distanceButton.checked})},NullifyMeasureClick:function(){this.measureTool.setTool("distance",!1)},_onMeasureEnd:function(a){"distance"===a.toolName&&(console.log(p.format(a.values)+" "+a.unitName),this.tabContainer.selectTab(this.nls.resultslabel),this.lastMeasure=a.geometry,this.displayProfileChart(a.geometry))},_bindEvents:function(){this.own(d(this.btnClear,"click",c.hitch(this,this._clear)));K.setStyle(this.btnClear,"display","none");
this.own(d(this.btnExport,"click",c.hitch(this,this._export)));K.setStyle(this.btnExport,"display","none");K.setStyle(this.btnInfo,"display","none");K.setStyle(this.btnDownload,"display","none")},_downloadCanvas:function(a,b,c){a.href=b.toDataURL("image/jpeg");a.download=c;K.setStyle(this.btnExport,"display","none");K.setStyle(this.btnDownload,"display","block")},_export:function(a){Y.toSvg(this.profileChart.surface).then(c.hitch(this,function(a){var b=document.createElement("canvas");b.width=this.profileChart.dim.width;
b.height=this.profileChart.dim.height;var d=b.getContext("2d");d.fillStyle="#ffffff";d.fillRect(0,0,b.width,b.height);var e=window.URL||window.webkitURL;a=new Blob([a],{type:"image/svg+xml;charset\x3dutf-8"});var f=e.createObjectURL(a),g=new Image;g.crossOrigin="";g.onload=c.hitch(this,function(){d.drawImage(g,0,0);e.revokeObjectURL(f);this._downloadCanvas(this.btnDownload,b,"Profile.jpg")});g.src=f}))},_clear:function(){K.setStyle(this.btnExport,"display","none");K.setStyle(this.btnDownload,"display",
"none");K.setStyle(this.btnClear,"display","none");K.setStyle(this.btnInfo,"display","none");this.clearProfileChart();this.tabContainer.selectTab(this.nls.measurelabel);this.measureTool.clearResult();return!1},_initUI:function(){this.chartRenderingOptions.constrain&&I.add(this._chartNode,"PanelMax");this._initProfileService().then(c.hitch(this,function(){this._updateProfileChart();this.loaded=!0;this.emit("load",{})}),c.hitch(this,function(){this.emit("error",Error(this.nls.errors.InvalidConfiguration));
this.destroy()}))},_initProfileService:function(){var a=new b;this.profileServiceUrl?x({url:this.profileServiceUrl,content:{f:"json"},callbackParamName:"callback"}).then(c.hitch(this,function(b){this.taskInfo=b;this.profileService=new R(this.profileServiceUrl);this.profileService.setOutSpatialReference(this.map.spatialReference);this.samplingDistance=new M;this.samplingDistance.units=S.METERS;a.resolve()}),c.hitch(this,function(b){a.reject(b)})):a.reject(Error(this.nls.errors.InvalidConfiguration));
return a.promise},_getProfile:function(d){var e=new b,f=d.spatialReference.isWebMercator()?Q.webMercatorToGeographic(d):d,g=V.geodesicLengths([f],S.METERS)[0]/this.samplingPointCount;d=new J(d,null,{OID:1});f=new D;f.features=[d];f.fields=[{name:"OID",type:"esriFieldTypeObjectID",alias:"OID"}];this.profileService.execute({InputLineFeatures:f,ProfileIDField:"OID",DEMResolution:"FINEST",MaximumSampleDistance:g,MaximumSampleDistanceUnits:"Meters",returnZ:!0,returnM:!0}).then(c.hitch(this,function(b){if(0<
b.length)if(b=b[0].value,0<b.features.length){b=b.features[0];this._sourceStr=c.replace("{0}: {1}",[this.nls.chart.demResolution,b.attributes.DEMResolution]);b=b.geometry;var d=[],f=[];0<b.paths.length?(a.forEach(b.paths,c.hitch(this,function(b,e){a.forEach(b,c.hitch(this,function(a,b){a={x:3<a.length?a[3]:b*g,y:2<a.length?a[2]:0,pathIdx:e,pointIdx:b};d.push(a);f.push(a.x)}))})),e.resolve({geometry:b,elevations:d,distances:f,samplingDistance:g})):e.reject(Error(this.nls.errors.UnableToProcessResults))}else e.reject(Error(this.nls.errors.UnableToProcessResults));
else e.reject(Error(this.nls.errors.UnableToProcessResults))}),e.reject);return e.promise},displayProfileChart:function(a){K.setStyle(this.btnDownload,"display","none");K.setStyle(this.progressBar.domNode,"display","block");this._getProfile(a).then(c.hitch(this,function(a){this.elevationInfo=a;this._updateProfileChart();this.emit("display-profile",a);K.setStyle(this.btnClear,"display","block");this._hasCanvasSupport&&!this.isIE&&K.setStyle(this.btnExport,"display","block");K.setStyle(this.btnInfo,
"display","block");K.setStyle(this.progressBar.domNode,"display","none")}),c.hitch(this,function(a){K.setStyle(this.progressBar.domNode,"display","none");alert(c.replace("{message}\n\n{details.0}",a));this.emit("error",a)}))},clearProfileChart:function(){this.elevationInfo=null;this._updateProfileChart();this.emit("clear-profile",{})},_updateProfileChart:function(){K.setStyle(this.progressBar.domNode,"display","block");this._createProfileChart(this.elevationInfo).then(c.hitch(this,function(){this.profileChart.resize();
K.setStyle(this.progressBar.domNode,"display","none")}),c.hitch(this,function(a){K.setStyle(this.progressBar.domNode,"display","none");this.emit("error",a)}))},_unitsChanged:function(){this.measureTool._distanceButton.checked&&this._updateProfileChart()},_createProfileChart:function(a){var d=new b,e=-10,f=100;if(a){this.profilePolyline=a.geometry;this.elevationData=this._convertElevationsInfoArray(a.elevations);this.distances=this._convertDistancesArray(a.distances);this.samplingDistance.distance=
this._convertDistancesArray([a.samplingDistance.distance])[0];a=this._getArrayMin(this.elevationData);var g=this._getArrayMax(this.elevationData),f=g-a,e=a-.05*f,f=g+.05*f,h={places:0},k=this.elevationData[0].y,l=this.elevationData[this.elevationData.length-1].y;a={min:p.format(a,h),max:p.format(g,h),start:p.format(k,h),end:p.format(l,h),gainloss:p.format(l-k,h)};this._gainLossStr=c.replace(this.nls.chart.gainLossTemplate,a);this.btnInfo.title=this._gainLossStr+"\x3cbr\x3e"+this._sourceStr;this.elevationIndicator&&
(this.elevationIndicator.destroy(),this.elevationIndicator=null);this.elevationIndicator2&&(this.elevationIndicator2.destroy(),this.elevationIndicator2=null);a={series:"ElevationData",mouseOver:!0,font:"normal normal bold 9pt Tahoma",fontColor:this.chartRenderingOptions.indicatorFontColor,fill:this.chartRenderingOptions.indicatorFillColor,markerFill:"none",markerStroke:{color:"red",width:3},markerSymbol:"m -6 -6, l 12 12, m 0 -12, l -12 12",offset:{y:-2,x:-25},labelFunc:c.hitch(this,function(a){this._displayChartLocation(a.x);
var b=this._getDisplayUnits(!0);a=p.format(a.y,h);return c.replace("{0} {1}",[a,b])})};g={series:"Water",mouseOver:!0,font:"normal normal bold 8pt Tahoma",fontColor:this.chartRenderingOptions.indicatorFontColor,fill:this.chartRenderingOptions.indicatorFillColor,fillFunc:c.hitch(this,function(a){a=this.distances.indexOf(a.x);return this.elevationData[a].y>=k?"green":"red"}),offset:{y:25,x:-30},labelFunc:c.hitch(this,function(a){a=this.distances.indexOf(a.x);a=this.elevationData[a].y;var b=p.format(a-
k,h);return c.replace("{0}{1}",[0<a-k?"+":"",b])})};N("has-touch")?(this.elevationIndicator2=new z(this.profileChart,"default",g),this.elevationIndicator=new z(this.profileChart,"default",a)):(this.elevationIndicator2=new A(this.profileChart,"default",g),this.elevationIndicator=new A(this.profileChart,"default",a));this.profileChart.fullRender()}else this._displayChartLocation(-1),this.samplingDistance.distance=this.map.extent.getWidth()/this.samplingPointCount,this.profilePolyline=null,a=this._convertDistancesArray([this.samplingDistance.distance])[0],
this.elevationData=this._getFilledArray(this.samplingPointCount,a,!0),this._sourceStr=this._gainLossStr="",this.elevationIndicator&&(this.elevationIndicator.destroy(),this.elevationIndicator=null),this.elevationIndicator2&&(this.elevationIndicator2.destroy(),this.elevationIndicator2=null);a=this._resetArray(this.elevationData,0);null!=this.profileChart?(this.profileChart.getAxis("y").opt.min=e,this.profileChart.getAxis("y").opt.max=f,this.profileChart.getAxis("y").opt.title=c.replace(this.nls.chart.elevationTitleTemplate,
[this._getDisplayUnits(!0)]),this.profileChart.getAxis("x").opt.title=c.replace(this.nls.chart.distanceTitleTemplate,[this._getDisplayUnits(!1)]),this.profileChart.dirty=!0,this.profileChart.updateSeries("Water",a),this.profileChart.updateSeries("ElevationData",this.elevationData)):(this.profileChart=new y(this._chartNode,{title:this.nls.chart.title,titlePos:"top",titleGap:13,titleFont:c.replace("normal normal bold {chartTitleFontSize}pt verdana",this.chartRenderingOptions),titleFontColor:this.chartRenderingOptions.titleFontColor}),
this.profileChart.setTheme(U),this.profileChart.fill="transparent",this.profileChart.theme.axis.stroke.width=2,this.profileChart.theme.axis.majorTick.color=C.named.white.concat(.5),this.profileChart.theme.axis.majorTick.width=1,this.profileChart.theme.plotarea.fill={type:"linear",space:"plot",x1:50,y1:100,x2:50,y2:0,colors:[{offset:0,color:this.chartRenderingOptions.skyTopColor},{offset:1,color:this.chartRenderingOptions.skyBottomColor}]},this.profileChart.addAxis("y",{min:e,max:f,fontColor:this.chartRenderingOptions.axisFontColor,
font:c.replace("normal normal bold {axisLabelFontSize}pt verdana",this.chartRenderingOptions),vertical:!0,natural:!0,fixed:!0,includeZero:!1,majorLabels:!0,minorLabels:!0,majorTicks:!0,minorTicks:!0,htmlLabels:!1,majorTick:{color:this.chartRenderingOptions.axisMajorTickColor,length:6},title:c.replace(this.nls.chart.elevationTitleTemplate,[this._getDisplayUnits(!0)]),titleGap:30,titleFont:c.replace("normal normal bold {axisTitleFontSize}pt verdana",this.chartRenderingOptions),titleFontColor:this.chartRenderingOptions.titleFontColor,
titleOrientation:"axis"}),this.profileChart.addAxis("x",{fontColor:this.chartRenderingOptions.axisFontColor,font:c.replace("normal normal bold {axisLabelFontSize}pt verdana",this.chartRenderingOptions),natural:!0,fixed:!0,includeZero:!1,majorLabels:!0,minorLabels:!0,majorTicks:!0,minorTicks:!0,htmlLabels:!1,majorTick:{color:this.chartRenderingOptions.axisMajorTickColor,length:6},title:c.replace(this.nls.chart.distanceTitleTemplate,[this._getDisplayUnits(!1)]),titleGap:5,titleFont:c.replace("normal normal bold {axisTitleFontSize}pt verdana",
this.chartRenderingOptions),titleFontColor:this.chartRenderingOptions.titleFontColor,titleOrientation:"away"}),this.profileChart.addPlot("grid",{type:G,hMajorLines:!0,hMinorLines:!1,vMajorLines:!1,vMinorLines:!1}),this.profileChart.addPlot("default",{type:u,tension:"X"}),this.profileChart.addPlot("water",{type:u}),this.profileChart.addSeries("Water",a,{plot:"water",stroke:{width:2,color:this.chartRenderingOptions.waterLineColor},fill:{type:"linear",space:"plot",x1:50,y1:0,x2:50,y2:100,colors:[{offset:0,
color:this.chartRenderingOptions.waterTopColor},{offset:1,color:this.chartRenderingOptions.waterBottomColor}]}}),this.profileChart.addSeries("ElevationData",this.elevationData,{plot:"default",stroke:{width:1.5,color:this.chartRenderingOptions.elevationLineColor},fill:{type:"linear",space:"plot",x1:50,y1:0,x2:50,y2:100,colors:[{offset:0,color:this.chartRenderingOptions.elevationTopColor},{offset:1,color:this.chartRenderingOptions.elevationBottomColor}]}}));this.profileChart.render();d.resolve();return d.promise},
_resizeChart:function(){this.profileChart&&this.profileChart.resize()},_displayChartLocation:function(b){if(this.map&&this.elevationData&&this.profilePolyline){if(!this.chartLocationGraphic){var c=new C(C.named.red),d=new v(v.STYLE_SOLID,c,3),c=new H(H.STYLE_X,13,d,c);this.chartLocationGraphic=new J(null,c);this.map.graphics.add(this.chartLocationGraphic)}b=this.distances?a.indexOf(this.distances,b):-1;0<=b?(b=this.elevationData[b],this.chartLocationGraphic.setGeometry(this.profilePolyline.getPoint(b.pathIdx,
b.pointIdx))):this.chartLocationGraphic.setGeometry(null)}},_getDisplayValue:function(a,b){return b===this.measureTool._unitStrings.esriMeters?a:a*this.measureTool._unitDictionary[this.measureTool._unitStrings.esriMeters]/this.measureTool._unitDictionary[b]},_getDisplayUnits:function(a){var b=this.measureTool._unitDropDown.label;if(a)switch(b){case this.measureTool._unitStrings.esriMiles:b=this.measureTool._unitStrings.esriFeet;break;case this.measureTool.esriYards:b=this.measureTool._unitStrings.esriYards;
break;case this.measureTool._unitStrings.esriKilometers:b=this.measureTool._unitStrings.esriMeters}return b},_convertElevationsInfoArray:function(b){var d=this._getDisplayUnits(!1),e=this._getDisplayUnits(!0);return a.map(b,c.hitch(this,function(a){return c.mixin(a,{x:this._getDisplayValue(a.x,d),y:this._getDisplayValue(a.y,e)})}))},_convertDistancesArray:function(b){var d=this._getDisplayUnits(!1);return a.map(b,c.hitch(this,function(a){return this._getDisplayValue(a,d)}))},_getFilledArray:function(a,
b,c){for(var d=Array(a),e=0;e<a;++e)d[e]={x:c?e*b:e,y:c?0:b||0};return d},_resetArray:function(b,c){return a.map(b,function(a){return{x:a.x,y:c}})},_getArrayMax:function(b){b=a.map(b,function(a){return a.y});return Math.max.apply(Math,b)},_getArrayMin:function(b){b=a.map(b,function(a){return a.y});return Math.min.apply(Math,b)},destroy:function(){this.profileChart&&this.profileChart.destroy();this.inherited(arguments)}})});