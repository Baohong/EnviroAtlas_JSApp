//>>built
require({cache:{"dijit/form/Slider":function(){define("dojo/_base/kernel ./HorizontalSlider ./VerticalSlider ./HorizontalRule ./VerticalRule ./HorizontalRuleLabels ./VerticalRuleLabels".split(" "),function(b){b.deprecated("Call require() for HorizontalSlider / VerticalRule, explicitly rather than 'dijit.form.Slider' itself","","2.0")})},"dijit/form/VerticalSlider":function(){define(["dojo/_base/declare","./HorizontalSlider","dojo/text!./templates/VerticalSlider.html"],function(b,c,g){return b("dijit.form.VerticalSlider",
c,{templateString:g,_mousePixelCoord:"pageY",_pixelCount:"h",_startingPixelCoord:"y",_handleOffsetCoord:"top",_progressPixelSize:"height",_descending:!0,_isReversed:function(){return this._descending}})})},"dijit/form/VerticalRule":function(){define(["dojo/_base/declare","./HorizontalRule"],function(b,c){return b("dijit.form.VerticalRule",c,{templateString:'\x3cdiv class\x3d"dijitRuleContainer dijitRuleContainerV"\x3e\x3c/div\x3e',_positionPrefix:'\x3cdiv class\x3d"dijitRuleMark dijitRuleMarkV" style\x3d"top:',
_isHorizontal:!1})})},"dijit/form/VerticalRuleLabels":function(){define(["dojo/_base/declare","./HorizontalRuleLabels"],function(b,c){return b("dijit.form.VerticalRuleLabels",c,{templateString:'\x3cdiv class\x3d"dijitRuleContainer dijitRuleContainerV dijitRuleLabelsContainer dijitRuleLabelsContainerV"\x3e\x3c/div\x3e',_positionPrefix:'\x3cdiv class\x3d"dijitRuleLabelContainer dijitRuleLabelContainerV" style\x3d"top:',_labelPrefix:'"\x3e\x3cspan class\x3d"dijitRuleLabel dijitRuleLabelV"\x3e',_calcPosition:function(b){return 100-
b},_isHorizontal:!1})})},"esri/tasks/ClassBreaksDefinition":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","../kernel","./ClassificationDefinition"],function(b,c,g,p,y){b=b(y,{declaredClass:"esri.tasks.ClassBreaksDefinition",type:"classBreaksDef",classificationField:null,classificationMethod:null,breakCount:null,standardDeviationInterval:null,normalizationType:null,normalizationField:null,toJson:function(){var b,g=this.inherited(arguments);switch(this.classificationMethod.toLowerCase()){case "natural-breaks":b=
"esriClassifyNaturalBreaks";break;case "equal-interval":b="esriClassifyEqualInterval";break;case "quantile":b="esriClassifyQuantile";break;case "standard-deviation":b="esriClassifyStandardDeviation";break;case "geometrical-interval":b="esriClassifyGeometricalInterval";break;default:b=this.classificationMethod}if(c.mixin(g,{type:this.type,classificationField:this.classificationField,classificationMethod:b,breakCount:this.breakCount}),this.normalizationType){switch(this.normalizationType.toLowerCase()){case "field":b=
"esriNormalizeByField";break;case "log":b="esriNormalizeByLog";break;case "percent-of-total":b="esriNormalizeByPercentOfTotal";break;default:b=this.normalizationType}c.mixin(g,{normalizationType:b})}return this.normalizationField&&c.mixin(g,{normalizationField:this.normalizationField}),this.standardDeviationInterval&&c.mixin(g,{standardDeviationInterval:this.standardDeviationInterval}),g}});return g("extend-esri")&&c.setObject("tasks.ClassBreaksDefinition",b,p),b})},"esri/tasks/ClassificationDefinition":function(){define(["dojo/_base/declare",
"dojo/_base/lang","dojo/has","../kernel"],function(b,c,g,p){b=b(null,{declaredClass:"esri.tasks.ClassificationDefinition",type:null,baseSymbol:null,colorRamp:null,toJson:function(){var b={};return this.baseSymbol&&c.mixin(b,{baseSymbol:this.baseSymbol.toJson()}),this.colorRamp&&!c.isString(this.colorRamp)&&c.mixin(b,{colorRamp:this.colorRamp.toJson()}),b}});return g("extend-esri")&&c.setObject("tasks.ClassificationDefinition",b,p),b})},"esri/tasks/GenerateRendererTask":function(){define("require dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/number dojo/_base/json dojo/_base/Deferred dojo/has ../kernel ../request ../deferredUtils ../urlUtils ../renderers/jsonUtils ./StatisticDefinition ./Task ./QueryTask ./query require require require require require require require".split(" "),
function(b,c,g,p,y,G,D,m,Q,E,L,M,N,P,R,S,T){c=c(R,{declaredClass:"esri.tasks.GenerateRendererTask",_eventMap:{complete:["renderer"]},constructor:function(b,c){!g.isObject(b)||"esri.layers.FeatureLayer"!==b.declaredClass&&"esri.layers.CSVLayer"!==b.declaredClass?(this.url=b,this._url.path+="/generateRenderer"):b.url&&g.isString(b.url)&&"esri.layers.CSVLayer"!==b.declaredClass?(this.url=b.url,this._url=M.urlToObject(this.url),this._url.path+="/generateRenderer"):this._features=b.graphics;this._handler=
g.hitch(this,this._handler);this.source=c&&c.source;this.gdbVersion=c&&c.gdbVersion;this.checkValueRange=c&&c.checkValueRange;this.registerConnectEvents()},_handler:function(b,c,m,V,w){try{var f;if("esri.renderer.ClassBreaksRenderer"===b.declaredClass||"esri.renderer.UniqueValueRenderer"===b.declaredClass?f=b:(f=N.fromJson(b),"classBreaks"===b.type&&f.setMaxInclusive(!0)),this.checkValueRange){var r=new S(this.url),e=new T,H=new P;H.statisticType="min";H.onStatisticField=this._field;var a=new P;a.statisticType=
"max";a.onStatisticField=this._field;e.outStatistics=[H,a];r.execute(e).then(g.hitch(this,function(a){a=a.features[0].attributes;for(var d in a)if(0===d.toLowerCase().indexOf("min"))var b=a[d];else var e=a[d];f=this._processRenderer(f,this._prefix,this._unitLabel,this._formatLabel,this._precision,b,e);this._successHandler([f],"onComplete",m,w)}))}else f=this._processRenderer(f,this._prefix,this._unitLabel,this._formatLabel,this._precision),this._successHandler([f],"onComplete",m,w)}catch(d){this._errorHandler(d,
V,w)}},_processRenderer:function(b,c,g,m,w,x,r){return"esri.renderer.ClassBreaksRenderer"===b.declaredClass?p.forEach(b.infos,function(e,f){0===f&&void 0!==x&&null!==x&&(e.minValue=x);f===b.infos.length-1&&void 0!==r&&null!==r&&(e.classMaxValue=e.maxValue=r);w&&(e.classMaxValue=e.maxValue=Math.round(e.maxValue/w)*w,e.minValue=Math.round(e.minValue/w)*w);m&&(e.label=y.format(e.minValue)+" - "+y.format(e.maxValue));c&&(e.label=c+" "+e.label);g&&(e.label=e.label+" "+g)}):p.forEach(b.infos,function(e,
f){0===f&&void 0!==x&&null!==x&&(e.value=x);f===b.infos.length-1&&void 0!==r&&null!==r&&(e.value=r);m&&(e.label=y.format(e.value));c&&(e.label=c+" "+e.label);g&&(e.label=e.label+" "+g)}),b},execute:function(c,m,p){var f,w=this._handler,x=this._errorHandler;if(this._precision=c.precision,this._prefix=c.prefix,this._unitLabel=c.unitLabel,this._formatLabel=c.formatLabel,this._features=c.features||this._features,this._features){f=new D;var r=this._features;b(["./generateRenderer"],function(a){var d;"esri.tasks.ClassBreaksDefinition"===
c.classificationDefinition.declaredClass?d=a.createClassBreaksRenderer({features:r,definition:c.classificationDefinition}):"esri.tasks.UniqueValueDefinition"===c.classificationDefinition.declaredClass&&(d=a.createUniqueValueRenderer({features:r,definition:c.classificationDefinition}));d?w(d,null,m,p,f):x(null,p,f)})}else{var e=g.mixin(c.toJson(),{f:"json"});if("esri.tasks.ClassBreaksDefinition"===c.classificationDefinition.declaredClass?this._field=c.classificationDefinition.classificationField:this._field=
c.classificationDefinition.attributeField,this.source){var y={source:this.source.toJson()};e.layer=G.toJson(y)}this.gdbVersion&&(e.gdbVersion=this.gdbVersion);f=new D(L._dfdCanceller);f._pendingDfd=E({url:this._url.path,content:e,callbackParamName:"callback",load:function(a,d){w(a,d,m,p,f)},error:function(a){x(a,p,f)}})}return f},onComplete:function(){}});return m("extend-esri")&&g.setObject("tasks.GenerateRendererTask",c,Q),c})},"esri/tasks/GenerateRendererParameters":function(){define(["dojo/_base/declare",
"dojo/_base/lang","dojo/_base/json","dojo/has","../kernel"],function(b,c,g,p,y){b=b(null,{declaredClass:"esri.tasks.GenerateRendererParameters",classificationDefinition:null,where:null,precision:null,prefix:null,unitLabel:null,formatLabel:null,toJson:function(){return{classificationDef:g.toJson(this.classificationDefinition.toJson()),where:this.where}}});return p("extend-esri")&&c.setObject("tasks.GenerateRendererParameters",b,y),b})},"widgets/DemographicLayers/configLocal":function(){define([],function(){return{demogJSON:{ejdemog:{title:"2012-2016 ACS",
tiptext:"2012-2016 ACS",dynamic:!1,type:"agsdemog",layerurl:"https://ejscreen.epa.gov/ArcGIS/rest/services/",service:"ejscreen/census2016acs",lookupindex:4,description:"2012-2016 ACS demographics are a set of variables derived based on a subset of 2012-2016 American Community Survey data.",process:!1,transparency:"0.5",identify:"yes",filter:"yes",defaultCategory:"Population",defaultfield:"POP_DEN",baselayers:{bg:{minlevel:10,maxlevel:20,renderobj:{},layeridx:0,level:"2012-2016 ACS (Blockgroup)",headerfields:{STCNTRBG:"Blockgroup ID",
STUSAB:"State",TOTALPOP:"Total Population"}},tr:{minlevel:8,maxlevel:10,renderobj:{},layeridx:1,level:"2012-2016 ACS (Tract)",headerfields:{STCNTR:"Tract ID",STUSAB:"State",TOTALPOP:"Total Population"}},cnty:{minlevel:4,maxlevel:8,renderobj:{},layeridx:2,level:"2012-2016 ACS (County)",headerfields:{CNTYNAME:"County Name",STUSAB:"State",STCN:"County FIPS",TOTALPOP:"Total Population"}},st:{minlevel:0,maxlevel:4,renderobj:{},layeridx:3,level:"2012-2016 ACS (State)",headerfields:{STATE_NAME:"State",TOTALPOP:"Total Population"}}},
dynamiclayers:{}},census2010:{title:"2010 Census",tiptext:"2010 ACS",type:"agsdemog",layerurl:"https://ejscreen.epa.gov/ArcGIS/rest/services/",service:"ejscreen/census2010sf1",lookupindex:5,description:"2010 Census contains a set of variables derived based on a subset of 2010 Census data.",process:!1,transparency:"0.8",defaultCategoryIndex:3,baselayers:{blk:{minlevel:16,maxlevel:20,renderobj:{},layeridx:0,level:"2010 Census (Block)",headerfields:{STCNTRBLK:"Block ID",STATE:"State",TOTALPOP:"Total Population"}},
bg:{minlevel:10,maxlevel:16,renderobj:{},layeridx:1,level:"2010 Census (Blockgroup)",headerfields:{GEOID10:"Blockgroup ID",STATE:"State",TOTALPOP:"Total Population"}},tr:{minlevel:8,maxlevel:10,renderobj:{},layeridx:2,level:"2010 Census (Tract)",headerfields:{GEOID10:"Tract ID",STATE:"State",TOTALPOP:"Total Population"}},cnty:{minlevel:4,maxlevel:8,renderobj:{},layeridx:3,level:"2010 Census (County)",headerfields:{STCN:"County FIPS",STATE:"State",TOTALPOP:"Total Population"}},st:{minlevel:0,maxlevel:4,
renderobj:{},layeridx:4,level:"2010 Census (State)",headerfields:{STATE:"State",TOTALPOP:"Total Population"}}},dynamiclayers:{}},census2k:{title:"2000 Census",tiptext:"2000 SF3",type:"agsdemog",layerurl:"https://ejscreen.epa.gov/ArcGIS/rest/services/",service:"ejscreen/census2000sf3",lookupindex:4,description:"2000 Census contains a set of variables derived based on a subset of 2000 Census data.",process:!1,transparency:"0.8",defaultCategoryIndex:6,baselayers:{bg:{minlevel:10,maxlevel:20,renderobj:{},
layeridx:0,level:"2000 Census (Blockgroup)",headerfields:{STCNTRBG:"Blockgroup ID",STATE:"State",TOTALPOP:"Total Population"}},tr:{minlevel:8,maxlevel:10,renderobj:{},layeridx:1,level:"2000 Census (Tract)",headerfields:{STCNTR:"Tract ID",STATE:"State",TOTALPOP:"Total Population"}},cnty:{minlevel:4,maxlevel:8,renderobj:{},layeridx:2,level:"2000 Census (County)",headerfields:{STCN:"County FIPS",STUSAB:"State",TOTALPOP:"Total Population"}},st:{minlevel:0,maxlevel:4,renderobj:{},layeridx:3,level:"2000 Census (State)",
headerfields:{STUSAB:"State",TOTALPOP:"Total Population"}}},dynamiclayers:{}}}}})},"widgets/DemographicLayers/_build-generate_module":function(){define(["dojo/text!./Widget.html","dojo/text!./css/style.css","dojo/i18n!./nls/strings"],function(){})},"url:dijit/form/templates/VerticalSlider.html":'\x3ctable class\x3d"dijit dijitReset dijitSlider dijitSliderV" cellspacing\x3d"0" cellpadding\x3d"0" border\x3d"0" rules\x3d"none" data-dojo-attach-event\x3d"onkeydown:_onKeyDown,onkeyup:_onKeyUp"\n\trole\x3d"presentation"\n\t\x3e\x3ctr class\x3d"dijitReset"\n\t\t\x3e\x3ctd class\x3d"dijitReset"\x3e\x3c/td\n\t\t\x3e\x3ctd class\x3d"dijitReset dijitSliderButtonContainer dijitSliderButtonContainerV"\n\t\t\t\x3e\x3cdiv class\x3d"dijitSliderIncrementIconV" style\x3d"display:none" data-dojo-attach-point\x3d"decrementButton"\x3e\x3cspan class\x3d"dijitSliderButtonInner"\x3e+\x3c/span\x3e\x3c/div\n\t\t\x3e\x3c/td\n\t\t\x3e\x3ctd class\x3d"dijitReset"\x3e\x3c/td\n\t\x3e\x3c/tr\n\t\x3e\x3ctr class\x3d"dijitReset"\n\t\t\x3e\x3ctd class\x3d"dijitReset"\x3e\x3c/td\n\t\t\x3e\x3ctd class\x3d"dijitReset"\n\t\t\t\x3e\x3ccenter\x3e\x3cdiv class\x3d"dijitSliderBar dijitSliderBumper dijitSliderBumperV dijitSliderTopBumper" data-dojo-attach-event\x3d"press:_onClkIncBumper"\x3e\x3c/div\x3e\x3c/center\n\t\t\x3e\x3c/td\n\t\t\x3e\x3ctd class\x3d"dijitReset"\x3e\x3c/td\n\t\x3e\x3c/tr\n\t\x3e\x3ctr class\x3d"dijitReset"\n\t\t\x3e\x3ctd data-dojo-attach-point\x3d"leftDecoration" class\x3d"dijitReset dijitSliderDecoration dijitSliderDecorationL dijitSliderDecorationV"\x3e\x3c/td\n\t\t\x3e\x3ctd class\x3d"dijitReset dijitSliderDecorationC" style\x3d"height:100%;"\n\t\t\t\x3e\x3cinput data-dojo-attach-point\x3d"valueNode" type\x3d"hidden" ${!nameAttrSetting}\n\t\t\t/\x3e\x3ccenter class\x3d"dijitReset dijitSliderBarContainerV" role\x3d"presentation" data-dojo-attach-point\x3d"sliderBarContainer"\n\t\t\t\t\x3e\x3cdiv role\x3d"presentation" data-dojo-attach-point\x3d"remainingBar" class\x3d"dijitSliderBar dijitSliderBarV dijitSliderRemainingBar dijitSliderRemainingBarV" data-dojo-attach-event\x3d"press:_onBarClick"\x3e\x3c!--#5629--\x3e\x3c/div\n\t\t\t\t\x3e\x3cdiv role\x3d"presentation" data-dojo-attach-point\x3d"progressBar" class\x3d"dijitSliderBar dijitSliderBarV dijitSliderProgressBar dijitSliderProgressBarV" data-dojo-attach-event\x3d"press:_onBarClick"\n\t\t\t\t\t\x3e\x3cdiv class\x3d"dijitSliderMoveable dijitSliderMoveableV" style\x3d"vertical-align:top;"\n\t\t\t\t\t\t\x3e\x3cdiv data-dojo-attach-point\x3d"sliderHandle,focusNode" class\x3d"dijitSliderImageHandle dijitSliderImageHandleV" data-dojo-attach-event\x3d"press:_onHandleClick" role\x3d"slider"\x3e\x3c/div\n\t\t\t\t\t\x3e\x3c/div\n\t\t\t\t\x3e\x3c/div\n\t\t\t\x3e\x3c/center\n\t\t\x3e\x3c/td\n\t\t\x3e\x3ctd data-dojo-attach-point\x3d"containerNode,rightDecoration" class\x3d"dijitReset dijitSliderDecoration dijitSliderDecorationR dijitSliderDecorationV"\x3e\x3c/td\n\t\x3e\x3c/tr\n\t\x3e\x3ctr class\x3d"dijitReset"\n\t\t\x3e\x3ctd class\x3d"dijitReset"\x3e\x3c/td\n\t\t\x3e\x3ctd class\x3d"dijitReset"\n\t\t\t\x3e\x3ccenter\x3e\x3cdiv class\x3d"dijitSliderBar dijitSliderBumper dijitSliderBumperV dijitSliderBottomBumper" data-dojo-attach-event\x3d"press:_onClkDecBumper"\x3e\x3c/div\x3e\x3c/center\n\t\t\x3e\x3c/td\n\t\t\x3e\x3ctd class\x3d"dijitReset"\x3e\x3c/td\n\t\x3e\x3c/tr\n\t\x3e\x3ctr class\x3d"dijitReset"\n\t\t\x3e\x3ctd class\x3d"dijitReset"\x3e\x3c/td\n\t\t\x3e\x3ctd class\x3d"dijitReset dijitSliderButtonContainer dijitSliderButtonContainerV"\n\t\t\t\x3e\x3cdiv class\x3d"dijitSliderDecrementIconV" style\x3d"display:none" data-dojo-attach-point\x3d"incrementButton"\x3e\x3cspan class\x3d"dijitSliderButtonInner"\x3e-\x3c/span\x3e\x3c/div\n\t\t\x3e\x3c/td\n\t\t\x3e\x3ctd class\x3d"dijitReset"\x3e\x3c/td\n\t\x3e\x3c/tr\n\x3e\x3c/table\x3e\n',
"url:widgets/DemographicLayers/Widget.html":'\x3cdiv style\x3d"height:100%;overflow-y: hidden; background-color: #ece9eb"\x3e\r\n  \x3c!-- \x3cdiv id\x3d"titleBarTimeSeries2" data-dojo-type\x3d"dijit/TitlePane" data-dojo-props\x3d"title: \'Climate Scenarios\', open: true"\x3e --\x3e\r\n  \x3cdiv style\x3d"width:100%; background-color:#b3b3b3; font-size:16px; padding-left:4px; border-bottom: 1px solid rgb(150,150,150)"\x3e\r\n    U.S. Census Data\r\n  \x3c/div\x3e\r\n  \x3cdiv style\x3d"padding:10px"\x3e\r\n  \x3cstyle\x3e\r\n    .dojoxColorPickerOptional input {\r\n    border: 1px solid #a7a7a7;\r\n    width: 30px;\r\n    padding: 1px 3px 1px 3px;\r\n    line-height: 1.1em;\r\n    }\r\n  \x3c/style\x3e\r\n  \x3cdiv data-dojo-attach-point\x3d"levelDiv" style\x3d"margin: 4px 4px 4px 4px;border: none;background-color: #ece9eb;display:none"\x3e\x26nbsp;\x3c/div\x3e\r\n \r\n  \x3cform data-dojo-attach-point\x3d"renderform" style\x3d"background-color: #ece9eb;height:100%;"\x3e\r\n     \x3cinput type\x3d"hidden" name\x3d"startcolor" value\x3d"" /\x3e\r\n     \x3cinput type\x3d"hidden" name\x3d"endcolor" value\x3d"" /\x3e     \r\n          \x3ctable\x3e\r\n             \r\n          \x3ctr\x3e\r\n           \x3ctd\x3e\r\n           Source:\r\n           \x3c/td\x3e\r\n           \x3ctd style\x3d"width:100%"\x3e\r\n              \x3cselect style\x3d"width:100%" name\x3d"service" data-dojo-attach-point\x3d"serviceNode"  data-dojo-attach-event\x3d"onchange:_changeService"\x3e\r\n            \x3coption value\x3d"ejdemog" selected\x3e2012-2016 ACS\x3c/option\x3e\r\n            \x3coption value\x3d"census2010"\x3e2010 Census\x3c/option\x3e\r\n            \x3coption value\x3d"census2k"\x3e2000 Census\x3c/option\x3e \r\n            \x3c/select\x3e\r\n            \x3c/td\x3e\r\n            \x3ctd\x3e\r\n              \x3cinput  id\x3d"censusServiceSelectionHelp" class\x3d"i-button" style\x3d"line-height: 3px;" type\x3d"button"\x3e\r\n            \x3c/td\x3e \r\n            \x3c/tr\x3e\r\n          \x3ctr\x3e\r\n          \x3ctd\x3e\r\n          Category:\r\n          \x3c/td\x3e\r\n          \x3ctd style\x3d"width:100%"\x3e\r\n              \x3cselect style\x3d"width:100%" name\x3d"demogtype"  data-dojo-attach-point\x3d"demogTypeNode" data-dojo-attach-event\x3d"onchange:_changeDemog"\x3e\r\n           \r\n            \x3c/select\x3e\r\n          \x3c/td\x3e\r\n          \x3c/tr\x3e\r\n          \x3ctr\x3e\r\n          \x3ctd\x3eVariable:\x3c/td\x3e\r\n          \x3ctd style\x3d"width:100%"\x3e\r\n              \x3cselect style\x3d"width:100%" name\x3d"demogvar" data-dojo-attach-point\x3d"demogListNode" style\x3d"width: 200px; overflow: auto;"\x3e\r\n            \r\n            \x3c/select\x3e\r\n          \x3c/td\x3e\r\n          \x3c/tr\x3e\r\n          \x3c!-- line space --\x3e\r\n          \x3ctr\x3e\x3ctd style\x3d\'height:12px;\'\x3e\x3c/td\x3e\x3c/tr\x3e\r\n           \x3ctr\x3e\r\n                  \r\n                \x3ctd colspan\x3d"2" align\x3d"center"\x3e\r\n                  \x3cinput type\x3d"radio" name\x3d"rendertype" value\x3d"polygon" checked   data-dojo-attach-event\x3d"onchange:_changeRendertype"\x3e\x26nbsp;Choropleth Map\x26nbsp;\x26nbsp;\r\n                  \x3cinput type\x3d"radio" name\x3d"rendertype" value\x3d"point"   data-dojo-attach-event\x3d"onchange:_changeRendertype"\x3e\x26nbsp;Graduated Symbol Map\r\n                \x3c/td\x3e\r\n                \x3ctd\x3e\r\n                  \x3cinput  id\x3d"mapStyleSelectionHelp" class\x3d"i-button" style\x3d"line-height: 3px;" type\x3d"button"\x3e\r\n                \x3c/td\x3e \r\n              \x3c/tr\x3e\r\n              \x3ctr\x3e\x3ctd style\x3d"height: 2px;"\x3e\x3c/td\x3e\x3c/tr\x3e\r\n          \x3ctr\x3e\r\n          \x3ctd\x3e\r\n          Method:\r\n          \x3c/td\x3e\r\n          \x3ctd style\x3d"width:100%"\x3e\r\n              \x3cselect style\x3d"width:100%" name\x3d"classification" data-dojo-attach-point\x3d"classTypeNode"\x3e\r\n             \x3coption value\x3d"quantile"\x3eQuantile\x3c/option\x3e\r\n            \x3coption value\x3d"natural-breaks"\x3eNatural Breaks\x3c/option\x3e\r\n            \x3coption value\x3d"equal-interval"\x3eEqual Interval\x3c/option\x3e \r\n            \x3c/select\x3e\r\n           \x3c/td\x3e\r\n           \x3ctd\x3e\r\n              \x3cinput  id\x3d"breaksSelectionHelp" class\x3d"i-button" style\x3d"line-height: 3px;" type\x3d"button"\x3e\r\n            \x3c/td\x3e \r\n           \x3c/tr\x3e\r\n           \x3ctr\x3e\r\n           \x3ctd\x3e\r\n           Breaks:\r\n           \x3c/td\x3e\r\n           \x3ctd\x3e\r\n              \x3cselect name\x3d"classes" data-dojo-attach-point\x3d"classNumNode"  data-dojo-attach-event\x3d"onchange:_changeCat"\x3e\r\n            \x3coption value\x3d"2"\x3e2\x3c/option\x3e\r\n            \x3coption value\x3d"3"\x3e3\x3c/option\x3e\r\n            \x3coption value\x3d"4"\x3e4\x3c/option\x3e \r\n            \x3coption value\x3d"5" selected\x3e5\x3c/option\x3e\r\n             \x3coption value\x3d"6"\x3e6\x3c/option\x3e\r\n            \x3coption value\x3d"7"\x3e7\x3c/option\x3e\r\n            \x3c/select\x3e\r\n            \x3c/td\x3e\r\n            \x3c/tr\x3e\r\n            \r\n            \x3ctr\x3e\r\n             \x3ctd data-dojo-attach-point\x3d"colormarkertd"\x3e\r\n           Colors:\r\n           \x3c/td\x3e\r\n           \x3ctd colspan\x3d\'2\' style\x3d\'position:relative; right:2px\'\x3e\r\n              \x3ctable data-dojo-attach-point\x3d"polyNode" style\x3d"display: block;"\x3e\r\n                \x3ctr\x3e\r\n                  \x3ctd\x3e\r\n                    \x3ctable data-dojo-attach-point\x3d"selector" style\x3d"background-color: white; border:1px solid silver; width: 259px; cursor: pointer;" data-dojo-attach-event\x3d"onclick:_changeSelector"\x3e\x3ctr\x3e\x3ctd  data-dojo-attach-point\x3d"selectcolor"\x3e\x3c/td\x3e\x3ctd\x3e\x3cimg src\x3d"${folderUrl}/images/down1.gif" alt\x3d"dropdown" style\x3d\'float:right; margin-right:3px; width:7px; height:8px\'/\x3e\x3c/td\x3e\x3c/tr\x3e\x3c/table\x3e\r\n                  \x3c/td\x3e\r\n                  \x3ctd data-dojo-attach-event\x3d"onclick:_reverseColor"\x3e\r\n                  \x3cimg src\x3d"${folderUrl}/images/reverse.png" style\x3d"width: 15px; height: 13px;" alt\x3d"Reverse color ramp" title\x3d"Reverse color ramp" /\x3e\r\n                  \x3c/td\x3e\r\n                \x3c/tr\x3e\r\n              \x3c/table\x3e\r\n              \x3ctable data-dojo-attach-point\x3d"pointNode" style\x3d"display: none;"\x3e\r\n                  \x3ctr\x3e\r\n                    \x3ctd\x3eCircle color: \x3c/td\x3e\r\n                    \x3ctd\x3e\r\n                        \x3cdiv style\x3d"white-space: -moz-pre-wrap; position: relative; width:20px;height: 16px;" data-dojo-attach-point\x3d"colorpnt" data-dojo-type\x3d"jimu/dijit/ColorPicker" data-dojo-props\x3d\'color:[227, 139, 79, 255]\'\x3e\x3c/div\x3e\r\n                    \x3c/td\x3e\r\n                  \x3c/tr\x3e\r\n                  \x3ctr\x3e\r\n                    \x3ctd\x3eCircle minSize: \x3c/td\x3e\r\n                    \x3ctd\x3e\r\n                      \x3cinput type\x3d"text" size\x3d"3" value\x3d"4" data-dojo-attach-point\x3d"minsizeNode" /\x3e\r\n                    \x3c/td\x3e\r\n                  \x3c/tr\x3e\r\n                  \x3ctr\x3e\r\n                      \x3ctd\x3eCircle maxSize: \x3c/td\x3e\r\n                      \x3ctd\x3e\r\n                          \x3cinput type\x3d"text" size\x3d"3" value\x3d"16" data-dojo-attach-point\x3d"maxsizeNode" /\x3e\r\n                      \x3c/td\x3e\r\n                    \x3c/tr\x3e\r\n                \x3c/table\x3e               \r\n            \x3c/td\x3e\r\n            \x3c/tr\x3e\r\n            \x3ctr\x3e\r\n            \x3ctd\x3e\r\n            Opacity:\r\n            \x3c/td\x3e\r\n            \x3ctd\x3e\r\n              \x3ctable style\x3d\'width:100%\'\x3e\r\n                \x3ctr\x3e\x3ctd align\x3d"left"\x3eOpaque\x3c/td\x3e\x3ctd align\x3d"right"\x3eTransparent\x3c/td\x3e\x3c/tr\x3e \r\n                \x3ctr\x3e\x3ctd colspan\x3d"2"\x3e\r\n               \r\n              \x3cdiv dojoType\x3d"dijit.form.HorizontalSlider" data-dojo-attach-point\x3d"demogsliderNode" value\x3d"0.2" maximum\x3d"1" minimum\x3d"0" pageIncrement\x3d"100" showButtons\x3d"false" intermediateChanges\x3d"true" slideDuration\x3d"500" style\x3d"width:100%; height: 12px; margin: 4px 2px 2px 0px;"\x3e \r\n              \x3cdiv dojoType\x3d"dijit.form.HorizontalRule" container\x3d"bottomDecoration" count\x3d5 style\x3d"height:5px;"\x3e\x3c/div\x3e \r\n              \x3col dojoType\x3d"dijit.form.HorizontalRuleLabels" container\x3d"bottomDecoration" style\x3d"height:0.7em;font-size:7pt;color:#0000A0"\x3e \r\n              \x3cli\x3e0%\x3c/li\x3e \r\n              \x3cli\x3e50%\x3c/li\x3e \r\n              \x3cli\x3e100%\x3c/li\x3e \r\n              \x3c/ol\x3e \r\n              \x3c/div\x3e \r\n            \x3c/td\x3e\x3c/tr\x3e\r\n            \x3c/table\x3e \r\n            \x3c/td\x3e\r\n            \x3c/tr\x3e\r\n            \x3ctr\x3e\x3ctd colspan\x3d"2" style\x3d"height: 10px;"\x3e\x3c/td\x3e\x3c/tr\x3e\r\n            \x3ctr\x3e\r\n            \x3ctd\x3e\r\n            Border:\r\n            \x3c/td\x3e\r\n            \x3ctd\x3e\r\n            \x3cdiv style\x3d"display: inline; float: left;"\x3e\r\n            \x3cselect name\x3d"bwidth" data-dojo-attach-point\x3d"bWidthNode"\x3e\r\n            \x3coption value\x3d"0"\x3e0\x3c/option\x3e\r\n            \x3coption value\x3d"1" selected\x3e1\x3c/option\x3e\r\n              \x3coption value\x3d"2"\x3e2\x3c/option\x3e\r\n            \x3coption value\x3d"3"\x3e3\x3c/option\x3e\r\n            \x3coption value\x3d"4"\x3e4\x3c/option\x3e \r\n            \x3coption value\x3d"5"\x3e5\x3c/option\x3e\r\n            \x3c/select\x3e\r\n              \x3c/div\x3e\r\n              \x3cdiv style\x3d"white-space: -moz-pre-wrap; position: relative; left: 40px;top:1px; width:20px;height: 16px;" data-dojo-attach-point\x3d"color1" data-dojo-type\x3d"jimu/dijit/ColorPicker" data-dojo-props\x3d\'color:[192,192,192,255]\'\x3e\x3c/div\x3e\r\n              \r\n            \x3c/td\x3e\r\n            \x3c/tr\x3e\r\n            \x3ctr\x3e\r\n            \x3ctd colspan\x3d"3" align\x3d"center"\x3e\r\n            \x3cbutton type\x3d"button" data-dojo-attach-point\x3d"addBtn" data-dojo-attach-event\x3d"onclick:_mapDemog" style\x3d"font-family: \'Avenir Light\', Verdana, Geneva, sans-serif; margin-top:5px"\x3eAdd to Map\x3c/button\x3e\r\n            \r\n            \r\n            \x3c/td\x3e\r\n            \x3c/tr\x3e\r\n            \x3c!-- \x3ctr\x3e\x3ctd data-dojo-attach-point\x3d"descdiv" colspan\x3d"2" style\x3d"background-color: rgb(240, 248, 254); border: 1px solid #cccccc; font-family: Verdana; font-size: 90%; font-weight: normal;"\x3e\x3c/td\x3e\x3c/tr\x3e --\x3e\r\n          \x3c/table\x3e\r\n          \r\n          \x3c/form\x3e\r\n          \x3cdiv id\x3d\'DemoDisclaimer\' style\x3d\'border-top: 1px solid black; margin-top:15px; padding-top:10px\'\x3e\r\n            \x3cp\x3eNote: These data were sourced by \x3ca href\x3d\'https://www.epa.gov/ejscreen/download-ejscreen-data\' target\x3d\'_blank\'\x3eEPA\x3c/a\x3e from the U.S. Census Bureau. Data is available at multiple scales (e.g., census block groups, counties) and will update based on your extent within the map.\r\n            \x3c/p\x3e\r\n          \x3c/div\x3e\r\n          \r\n          \r\n\x3c/div\x3e\r\n\x3c/div\x3e\r\n',
"url:widgets/DemographicLayers/css/style.css":"div.colorPicker-picker {height: 16px; width: 16px; padding: 0 !important; border: 1px solid #ccc; background: url(../images/arrow.gif) no-repeat top right; cursor: pointer; line-height: 16px;}div.colorPicker-palette {width: 110px; position: absolute; border: 1px solid #598FEF; background-color: #EFEFEF; padding: 2px; z-index: 2000;} div.colorPicker_hexWrap {width: 100%; float:left} div.colorPicker_hexWrap label {font-size: 95%; color: #2F2F2F; margin: 5px 2px; width: 25%} div.colorPicker_hexWrap input {margin: 5px 2px; padding: 0; font-size: 95%; border: 1px solid #000; width: 65%;}div.colorPicker-swatch {height: 12px; width: 12px; border: 1px solid #000; margin: 2px; float: left; cursor: pointer; line-height: 12px;}div.controlset {display: inline-block; padding-left: 4px; padding-top: 2px;}div.controlset input,div.controlset div {display: inline; float: left;}",
"*now":function(b){b(['dojo/i18n!*preload*widgets/DemographicLayers/nls/Widget*["","ROOT"]'])}}});
define("dojo/_base/declare jimu/BaseWidget dijit/_Widget dijit/_WidgetsInTemplateMixin dijit/_Templated dojo/_base/lang dojo/on esri/Color dijit/form/Slider dijit/Dialog esri/renderers/ClassBreaksRenderer esri/symbols/SimpleFillSymbol esri/symbols/SimpleMarkerSymbol esri/tasks/ClassBreaksDefinition esri/tasks/GenerateRendererTask esri/tasks/GenerateRendererParameters esri/dijit/Legend esri/tasks/query esri/layers/ArcGISDynamicMapServiceLayer esri/layers/FeatureLayer esri/dijit/PopupTemplate esri/InfoTemplate esri/layers/ImageParameters dijit/form/HorizontalSlider ./configLocal jimu/dijit/ColorPicker".split(" "),function(b,
c,g,p,y,G,D,m,Q,E,L,M,N,P,R,S,T,f,U,Z,V,w,x,r,e,H){return b([c,p],{baseClass:"jimu-widget-DemographicLayers",name:"DemographicLayers",colorThemes:[{startcolor:"#ffffb2",endcolor:"#ff0000"},{startcolor:"#eaf0fd",endcolor:"#03519e"},{startcolor:"#ffccff",endcolor:"#660066"},{startcolor:"#D0CFEE",endcolor:"#322C75"},{startcolor:"#fef0d9",endcolor:"#b30000"},{startcolor:"#FFFFD1",endcolor:"#B0B080"},{startcolor:"#f2f0f7",endcolor:"#54278f"},{startcolor:"#eff3ff",endcolor:"#08519c"},{startcolor:"#f7f7f7",
endcolor:"#252525"},{startcolor:"#ccffff",endcolor:"#006666"},{startcolor:"#ffffcc",endcolor:"#006837"},{startcolor:"#ccccff",endcolor:"#000066"}],startup:function(){this.dfield=this.catType="";this._serviceWidgets=[];this.currentk=0;this.reverseStatus=!1;this.dtype="ejdemog";this.rendertype="polygon";this.inherited(arguments);document.getElementById("censusServiceSelectionHelp").onclick=function(a){a=new E({title:"Data Source",style:"width: 300px"});infotext="\x3ch2 style\x3d'margin-top:0px'\x3e2012-2016 ACS\x3c/h2\x3e";
infotext+="\x3cp\x3eVariables derived from a subset of 2012-2016 American Community Survey data.\x3c/p\x3e";infotext+="\x3chr style\x3d'margin-top:10px'\x3e";infotext+="\x3ch2 style\x3d'margin-top:0px'\x3e2010 Census\x3c/h2\x3e";infotext+="\x3cp\x3eVariables derived from a subset of 2010 Census data.\x3c/p\x3e";infotext+="\x3chr style\x3d'margin-top:10px'\x3e";infotext+="\x3ch2 style\x3d'margin-top:0px'\x3e2000 Census\x3c/h2\x3e";infotext+="\x3cp\x3eVariables derived from a subset of 2000 Census data.\x3c/p\x3e";
dojo.create("div",{innerHTML:infotext},a.containerNode);a.show()};document.getElementById("breaksSelectionHelp").onclick=function(a){a=new E({title:"Break Type",style:"width: 300px"});infotext="\x3ch2 style\x3d'margin-top:0px'\x3eQuantile\x3c/h2\x3e";infotext+="\x3cp\x3eEach class contains an equal number of features. A quantile classification is well suited to linearly distributed data. Quantile assigns the same number of data values to each class. There are no empty classes or classes with too few or too many values.\x3c/p\x3e";
infotext+="\x3chr style\x3d'margin-top:10px'\x3e";infotext+="\x3ch2 style\x3d'margin-top:0px'\x3eNatural Breaks\x3c/h2\x3e";infotext+="\x3cp\x3eNatural breaks classes are based on natural groupings inherent in the data. Class breaks are identified that best group similar values and that maximize the differences between classes. \x3c/p\x3e";infotext+="\x3chr style\x3d'margin-top:10px'\x3e";infotext+="\x3ch2 style\x3d'margin-top:0px'\x3eEqual Interval\x3c/h2\x3e";infotext+="\x3cp\x3eEqual interval divides the range of attribute values into equal-sized subranges This method emphasizes the amount of an attribute value relative to other values. Equal interval is best applied to familiar data ranges, such as percentages and temperature.\x3c/p\x3e";
infotext+="\x3cbr\x3e";infotext+="\x3cp style\x3d'font-size:9px'\x3eSource: \x3ca href\x3d'http://pro.arcgis.com/en/pro-app/help/mapping/layer-properties/data-classification-methods.htm' target\x3d'_blank'\x3eESRI\x3c/a\x3e\x3c/p\x3e";dojo.create("div",{innerHTML:infotext},a.containerNode);a.show()};document.getElementById("mapStyleSelectionHelp").onclick=function(a){a=new E({title:"Map Style",style:"width: 300px"});infotext="\x3ch2 style\x3d'margin-top:0px'\x3eChoropleth Map\x3c/h2\x3e";infotext+=
"\x3cp\x3eChoropleth maps use different colors or patterns to represent data (e.g., households below poverty) for different geographies (e.g., county, census tract). These maps are useful for identifying spatial patterns or hotspots.\x3c/p\x3e";infotext+="\x3cdiv\x3e\x3cimg style\x3d'height:120px; margin-top:5px' src\x3d'widgets/DemographicLayers/images/thematic.png'\x3e\x3c/div\x3e\x3cbr\x3e";infotext+="\x3chr style\x3d'margin-top:10px'\x3e";infotext+="\x3ch2 style\x3d'margin-top:0px'\x3eGraduated Symbol Map\x3c/h2\x3e";
infotext+="\x3cp\x3eGraduated symbol maps use variable size symbols (e.g., circles) to represent discrete changes in data. These maps are useful when added over other thematic maps or basemaps.\x3c/p\x3e";infotext+="\x3cdiv\x3e\x3cimg style\x3d'height:120px; margin-top:5px' src\x3d'widgets/DemographicLayers/images/graduated.png'\x3e\x3c/div\x3e\x3cbr\x3e";dojo.create("div",{innerHTML:infotext},a.containerNode);a.show()}},postCreate:function(){this._zoomHandler=D(this.map,"zoom-end",G.hitch(this,this._adjustToState));
this.classNumNode.value="5";this.bWidthNode.value="1";this.currentk=0;this.createCategory("ejdemog");this.drawPalette(this.classNumNode.value,this.currentk,this.reverseStatus)},_adjustToState:function(){var a=this;dojo.forEach(this._serviceWidgets,function(d){var l=d.mid,b=d.fid,e=l+b+"_map";if(a.map.getLayer(e)){var c=d.actlayer;d.layervisible=a.map.getLayer(e).visible;l=a.getActiveLayer(l,b);c!=l&&(a.map.getLayer(e).hide(),a.classbreak(d,!1))}})},createCategory:function(a){this.addBtn.disabled=
!0;this.catType="";this.demogTypeNode.options.length=0;this.demogListNode.options.length=0;var d=this;d.dtype=a;var l=e.demogJSON[a];if(l.process)d.createCatList(a),d.setDefaultListIndex(l.defaultCategoryIndex),d.addBtn.disabled=!1;else{var b=new esri.tasks.QueryTask(l.layerurl+l.service+"/MapServer/"+l.lookupindex),c=new f;c.returnGeometry=!1;c.outFields=["*"];var k=(new Date).getTime();c.where="1\x3d1 AND "+k+"\x3d"+k;if(l.hasOwnProperty("CategoryExcluded"))for(categoryExcluded=l.CategoryExcluded,
k=0;k<categoryExcluded.length;k++)c.where=c.where+" AND CATEGORY\x3c\x3e'"+categoryExcluded[k]+"'";c.orderByFields=["CATEGORY","DESCRIPTION"];b.execute(c).addCallbacks(function(b){if(0<b.features.length){for(var c=b.features.length,B={},k={},I={},h=0;h<c;h++){if("acs2012"==a){var g=dojo.trim(b.features[h].attributes.CATEGORY),f=dojo.trim(b.features[h].attributes.FIELD_ID),g=dojo.trim(b.features[h].attributes.TABLE_NAME),v=dojo.trim(b.features[h].attributes.TABLE_DESC),m=dojo.trim(b.features[h].attributes.DESCRIPTION),
n=b.features[h].attributes.LAYER_INDEX,q=b.features[h].attributes.BG_MIN,p=b.features[h].attributes.BG_MAX;k[f]={};k[f].description=m;k[f].layerindex=n;k[f].bg_min=q;k[f].bg_max=p;"undefined"==typeof B[g]&&(B[g]=[],I[g]=v)}else{var g=dojo.trim(b.features[h].attributes.CATEGORY),f=dojo.trim(b.features[h].attributes.FIELD_NAME),m=dojo.trim(b.features[h].attributes.DESCRIPTION),q=b.features[h].attributes.BG_MIN,p=b.features[h].attributes.BG_MAX,v=b.features[h].attributes.TR_MIN,n=b.features[h].attributes.TR_MAX,
w=b.features[h].attributes.CNTY_MIN,r=b.features[h].attributes.CNTY_MAX,A=b.features[h].attributes.ST_MIN,Y=b.features[h].attributes.ST_MAX;k[f]={};k[f].description=m;k[f].bg_min=q;k[f].bg_max=p;k[f].tr_min=v;k[f].tr_max=n;k[f].cnty_min=w;k[f].cnty_max=r;k[f].st_min=A;k[f].st_max=Y;"undefined"!=typeof b.features[h].attributes.BLK_MIN&&(m=b.features[h].attributes.BLK_MAX,k[f].blk_min=b.features[h].attributes.BLK_MIN,k[f].blk_max=m);"undefined"==typeof B[g]&&(B[g]=[])}B[g].push(f)}e.demogJSON[a].category=
B;"acs2012"==a&&(e.demogJSON[a].tables=I);e.demogJSON[a].dynamiclayers=k;l.process=!0;d.createCatList(a)}d.addBtn.disabled=!1},function(a){console.log(a)})}},setDefaultListIndex:function(a){this.demogTypeNode.selectedIndex=a;this._changeDemog()},createCatList:function(a){var d=this.demogTypeNode.options.length=0,b;for(b in e.demogJSON[a].category){var c=new Option(b,b);b==this.catType&&(c.selected=!0);this.demogTypeNode.options[d]=c;d+=1}""==this.catType&&(this.catType=this.demogTypeNode.options[0].value);
this.createColList(a)},createColList:function(a){this.demogListNode.options.length=0;for(var d=e.demogJSON[a].category[this.catType],b=0,c=0;c<d.length;c++){var f=d[c],k=new Option(e.demogJSON[a].dynamiclayers[f].description,f);f==this.dfield&&(k.selected=!0);this.demogListNode.options[b]=k;b+=1}this.dfield=d=this.demogListNode.value;a=e.demogJSON[a].dynamiclayers[d];a.method=this.classTypeNode.value;a.classes=this.classNumNode.value;this.renderobj=a},_reverseColor:function(){this.reverseStatus=this.reverseStatus?
!1:!0;this.drawPalette(this.classNumNode.value,this.currentk,this.reverseStatus)},_changeCat:function(){this.drawPalette(this.classNumNode.value,this.currentk,this.reverseStatus)},_changeService:function(){this.createCategory(this.serviceNode.value)},_changeDemog:function(){this.currentk=0;this.catType=this.demogTypeNode.value;this.createColList(this.dtype)},_changeField:function(){this.currentk=0;this.dfield=this.demogListNode.value;var a=e.demogJSON[this.dtype].dynamiclayers[this.dfield];a.method=
this.classTypeNode.value;a.classes=this.classNumNode.value;this.renderobj=a},_changeRendertype:function(a){a=a.target.value;"polygon"==a?(this.polyNode.style.display="block",this.pointNode.style.display="none",this.rendertype=a,this.colormarkertd.innerHTML="Colors:"):(this.polyNode.style.display="none",this.pointNode.style.display="block",this.rendertype=a,this.colormarkertd.innerHTML="Marker:")},_mapDemog:function(a){this.addspining(a);var d=this.renderform,b=this.dtype,c=this.demogListNode.value,
f=this.classTypeNode.value,k=this.classNumNode.value;a=e.demogJSON[this.dtype].dynamiclayers[c];a.rendertype=this.rendertype;a.method=f;a.classes=k;"polygon"==this.rendertype?(f=d.endcolor.value,a.fromcolor=d.startcolor.value,a.tocolor=f):(a.circlecolor=this.colorpnt.getColor(),a.circlemins=this.minsizeNode.value,a.circlemaxs=this.maxsizeNode.value);a.mid=b;a.fid=c;a.linecolor=this.color1.getColor();a.linewidth=parseInt(this.bWidthNode.value);a.opcvalue=1-this.demogsliderNode.value;d=this.serviceNode;
a.svcdesc=d.options[d.selectedIndex].text;d=this.demogListNode;a.fielddesc=d.options[d.selectedIndex].text;a.layervisible=!0;this.classbreak(a,!0)},classbreak:function(a){var b=a.mid,c=a.fid,f=this.getActiveLayer(b,c);this.levelDiv.innerHTML=e.demogJSON[b].baselayers[f].level;a.actlayer=f;e.demogJSON[b].baselayers[f].renderobj[c+"_"+a.method+"_"+a.classes]?this._mapRender(a):this._genRender(a)},_genRender:function(a){var b=this,c=a.fielddesc,f=a.svcdesc,g=a.opcvalue,k=a.mid,v=a.fid,p=a.layervisible,
t=this.getActiveLayer(k,v),r=e.demogJSON[k].baselayers[t].headerfields;a.actlayer=t;var y=v+"_"+a.method+"_"+a.classes,h=a.linewidth,x=a.linecolor,E=this.generateColors(a.classes,a.fromcolor,a.tocolor),C=new esri.tasks.ClassBreaksDefinition;C.classificationField=v;C.classificationMethod=a.method;C.breakCount=a.classes;if("polygon"==a.rendertype){var u=new esri.tasks.AlgorithmicColorRamp;u.fromColor=new dojo.colorFromHex(a.fromcolor);u.toColor=new dojo.colorFromHex(a.tocolor);u.algorithm="hsv";var n=
new esri.symbol.SimpleLineSymbol(esri.symbol.SimpleLineSymbol.STYLE_SOLID,new dojo.Color(x));0<h?n.setWidth(h):n=null;n=new esri.symbol.SimpleFillSymbol(esri.symbol.SimpleFillSymbol.STYLE_SOLID,n,null);C.baseSymbol=n;C.colorRamp=u}var u=t+"_min",n=t+"_max",q=null,O=null;e.demogJSON[k].dynamiclayers[v][u]&&(q=e.demogJSON[k].dynamiclayers[v][u]);e.demogJSON[k].dynamiclayers[v][n]&&(O=e.demogJSON[k].dynamiclayers[v][n]);null==q&&null==O&&("blk"==t?t="bg":"bg"==t?t="tr":"tr"==t&&(t="cnty"),q=e.demogJSON[k].dynamiclayers[v][t+
"_min"],O=e.demogJSON[k].dynamiclayers[v][t+"_max"],a.actlayer=t);u=new esri.tasks.GenerateRendererParameters;u.classificationDefinition=C;var X=e.demogJSON[k].layerurl+e.demogJSON[k].service+"/MapServer",F=e.demogJSON[k].baselayers[t].layeridx;(new esri.tasks.GenerateRendererTask(X+"/"+F)).execute(u,function(d){d.infos[0].minValue=q;d.infos[d.infos.length-1].maxValue=O;for(var l=0;l<d.infos.length;l++)d.infos[l].symbol.setColor(E[l]),d.infos[l].label=Number(d.infos[l].minValue).toFixed(0)+" - "+
Number(d.infos[l].maxValue).toFixed(0);e.demogJSON[k].baselayers[t].renderobj[y]=d;var B=[],I=new esri.layers.LayerDrawingOptions,n=window.layerIdDemographPrefix+k+v+"_map";if("polygon"==a.rendertype)a.renderer=d,I.renderer=d;else{var z=new L;z.attributeField=d.attributeField;l=new M;l.setColor(new m([0,0,0,0]));l.outline.setColor(new m([133,133,133,.5]));l.outline.setWidth(0);z.backgroundFillSymbol=l;z.valueExpressionTitle=c;for(var u=a.circlecolor,W=Number(a.circlemins),C=(Number(a.circlemaxs)-
W)/(Number(a.classes)-1),l=0;l<d.infos.length;l++){var A=new N;A.setColor(new m(u));A.outline.setColor(new m(x));A.outline.setWidth(h);var D=parseInt(W+l*C);A.setSize(D);z.addBreak({minValue:d.infos[l].minValue,maxValue:d.infos[l].maxValue,label:d.infos[l].label,symbol:A})}a.renderer=z;I.renderer=z}B[F]=I;b.map.getLayer(n)?(d=b.map.getLayer(n),b.map.removeLayer(d)):b._serviceWidgets.push(a);d=new U(X,{id:n,opacity:g,visible:p});window.layerID_Demographics.push(n);b.map.addLayer(d);d.on("update-start",
G.hitch(b,b.showloading,n));d.on("update-end",G.hitch(b,b.hideloading,n));var n="",K;for(K in r)n+=r[K]+": ${"+K+"}\x3cbr /\x3e";n+=c+": ${"+v+": NumberFormat(places:0)}";K=new w(c,n);n={};n[F]={infoTemplate:K};d.setInfoTemplates(n);d.setVisibleLayers([F]);d.setLayerDrawingOptions(B);d.title=c+" ("+f+")";d.isDynamic=!0;d.renderField=v;d.layerType=k+"_"+F;d.renderIndex=F;a.whereclause&&(B=[],B[F]=a.whereclause,d.setLayerDefinitions(B));b.removespining()},function(a){console.log("error");b.removespining()})},
_mapRender:function(a){var b=a.fielddesc,c=a.svcdesc,f=a.opcvalue,g=a.mid,k=a.fid,v=a.layervisible,z=this.getActiveLayer(g,k),t=e.demogJSON[g].baselayers[z].headerfields;a.actlayer=z;var p=e.demogJSON[g].baselayers[z].layeridx,r=e.demogJSON[g].layerurl+e.demogJSON[g].service+"/MapServer",h=e.demogJSON[g].baselayers[z].renderobj[k+"_"+a.method+"_"+a.classes],x=a.linewidth,y=a.linecolor,z=[],C=new esri.layers.LayerDrawingOptions,u=window.layerIdDemographPrefix+g+k+"_map";if("polygon"==a.rendertype){for(var n=
this.generateColors(a.classes,a.fromcolor,a.tocolor),q=0;q<h.infos.length;q++)h.infos[q].symbol.setColor(n[q]),h.infos[q].symbol.outline.setColor(new m(y)),h.infos[q].symbol.outline.setWidth(x);a.renderer=h;C.renderer=h}else{n=new L;n.attributeField=h.attributeField;q=new M;q.setColor(new m([0,0,0,0]));q.outline.setColor(new m([133,133,133,.5]));q.outline.setWidth(0);n.backgroundFillSymbol=q;n.valueExpressionTitle=b;for(var E=a.circlecolor,D=Number(a.circlemins),F=(Number(a.circlemaxs)-D)/(Number(a.classes)-
1),q=0;q<h.infos.length;q++){var A=new N;A.setColor(new m(E));A.outline.setColor(new m(y));A.outline.setWidth(x);var H=parseInt(D+q*F);A.setSize(H);n.addBreak({minValue:h.infos[q].minValue,maxValue:h.infos[q].maxValue,label:h.infos[q].label,symbol:A})}a.renderer=n;C.renderer=n}z[p]=C;this.map.getLayer(u)?(h=this.map.getLayer(u),this.map.removeLayer(h)):this._serviceWidgets.push(a);h=new U(r,{id:u,opacity:f,visible:v});window.layerID_Demographics.push(u);this.map.addLayer(h);h.on("update-start",G.hitch(this,
this.showloading,u));h.on("update-end",G.hitch(this,this.hideloading,u));var f="",J;for(J in t)f+=t[J]+": ${"+J+"}\x3cbr /\x3e";t=new w(b,f+(b+": ${"+k+": NumberFormat(places:0)}"));J={};J[p]={infoTemplate:t};h.setInfoTemplates(J);h.setVisibleLayers([p]);h.setLayerDrawingOptions(z);h.title=b+" ("+c+")";h.isDynamic=!0;h.renderField=k;h.layerType=g+"_"+p;h.renderIndex=p;a.whereclause&&(b=[],b[p]=a.whereclause,h.setLayerDefinitions(b));this.removespining()},showloading:function(a){a="loadingdiv_"+a;
var b=this.map.width/2-50,c=this.map.height/2;if(document.getElementById(a))document.getElementById(a).innerHTML="Loading Demographic layer... Please wait.",document.getElementById(a).style.top=parseInt(b)+"px",document.getElementById(a).style.left=parseInt(c)+"px";else{var e=document.createElement("div");e.id=a;e.style.position="absolute";e.style.left=b+"px";e.style.top=c+"px";e.innerHTML="Loading Demographic layer... Please wait.";e.style.display="block";e.style.zIndex="1000";e.style.backgroundColor=
"#cccccc";e.style.fontSize="14pt";e.style.color="Red";document.body.appendChild(e)}this.map.disableMapNavigation();this.map.hideZoomSlider()},hideloading:function(a){a="loadingdiv_"+a;document.getElementById(a)&&(a=document.getElementById(a),document.body.removeChild(a));this.map.enableMapNavigation();this.map.showZoomSlider()},addspining:function(a){var b;void 0!=a.x&&void 0!=a.y?(b=a.clientX,a=a.clientY):(b=a.clientX+document.body.scrollLeft+document.documentElement.scrollLeft,a=a.clientY+document.body.scrollTop+
document.documentElement.scrollTop);if(document.getElementById("spindiv")){var c=document.getElementById("spindiv");c.style.position="absolute";c.style.left=b+"px";c.style.top=a+"px";c.style.display="block"}else c=document.createElement("div"),c.id="spindiv",c.style.position="absolute",c.style.left=b+"px",c.style.top=a+"px",c.innerHTML="\x3cimg src\x3d'"+this.folderUrl+"images/hourglas.gif' alt\x3d'loading...' /\x3e",c.style.display="block",c.style.zIndex="1000",document.body.appendChild(c)},removespining:function(){if(document.getElementById("spindiv")){var a=
document.getElementById("spindiv");document.body.removeChild(a)}},getActiveLayer:function(a,b){b=this.map.getLevel();var d="bg";a=e.demogJSON[a].baselayers;for(var c in a){var f=a[c].minlevel;b<a[c].maxlevel&&b>=f&&(d=c)}return d},ArrayContains:function(a,b){for(var d=0;d<b.length;d++)if(a==b[d])return!0;return!1},generateColors:function(a,b,c){var d=1/(a-1),e=[];b=new m(b);c=new m(c);for(i=0;i<a;i++){var f=d*i,f=new m([Math.round(b.r+f*(c.r-b.r)),Math.round(b.g+f*(c.g-b.g)),Math.round(b.b+f*(c.b-
b.b))]);e.push(f)}return e},rgb2hex:function(a,b,c){return"#"+(16777216+(c|b<<8|a<<16)).toString(16).slice(1)},tablePalette:function(a,b,c){var d=100/(a+1),e=32*(a+1);b=new m(b);var f=new m(c);c=Math.floor((f.r-b.r)/a);for(var g=Math.floor((f.g-b.g)/a),f=Math.floor((f.b-b.b)/a),e=""+('\x3ctable cellpadding\x3d"0" cellspacing\x3d"0" style\x3d"width: '+e+'px; height: 12px;"\x3e')+"\x3ctr\x3e",l=0;l<=a;l++)var p=b.g+g*l,r=b.b+f*l,e=e+('\x3ctd width\x3d"'+d+'%" style\x3d"background-color: rgb('+parseInt(b.r+
c*l)+","+parseInt(p)+","+parseInt(r)+');"\x3e\x3c/td\x3e');return e+"\x3c/tr\x3e\x3c/table\x3e"},drawPalette:function(a,b,c){var d=this.selector.getBoundingClientRect(),e=d.bottom,d=d.left;document.getElementById("colorlist")?(document.getElementById("colorlist").innerHTML="",document.getElementById("colorlist").style.top=parseInt(e)+"px",document.getElementById("colorlist").style.left=parseInt(d)+"px"):(e=dojo.create("div",{id:"colorlist",style:"position: absolute; z-index: 401; display: none; top: "+
parseInt(e)+"px; left: "+parseInt(d)+"px; background-color: #cccccc;"}),document.body.appendChild(e));a=parseInt(a)-1;e=dojo.create("table");document.getElementById("colorlist").appendChild(e);for(var f,d=0;d<this.colorThemes.length;d++){var g=this.colorThemes[d],l=g.startcolor,m=g.endcolor;c&&(l=g.endcolor,m=g.startcolor);0==d%2&&(f=dojo.create("tr"),e.appendChild(f));var g=this.tablePalette(a,l,m),p=this,r=dojo.create("td",{style:"padding: 4px 10px 4px 10px;",value:d,onmouseover:function(a){this.style.backgroundColor=
"#666666"},onmouseout:function(a){this.style.backgroundColor="transparent"},onclick:function(a){p.changecontent(this,this.value)},innerHTML:g});f.appendChild(r);d==b&&(this.selectcolor.innerHTML=g,this.renderform.startcolor.value=l,this.renderform.endcolor.value=m)}},_changeSelector:function(a){var b=this.selectcolor.getBoundingClientRect();a=b.bottom;b=b.left;$("#colorlist").css("top",parseInt(a)+"px");$("#colorlist").css("left",parseInt(b)+"px");$("#colorlist").slideToggle("slow")},changecontent:function(a,
b){var c=this.colorThemes[b],d=c.startcolor,e=c.endcolor;this.reverseStatus&&(d=c.endcolor,e=c.startcolor);this.selectcolor.innerHTML=a.innerHTML;document.getElementById("colorlist").style.display="none";this.currentk=b;this.renderform.startcolor.value=d;this.renderform.endcolor.value=e},highlight:function(a){a.style.backgroundColor="cyan"},clearhighlight:function(a){a.style.backgroundColor="transparent"},destroy:function(){dojo.empty(this.domNode);this.inherited(arguments)}})});