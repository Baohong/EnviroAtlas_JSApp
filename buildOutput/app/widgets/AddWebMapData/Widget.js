//>>built
require({cache:{"dijit/layout/LayoutContainer":function(){define("dojo/_base/array dojo/_base/declare dojo/dom-class dojo/dom-style dojo/_base/lang ../_WidgetBase ./_LayoutWidget ./utils".split(" "),function(k,l,t,b,p,u,e,m){l=l("dijit.layout.LayoutContainer",e,{design:"headline",baseClass:"dijitLayoutContainer",startup:function(){this._started||(k.forEach(this.getChildren(),this._setupChild,this),this.inherited(arguments))},_setupChild:function(a){this.inherited(arguments);a.region&&t.add(a.domNode,
this.baseClass+"Pane")},_getOrderedChildren:function(){var a=k.map(this.getChildren(),function(a,d){return{pane:a,weight:["center"==a.region?Infinity:0,a.layoutPriority,("sidebar"==this.design?1:-1)*(/top|bottom/.test(a.region)?1:-1),d]}},this);a.sort(function(a,d){a=a.weight;d=d.weight;for(var f=0;f<a.length;f++)if(a[f]!=d[f])return a[f]-d[f];return 0});return k.map(a,function(a){return a.pane})},layout:function(){m.layoutChildren(this.domNode,this._contentBox,this._getOrderedChildren())},addChild:function(a,
f){this.inherited(arguments);this._started&&this.layout()},removeChild:function(a){this.inherited(arguments);this._started&&this.layout();t.remove(a.domNode,this.baseClass+"Pane");b.set(a.domNode,{top:"auto",bottom:"auto",left:"auto",right:"auto",position:"static"});b.set(a.domNode,/top|bottom/.test(a.region)?"width":"height","auto")}});l.ChildWidgetProperties={region:"",layoutAlign:"",layoutPriority:0};p.extend(u,l.ChildWidgetProperties);return l})},"dijit/layout/_LayoutWidget":function(){define("dojo/_base/lang ../_Widget ../_Container ../_Contained ../Viewport dojo/_base/declare dojo/dom-class dojo/dom-geometry dojo/dom-style".split(" "),
function(k,l,t,b,p,u,e,m,a){return u("dijit.layout._LayoutWidget",[l,t,b],{baseClass:"dijitLayoutContainer",isLayoutContainer:!0,_setTitleAttr:null,buildRendering:function(){this.inherited(arguments);e.add(this.domNode,"dijitContainer")},startup:function(){if(!this._started){this.inherited(arguments);var a=this.getParent&&this.getParent();a&&a.isLayoutContainer||(this.resize(),this.own(p.on("resize",k.hitch(this,"resize"))))}},resize:function(f,d){var b=this.domNode;f&&m.setMarginBox(b,f);d=d||{};
k.mixin(d,f||{});"h"in d&&"w"in d||(d=k.mixin(m.getMarginBox(b),d));f=a.getComputedStyle(b);var e=m.getMarginExtents(b,f),l=m.getBorderExtents(b,f);d=this._borderBox={w:d.w-(e.w+l.w),h:d.h-(e.h+l.h)};e=m.getPadExtents(b,f);this._contentBox={l:a.toPixelValue(b,f.paddingLeft),t:a.toPixelValue(b,f.paddingTop),w:d.w-e.w,h:d.h-e.h};this.layout()},layout:function(){},_setupChild:function(a){e.add(a.domNode,this.baseClass+"-child "+(a.baseClass?this.baseClass+"-"+a.baseClass:""))},addChild:function(a,d){this.inherited(arguments);
this._started&&this._setupChild(a)},removeChild:function(a){e.remove(a.domNode,this.baseClass+"-child"+(a.baseClass?" "+this.baseClass+"-"+a.baseClass:""));this.inherited(arguments)}})})},"widgets/AddWebMapData/ItemTable":function(){define("dojo/_base/declare dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dojo/text!./ItemTable.html dojo/Evented dojo/_base/lang dojo/_base/array dojo/_base/html dojo/_base/Deferred dojo/query dojo/NodeList-traverse dojo/on jimu/utils jimu/portalUtils jimu/portalUrlUtils jimu/dijit/LoadingIndicator dijit/Dialog dijit/form/Button jimu/WidgetManager".split(" "),
function(k,l,t,b,p,u,e,m,a,f,d,r,K,z,x,G,y,L,H,A){return k([l,t,b,u],{templateString:p,baseClass:"jimu-item-table",query:null,filteredQuery:null,portalUrl:null,hidden:!1,nls:null,types:"",typeKeywords:"",_defaultThumbnail:{"Web Mapping Application":"webapp.png","Mobile Application":"mobileapp.png"},postMixInProperties:function(){this.nls=window.jimuNls.itemSelector},postCreate:function(){this.inherited(arguments);this.types&&0<this.types.length||(this.types=[]);(this.hidden=!0===this.hidden)&&this.hide();
this.portalUrl&&(this.portalUrl=G.getStandardPortalUrl(this.portalUrl));this.showAllItemsSection();this.searchAllItems()},show:function(){a.setStyle(this.domNode,"display","block")},hide:function(){a.setStyle(this.domNode,"display","none")},searchAllItems:function(a){this.showAllItemsSection();a&&(this.query=e.mixin({},a),this.query.start=1,this.clearAllItemsSection());this.portalUrl&&this.query&&0<this.query.start&&(this.allItemsShelter.show(),x.getPortal(this.portalUrl).queryItems(this.query).then(e.hitch(this,
function(a){this.domNode&&(this.allItemsShelter.hide(),this.query.start=a.nextStart,this._createItems(a,this.allItemTbody))}),e.hitch(this,function(a){console.error(a);this.domNode&&this.allItemsShelter.hide()})))},searchFilteredItems:function(a){this.showFilterItemsSection();a&&(this.filteredQuery=e.clone(a),this.filteredQuery.start=1,this.clearFilteredItemsSection());this.portalUrl&&this.filteredQuery&&0<this.filteredQuery.start&&(this.filteredItemShelter.show(),x.getPortal(this.portalUrl).queryItems(this.filteredQuery).then(e.hitch(this,
function(d){this.domNode&&(this.showFilterItemsSection(),a&&this.clearFilteredItemsSection(),this.filteredQuery.start=d.nextStart,this._createItems(d,this.filteredItemsTbody),this._filterItemCallback())}),e.hitch(this,function(a){console.error(a);this.domNode&&this._filterItemCallback()})))},_filterItemCallback:function(){this.filteredItemShelter.hide();0<this._getItemCount(this.filteredItemsTbody)?(a.setStyle(this.filteredItemsTableDiv,"display","block"),a.setStyle(this.searchNoneTipSection,"display",
"none")):(a.setStyle(this.filteredItemsTableDiv,"display","none"),a.setStyle(this.searchNoneTipSection,"display","block"))},clear:function(){this.clearAllItemsSection();this.clearFilteredItemsSection()},clearAllItemsSection:function(){a.empty(this.allItemTbody)},clearFilteredItemsSection:function(){a.empty(this.filteredItemsTbody)},showAllItemsSection:function(){a.setStyle(this.allItemsSection,"display","block");a.setStyle(this.filteredItemsSection,"display","none")},showFilterItemsSection:function(){a.setStyle(this.allItemsSection,
"display","none");a.setStyle(this.filteredItemsSection,"display","block");a.setStyle(this.filteredItemsTableDiv,"display","block");a.setStyle(this.searchNoneTipSection,"display","none")},_onAllItemsSectionScroll:function(){this._isScrollToBottom(this.allItemsTableDiv)&&this.searchAllItems()},_onFilteredItemsSectionScroll:function(){this._isScrollToBottom(this.filteredItemsTableDiv)&&this.searchFilteredItems()},_isScrollToBottom:function(a){return z.isScrollToBottom(a)},_createItems:function(h,g){h=
h.results;var b=m.map(this.types,e.hitch(this,function(a){return a.toLowerCase()}));h=m.filter(h,e.hitch(this,function(a){a=a.type&&a.type.toLowerCase()||"";return 0<=m.indexOf(b,a)}));if(0!==h.length){var q,f=d("td.empty",g),n;if(0<f.length){var l=Math.min(h.length,f.length),k=h.splice(0,l);for(n=0;n<l;n++){var p=f[n];q=this._createItem(k[n]);a.place(q,p);a.removeClass(p,"empty")}}if(0!==h.length)for(n=0;n<h.length;n++)if(q=a.toDom("\x3ctr\x3e\x3ctd\x3e\x3c/td\x3e\x3c/tr\x3e"),a.place(q,g),f=d("td",
q)[0],q=h[n])q=this._createItem(q),a.place(q,f)}},_getItemCount:function(a){return d(".item",a).length},_createItem:function(h){var g=a.toDom('\x3cdiv class\x3d"item"\x3e\x3cdiv class\x3d"item-thumbnail jimu-auto-vertical"\x3e\x3cdiv class\x3d"none-thumbnail-tip jimu-auto-vertical-content"\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"item-info"\x3e\x3cdiv class\x3d"item-name"\x3e\x3c/div\x3e\x3cdiv class\x3d"item-snippet"\x3e\x3c/div\x3e\x3ca class\x3d"item-details" target\x3d"_blank"\x3e\x3c/a\x3e\x3c/div\x3e\x3c/div\x3e');
g.item=h;var b=d(".item-thumbnail",g)[0],f=d(".item-name",g)[0],e=d(".item-snippet",g)[0],n=d(".item-details",g)[0],l=d(".none-thumbnail-tip",g)[0];if(!h.thumbnailUrl){var k=this._defaultThumbnail[h.type];k&&(h.thumbnailUrl=require.toUrl("jimu")+"/images/"+k)}h.thumbnailUrl?a.setStyle(b,"backgroundImage","url("+h.thumbnailUrl+")"):l.innerHTML=this.nls.noneThumbnail;f.innerHTML=h.title;f.title=f.innerHTML;e.innerHTML="\x3cdiv\x3e\x3cp\x3e"+h.snippet+"\x3c/p\x3e\x3c/div\x3e";e.title=h.snippet;n.innerHTML=
"Add to map";return g},showDetails:function(d,g){var b,h=selfAddWebMapData.appConfig.getConfigElementsByName("FeaturedCollectionPreview")[0];b=A.getInstance();var f=dojo.byId("itemIDdiv").innerHTML;1==window.fcDetailsOpened&&f==g.id?(b.closeWidget(h.id),document.getElementById("titleForFCWidget").style.display="none",document.getElementById("closeFCWidgetArea").style.display="none",window.fcDetailsOpened=!1):(1==window.fcDetailsFirstCreated&&(b.closeWidget(h.id),window.fcDetailsFirstCreated=!1),b.openWidget(h.id),
document.getElementById("titleForFCWidget").style.display="",document.getElementById("closeFCWidgetArea").style.display="",document.getElementById("closeFCWidget").style.display="",b.activateWidget(h.id),window.fcDetailsOpened=!0);dojo.byId("itemIDdiv").innerHTML=g.id;dojo.byId("detailsThumbnailDiv").innerHTML="\x3cimage alt\x3d'Item Thumbnail' style\x3d'border:1px solid black' src\x3d'"+g.thumbnailUrl+"'\x3e";dojo.byId("detailsTitleDiv").innerHTML="\x3ch1\x3e"+g.title+"\x3c/h1\x3e";dojo.byId("detailsOwnerDiv").innerHTML=
"by \x3ca target\x3d'_blank' href\x3d'"+g.ownerPageUrl+"'\x3e"+g.owner+"\x3c/a\x3e\x3c/div\x3e";b=new Date(g.modified);dojo.byId("detailsDateDiv").innerHTML="Last Updated: "+b.toDateString()+"\x3cbr/\x3e\x3chr/\x3e";dojo.byId("detailsSnippetDiv").innerHTML=g.snippet;dojo.byId("detailsDescriptionDiv").innerHTML=g.description;dijit.byId("addButton").label="Add to map";dijit.byId("addButton").onClick=function(){d.emit("item-selected",g)};dijit.byId("agolButton").label="View in GeoPlatform";dijit.byId("agolButton").onClick=
function(){window.open(g.detailsPageUrl,"_blank")};dojo.byId("featuredLayerList").innerHTML="\x3cimage alt\x3d'loading...' src\x3d'./widgets/AddWebMapData/images/loading.gif'\x3e";g.getItemData().then(function(d){dojo.byId("featuredLayerList").innerHTML="";var b="\x3cul\x3e";layersReversed=d.operationalLayers.reverse();layersReversed.forEach(function(a){b+="\x3cli\x3e"+a.title+"\x3c/li\x3e"});b+="\x3cul\x3e";d=a.toDom(b);a.place(d,dojo.byId("featuredLayerList"))})},_onItemsTableClicked:function(b){b=
b.target||b.srcElement;var g=d(b).parents(".item")[0];g&&(a.hasClass(b,"item-details")?(d(".item.jimu-state-active",this.domNode).removeClass("jimu-state-active"),a.addClass(g,"jimu-state-active"),this.emit("item-selected",g.item)):this.showDetails(this,g.item))},getSelectedItem:function(){var a=null,b=d(".item.jimu-state-active",this.domNode);0<b.length&&(a=e.mixin({},b[0].item));return a}})})},"widgets/AddWebMapData/_build-generate_module":function(){define(["dojo/text!./Widget.html","dojo/text!./css/style.css",
"dojo/i18n!./nls/strings","dojo/text!widgets/AddWebMapData/config.json"],function(){})},"url:widgets/AddWebMapData/ItemTable.html":'\x3cdiv\x3e\r\n    \x3cdiv class\x3d"items-section all-items-section" data-dojo-attach-point\x3d"allItemsSection"\x3e\r\n        \x3cdiv class\x3d"items-table-div" data-dojo-attach-point\x3d"allItemsTableDiv" data-dojo-attach-event\x3d"onscroll:_onAllItemsSectionScroll"\x3e\r\n            \x3ctable class\x3d"items-table" cellpadding\x3d"10" data-dojo-attach-point\x3d"allItemsTable" data-dojo-attach-event\x3d"onclick:_onItemsTableClicked"\x3e\r\n                \x3ctbody data-dojo-attach-point\x3d"allItemTbody"\x3e\x3c/tbody\x3e\r\n            \x3c/table\x3e\r\n        \x3c/div\x3e\r\n        \x3cdiv data-dojo-type\x3d"jimu/dijit/LoadingIndicator" data-dojo-attach-point\x3d"allItemsShelter" data-dojo-props\x3d\'hidden:true\'\x3e\x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv class\x3d"items-section filtered-items-section" data-dojo-attach-point\x3d"filteredItemsSection"\x3e\r\n        \x3cdiv class\x3d"items-table-div" data-dojo-attach-point\x3d"filteredItemsTableDiv" data-dojo-attach-event\x3d"onscroll:_onFilteredItemsSectionScroll"\x3e\r\n            \x3ctable class\x3d"items-table" cellpadding\x3d"10" data-dojo-attach-point\x3d"filteredItemsTable" data-dojo-attach-event\x3d"onclick:_onItemsTableClicked"\x3e\r\n                \x3ctbody data-dojo-attach-point\x3d"filteredItemsTbody"\x3e\x3c/tbody\x3e\r\n            \x3c/table\x3e\r\n        \x3c/div\x3e\r\n        \x3cdiv class\x3d"search-none-tip-section" data-dojo-attach-point\x3d"searchNoneTipSection" style\x3d"display:none;"\x3e\r\n            \x3cspan class\x3d"search-none-icon jimu-icon jimu-icon-error"\x3e\x3c/span\x3e\r\n            \x3cspan class\x3d"search-none-tip jimu-state-error-text"\x3e${nls.searchNone}\x3c/span\x3e\r\n        \x3c/div\x3e\r\n        \x3cdiv data-dojo-type\x3d"jimu/dijit/LoadingIndicator" data-dojo-attach-point\x3d"filteredItemShelter" data-dojo-props\x3d\'hidden:true\'\x3e\x3c/div\x3e\r\n    \x3c/div\x3e\r\n\x3c/div\x3e',
"url:widgets/AddWebMapData/Widget.html":'\x3cdiv class\x3d"content-container jimu-item-selector"\x3e\r\n    \x3cdiv id\x3d"map2" style\x3d"display: none"\x3e\x3c/div\x3e\r\n    \x3cdiv class\x3d"help-text"\x3eThe featured collections of data below show how EnviroAtlas datasets can be used together to make decisions.\x3c/div\x3e\r\n    \x3cdiv class\x3d"help-text"\x3e\x3cb\x3eSelect\x3c/b\x3e a featured collection to begin exploring.\x3c/div\x3e\r\n    \x3cdiv class\x3d"tab-container"\x3e\r\n        \x3cdiv data-dojo-attach-point\x3d"tabNode"\x3e\x3c/div\x3e\r\n        \x3cdiv class\x3d"tab-content mycontent-tab" data-dojo-attach-point\x3d"mycontentTabNode"\x3e\r\n            \x3cdiv class\x3d"tab-content-main mycontent-tab-content-main"\x3e\r\n                \x3cdiv id\x3d"signin-panel" data-dojo-attach-point\x3d"signInPanel"\x3e\r\n                    \x3cdiv class\x3d"jimu-btn" data-dojo-attach-point\x3d"signInButton" data-dojo-attach-event\x3d"onclick:doSignIn"\x3eSign In\x3c/div\x3e\r\n                    \x3cdiv class\x3d"help-text"\x3eIf you have an account on \x3ca href\x3d"https://epa.maps.arcgis.com" target\x3d"_blank"\x3eEPA\'s GeoPlatform\x3c/a\x3e, you may sign in to view your map layers.\x3c/div\x3e\r\n                \x3c/div\x3e\r\n                \x3cdiv id\x3d"signin-panel" data-dojo-attach-point\x3d"signOutPanel"\x3e\r\n                    \x3cdiv class\x3d"help-text" style\x3d"display:inline" data-dojo-attach-point\x3d"signOutMessage"\x3e\x3c/div\x3e\r\n                    \x3cdiv class\x3d"sign-out-btn" data-dojo-attach-point\x3d"signOutButton" data-dojo-attach-event\x3d"onclick:doSignOut"\x3eSign Out\x3c/div\x3e\r\n                \x3c/div\x3e\r\n                \x3cdiv data-dojo-attach-point\x3d"mycontentItemTable" data-dojo-type\x3d"widgets/AddWebMapData/ItemTable" data-dojo-props\x3d\'types:${_itemTypes},typeKeywords:${_typeKeywords}\' style\x3d"top:50px;"\x3e\x3c/div\x3e\r\n            \x3c/div\x3e\r\n        \x3c/div\x3e\r\n\r\n        \x3cdiv class\x3d"tab-content public-tab" data-dojo-attach-point\x3d"publicTabNode"\x3e\r\n            \x3cdiv class\x3d"tab-content-main public-tab-content-main"\x3e\r\n                \x3cdiv data-dojo-attach-point\x3d"publicItemTable" data-dojo-type\x3d"widgets/AddWebMapData/ItemTable" data-dojo-props\x3d\'types:${_itemTypes},typeKeywords:${_typeKeywords}\'\x3e\x3c/div\x3e\r\n            \x3c/div\x3e\r\n        \x3c/div\x3e\r\n    \x3c/div\x3e\r\n\x3c/div\x3e',
"url:widgets/AddWebMapData/css/style.css":'div.jimu-widget-addwebmapdata.content-container {width: 100%; height: 100%; min-width: 300px; background-color: white;}.jimu-widget-addwebmapdata .help-text {padding: 4px; color: black; font-size: 14px;}.jimu-widget-addwebmapdata .tab-container {width: 100%; height: 100%;}div.jimu-widget-addwebmapdata \x3e div.tab-container \x3e div.jimu-tab3 {height: 100%;}div.jimu-widget-addwebmapdata .jimu-item-table .items-table-div {height: auto;}div.jimu-widget-addwebmapdata .jimu-item-table .item-info {left: 100px;}div.jimu-widget-addwebmapdata .jimu-item-table .item-thumbnail {width: 85px; height: 85px;}div.jimu-widget-addwebmapdata .jimu-item-table .item-name {font-weight: bold; font-size: 14px; height: 16px;}div.jimu-widget-addwebmapdata .jimu-item-table .item-snippet {overflow: hidden; margin-top: 5px; white-space: normal; height: 3em;}div.jimu-widget-addwebmapdata .jimu-item-table .item-snippet:before {content: ""; float: left; width: 5px; height: 3em;}div.jimu-widget-addwebmapdata .jimu-item-table .item-snippet \x3e *:first-child {float: right; width: 100%; margin-left: -5px;}div.jimu-widget-addwebmapdata .jimu-item-table .item-snippet:after {content: "\\02026"; box-sizing: content-box; -webkit-box-sizing: content-box; -moz-box-sizing: content-box; float: right; position: relative; top: -1.5em; left: 100%; width: 3em; margin-left: -3em; padding-right: 5px; text-align: right; background-size: 100% 100%; background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAgAAAAABCAMAAACfZeZEAAAABGdBTUEAALGPC/xhBQAAAwBQTFRF////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////AAAA////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////wDWRdwAAAP90Uk5TgsRjMZXhS30YrvDUP3Emow1YibnM9+ggOZxrBtpRRo94gxItwLOoX/vsHdA2yGgL8+TdKUK8VFufmHSGgAQWJNc9tk+rb5KMCA8aM0iwpWV6dwP9+fXuFerm3yMs0jDOysY8wr5FTldeoWKabgEJ8RATG+IeIdsn2NUqLjQ3OgBDumC3SbRMsVKsValZplydZpZpbJOQco2KdYeEe36BDAL8/vgHBfr2CvTyDu8R7esU6RcZ5ecc4+Af3iLcJSjZ1ivT0S/PMs3LNck4x8U7wz7Bv0G9RLtHuEq1TbJQr1OtVqqnWqRdoqBhnmSbZ5mXapRtcJGOc4t2eYiFfH9AS7qYlgAAARlJREFUKM9jqK9fEGS7VNrDI2+F/nyB1Z4Fa5UKN4TbbeLY7FW0Tatkp3jp7mj7vXzl+4yrDsYoVx+JYz7mXXNSp/a0RN25JMcLPP8umzRcTZW77tNyk63tdprzXdmO+2ZdD9MFe56Y9z3LUG96mcX02n/CW71JH6Qmf8px/cw77ZvVzB+BCj8D5vxhn/vXZh6D4uzf1rN+Cc347j79q/zUL25TPrJMfG/5LvuNZP8rixeZz/mf+vU+Vut+5NL5gPOeb/sd1dZbTs03hBuvmV5JuaRyMfk849nEM7qnEk6IHI8/qn049hB35QGHiv0yZXuMdkXtYC3ebrglcqvYxoj1muvC1nDlrzJYGbpcdHHIMo2FwYv+j3QAAOBSfkZYITwUAAAAAElFTkSuQmCC); background: -webkit-gradient(linear,left top,right top, from(rgba(255,255,255,0)),to(white),color-stop(50%,white)); background: -moz-linear-gradient(to right,rgba(255,255,255,0),white 50%,white); background: -o-linear-gradient(to right,rgba(255,255,255,0),white 50%,white); background: -ms-linear-gradient(to right,rgba(255,255,255,0),white 50%,white); background: linear-gradient(to right,rgba(255,255,255,0),white 50%,white);}div.jimu-widget-addwebmapdata .jimu-item-table .item-date {margin-top: 5px;}div.jimu-widget-addwebmapdata .jimu-item-table .item-details {margin-top: 5px;}div.jimu-widget-addwebmapdata .jimu-item-table .items-table .item {position: relative; width: 100%; height: 95px;}div.jimu-widget-addwebmapdata .item {border: 1px solid #eee; -webkit-border-radius: 5px; -moz-border-radius: 5px; -o-border-radius: 5px; -ms-border-radius: 5px; border-radius: 5px;}div.jimu-widget-addwebmapdata .item.jimu-state-active,div.jimu-widget-addwebmapdata .item:hover {border: 1px solid #15a4fa; cursor: pointer;}div.jimu-widget-addwebmapdata .sign-out-btn {font-weight: bold;}div.jimu-widget-addwebmapdata .sign-out-btn {font-weight: bold; color: #15a4fa; display: inline; margin-left: 10px;}div.jimu-widget-addwebmapdata .sign-out-btn:hover {text-decoration: underline; cursor: pointer;}div.jimu-widget-addwebmapdata .control-node {display: block;}div.jimu-widget-addwebmapdata \x3e div.tab-container \x3e div.jimu-tab3 \x3e .container-node {top: 40px;}div.thumbnailDiv {display: flex; justify-content: center; align-items: center;}div.detailsFooter {width: 100%; display: flex; justify-content: center; align-items: center;}div.detailsContainer {padding: 10px !important;}div.detailsContainer \x3e div {padding: 3px;}div.detailsFooter \x3e .dijitButton \x3e .dijitButtonNode{width: 160px; font-size: 14px; font-weight: bold;}#closeForFCWidget{background-size:15px;}@keyframes out-left-rtl {0% {transform: translate3d(0, 0, 0);} 100% {transform: translate3d(5%, 0, 0);}} .ib__container .ib-splash__header {padding: 1rem 0.5rem 1rem 0.5rem;} .ib__container .ib-splash__title {display: inline-block; font-size: 12px; max-width: calc(100% - 45px); height: fit-content;} .ib__container .ib-splash__section-title {position: relative; display: flex; align-items: center;} .ib__container .ib-splash__title-text {display: inline-block; margin-left: 0.5rem; margin-bottom: 0;} html[dir\x3d"rtl"] .ib__container .ib-splash__title-text {margin-right: 0.5rem;} .ib__container .ib-splash__back-arrow {cursor: pointer;} .ib__container .ib-splash__input-area {border-top: 1px solid #ccc; padding: 0.5rem; padding-top: 0.775rem; padding-bottom: 0.3875rem;} .ib__container .ib-splash__search-input {margin-bottom: 0.775rem; margin-right: 2px !important; flex: 1; padding-left: 1.5em;} .ib__container .ib-splash__accordion-section.is-active .accordion-content {display: block;} .ib__container .ib-splash__accordion-title {margin: 0; padding: 0.51667rem; font-weight: 400; font-style: normal; font-size: 0.9375rem; line-height: 1.55rem; background-color: #f8f8f8; border-top: 1px solid #efefef; cursor: pointer;} .ib__container .ib-splash__accordion-title b, .ib__container .ib-splash__accordion-title strong {font-weight: 500;} .ib__container .ib-splash__accordion-title:focus, .ib__container .ib-splash__accordion-title:hover {-webkit-transition: all, 150ms linear; transition: all, 150ms linear; background-color: #f4f4f4; outline: none;} .ib__container .ib-splash__accordion-icon {-webkit-transform: rotate(-90deg); -moz-transform: rotate(-90deg); -ms-transform: rotate(-90deg); -o-transform: rotate(-90deg); transform: rotate(-90deg); float: right;} .ib__container .ib-splash__accordion-svg {fill: currentColor; pointer-events: none; display: inline-block; width: 1em; height: 1em; vertical-align: -0.15em; padding-right: .15em;} .ib__container .ib-splash__browse-title {margin-bottom: 0.775rem;} .ib__container .ib-splash__accordion {-webkit-box-sizing: border-box; -moz-box-sizing: border-box; box-sizing: border-box; padding: 0; border: 1px solid #efefef; border-top: none; font-weight: 400; font-style: normal; background-color: #ffffff;} .ib__container .ib-splash__accordion b, .ib__container .ib-splash__accordion strong {font-weight: 500;} .ib__container .dj_safari .ib__container {height: auto; min-height: 100%;} .ib__container .ib__container {display: flex; flex-direction: column; position: relative; width: 100%; height: 100%; max-height: 100%; line-height: 1.55rem; box-sizing: border-box; background-color: #ffffff; font-family: "Avenir Next W01", "Avenir Next W00", "Avenir Next", "Avenir", "Helvetica Neue", sans-serif !important; font-size: 16px;} .ib__container .ib__container--expanded {position: fixed; top: 0px; left: 0px;} .ib__container .ib-side__container--flyout {left: calc(100% + 5px);} html[dir\x3d"rtl"] .ib__container .ib-side__container--flyout {left: 0; right: calc(100% + 5px);} .ib__container input {font-family: "Avenir Next W01", "Avenir Next W00", "Avenir Next", "Avenir", "Helvetica Neue", sans-serif !important;} .ib__container h1, .ib__container h2, .ib__container h3, .ib__container h4, .ib__container h5, .ib__container h6 {font-family: "Avenir Next W01", "Avenir Next W00", "Avenir Next", "Avenir", "Helvetica Neue", sans-serif !important;} .ib__container .dijitButtonNode.dijitArrowButton.dijitDownArrowButton.dijitArrowButtonContainer {height: 100% !important; border-left: none !important;} .ib__container .dijitDownArrowButton .dijitArrowButtonInner {height: 100% !important; padding: 0.4rem 0 !important; margin: 0 !important; background: white !important; text-indent: 0 !important; text-align: center !important;} .ib__container .dijitDownArrowButtonHover .dijitArrowButtonInner {background: #ccc !important;} .ib__container .dijitTextBox {position: relative; font-family: "Avenir Next W01", "Avenir Next W00", "Avenir Next", "Avenir", "Helvetica Neue", "Helvetica", "Arial", sans-serif; display: inline-block; padding: 0 0.31rem !important; font-size: 0.9375rem; line-height: 1.55rem; color: #595959; border: 1px solid #a9a9a9; -webkit-transition: border-color 150ms linear; transition: border-color 150ms linear; -webkit-appearance: none; height: 2.4rem; -webkit-box-sizing: border-box; -moz-box-sizing: border-box; box-sizing: border-box; display: block; width: 100%; outline: none; outline-offset: 0; vertical-align: baseline; margin-top: 0.3875rem; box-shadow: inset 0 1px 2px rgba(0, 0, 0, 0.075);} .ib__container .dijitValidationTextBox .dijitValidationContainer {display: none;} .ib__container .dijitComboBox .dijitInputContainer {margin-right: 2rem;} .ib__container .dijitInputContainer {position: relative;} .ib__container .dijitComboBox {border: 1px solid #ccc;} .ib__container .dijitArrowButtonContainer {position: absolute; top: 0; right: 0; width: 2rem; cursor: pointer; height: 100%;} .ib__container .dijitArrowButtonInner {text-align: center !important;} .ib__container .dijitOffScreen {display: none !important;} .ib__container input.dijitArrowButtonInner {margin: 0; border: none; box-shadow: none; -webkit-box-sizing: border-box; -moz-box-sizing: border-box; box-sizing: border-box; padding: .4rem .35rem; height: 100%; border-left: 1px solid #CCC !important; font-size: .75rem; cursor: pointer; line-height: 1;} .ib__container .dijitTextBox {position: relative; font-family: "Avenir Next W01", "Avenir Next W00", "Avenir Next", "Avenir", "Helvetica Neue", "Helvetica", "Arial", sans-serif; display: inline-block; padding: 0 0.31rem !important; font-size: 0.9375rem; line-height: 1.55rem; color: #595959; border: 1px solid #a9a9a9; -webkit-transition: border-color 150ms linear; transition: border-color 150ms linear; -webkit-appearance: none; height: 2.4rem; -webkit-box-sizing: border-box; -moz-box-sizing: border-box; box-sizing: border-box; display: block; width: 100%; outline: none; outline-offset: 0; vertical-align: baseline; margin-top: 0.3875rem; box-shadow: inset 0 1px 2px rgba(0, 0, 0, 0.075);} .ib__container .dijitTextBox input[type\x3d"text"], .ib__container .dijitTextBox input[type\x3d"password"] {padding-left: 0;} .ib__container .dijitTextBox input[type\x3d"text"], .ib__container .dijitTextBox input[type\x3d"search"], .ib__container .dijitTextBox input[type\x3d"password"] {border: 0; background-color: rgba(0, 0, 0, 0); width: 100%; padding-right: 0; margin-left: 0; margin-right: 0; margin-top: 0; -webkit-appearance: none; box-shadow: none;}}',
"url:widgets/AddWebMapData/config.json":'{\r\n    "portalUrl": "https://epa.maps.arcgis.com",\r\n    "publicContent": {\r\n      "query": "type:\\"Web Map\\" AND group:af15badb09d34e2585461fcb90d4e291"\r\n    }\r\n}',"*now":function(k){k(['dojo/i18n!*preload*widgets/AddWebMapData/nls/Widget*["","ROOT"]'])}}});
define("dojo/_base/declare jimu/BaseWidget dijit/_WidgetsInTemplateMixin dojo/_base/lang dojo/_base/array dojo/_base/html dojo/query dojo/on dojo/topic dojo/string dojo/json esri/lang esri/arcgis/Portal esri/geometry/Extent esri/geometry/webMercatorUtils esri/arcgis/utils esri/layers/FeatureLayer esri/layers/layer esri/layers/ArcGISDynamicMapServiceLayer esri/layers/ArcGISTiledMapServiceLayer esri/layers/ArcGISImageServiceLayer esri/layers/LayerDrawingOptions esri/layers/DynamicLayerInfo esri/dijit/PopupTemplate esri/renderers/jsonUtils jimu/PanelManager jimu/ConfigManager jimu/MapManager jimu/tokenUtils jimu/dijit/Message jimu/dijit/Search jimu/dijit/TabContainer3 jimu/WidgetManager dijit/Dialog dijit/form/Button dijit/layout/ContentPane dijit/layout/LayoutContainer ./ItemTable".split(" "),function(k,
l,t,b,p,u,e,m,a,f,d,r,K,z,x,G,y,L,H,A,h,g,M,q,N,n,Q,R,C,B,S,O,I,T,U,V){selfAddWebMapData=null;arrlayerId=[];var P=function(){var a=selfAddWebMapData.appConfig.getConfigElementsByName("LayerList");n.getInstance().showPanel(a[0])},J=function(a,v,f){a.forEach(function(c){if(c.url&&c.id==v)if("ArcGISTiledMapServiceLayer"==c.layerType)tempLayer=new A(c.url,{id:c.id,opacity:c.opacity,visible:c.visibility}),tempLayer.title=c.title;else if("ArcGISImageServiceLayer"==c.layerType)tempLayer=new h(c.url,{id:c.id,
opacity:c.opacity,visible:c.visibility}),tempLayer.title=c.title,tempLayer=selfAddWebMapData._processLayer(tempLayer,c);else if("ArcGISFeatureLayer"==c.layerType)tempLayer=new y(c.url,{mode:y.MODE_ONDEMAND,id:c.id,opacity:c.opacity,visible:c.visibility,outFields:["*"]}),tempLayer.title=c.title,tempLayer=selfAddWebMapData._processLayer(tempLayer,c);else if("ArcGISMapServiceLayer"==c.layerType)if(console.log("mapservice",c),tempLayer=new H(c.url,{id:c.id,opacity:c.opacity,visible:c.visibility,showAttribution:!1}),
tempLayer.title=c.title,c.layers){var F=[],e,D=[],l,k=[],m,n={},E=0;p.forEach(c.layers,function(a){console.log("mapServiceLayer",a);a.layerDefinition&&a.layerDefinition.definitionExpression&&(F[a.id]=a.layerDefinition.definitionExpression);a.popupInfo&&(popInfo=a.popupInfo,jsonPopInfo=d.parse(d.stringify(popInfo)),infoTemplate=new q({title:a.name,fieldInfos:[{fieldName:popInfo.description.substring(1,popInfo.description.length-1),visible:!0,label:"",content:"$"+popInfo.description}]}),n[E]={},n[E].infoTemplate=
infoTemplate);if(a.layerDefinition&&a.layerDefinition.source){e=null;m=a.layerDefinition.source;if("mapLayer"===m.type){console.log("operationalLayerArray",f.operationalLayers);console.log("mapLayerId",m.mapLayerId);var v=p.filter(f.operationalLayers,function(a){return a.id===m.mapLayerId});v.length&&(e=b.mixin(v[0],a))}else e=b.mixin({},a);e&&(e.source=m,delete e.popupInfo,e=new M(e),c.visibleLayers&&(v="string"===typeof c.visibleLayers?c.visibleLayers.split(","):c.visibleLayers,-1<p.indexOf(v,a.id)?
e.defaultVisibility=!0:e.defaultVisibility=!1),D.push(e))}a.layerDefinition&&a.layerDefinition.source&&a.layerDefinition.drawingInfo&&(l=new g(a.layerDefinition.drawingInfo),k[a.id]=l);E+=1});tempLayer.setInfoTemplates(n);0<F.length&&tempLayer.setLayerDefinitions(F);0<D.length&&tempLayer.setDynamicLayerInfos(D,!0);0<k.length&&tempLayer.setLayerDrawingOptions(k,!0)}else c.visibleLayers&&tempLayer.setVisibleLayers(c.visibleLayers);tempLayer&&(tempLayer.on("load",function(c){0<arrlayerId.length&&setTimeout(b.hitch(this,
function(){J(a,arrlayerId.pop(),f)}),1E3)}),window.layerID_Portal_WebMap.push(c.id),testmap.addLayer(tempLayer))})};return k([l,t],{baseClass:"jimu-widget-addwebmapdata",tab:null,_itemTypes:'["Web Map"]',_typeKeywords:"[]",credential:null,currentUserId:"",postCreate:function(){this.inherited(arguments);arrlayerId=[];this._initTabs();this.own(m(this.mycontentItemTable,"item-selected",b.hitch(this,this._onItemSelected)));this.own(m(this.publicItemTable,"item-selected",b.hitch(this,this._onItemSelected)));
this.searchPublicContent();this.updateUIForSignIn()},startup:function(){selfAddWebMapData=this;this.inherited(arguments)},onOpen:function(){w=this},onSignIn:function(a){this.credential=a;this.currentUserId=a.userId;this.searchMyContent(this.currentUserId);this.updateUIForSignIn()},onSignOut:function(){this.credential=null;this.currentUserId="";this.updateUIForSignIn();this.mycontentItemTable.clear()},doSignIn:function(){C.registerOAuthInfo(this.appConfig.portalUrl,this.appConfig.appId);C.signInPortal(this.config.portalUrl).then(function(c){a.publish("userSignIn",
c)},function(){new B({message:"An error occurred logging in. Please try again.",type:"error"})})},doSignOut:function(){a.publish("userSignOut");C.signOutAll()},updateUIForSignIn:function(){var a=!!this.currentUserId;u.setStyle(this.signInPanel,"display",a?"none":"block");u.setStyle(this.signOutPanel,"display",a?"block":"none");this.signOutMessage.innerHTML=f.substitute("You are logged in as \x3cstrong\x3e${userid}\x3c/strong\x3e",{userid:this.currentUserId})},promptUserToZoomToItem:function(a){var c=
new B({message:"Do you want to zoom to the new map?",type:"question",buttons:[{label:"No",onClick:b.hitch(this,function(){c.close()})},{label:"Yes",onClick:b.hitch(this,function(){c.close();this.zoomToItem(a)})}]})},zoomToItem:function(a){a=new z({xmin:a.extent[0][0],ymin:a.extent[0][1],xmax:a.extent[1][0],ymax:a.extent[1][1],spatialReference:{wkid:4326}});a=x.geographicToWebMercator(a);this.map.setExtent(a,!0).then(function(){},function(){console.error("ChangeWebMap :: zoomToItem :: failed")})},
_initTabs:function(){this.tab=new O({tabs:[{title:"Public",content:this.publicTabNode},{title:"My Content",content:this.mycontentTabNode}]},this.tabNode);this.own(m(this.tab,"tabChanged",b.hitch(this,function(a){})))},searchMyContent:function(a){this.mycontentItemTable.clear();a={q:'type:"Web Map" AND owner:'+a,start:1,num:100,f:"json"};this.mycontentItemTable.set("portalUrl",this.config.portalUrl);this.mycontentItemTable.searchAllItems(a);this.mycontentItemTable.showAllItemsSection()},searchPublicContent:function(){this.publicItemTable.clear();
var a={q:this.config.publicContent.query,start:1,num:100,f:"json"};this.publicItemTable.set("portalUrl",this.config.portalUrl);this.publicItemTable.searchAllItems(a);this.publicItemTable.showAllItemsSection()},getCurrentMapOptions:function(){var a=null,b=0,d,e=0;d=0;b=this.map.getScale();d=this.map.extent.getCenter();e=d.getLatitude();d=d.getLongitude();b&&e&&d&&(a={center:[d,e],scale:b});return a},_onItemSelected:function(a){1<this.map.layerIds.length?this.promptUserforConfirmation(a):this._onConfirmation(a)},
promptUserforConfirmation:function(a){var c=new B({message:"This will replace all layers currently added to the map. If you wish to save your current layer selection, please use the save session widget first.",type:"question",buttons:[{label:"Cancel and save session",onClick:b.hitch(this,function(){c.close();var a=n.getInstance(),b=a.widgetManager.appConfig.getConfigElementsByName("SaveSession");a.showPanel(b[0])})},{label:"Proceed",onClick:b.hitch(this,function(){c.close();var b=I.getInstance().getWidgetById("widgets_LayerList_Widget_17");
b&&b._onRemoveLayersClick();this._onConfirmation(a)})}]})},_onConfirmation:function(a){this.zoomToItem(a);P();testmap=this.map;var c=tempLayer=!1,d;for(d in a.tags)if(window.communityDic.hasOwnProperty(a.tags[d])){c=!0;window.communitySelected=a.tags[d];break}c&&selfAddWebMapData.publishData({message:"updateCommunityLayers"});a.getItemData().then(function(a){layersReversed=a.operationalLayers.reverse();layersReversed.forEach(function(a){a.url&&a.id&&void 0!=a.id&&("ArcGISMapServiceLayer"==a.layerType||
"ArcGISImageServiceLayer"==a.layerType||"ArcGISTiledMapServiceLayer"==a.layerType)&&0>arrlayerId.indexOf(a.id)&&arrlayerId.push(a.id)});layersReversed.forEach(function(a){a.url&&a.id&&void 0!=a.id&&"ArcGISFeatureLayer"==a.layerType&&0>arrlayerId.indexOf(a.id)&&arrlayerId.push(a.id)});J(layersReversed,arrlayerId.pop(),a)});setTimeout(b.hitch(this,function(){a.getItemData().then(function(a){layersReversed=a.operationalLayers.reverse();layersReversed.forEach(function(a){a.url||(a.featureCollection?(console.log("Web Map Layers:: FeatureCollection"),
a.featureCollection.layers.forEach(function(c){tempLayer=new y(c,{id:a.id});tempLayer=selfAddWebMapData._processLayer(tempLayer,c)})):(console.log("Add Layer Error:: Layer of unknown type"),a.url in window.faildedEALayerDictionary||(window.faildedEALayerDictionary[a.url]=a.url,selfAddWebMapData.publishData({message:"openFailedLayer"}))));tempLayer&&(window.layerID_Portal_WebMap.push(a.id),testmap.addLayer(tempLayer))})})}),4E3);c=selfAddWebMapData.appConfig.getConfigElementsByName("FeaturedCollectionPreview")[0];
I.getInstance().closeWidget(c.id);document.getElementById("titleForFCWidget").style.display="none";document.getElementById("closeFCWidgetArea").style.display="none";window.fcDetailsOpened=!1},_processLayer:function(a,b){var c=!1;b.popupInfo&&(c=b.popupInfo,jsonPopInfo=d.parse(d.stringify(c)),c=new q(jsonPopInfo),a.setInfoTemplate(c));r.isDefined(b.showLabels)&&a.setShowLabels(b.showLabels);r.isDefined(b.refreshInterval)&&a.setRefreshInterval(b.refreshInterval);r.isDefined(b.showLegend)&&console.log("");
r.isDefined(b.timeAnimation)&&!1===b.timeAnimation&&console.log("");if(b=b.layerDefinition)console.log("layerDefinition",b),b.definitionExpression&&a.setDefinitionExpression(b.definitionExpression),b.displayField&&a.displayField(b.displayField),b.drawingInfo&&(b.drawingInfo.renderer&&(jsonRenderer=d.parse(d.stringify(b.drawingInfo.renderer)),c=N.fromJson(jsonRenderer),jsonRenderer.type&&"classBreaks"===jsonRenderer.type&&(c.isMaxInclusive=!0),a.setRenderer(c)),r.isDefined(b.drawingInfo.transparency)&&
a.setOpacity(1-b.drawingInfo.transparency/100)),r.isDefined(b.minScale)&&a.setMinScale(b.minScale),r.isDefined(b.maxScale)&&a.setMaxScale(b.maxScale),r.isDefined(b.defaultVisibility)&&!1===b.defaultVisibility&&a.setVisibility(!1);return a}})});