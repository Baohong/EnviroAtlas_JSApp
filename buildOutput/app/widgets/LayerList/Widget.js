//>>built
require({cache:{"widgets/LayerList/LayerListView":function(){define("dijit/_WidgetBase dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/dom-construct dojo/on dojo/query jimu/dijit/CheckBox jimu/PanelManager jimu/dijit/DropMenu jimu/dijit/LoadingShelter ./PopupMenu dijit/_TemplatedMixin dojo/text!./LayerListView.html dojo/dom-attr dojo/dom-class dojo/dom-style ./NlsStrings".split(" "),function(n,m,e,h,k,d,f,r,b,g,v,p,q,y,w,t,u,x){return m([n,q],{templateString:y,_currentSelectedLayerRowNode:null,
operationsDropMenu:null,_layerNodeHandles:null,_layerDomNodeStorage:null,postMixInProperties:function(){this.inherited(arguments);this.nls=x.value;this._layerDomNodeStorage={}},postCreate:function(){this.refresh();this._initOperations()},refresh:function(){this._removeLayerNodes();h.forEach(this.operLayerInfos.getLayerInfoArray(),function(a){var c=f("[class~\x3d'hrClass']",this.domNode)[0],l=f("[class~\x3d'hrClassNonGraphic']",this.domNode)[0];a.layerObject.type&&"FEATURE LAYER"==a.layerObject.type.toUpperCase()||
a.layerObject.url.toUpperCase().indexOf("FEATURESERVER")&&a.layerObject.url.toUpperCase().indexOf("ARCGIS.COM")?this.drawListNode(a,0,c,"before"):this.drawListNode(a,0,l,"before")},this);this.config.showBasemap&&h.forEach(this.operLayerInfos.getBasemapLayerInfoArray(),function(a){this.drawListNode(a,0,this.layerListTable)},this);h.forEach(this.operLayerInfos.getTableInfoArray(),function(a){this.drawListNode(a,0,this.tableListTable)},this)},drawListNode:function(a,c,l,d){var b;!this.isLayerHiddenInWidget(a)&&
this.layerFilter.isValidLayerInfo(a)&&(b=this._layerDomNodeStorage[a.getObjectId()],(a.isRootLayer()||a.isTable)&&b?(k.place(b.layerTrNode,l,d),k.place(b.layerContentTrNode,l,d)):0===a.newSubLayers.length?(b=this.addLayerNode(a,c,l,d),this.config.showLegend?this.addLegendNode(a,c,b.subNode):(a=f(".showLegend-div",b.layerTrNode)[0])&&t.add(a,"hidden")):(b=this.addLayerNode(a,c,l,d),h.forEach(a.newSubLayers,e.hitch(this,function(a,c){this.drawListNode(c,a+1,b.subNode)},c))))},addLayerNode:function(a,
c,l,b){var g,f,B,z,h,t,p,q=a.getRootLayerInfo();if(a.isRootLayer()||a.isTable)this._layerDomNodeStorage[a.getObjectId()]={layerTrNode:null,layerContentTrNode:null,layerNodeEventHandles:[],layerNodeReferredDijits:[]};g=k.create("tr",{"class":"jimu-widget-row layer-row  layer-tr-node-"+a.id,layerTrNodeId:a.id});k.place(g,l,b);f=k.create("td",{"class":"col col1"},g);for(p=0;p<c;p++)k.create("div",{"class":"begin-blank-div jimu-float-leading",innerHTML:""},f);p=k.create("div",{"class":"showLegend-div jimu-float-leading",
imageShowLegendDivId:a.id},f);B=k.create("div",{"class":"div-select jimu-float-leading"},f);layerId=a.id;0<=layerId.indexOf(window.layerIdPrefix)?z=layerId.replace(window.layerIdPrefix,""):0<=layerId.indexOf(window.layerIdPBSPrefix)&&(z=layerId.replace(window.layerIdPBSPrefix,""));z=new r({checked:a.isVisible()||window.allLayersTurnedOn[z],"class":"visible-checkbox-"+a.id});k.place(z.domNode,B);h=k.create("div",{"class":"noLegend-div jimu-float-leading"},f);var v;v=a.isTable?"images/table.png":a.isBasemap()?
"images/basemap.png":"images/noLegend.png";k.create("img",{"class":"noLegend-image",src:this.layerListWidget.folderUrl+v,alt:"l"},h);if(a.isTiled||a.isTable||a.isBasemap())u.set(p,"display","none"),u.set(B,"display","none"),u.set(h,"display","block");u.set(f,"width",12*c+40+"px");scaleLabel=k.create("td",{"class":"col col15"},g);scaleObject="";a.layerObject.eaScale&&(scaleTitle="Community Dataset","NATIONAL"==a.layerObject.eaScale&&(scaleTitle="National Dataset"),scale=a.layerObject.eaScale,scaleImage=
k.create("div",{title:scaleTitle,"class":"icon_style "+scale},scaleLabel));f=a.title;c=k.create("div",{"class":"col col2"},g);B="";try{t=a.id.replace(window.layerIdPrefix,"").replace(window.layerIdPBSPrefix,""),a.isInScale()||null!=window.hashIDtoTileURL[t]||(B="grayed-title")}catch(D){console.warn(D.message)}k.create("td",{id:window.layerTitlePrefix+a.id,innerHTML:f,"class":"layer-title-div-"+a.id+" div-content jimu-float-leading "+B},c);f=k.create("td",{"class":"col col3"},g);t=this.hasContentMenu()?
"display: block":"display: none";t=k.create("div",{"class":"layers-list-popupMenu-div",style:t},f);f=k.create("tr",{"class":"",layerContentTrNodeId:a.id});k.place(f,l,b);l=k.create("td",{"class":"",colspan:"3"},f);l=k.create("table",{"class":"layer-sub-node",subNodeId:a.id},l);b=this.own(d(c,"click",e.hitch(this,this._onRowTrClick,a,p,g,l)));this._storeLayerNodeEventHandle(q,b[0]);b=this.own(d(p,"click",e.hitch(this,this._onRowTrClick,a,p,g,l)));this._storeLayerNodeEventHandle(q,b[0]);b=this.own(d(z.domNode,
"click",e.hitch(this,this._onCkSelectNodeClick,a,z)));this._storeLayerNodeEventHandle(q,b[0]);b=this.own(d(t,"click",e.hitch(this,this._onPopupMenuClick,a,t,g)));this._storeLayerNodeEventHandle(q,b[0]);if(a.isRootLayer()||a.isTable)this._layerDomNodeStorage[a.getObjectId()].layerTrNode=g,this._layerDomNodeStorage[a.getObjectId()].layerContentTrNode=f;this.layerFilter.isExpanded(a)&&this._foldOrUnfoldLayer(a,!1,p,l);return{layerTrNode:g,subNode:l}},hasContentMenu:function(){var a=!1,c;if(this.config.contextMenu)for(c in this.config.contextMenu)this.config.contextMenu.hasOwnProperty(c)&&
"function"!==typeof this.config.contextMenu[c]&&(a=a||this.config.contextMenu[c]);else a=!0;return a},addLegendNode:function(a,c,l){l=k.create("tr",{"class":"legend-node-tr"},l);l=k.create("td",{"class":"legend-node-td"},l);try{var b=a.createLegendsNode();u.set(b,"font-size",12*(c+1)+"px");k.place(b,l)}catch(A){console.error(A)}},_storeLayerNodeEventHandle:function(a,c){(a=this._layerDomNodeStorage[a.getObjectId()])&&a.layerNodeEventHandles.push(c)},_storeLayerNodeDijit:function(a,c){(a=this._layerDomNodeStorage[a.getObjectId()])&&
a.layerNodeReferredDijits.push(c)},_clearLayerDomNodeStorage:function(){var a=this.operLayerInfos.getLayerInfoArray(),c=this.operLayerInfos.getTableInfoArray(),a=a.concat(c),l;for(l in this._layerDomNodeStorage)this._layerDomNodeStorage.hasOwnProperty(l)&&"function"!==typeof this._layerDomNodeStorage[l]&&(c=h.some(a,function(a){if(a.getObjectId().toString()===l)return!0},this),c||(h.forEach(this._layerDomNodeStorage[l].layerNodeEventHandles,function(a){a.remove()},this),h.forEach(this._layerDomNodeStorage[l].layerNodeReferredDijits,
function(a){a.destroy()},this),k.destroy(this._layerDomNodeStorage[l].layerTrNode),k.destroy(this._layerDomNodeStorage[l].layerContentTrNode),delete this._layerDomNodeStorage[l]))},_removeLayerNodes:function(){var a,c;this._clearLayerDomNodeStorage();for(var l in this._layerDomNodeStorage)this._layerDomNodeStorage.hasOwnProperty(l)&&"function"!==typeof this._layerDomNodeStorage[l]&&(a=this._layerDomNodeStorage[l],a.layerContentTrNode&&a.layerTrNode&&((c=a.layerTrNode.parentNode)&&c.removeChild(a.layerTrNode),
(c=a.layerContentTrNode.parentNode)&&c.removeChild(a.layerContentTrNode)))},_foldSwitch:function(a,c,l){return"none"===u.get(l,"display")?this._foldOrUnfoldLayer(a,!1,c,l):this._foldOrUnfoldLayer(a,!0,c,l)},_foldOrUnfoldLayer:function(a,c,l,b){var d=d?l:f("div[imageShowLegendDivId\x3d'"+a.id+"']",this.layerListTable)[0],g=g?b:f("table[subNodeId\x3d'"+a.id+"']",this.layerListTable)[0];l=null;d&&g&&(c?(u.set(g,"display","none"),t.remove(d,"unfold"),l=!0):(u.set(g,"display","table"),t.add(d,"unfold"),
l=!1,a.isLeaf()&&(c=f(".legends-div",g)[0],d=f(".legends-loading-img",c)[0],c&&d&&a.drawLegends(c,this.layerListWidget.appConfig.portalUrl))));return l},redrawLegends:function(a){var c=f("div[legendsDivId\x3d'"+a.id+"']",this.layerListTable)[0];c&&(c._legendDijit&&c._legendDijit.destroy&&c._legendDijit.destroy(),a.drawLegends(c,this.layerListWidget.appConfig.portalUrl))},_foldOrUnfoldLayers:function(a,c){h.forEach(a,function(a){this._foldOrUnfoldLayer(a,c)},this)},_onCkSelectNodeClick:function(a,
c,l){l.ctrlKey||l.metaKey?a.isRootLayer()?this.turnAllRootLayers(c.checked):this.turnAllSameLevelLayers(a,c.checked):(this.layerListWidget._denyLayerInfosIsVisibleChangedResponseOneTime=!0,eaId="",layerId=a.id,0<=layerId.indexOf(window.layerIdPrefix)?eaId=layerId.replace(window.layerIdPrefix,""):0<=layerId.indexOf(window.layerIdPBSPrefix)&&(eaId=layerId.replace(window.layerIdPBSPrefix,"")),lyrTiled=a.map.getLayer(window.layerIdTiledPrefix+eaId),c.checked?lyrTiled&&null==window.hashRenderer[eaId]&&
lyrTiled.setVisibility(!0):lyrTiled&&lyrTiled.setVisibility(!1),a.setTopLayerVisible(c.checked));l.stopPropagation()},_onPopupMenuClick:function(a,c,l,b){var g=a.getRootLayerInfo(),f=c.popupMenu;f||(f=(new p({_layerInfo:a,box:this.layerListWidget.domNode.parentNode,popupMenuNode:c,layerListWidget:this.layerListWidget,_config:this.config})).placeAt(c),c.popupMenu=f,this._storeLayerNodeDijit(g,f),a=this.own(d(f,"onMenuClick",e.hitch(this,this._onPopupMenuItemClick,a,f))),this._storeLayerNodeEventHandle(g,
a[0]));this._changeSelectedLayerRow(l);f&&"opened"===f.state?f.closeDropMenu():(this._hideCurrentPopupMenu(),f&&(this.currentPopupMenu=f,f.openDropMenu()));this.operationsDropMenu&&"opened"===this.operationsDropMenu.state&&this.operationsDropMenu.closeDropMenu();b.stopPropagation()},_hideCurrentPopupMenu:function(){this.currentPopupMenu&&"opened"===this.currentPopupMenu.state&&this.currentPopupMenu.closeDropMenu()},_onLayerListWidgetPaneClick:function(){this.operationsDropMenu&&this.operationsDropMenu.closeDropMenu()},
_onRowTrClick:function(a,c,l,b,d){this._changeSelectedLayerRow(l);c=this._foldSwitch(a,c,b);if(d.ctrlKey||d.metaKey)a.isRootLayer()?this.foldOrUnfoldAllRootLayers(c):this.foldOrUnfoldSameLevelLayers(a,c)},_changeSelectedLayerRow:function(a){this._currentSelectedLayerRowNode&&this._currentSelectedLayerRowNode===a||(this._currentSelectedLayerRowNode&&t.remove(this._currentSelectedLayerRowNode,"jimu-widget-row-selected"),t.add(a,"jimu-widget-row-selected"),this._currentSelectedLayerRowNode=a)},_onPopupMenuItemClick:function(a,
c,l,b){b={itemKey:l.key,extraData:b,layerListWidget:this.layerListWidget,layerListView:this};"transparency"===l.key?"none"===u.get(c.transparencyDiv,"display")?c.showTransNode(a.getOpacity()):c.hideTransNode():"setVisibilityRange"===l.key?"none"===u.get(c.setVisibilityRangeNode,"display")?c.showSetVisibilityRangeNode(a):c.hideSetVisibilityRangeNode():(a=c.popupMenuInfo.onPopupMenuClick(b),a.closeMenu&&c.closeDropMenu())},_exchangeLayerTrNode:function(a,c){a=f("tr[layerTrNodeId\x3d'"+a.id+"']",this.layerListTable)[0];
var l=f("tr[layerTrNodeId\x3d'"+c.id+"']",this.layerListTable)[0];c=f("tr[layerContentTrNodeId\x3d'"+c.id+"']",this.layerListTable)[0];a&&l&&c&&(this.layerListTable.removeChild(l),this.layerListTable.insertBefore(l,a),this.layerListTable.removeChild(c),this.layerListTable.insertBefore(c,a))},_getMovedSteps:function(a,c){var l=1,b,d=this.operLayerInfos.getLayerInfoArray();h.forEach(d,function(c,l){a.id===c.id&&(b=l)},this);if("moveup"===c)for(;!d[b].isFirst&&!(b--,!this.isLayerHiddenInWidget(d[b])&&
this.layerFilter.isValidLayerInfo(d[b])||d[b].isFirst);)l++;else for(;!d[b].isLast&&!(b++,!this.isLayerHiddenInWidget(d[b])&&this.layerFilter.isValidLayerInfo(d[b])||d[b].isLast);)l++;return l},_initOperations:function(){this.operationsDropMenu=(new g({items:[{key:"turnAllLayersOn",label:this.nls.turnAllLayersOn},{key:"turnAllLayersOff",label:this.nls.turnAllLayersOff},{key:"separator"},{key:"expandAllLayers",label:this.nls.expandAllLayers},{key:"collapseAlllayers",label:this.nls.collapseAlllayers},
{key:"removeAllLayers",label:this.nls.removeAllLayers}],box:this.layerListWidget.domNode.parentNode})).placeAt(this.layerListOperations);var a=f("div.jimu-dropmenu \x3e div:first-child",this.layerListOperations)[0];a&&(t.remove(a,["jimu-icon-btn","popup-menu-button"]),t.add(a,["feature-action","icon-operation"]));this.operationsDropMenu.btnNode&&this.own(d(this.operationsDropMenu.btnNode,"click",e.hitch(this,this._onLayerListOperationsClick)));this.own(d(this.operationsDropMenu,"onMenuClick",e.hitch(this,
this._onOperationsMenuItemClick)));this.operationsDropMenuLoading=(new v({hidden:!0})).placeAt(this.operationsDropMenu.domNode)},_onLayerListOperationsClick:function(){this._hideCurrentPopupMenu()},_onOperationsMenuItemClick:function(a){switch(a.key){case "turnAllLayersOn":this.turnAllRootLayers(!0);break;case "turnAllLayersOff":this.turnAllRootLayers(!1);break;case "expandAllLayers":this.foldOrUnfoldAllLayers(!1);break;case "collapseAlllayers":this.foldOrUnfoldAllLayers(!0);break;case "removeAllLayers":document.getElementById("butRemoveAllLayers").click()}},
isFirstDisplayedLayerInfo:function(a){var c,l;a.isFirst||!a.isRootLayer()||a.isBasemap()?c=!0:(c=this._getMovedSteps(a,"moveup"),l=this.operLayerInfos.getLayerInfoArray(),a=this.operLayerInfos._getTopLayerInfoIndexById(a.id),c=this.isLayerHiddenInWidget(l[a-c])||!this.layerFilter.isValidLayerInfo(l[a-c])?!0:!1);return c},isLastDisplayedLayerInfo:function(a){var c,l;a.isLast||!a.isRootLayer()||a.isBasemap()?c=!0:(c=this._getMovedSteps(a,"movedown"),l=this.operLayerInfos.getLayerInfoArray(),a=this.operLayerInfos._getTopLayerInfoIndexById(a.id),
c=this.isLayerHiddenInWidget(l[a+c])||!this.layerFilter.isValidLayerInfo(l[a+c])?!0:!1);return c},moveUpLayer:function(a){var c=this._getMovedSteps(a,"moveup");this.layerListWidget._denyLayerInfosReorderResponseOneTime=!0;(c=this.operLayerInfos.moveUpLayer(a,c))&&this._exchangeLayerTrNode(c,a)},moveDownLayer:function(a){var c=this._getMovedSteps(a,"movedown");this.layerListWidget._denyLayerInfosReorderResponseOneTime=!0;(c=this.operLayerInfos.moveDownLayer(a,c))&&this._exchangeLayerTrNode(a,c)},isLayerHiddenInWidget:function(a){var c=
!1,l=a;if(a&&this.config.layerOptions&&void 0!==this.config.layerOptions[a.id])for(;l&&!(c=c||!this.config.layerOptions[l.id].display);)l=l.parentLayerInfo;else c=!1;return c},turnAllRootLayers:function(a){var c=this.operLayerInfos.getLayerInfoArray();h.forEach(c,function(c){this.isLayerHiddenInWidget(c)||(c.setTopLayerVisible(a),eaId="",layerId=c.id,0<=layerId.indexOf(window.layerIdPrefix)?eaId=layerId.replace(window.layerIdPrefix,""):0<=layerId.indexOf(window.layerIdPBSPrefix)&&(eaId=layerId.replace(window.layerIdPBSPrefix,
"")),window.allLayersTurnedOn[eaId]=a,lyrTiled=c.map.getLayer(window.layerIdTiledPrefix+eaId),a?lyrTiled&&null==window.hashRenderer[eaId]&&lyrTiled.setVisibility(!0):lyrTiled&&lyrTiled.setVisibility(!1))},this)},turnAllSameLevelLayers:function(a,c){var l={},b=a.getRootLayerInfo();b.traversal(e.hitch(this,function(b){b.parentLayerInfo&&b.parentLayerInfo.id===a.parentLayerInfo.id&&!this.isLayerHiddenInWidget(b)?l[b.id]={visible:c}:l[b.id]={visible:b.isVisible()}}));b.resetLayerObjectVisibility(l)},
foldOrUnfoldAllRootLayers:function(a){var c=h.filter(this.operLayerInfos.getLayerInfoArray(),function(a){return!this.isLayerHiddenInWidget(a)},this);this._foldOrUnfoldLayers(c,a)},foldOrUnfoldSameLevelLayers:function(a,c){a.parentLayerInfo&&(a=h.filter(a.parentLayerInfo.getSubLayers(),function(a){return!this.isLayerHiddenInWidget(a)},this),this._foldOrUnfoldLayers(a,c))},foldOrUnfoldAllLayers:function(a){var c=[],b=[];this.operationsDropMenuLoading.show();this.operLayerInfos.traversal(e.hitch(this,
function(a){this.isLayerHiddenInWidget(a)||(a.isRootLayer()?b.push(a):c.push(a))}));var c=b.concat(c),d=0,g=c.length;setTimeout(e.hitch(this,function(){if(d<g){var b=c.slice(d,d+50);this._foldOrUnfoldLayers(b,a);d+=50;setTimeout(e.hitch(this,arguments.callee),60)}else this.operationsDropMenuLoading.hide()}),60)}})})},"jimu/dijit/DropMenu":function(){define("dojo/_base/declare dijit/_WidgetBase dojo/_base/lang dojo/_base/array dojo/_base/html dojo/on dojo/Evented ../utils".split(" "),function(n,m,
e,h,k,d,f,r){return n([m,f],{baseClass:"jimu-dropmenu",declaredClass:"jimu.dijit.DropMenu",constructor:function(){this.state="closed"},postCreate:function(){this.btnNode=k.create("div",{"class":"popup-menu-button"},this.domNode);this.own(d(this.btnNode,"click",e.hitch(this,this._onBtnClick)));this.box||(this.box=this.domNode.parentNode);this.own(d(this.box,"click",e.hitch(this,function(){this.dropMenuNode&&this.closeDropMenu()})))},_onBtnClick:function(b){b.stopPropagation();this.dropMenuNode||this._createDropMenuNode();
"closed"===this.state?this.openDropMenu():this.closeDropMenu()},_createDropMenuNode:function(){this.dropMenuNode=k.create("div",{"class":"drop-menu",style:{display:"none"}},this.domNode);this.items||(this.items=[]);h.forEach(this.items,function(b){var g;b.key&&"separator"===b.key?k.create("hr",{"class":"menu-item-identification menu-item-line",itemId:b.key},this.dropMenuNode):b.key&&(g=k.create("div",{"class":"menu-item-identification menu-item",itemId:b.key,innerHTML:b.label},this.dropMenuNode),
this.own(d(g,"click",e.hitch(this,function(d){this.selectItem(b,d)}))))},this)},_getDropMenuPosition:function(){var b=k.getContentBox(this.box),d=k.getMarginBox(this.domNode),f=k.getMarginBox(this.btnNode),h=k.getMarginBox(this.dropMenuNode),e={},r,m;e.l=d.l;e.t=d.t+f.h;e.t+h.h>b.h&&(m=d.t,r=b.h-d.t-f.h,r=Math.max(m,r),r===m&&(e.t=0-h.h));e.l+h.w>b.w&&(h=d.l,b=b.w-d.l-f.w,r=Math.max(h,b),r===h&&(e.l="",e.r=0));e.left=e.l;e.top=e.t;e.right=e.r;return e},selectItem:function(b){this.closeDropMenu();
this.emit("onMenuClick",b)},openDropMenu:function(){this.state="opened";k.setStyle(this.dropMenuNode,"display","");k.setStyle(this.dropMenuNode,r.getPositionStyle(this._getDropMenuPosition()));this.emit("onOpenMenu")},closeDropMenu:function(){this.state="closed";k.setStyle(this.dropMenuNode,"display","none");this.emit("onCloseMenu")}})})},"widgets/LayerList/PopupMenu":function(){define("dojo/_base/declare dojo/_base/array dojo/_base/html dojo/_base/lang dojo/query dojo/Deferred jimu/dijit/DropMenu dijit/_TemplatedMixin dijit/form/HorizontalSlider dijit/form/HorizontalRuleLabels dojo/text!./PopupMenu.html dojo/dom-style esri/dijit/VisibleScaleRangeSlider ./NlsStrings ./PopupMenuInfo".split(" "),
function(n,m,e,h,k,d,f,r,b,g,v,p,q,y,w){return n([f,r],{templateString:v,popupMenuInfo:null,loading:null,_deniedItems:null,_deniedItemsFromConfig:null,_layerInfo:null,constructor:function(){this.nls=y.value},postCreate:function(){this.inherited(arguments);this._initDeniedItems();this.loading=e.create("div",{"class":"popup-menu-loading"},this.popupMenuNode)},_initDeniedItems:function(){var b=[],d={ZoomTo:"zoomto",Transparency:"transparency",SetVisibilityRange:"setVisibilityRange",EnableOrDisablePopup:"controlPopup",
ControlLabels:"controlLabels",MoveupOrMovedown:"moveup movedown",OpenAttributeTable:"table",DescriptionOrShowItemDetailsOrDownload:"url"};this._deniedItems=[];this._deniedItemsFromConfig=[];for(var g in this._config.contextMenu)this._config.contextMenu.hasOwnProperty(g)&&"function"!==typeof this._config.contextMenu[g]&&!1===this._config.contextMenu[g]&&(b=b.concat(d[g].split(" ")));m.forEach(b,h.hitch(this,function(a){this._deniedItemsFromConfig.push({key:a,denyType:"hidden"})}))},_getDropMenuPosition:function(){return{top:"40px",
right:"0px",zIndex:1}},_getTransNodePosition:function(){return{top:"28px",right:"2px"}},_onBtnClick:function(){},_refresh:function(){this._denyItems();this._changeItemsUI()},_denyItems:function(){var b=k("[class~\x3d'menu-item-identification']",this.dropMenuNode);b.forEach(function(a){e.removeClass(a,"menu-item-dissable");e.removeClass(a,"menu-item-hidden")},this);e.removeClass(this.dropMenuNode,"no-border");m.forEach(this._deniedItems,function(a){var c=k("div[itemId\x3d'"+a.key+"']",this.dropMenuNode)[0];
c&&("disable"===a.denyType?(e.addClass(c,"menu-item-dissable"),"url"===a.key&&k(".menu-item-description",c).forEach(function(a){e.setAttr(a,"href","#");e.removeAttr(a,"target")})):e.addClass(c,"menu-item-hidden"))},this);for(var d=-1,g=0;g<b.length;g++)e.hasClass(b[g],"menu-item-line")&&(-1===d||e.hasClass(b[d],"menu-item-line"))&&e.addClass(b[g],"menu-item-hidden"),e.hasClass(b[g],"menu-item-hidden")||(d=g);b=m.filter(b,function(a){return!e.hasClass(a,"menu-item-hidden")});0===b.length?e.addClass(this.dropMenuNode,
"no-border"):(e.removeClass(this.dropMenuNode,"no-border"),e.hasClass(b[b.length-1],"menu-item-line")&&e.addClass(b[b.length-1],"menu-item-hidden"))},_changeItemsUI:function(){var b=k("[itemid\x3dcontrolPopup]",this.dropMenuNode)[0];b&&this._layerInfo.controlPopupInfo&&(this._layerInfo.controlPopupInfo.enablePopup?e.setAttr(b,"innerHTML",this.nls.removePopup):e.setAttr(b,"innerHTML",this.nls.enablePopup));(b=k("[itemid\x3dcontrolLabels]",this.dropMenuNode)[0])&&this._layerInfo.canShowLabel()&&(this._layerInfo.isShowLabels()?
e.setAttr(b,"innerHTML",this.nls.hideLables):e.setAttr(b,"innerHTML",this.nls.showLabels))},_switchLoadingState:function(b){b?e.setStyle(this.loading,"display","block"):e.setStyle(this.loading,"display","none")},selectItem:function(b,d){for(var g=!1,a=0;a<this._deniedItems.length;a++)if(this._deniedItems[a].key===b.key){g=!0;break}g||this.emit("onMenuClick",b);d.stopPropagation(d)},openDropMenu:function(){var b=h.hitch(this,this.inherited,arguments),g=new d;this._switchLoadingState(!0);this.dropMenuNode?
g.resolve(this.popupMenuInfo):w.create(this._layerInfo,this.layerListWidget).then(h.hitch(this,function(b){this.items=b.getDisplayItems();this.popupMenuInfo=b;this._createDropMenuNode();g.resolve(this.popupMenuInfo)}));g.then(h.hitch(this,function(){this.popupMenuInfo.getDeniedItems().then(h.hitch(this,function(d){this._deniedItems=this._deniedItemsFromConfig.concat(d);this._refresh();b(arguments);this._switchLoadingState(!1)}),h.hitch(this,function(){this._switchLoadingState(!1)}))}),h.hitch(this,
function(){this._switchLoadingState(!1)}))},closeDropMenu:function(){this.inherited(arguments);this.hideTransNode();this.hideSetVisibilityRangeNode()},_onTransparencyDivClick:function(b){b.stopPropagation()},showTransNode:function(b){this.hideSetVisibilityRangeNode();this.transHorizSlider||(this._createTransparencyWidget(),this.transHorizSlider.set("value",1-b));p.set(this.transparencyDiv,"top",this._getTransNodePosition().top);isRTL?p.set(this.transparencyDiv,"left",this._getTransNodePosition().right):
p.set(this.transparencyDiv,"right",this._getTransNodePosition().right);p.set(this.transparencyDiv,"display","block")},hideTransNode:function(){p.set(this.transparencyDiv,"display","none")},_createTransparencyWidget:function(){this.transHorizSlider=new b({minimum:0,maximum:1,intermediateChanges:!0},this.transparencyBody);this.own(this.transHorizSlider.on("change",h.hitch(this,function(b){this.emit("onMenuClick",{key:"transparencyChanged"},{newTransValue:b})})));new g({container:"bottomDecoration"},
this.transparencyRule)},_onSetVisibilityRangeNode:function(b){b.stopPropagation()},showSetVisibilityRangeNode:function(b){this.hideTransNode();if(!this.visibleScaleRangeSlider){var d=b.getScaleRange();this.visibleScaleRangeSlider=(new q({map:b.map,minScale:d.minScale,maxScale:d.maxScale})).placeAt(this.setVisibilityRangeNode);this.visibleScaleRangeSlider.startup()}this.own(this.visibleScaleRangeSlider.on("scale-range-change",h.hitch(this,function(d){b.setScaleRange(d.minScale,d.maxScale)})));p.set(this.setVisibilityRangeNode,
"top",this._getTransNodePosition().top);isRTL?p.set(this.setVisibilityRangeNode,"left",this._getTransNodePosition().right):p.set(this.setVisibilityRangeNode,"right",this._getTransNodePosition().right);p.set(this.setVisibilityRangeNode,"display","block")},hideSetVisibilityRangeNode:function(){p.set(this.setVisibilityRangeNode,"display","none")},hide:function(){p.set(this.domNode,"display","none")},show:function(){p.set(this.domNode,"display","block")}})})},"esri/dijit/VisibleScaleRangeSlider":function(){define("../kernel ./_EventedWidget ./_Tooltip ./VisibleScaleRangeSlider/_RecommendedScaleRangeBounds ./VisibleScaleRangeSlider/_SlideEvent ./VisibleScaleRangeSlider/ScaleMenu ./VisibleScaleRangeSlider/ScalePreview ./VisibleScaleRangeSlider/ScaleRanges dijit/form/DropDownButton dijit/popup dojo/_base/array dojo/_base/lang dojo/aspect dojo/debounce dojo/Deferred dojo/dom-class dojo/dom-construct dojo/dom-geometry dojo/dom-style dojo/has dojo/on dojo/string dojox/form/HorizontalRangeSlider dojo/i18n!../nls/jsapi".split(" "),
function(n,m,e,h,k,d,f,r,b,g,v,p,q,y,w,t,u,x,a,c,l,z,A,C){m=m.createSubclass([e],{declaredClass:"esri.dijit.VisibleScaleRangeSlider",baseClass:"esriVisibleScaleRangeSlider",css:{currentScaleIndicator:"esriCurrentScaleIndicator",currentScaleIndicatorContainer:"esriCurrentScaleIndicatorContainer",scaleIndicator:"esriScaleIndicator",scaleIndicatorContainer:"esriScaleIndicatorContainer"},disabled:!1,map:null,layer:null,region:"en-US",minScale:0,maxScale:0,intermediateChanges:!1,labels:C.widgets.visibleScaleRangeSlider,
_slider:null,_currentScaleIndicator:null,_scalePreview:null,_maxScaleButton:null,_minScaleButton:null,_mapUpdateHandler:null,_scaleRanges:null,_scheduleScaleRangeChangeEmit:null,_getSliderIndexRange:function(a){a=Math.floor(a);return{min:a,max:a+.99999}},_setDisabledAttr:function(a){this._slider.set("disabled",a);this._maxScaleButton.set("disabled",a);this._minScaleButton.set("disabled",a);this._set("disabled",a)},_setMapAttr:function(a){this._set("map",a);this._mapUpdateHandler&&this._mapUpdateHandler.remove();
this._slider.set("disabled",!0);this._ensureMap().then(this._updateFromMap)},_setConstraintsAttr:function(a){this._set("constraints",a);this._setUpSlider({minScale:a.minScale,maxScale:a.maxScale})},_updateFromMap:function(a){var c=a.getMinScale(),b=a.getMaxScale();this._setUpSlider({minScale:c,maxScale:b});this._updateCurrentScaleIndicator();a=a.on("zoom-end",p.hitch(this,this._updateCurrentScaleIndicator));this.own(a);this._mapUpdateHandler=a},_setUpSlider:function(a){var c=a.maxScale,b=a.minScale;
this._slider.set("disabled",this.get("disabled"));this._scaleRanges.set("scaleRangeBounds",{minScale:b,maxScale:c});a=this._getSliderIndexRange(this._scaleRanges.length-1);this._slider.set("maximum",a.max);this._silentSliderUpdate({maxScale:c,minScale:b})},_ensureMap:function(){return this._untilLoaded(this.map)},_untilLoaded:function(a){var c=new w;return a?a.loaded?c.resolve(a):a.on("load",function(){c.resolve(a)}):c.reject(Error("could not load resource")),c.promise},_updateCurrentScaleIndicator:function(){var c=
this._scaleRanges.clampScale(this.map.getScale()),c=this._mapScaleToSlider(c)/this._slider.maximum;this.isLeftToRight()||(c=1-c);a.set(this._currentScaleIndicator,{left:100*c+"%"})},_setLayerAttr:function(a){this._set("layer",a);this._ensureScaleRangeProvider().then(this._ensureLayer).then(this._updateMinMaxScaleFromLayer)},_ensureLayer:function(){return this._untilLoaded(this.layer)},_updateMinMaxScaleFromLayer:function(a){this.set({minScale:a.minScale,maxScale:a.maxScale})},_mapSliderToScale:function(a){var c=
this._getSliderIndexRange(a),b=this._scaleRanges.findScaleRangeByIndex(a);return this._mapToRange(a,c.min,c.max,b.minScale,b.maxScale)},_mapToRange:function(a,c,b,d,l){return d+(a-c)*(l-d)/(b-c)},_setRegionAttr:function(a){this._set("region",a);this._scalePreview.set("source",r.getScalePreviewSource(a))},_getMinimumAttr:function(){return this._mapSliderToScale(this._slider.minimum)},_getMaximumAttr:function(){return this._mapSliderToScale(this._slider.maximum)},_getActualMaxScaleAttr:function(){return this._scaleRanges.clampMaxScale(this.maxScale)},
_setMaxScaleAttr:function(a){this._set("maxScale",a);this._ensureScaleRangeProvider().then(p.hitch(this,function(){a=this._scaleRanges.clampMaxScale(a);this._set("maxScale",this._layerConstrainedMaxScale(a));this._silentSliderUpdate({maxScale:a});this._scheduleScaleRangeChangeEmit()}))},_silentSliderUpdate:function(a){var c,b,d=a.minScale;a=a.maxScale;var l=this._scaleRanges,g=this._slider;void 0!==d&&(c=this._mapScaleToSlider(l.clampMinScale(d)),g.set("value",c,!1,!1));void 0!==a&&(b=this._mapScaleToSlider(l.clampMaxScale(a)),
g.set("value",b,!1,!0))},_mapScaleToSlider:function(a){var c=this._scaleRanges.scaleToRangeIndex(a),b=this._getSliderIndexRange(c),c=this._scaleRanges.findScaleRangeByIndex(c);return this._mapToRange(a,c.minScale,c.maxScale,b.min,b.max)},_getActualMinScaleAttr:function(){return this._scaleRanges.clampMinScale(this.minScale)},_setMinScaleAttr:function(a){this._set("minScale",a);this._ensureScaleRangeProvider().then(p.hitch(this,function(){a=this._scaleRanges.clampMinScale(a);this._set("minScale",this._layerConstrainedMinScale(a));
this._silentSliderUpdate({minScale:a});this._scheduleScaleRangeChangeEmit()}))},_ensureScaleRangeProvider:function(){if(this.map)return this._ensureMap();var a=new w;return this.constraints&&a.resolve(),a.promise},_emitScaleRangeChange:function(){this.emit("scale-range-change",{minScale:this.minScale,maxScale:this.maxScale})},_layerConstrainedMinScale:function(a){var c,b,d,l=p.getObject("tileInfo.lods",!1,this.layer)||[];return 0<l.length?(c=l[0].scale,b=this._scaleRanges.get("firstRange"),d=.85<
this._mapToRange(a,b.maxScale,b.minScale,0,1),d?c:a>c?c:a):this._scaleRanges.beyondMinScale(a)?0:a},_layerConstrainedMaxScale:function(a){var c,b=p.getObject("tileInfo.lods",!1,this.layer)||[];return 0<b.length?(c=b[b.length-1].scale,a<c?c:a):this._scaleRanges.beyondMaxScale(a)?0:a},constructor:function(){this._scaleRanges=new (r.createSubclass([h]));this._scheduleScaleRangeChangeEmit=y(p.hitch(this,this._emitScaleRangeChange),0);this._ensureMap=p.hitch(this,this._ensureMap);this._ensureScaleRangeProvider=
p.hitch(this,this._ensureScaleRangeProvider);this._ensureLayer=p.hitch(this,this._ensureLayer);this._updateMinMaxScaleFromLayer=p.hitch(this,this._updateMinMaxScaleFromLayer);this._updateFromMap=p.hitch(this,this._updateFromMap)},buildRendering:function(){this.inherited(arguments);this._initSlider();this._initScalePreview();this._initCurrentScaleIndicator();this._initScaleMenus()},_initSlider:function(){var a=new (A.createSubclass([k]))({baseClass:"esriHorizontalSlider",showButtons:!1,intermediateChanges:this.intermediateChanges,
disabled:!0});this._slider=a;a.placeAt(this.domNode);a.startup();this.own(a.on("slide-onmousemove, slidemax-onmousemove",p.hitch(this,function(a){this._updateScalePreview(a.movable.handle)})),a.on("slide-onmovestop, slidemax-onmovestop",p.hitch(this,function(a){t.contains(a.movable.handle,"dijitSliderThumbHover")||this._closeScalePreview()})),a.on("change",p.hitch(this,function(){var a=Math.round(this._mapSliderToScale(this._getSliderMin())),c=Math.round(this._mapSliderToScale(this._getSliderMax()));
this.set({minScale:a,maxScale:c})})),q.after(a,"_setValueAttr",p.hitch(this,this._updateLabelMenus)))},_getSliderMin:function(){return this._slider.get("value")[0]},_getSliderMax:function(){return this._slider.get("value")[1]},_updateLabelMenus:function(){var a=this._maxScaleButton;this._minScaleButton.set("label",this._scaleRanges.getScaleRangeLabel(this._getSliderMin()));a.set("label",this._scaleRanges.getScaleRangeLabel(this._getSliderMax()))},_initScalePreview:function(){var a=new f;a.startup();
g.moveOffScreen(a);v.forEach([this._slider._movable.handle,this._slider._movableMax.handle],function(a){a.onmouseenter=p.hitch(this,this._updateScalePreview,a);a.onmouseleave=p.hitch(this,this._closeScalePreview)},this);this.own(a);this._scalePreview=a},_closeScalePreview:function(){g.close(this._scalePreview)},_updateScalePreview:function(a){if(!this.disabled){var c=this._scalePreview;g.moveOffScreen(c);var b,d,l=this._slider,f=a===l.sliderHandle?this._getSliderMin():this._getSliderMax();b=x.position(a);
d=x.position(c.domNode);var l=x.position(l.sliderBarContainer),e=this.isLeftToRight(),f=this._scaleRanges.getScalePreviewSpriteBackgroundPosition(f);c.set("backgroundPosition",f);b=b.x-l.x;d=.5*d.w;g.open({parent:this,popup:c,around:a,orient:b<d?e?["above","below"]:["above-alt","below-alt"]:b<l.w-d?["above-centered","below-centered"]:e?["above-alt","below-alt"]:["above","below"]})}},_initCurrentScaleIndicator:function(){if(this.map){var a=u.create("div",{className:this.css.scaleIndicatorContainer+
" "+this.css.currentScaleIndicatorContainer},this._slider.sliderBarContainer),c=u.create("div",{className:this.css.scaleIndicator+" "+this.css.currentScaleIndicator},a);this._currentScaleIndicator=c;this.createTooltip(c);a=l(c,"mouseover",p.hitch(this,function(){var a=z.substitute(this.labels.currentScaleTooltip,{scaleLabel:this._scaleRanges.getScaleRangeLabel(this._mapScaleToSlider(this.map.getScale()))});this.findTooltip(c).set("label",a)}));this.own(a)}},_initScaleMenus:function(){var a,c,l=new d,
g=new d;this.own(l.on("scale-selected",p.hitch(this,function(c){a.closeDropDown();this.set("minScale",c.scale)})));this.own(g.on("scale-selected",p.hitch(this,function(a){c.closeDropDown();this.set("maxScale",a.scale)})));a=new b({baseClass:"esriScaleMenuButton esriMinScaleMenuButton",dropDown:l,dropDownPosition:["below","above"]});a.toggleDropDown();a.toggleDropDown();c=new b({baseClass:"esriScaleMenuButton esriMaxScaleMenuButton",dropDown:g,dropDownPosition:["below","above"]});c.toggleDropDown();
c.toggleDropDown();this.own(q.before(a,"openDropDown",p.hitch(this,function(){var c=this._scaleRanges.findScaleRange(this.get("actualMaxScale")).minScale;l.set("options",{label:a.label,scale:{current:this.get("actualMinScale"),map:this._getMapScale(),min:this.get("minimum"),max:c}})})));this.own(q.before(c,"openDropDown",p.hitch(this,function(){var a=this._scaleRanges.findScaleRange(this.get("actualMinScale")).maxScale;g.set("options",{label:c.label,scale:{current:this.get("actualMaxScale"),map:this._getMapScale(),
min:a,max:this.get("maximum")}})})));a.placeAt(this.domNode);c.placeAt(this.domNode);l.startup();g.startup();a.startup();c.startup();this._minScaleButton=a;this._maxScaleButton=c},_getMapScale:function(){return this.map?this.map.getScale():-1},startup:function(){this.inherited(arguments);this.watch("intermediateChanges",function(a,c,b){this._slider.set(a,b)})}});return c("extend-esri")&&p.setObject("dijit.VisibleScaleRangeSlider",m,n),m})},"esri/dijit/_Tooltip":function(){define(["dijit/Tooltip",
"dojo/_base/array","dojo/_base/declare","dojo/_base/lang","dojo/dom"],function(n,m,e,h,k){return e(null,{declaredClass:"esri.dijit._Tooltip",_tooltips:null,constructor:function(){this._tooltips=[]},startup:function(){this.inherited(arguments);this._started||m.forEach(this._tooltips,function(d){d.startup()})},destroy:function(){this.inherited(arguments);m.forEach(this._tooltips,function(d){d.destroy()});this._tooltips=null},createTooltips:function(d){m.forEach(d,function(d){this.createTooltip(d.node,
d.label)},this)},createTooltip:function(d,f){var e,b;(d=this._getConnectId(d))&&(e="object"==typeof f?h.mixin({},f,{connectId:d}):{connectId:d,label:f},b=new n(e),this._started&&b.startup(),this._tooltips.push(b))},_getConnectId:function(d){var f,e;if(d){if(h.isArray(d)){if(f=[],m.forEach(d,function(b){(e=this._getNode(b))&&f.push(e)}),0===f.length)return}else if(!(f=this._getNode(d)))return;return f}},_getNode:function(d){return k.byId(d.domNode||d)},findTooltip:function(d){var f,e,b=this._getNode(d);
if(d){d=this._tooltips;f=d.length;for(var g=0;g<f;g++)if(e=d[g],h.isArray(e.connectId)?-1<m.indexOf(e.connectId,b):e.connectId===b)return e}}})})},"esri/dijit/VisibleScaleRangeSlider/_RecommendedScaleRangeBounds":function(){define(["./recommendedScales","dojo/_base/declare"],function(n,m){return m(null,{declaredClass:"esri.dijit.VisibleScaleRangeSlider._RecommendedScaleRangeBounds",beyondMinScale:function(e){var h=this.get("firstRange"),k=h.minScale,h=n.getRecommendedScale(h.id)||h.maxScale;return e<=
k&&e>h},beyondMaxScale:function(e){var h=this.get("lastRange"),k=h.maxScale;return e<(n.getRecommendedScale(h.id)||h.minScale)&&e>=k}})})},"esri/dijit/VisibleScaleRangeSlider/recommendedScales":function(){define(["dojo/_base/lang"],function(n){var m={_recommendedScales:{world:1E8,continent:5E7,countriesBig:25E6,countriesSmall:12E6,statesProvinces:6E6,stateProvince:3E6,counties:15E5,county:75E4,metropolitanArea:32E4,cities:16E4,city:8E4,town:4E4,neighborhood:2E4,streets:1E4,street:5E3,buildings:2500,
building:1250,smallBuilding:800,rooms:400,room:100},getRecommendedScale:function(e){return m._recommendedScales[e]},all:function(){return n.clone(m._recommendedScales)}};return m})},"esri/dijit/VisibleScaleRangeSlider/_SlideEvent":function(){define(["dojo/_base/array","dojo/_base/declare"],function(n,m){return m(null,{declaredClass:"esri.dijit.VisibleScaleRangeSlider._SlideEvent",_events:["onMouseMove","onFirstMove",{name:"onMoveStop",hookTo:"destroy"}],postCreate:function(){this.inherited(arguments);
this._extendMover(this._movable);this._extendMover(this._movableBar,"rangebar");this._extendMover(this._movableMax,"max")},_extendMover:function(e,h){if(e){var k=e.mover,d={};n.forEach(this._events,function(f){var m,b,g,v,p,q;"object"==typeof f?(b=f.name,m=f.hookTo):b=f;g=k.prototype[b]||function(){};v="slide"+(h||"")+"-"+b.toLowerCase();p=function(){g.apply(this,arguments);this.widget.emit(v,{movable:e})};m&&(q=k.prototype[m],d[m]=function(){q.apply(this,arguments);p.apply(this,arguments)});d[b]=
p});k.extend(d)}}})})},"esri/dijit/VisibleScaleRangeSlider/ScaleMenu":function(){define("../../kernel ../_EventedWidget ../_Tooltip ./recommendedScales ./ScaleRanges dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dojo/_base/declare dojo/_base/array dojo/_base/lang dojo/dom-class dojo/dom-construct dojo/dom-prop dojo/dom-style dojo/has dojo/keys dojo/number dojo/on dojo/query dojo/string dojox/html/entities dojox/lang/functional/object dojo/i18n!../../nls/jsapi dojo/text!./templates/ScaleMenu.html dijit/form/TextBox".split(" "),
function(n,m,e,h,k,d,f,r,b,g,v,p,q,y,w,t,u,x,a,c,l,z,A,C){m=r([m,d,f,e],{declaredClass:"esri.dijit.VisibleScaleRangeSlider.ScaleMenu",templateString:C,baseClass:"esriScaleMenu",labels:A.widgets.visibleScaleRangeSlider,css:{header:"esriHeader",section:"esriSection",content:"esriContent",current:"esriCurrent",input:"esriInput",list:"esriList",item:"esriItem",inline:"esriInline",selectable:"esriSelectable",hidden:"esriHidden"},_elementValueMap:null,_elements:null,_scaleRangeCategories:null,_scaleRanges:null,
_rangeToScaleAndNodeLookup:null,constructor:function(){this._scaleRanges=new k},buildRendering:function(){this.inherited(arguments);this._rangeToScaleAndNodeLookup={map:{scale:null,node:this.dap_mapScaleItem}};var a,d=this.labels,l=d.featuredScaleLabels,g=h.all(),f=this.css.item+" "+this.css.selectable;b.forEach(z.keys(g),function(b){a=l[b];var d=g[b],e=c.substitute(a,{scaleLabel:this._formatScale(d)}),e=p.create("li",{innerHTML:e,className:f},this.dap_recommendedScales);this._rangeToScaleAndNodeLookup[b]=
{scale:d,node:e}},this);var e=p.create("span",{innerHTML:d.setTo,className:this.css.inline}),k=p.create("span",{innerHTML:d.selectOne,className:this.css.inline});q.set(this.dap_scaleListHeader,"innerHTML",c.substitute(d.setToSelectOne,{setTo:e.outerHTML,selectOne:k.outerHTML}))},_formatScale:function(a){return"1:"+u.format(a)},postCreate:function(){this.inherited(arguments);this.own(x(this.domNode,x.selector("."+this.css.item+"."+this.css.selectable,"click"),g.hitch(this,function(a){a=a.target===
this.dap_mapScaleItem?this.options.scale.map:this._parseScale(a.target.innerHTML);this._emitScaleSelected(a)})));this.dap_scaleInput.on("keyDown",g.hitch(this,function(a){a.keyCode===t.ENTER&&this._handleCustomScaleInput()}));this.createTooltip(this.dap_scaleInput,this.labels.customScaleInputTooltip)},_emitScaleSelected:function(a){this.emit("scale-selected",{scale:a})},_handleCustomScaleInput:function(){var a=this._parseScale(this.dap_scaleInput.get("value"));isNaN(a)||this._emitScaleSelected(this._scaleRanges.clampScale(a))},
_parseScale:function(a){a=l.decode(a).replace(/.*\(/,"").replace(/\).*$/,"").replace(/.*1:/,"").replace(/[^0-9.\s]/g,"");return u.parse(a)},_setOptionsAttr:function(a){var b=a.scale,d=this._formatScale(b.current);q.set(this.dap_currentScaleLabel,"innerHTML",a.label);this.dap_scaleInput.set("value",d,!1);d=c.substitute(this.labels.featuredScaleLabels.current,{scaleLabel:this._formatScale(b.map)});this._rangeToScaleAndNodeLookup.map.scale=b.map;q.set(this.dap_mapScaleItem,"innerHTML",d);v.toggle(this.dap_mapScaleItem,
this.css.hidden,-1===b.map);this._scaleRanges.set("scaleRangeBounds",{minScale:b.min,maxScale:b.max});this._hideOutOfScaleRanges();this._set("options",a)},_hideOutOfScaleRanges:function(){var c=a("."+this.css.item+"."+this.css.selectable,this.dap_recommendedScales),d=this._scaleRanges;b.forEach(z.keys(this._rangeToScaleAndNodeLookup),function(a){a=this._rangeToScaleAndNodeLookup[a];v.toggle(a.node,this.css.hidden,!d.contains(a.scale))},this);c=c.every(function(a){return"none"===y.get(a,"display")});
v.toggle(this.dap_recommendedScaleSection,this.css.hidden,c)}});return w("extend-esri")&&g.setObject("dijit.ScaleMenu",m,n),m})},"esri/dijit/VisibleScaleRangeSlider/ScaleRanges":function(){define(["./scalePreviewUtil","dojo/_base/array","dojo/_base/declare","dojo/Stateful","dojo/i18n!../../nls/jsapi"],function(n,m,e,h,k){e=e(h,{_scaleRangeStops:[{id:"room",minScale:100},{id:"rooms",minScale:400},{id:"smallBuilding",minScale:800},{id:"building",minScale:1999},{id:"buildings",minScale:3999},{id:"street",
minScale:7499},{id:"streets",minScale:14999},{id:"neighborhood",minScale:29999},{id:"town",minScale:59999},{id:"city",minScale:119999},{id:"cities",minScale:249999},{id:"metropolitanArea",minScale:499999},{id:"county",minScale:999999},{id:"counties",minScale:1999999},{id:"state",minScale:3999999},{id:"states",minScale:6999999},{id:"country",minScale:14999999},{id:"countries",minScale:34999999},{id:"continent",minScale:99999999},{id:"world",minScale:147914382}],_allRanges:null,_ranges:null,length:0,
constructor:function(){this._allRanges=this.getScaleRanges()},_scaleRangeBoundsSetter:function(d){this._ranges=d=this.getScaleRanges(d.maxScale,d.minScale);this.length=d.length},getScaleRanges:function(d,f){var e,b,g,h=this._scaleRangeStops,k=h.length;d=0<=d?d:0;f=0<f?f:h[k-1].minScale;e=d;b=[];for(var m=0;m<k;m++){var n=Math.min(h[m].minScale,f);g=Math.min(n,f);d<=n&&e<f&&b.push({id:h[m].id,maxScale:Math.max(e,d),minScale:g});e=g+1}return b.reverse(),this._ensureValidBoundaryRanges(b)},_ensureValidBoundaryRanges:function(d){var e=
d[0];e.minScale===e.maxScale&&(d.shift(),d[0].minScale+=1);e=d[d.length-1];return e.minScale===e.maxScale&&(d.pop(),--d[d.length-1].maxScale),d},getScalePreviewSpriteBackgroundPosition:function(d){return d=this._toFullRangeIndex(d),n.getScalePreviewSpriteBackgroundPosition(d)},_toFullRangeIndex:function(d){d=this.findScaleRangeByIndex(Math.floor(d));for(var e=this._allRanges,h=e.length,b=0,g=0;g<h;g++)if(e[g].id===d.id){b=g;break}return b},getScaleRangeLabel:function(d){d=this._ranges[this._clampScaleRangeIndex(d)];
return k.widgets.visibleScaleRangeSlider.scaleRangeLabels[d.id]},findScaleRange:function(d){var e,h,b=this._ranges;if(d>=b[0].maxScale)return b[0];if(d<=b[b.length-1].minScale)return b[b.length-1];for(var g=0;g<b.length;g++)if(h=b[g],d>=h.maxScale&&d<=h.minScale){e=h;break}return e},findScaleRangeByIndex:function(d){return d=this._clampScaleRangeIndex(d),this._ranges[d]},clampScale:function(d){return Math.min(this.get("minScale"),Math.max(this.get("maxScale"),d))},_minScaleGetter:function(){return this.get("firstRange").minScale},
_maxScaleGetter:function(){return this.get("lastRange").maxScale},_firstRangeGetter:function(){return this._ranges[0]},_lastRangeGetter:function(){var d=this._ranges;return d[d.length-1]},clampMinScale:function(d){return 0===d?this.get("minScale"):this.clampScale(d)},clampMaxScale:function(d){return this.clampScale(d)},_clampScaleRangeIndex:function(d){if(0>=d)return 0;var e=this._ranges.length-1;return d>e?e:Math.floor(d)},scaleToRangeIndex:function(d){return m.indexOf(this._ranges,this.findScaleRange(d))},
contains:function(d){for(var e,h=this._ranges,b=!1,g=0;g<h.length;g++)if(e=h[g],d>=e.maxScale&&d<=e.minScale){b=!0;break}return b}});return e.getScalePreviewSource=function(d){return n.getScalePreviewSource(d)},e})},"esri/dijit/VisibleScaleRangeSlider/scalePreviewUtil":function(){define(["dojo/_base/array","require"],function(n,m){var e={_supportedRegions:"ar-iq ar-kw bg-bg cs-cz da-dk da-gl da-gl de-at de-ch de-de de-li el-gr en-ae en-au en-ca en-ca en-eg en-gb en-hk en-id en-ie en-ie en-il en-in en-iq en-ke en-lu en-mo en-my en-nz en-rw en-sg en-us en-us en-vi en-vi en-wo en-za es-ar es-ar es-bo es-bo es-cl es-cl es-co es-co es-cr es-cr es-es es-gt es-gt es-mx es-mx es-ni es-ni es-pe es-pe es-pr es-pr es-sv es-sv es-ve et-ee fi-fi fi-fi fr-ci fr-fr fr-ma fr-mg fr-ml fr-tn is-is is-is it-it ja-jp ja-jp ko-kr lt-lt lv-lv nl-be nl-nl nl-sr nl-sr nn-no nn-no pl-pl pt-br pt-br pt-pt ro-ro ru-ru sk-sk sv-se sv-se th-th zh-cn zh-tw".split(" "),
_defaultRegion:"en-us",_getSupportedRegion:function(h){return h=h?h.toLowerCase():"",-1<n.indexOf(e._supportedRegions,h)?h:e._defaultRegion},getScalePreviewSource:function(h){h="./images/scalePreview/"+e._getSupportedRegion(h)+".jpg";return"url("+m.toUrl(h)+")"},getScalePreviewSpriteBackgroundPosition:function(e){return"-"+e%5*128+"px -"+128*Math.floor(e/5)+"px"}};return e})},"dojox/lang/functional/object":function(){define(["dojo/_base/kernel","dojo/_base/lang","./lambda"],function(n,m,e){var h=
{};m.mixin(e,{keys:function(e){var d=[],f;for(f in e)f in h||d.push(f);return d},values:function(e){var d=[],f;for(f in e)f in h||d.push(e[f]);return d},filterIn:function(k,d,f){f=f||n.global;d=e.lambda(d);var m={},b,g;for(g in k)g in h||(b=k[g],d.call(f,b,g,k)&&(m[g]=b));return m},forIn:function(k,d,f){f=f||n.global;d=e.lambda(d);for(var m in k)m in h||d.call(f,k[m],m,k);return f},mapIn:function(k,d,f){f=f||n.global;d=e.lambda(d);var m={},b;for(b in k)b in h||(m[b]=d.call(f,k[b],b,k));return m}});
return e})},"dojox/lang/functional/lambda":function(){define(["../..","dojo/_base/lang","dojo/_base/array"],function(n,m,e){var h=m.getObject("lang.functional",!0,n),k={},d=1<"ab".split(/a*/).length?String.prototype.split:function(b){var d=this.split.call(this,b);(b=b.exec(this))&&0==b.index&&d.unshift("");return d},f=function(b){var g=[],f=d.call(b,/\s*->\s*/m);if(1<f.length)for(;f.length;)b=f.pop(),g=f.pop().split(/\s*,\s*|\s+/m),f.length&&f.push("(function("+g.join(", ")+"){ return ("+b+"); })");
else if(b.match(/\b_\b/))g=["_"];else{var f=b.match(/^\s*(?:[+*\/%&|\^\.=<>]|!=)/m),h=b.match(/[+\-*\/%&|\^\.=<>!]\s*$/m);if(f||h)f&&(g.push("$1"),b="$1"+b),h&&(g.push("$2"),b+="$2");else{var f=b.replace(/(?:\b[A-Z]|\.[a-zA-Z_$])[a-zA-Z_$\d]*|[a-zA-Z_$][a-zA-Z_$\d]*:|this|true|false|null|undefined|typeof|instanceof|in|delete|new|void|arguments|decodeURI|decodeURIComponent|encodeURI|encodeURIComponent|escape|eval|isFinite|isNaN|parseFloat|parseInt|unescape|dojo|dijit|dojox|window|document|'(?:[^'\\]|\\.)*'|"(?:[^"\\]|\\.)*"/g,
"").match(/([a-z_$][a-z_$\d]*)/gi)||[],k={};e.forEach(f,function(b){k.hasOwnProperty(b)||(g.push(b),k[b]=1)})}}return{args:g,body:b}},r=function(b){return b.length?function(){var d=b.length-1,e=h.lambda(b[d]).apply(this,arguments);for(--d;0<=d;--d)e=h.lambda(b[d]).call(this,e);return e}:function(b){return b}};m.mixin(h,{rawLambda:function(b){return f(b)},buildLambda:function(b){b=f(b);return"function("+b.args.join(",")+"){return ("+b.body+");}"},lambda:function(b){if("function"==typeof b)return b;
if(b instanceof Array)return r(b);if(k.hasOwnProperty(b))return k[b];var d=f(b);return k[b]=new Function(d.args,"return ("+d.body+");")},clearLambdaCache:function(){k={}}});return h})},"esri/dijit/VisibleScaleRangeSlider/ScalePreview":function(){define("../../kernel dijit/_TemplatedMixin dijit/_WidgetBase dojo/_base/declare dojo/_base/lang dojo/dom-style dojo/has dojo/i18n!../../nls/jsapi dojo/text!./templates/ScalePreview.html".split(" "),function(n,m,e,h,k,d,f,r,b){m=h([e,m],{declaredClass:"esri.dijit.VisibleScaleRangeSlider.ScalePreview",
baseClass:"esriScalePreview",templateString:b,labels:r.widgets.visibleScaleRangeSlider,css:{header:"esriHeader",thumbnail:"esriThumbnail"},source:null,_setSourceAttr:function(b){this.source!==b&&(this._set("source",b),d.set(this.dap_scalePreviewThumbnail,"backgroundImage",b))},backgroundPosition:null,_setBackgroundPositionAttr:function(b){this.backgroundPosition!==b&&(this._set("backgroundPosition",b),d.set(this.dap_scalePreviewThumbnail,"backgroundPosition",b))}});return f("extend-esri")&&k.setObject("dijit.ScalePreview",
m,n),m})},"dojox/form/HorizontalRangeSlider":function(){define(["dojo/_base/declare","dojox/form/_RangeSliderMixin","dojo/text!./resources/HorizontalRangeSlider.html","dijit/form/HorizontalSlider"],function(n,m,e,h){return n("dojox.form.HorizontalRangeSlider",[h,m],{templateString:e})})},"dojox/form/_RangeSliderMixin":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/fx dojo/_base/event dojo/_base/sniff dojo/dom-style dojo/dom-geometry dojo/keys dijit dojo/dnd/Mover dojo/dnd/Moveable dijit/form/_FormValueWidget dijit/focus dojo/fx dojox/fx".split(" "),
function(n,m,e,h,k,d,f,r,b,g,v,p,q,y,w){var t=function(a,c){return a-c};g=n("dojox.form._RangeSliderMixin",null,{_setTabIndexAttr:["sliderHandle","sliderHandleMax"],value:[0,100],postMixInProperties:function(){this.inherited(arguments);this.value=e.map(this.value,function(a){return parseInt(a,10)})},postCreate:function(){this.inherited(arguments);this.value.sort(t);var a=this,c=n(u,{constructor:function(){this.widget=a}});this._movableMax=new p(this.sliderHandleMax,{mover:c});this.sliderHandle.setAttribute("aria-valuemin",
this.minimum);this.sliderHandle.setAttribute("aria-valuemax",this.maximum);this.sliderHandleMax.setAttribute("aria-valuemin",this.minimum);this.sliderHandleMax.setAttribute("aria-valuemax",this.maximum);c=n(x,{constructor:function(){this.widget=a}});this._movableBar=new p(this.progressBar,{mover:c});this.focusNode.removeAttribute("aria-valuemin");this.focusNode.removeAttribute("aria-valuemax");this.focusNode.removeAttribute("aria-valuenow")},destroy:function(){this.inherited(arguments);this._movableMax.destroy();
this._movableBar.destroy()},_onKeyPress:function(a){if(!(this.disabled||this.readOnly||a.altKey||a.ctrlKey)){var c=a.target===this.sliderHandleMax,d=a.target===this.progressBar,e=m.delegate(b,this.isLeftToRight()?{PREV_ARROW:b.LEFT_ARROW,NEXT_ARROW:b.RIGHT_ARROW}:{PREV_ARROW:b.RIGHT_ARROW,NEXT_ARROW:b.LEFT_ARROW}),g=0,f=!1;switch(a.keyCode){case e.HOME:this._setValueAttr(this.minimum,!0,c);k.stop(a);return;case e.END:this._setValueAttr(this.maximum,!0,c);k.stop(a);return;case e.PREV_ARROW:case e.DOWN_ARROW:f=
!0;case e.NEXT_ARROW:case e.UP_ARROW:g=1;break;case e.PAGE_DOWN:f=!0;case e.PAGE_UP:g=this.pageIncrement;break;default:this.inherited(arguments);return}f&&(g=-g);g&&(d?this._bumpValue([{change:g,useMaxValue:!1},{change:g,useMaxValue:!0}]):this._bumpValue(g,c),k.stop(a))}},_onHandleClickMax:function(a){this.disabled||this.readOnly||(d("ie")||y.focus(this.sliderHandleMax),k.stop(a))},_onClkIncBumper:function(){this._setValueAttr(!1===this._descending?this.minimum:this.maximum,!0,!0)},_bumpValue:function(a,
c){a=m.isArray(a)?[this._getBumpValue(a[0].change,a[0].useMaxValue),this._getBumpValue(a[1].change,a[1].useMaxValue)]:this._getBumpValue(a,c);this._setValueAttr(a,!0,c)},_getBumpValue:function(a,c){var b=c?1:0;c=f.getComputedStyle(this.sliderBarContainer);var d=r.getContentBox(this.sliderBarContainer,c);c=this.discreteValues;b=this.value[b];if(1>=c||Infinity==c)c=d[this._pixelCount];c--;a=this.maximum>this.minimum?(b-this.minimum)*c/(this.maximum-this.minimum)+a:0;0>a&&(a=0);a>c&&(a=c);return a*(this.maximum-
this.minimum)/c+this.minimum},_onBarClick:function(a){this.disabled||this.readOnly||(d("ie")||y.focus(this.progressBar),k.stop(a))},_onRemainingBarClick:function(a){if(!this.disabled&&!this.readOnly){d("ie")||y.focus(this.progressBar);var c=r.position(this.sliderBarContainer,!0),b=r.position(this.progressBar,!0),e=a[this._mousePixelCoord],g=b[this._startingPixelCoord],b=g+b[this._pixelCount],g=this._isReversed()?e<=g:e>=b,e=this._isReversed()?c[this._pixelCount]-e+c[this._startingPixelCoord]:e-c[this._startingPixelCoord];
this._setPixelValue(e,c[this._pixelCount],!0,g);k.stop(a)}},_setPixelValue:function(a,c,b,d){this.disabled||this.readOnly||(a=this._getValueByPixelValue(a,c),this._setValueAttr(a,b,d))},_getValueByPixelValue:function(a,c){var b=this.discreteValues;if(1>=b||Infinity==b)b=c;b--;return(this.maximum-this.minimum)*Math.round((0>a?0:c<a?c:a)/(c/b))/b+this.minimum},_setValueAttr:function(a,c,b){var d=m.clone(this.value);m.isArray(a)?d=a:d[b?1:0]=a;this._lastValueReported="";this.valueNode.value=a=d;d.sort(t);
this.sliderHandle.setAttribute("aria-valuenow",d[0]);this.sliderHandleMax.setAttribute("aria-valuenow",d[1]);q.prototype._setValueAttr.apply(this,arguments);this._printSliderBar(c,b)},_printSliderBar:function(a,c){c=this.maximum>this.minimum?(this.value[0]-this.minimum)/(this.maximum-this.minimum):0;var b=this.maximum>this.minimum?(this.value[1]-this.minimum)/(this.maximum-this.minimum):0,d=c;c>b&&(c=b,b=d);var e=this._isReversed()?100*(1-c):100*c,g=this._isReversed()?100*(1-b):100*b,f=this._isReversed()?
100*(1-b):100*c;if(a&&0<this.slideDuration&&this.progressBar.style[this._progressPixelSize]){if(parseFloat(this.progressBar.style[this._handleOffsetCoord]),a=this.slideDuration/10,0!==a){0>a&&(a=0-a);var k={},m={},d={};k[this._handleOffsetCoord]={start:this.sliderHandle.parentNode.style[this._handleOffsetCoord],end:e,units:"%"};m[this._handleOffsetCoord]={start:this.sliderHandleMax.parentNode.style[this._handleOffsetCoord],end:g,units:"%"};d[this._handleOffsetCoord]={start:this.progressBar.style[this._handleOffsetCoord],
end:f,units:"%"};d[this._progressPixelSize]={start:this.progressBar.style[this._progressPixelSize],end:100*(b-c),units:"%"};c=h.animateProperty({node:this.sliderHandle.parentNode,duration:a,properties:k});b=h.animateProperty({node:this.sliderHandleMax.parentNode,duration:a,properties:m});a=h.animateProperty({node:this.progressBar,duration:a,properties:d});w.combine([c,b,a]).play()}}else this.sliderHandle.parentNode.style[this._handleOffsetCoord]=e+"%",this.sliderHandleMax.parentNode.style[this._handleOffsetCoord]=
g+"%",this.progressBar.style[this._handleOffsetCoord]=f+"%",this.progressBar.style[this._progressPixelSize]=100*(b-c)+"%"}});var u=n("dijit.form._SliderMoverMax",v,{onMouseMove:function(a){var c=this.widget,b=c._abspos;b||(b=c._abspos=r.position(c.sliderBarContainer,!0),c._setPixelValue_=m.hitch(c,"_setPixelValue"),c._isReversed_=c._isReversed());a=a[c._mousePixelCoord]-b[c._startingPixelCoord];c._setPixelValue_(c._isReversed_?b[c._pixelCount]-a:a,b[c._pixelCount],!1,!0)},destroy:function(a){v.prototype.destroy.apply(this,
arguments);var c=this.widget;c._abspos=null;c._setValueAttr(c.value,!0)}}),x=n("dijit.form._SliderBarMover",v,{onMouseMove:function(a){var c=this.widget;if(!c.disabled&&!c.readOnly){var b=c._abspos,d=c._bar,e=c._mouseOffset;b||(b=c._abspos=r.position(c.sliderBarContainer,!0),c._setPixelValue_=m.hitch(c,"_setPixelValue"),c._getValueByPixelValue_=m.hitch(c,"_getValueByPixelValue"),c._isReversed_=c._isReversed());d||(d=c._bar=r.position(c.progressBar,!0));e||(e=c._mouseOffset=a[c._mousePixelCoord]-d[c._startingPixelCoord]);
a=a[c._mousePixelCoord]-b[c._startingPixelCoord]-e;pixelValues=[a,a+d[c._pixelCount]];pixelValues.sort(t);0>=pixelValues[0]&&(pixelValues[0]=0,pixelValues[1]=d[c._pixelCount]);pixelValues[1]>=b[c._pixelCount]&&(pixelValues[1]=b[c._pixelCount],pixelValues[0]=b[c._pixelCount]-d[c._pixelCount]);b=[c._getValueByPixelValue(c._isReversed_?b[c._pixelCount]-pixelValues[0]:pixelValues[0],b[c._pixelCount]),c._getValueByPixelValue(c._isReversed_?b[c._pixelCount]-pixelValues[1]:pixelValues[1],b[c._pixelCount])];
c._setValueAttr(b,!1,!1)}},destroy:function(){v.prototype.destroy.apply(this,arguments);var a=this.widget;a._abspos=null;a._bar=null;a._mouseOffset=null;a._setValueAttr(a.value,!0)}});return g})},"dojox/fx":function(){define(["./fx/_base"],function(n){return n})},"dojox/fx/_base":function(){define("dojo/_base/array dojo/_base/lang dojo/_base/fx dojo/fx dojo/dom dojo/dom-style dojo/dom-geometry dojo/_base/connect dojo/_base/html".split(" "),function(n,m,e,h,k,d,f,r,b){n=m.getObject("dojox.fx",!0);
m.mixin(n,{anim:e.anim,animateProperty:e.animateProperty,fadeTo:e._fade,fadeIn:e.fadeIn,fadeOut:e.fadeOut,combine:h.combine,chain:h.chain,slideTo:h.slideTo,wipeIn:h.wipeIn,wipeOut:h.wipeOut});n.sizeTo=function(b){var g=b.node=k.byId(b.node),f=b.method||"chain";b.duration||(b.duration=500);"chain"==f&&(b.duration=Math.floor(b.duration/2));var q,n,w,t,u,x=null,a=function(a){return function(){var c=d.getComputedStyle(a),e=c.position,g=c.width,f=c.height;q="absolute"==e?a.offsetTop:parseInt(c.top)||0;
w="absolute"==e?a.offsetLeft:parseInt(c.left)||0;u="auto"==g?0:parseInt(g);x="auto"==f?0:parseInt(f);t=w-Math.floor((b.width-u)/2);n=q-Math.floor((b.height-x)/2);"absolute"!=e&&"relative"!=e&&(c=d.coords(a,!0),q=c.y,w=c.x,a.style.position="absolute",a.style.top=q+"px",a.style.left=w+"px")}}(g),g=e.animateProperty(m.mixin({properties:{height:function(){a();return{end:b.height||0,start:x}},top:function(){return{start:q,end:n}}}},b)),f=e.animateProperty(m.mixin({properties:{width:function(){return{start:u,
end:b.width||0}},left:function(){return{start:w,end:t}}}},b));return h["combine"==b.method?"combine":"chain"]([g,f])};n.slideBy=function(b){var g,h,q=function(b){return function(){var e=d.getComputedStyle(b),k=e.position;g="absolute"==k?b.offsetTop:parseInt(e.top)||0;h="absolute"==k?b.offsetLeft:parseInt(e.left)||0;"absolute"!=k&&"relative"!=k&&(e=f.coords(b,!0),g=e.y,h=e.x,b.style.position="absolute",b.style.top=g+"px",b.style.left=h+"px")}}(b.node=k.byId(b.node));q();b=e.animateProperty(m.mixin({properties:{top:g+
(b.top||0),left:h+(b.left||0)}},b));r.connect(b,"beforeBegin",b,q);return b};n.crossFade=function(d){var g=d.nodes[0]=k.byId(d.nodes[0]),f=b.style(g,"opacity"),q=d.nodes[1]=k.byId(d.nodes[1]);b.style(q,"opacity");return h.combine([e[0==f?"fadeIn":"fadeOut"](m.mixin({node:g},d)),e[0==f?"fadeOut":"fadeIn"](m.mixin({node:q},d))])};n.highlight=function(d){var f=d.node=k.byId(d.node);d.duration=d.duration||400;var g=d.color||"#ffff99",h=b.style(f,"backgroundColor");"rgba(0, 0, 0, 0)"==h&&(h="transparent");
d=e.animateProperty(m.mixin({properties:{backgroundColor:{start:g,end:h}}},d));"transparent"==h&&r.connect(d,"onEnd",d,function(){f.style.backgroundColor=h});return d};n.wipeTo=function(d){d.node=k.byId(d.node);var f=d.node,g=f.style,h=d.width?"width":"height",n={};n[h]={start:function(){g.overflow="hidden";if("hidden"==g.visibility||"none"==g.display)return g[h]="1px",g.display="",g.visibility="",1;var d=b.style(f,h);return Math.max(d,1)},end:d[h]};return e.animateProperty(m.mixin({properties:n},
d))};return n})},"widgets/LayerList/NlsStrings":function(){define([],function(){return{value:null}})},"widgets/LayerList/PopupMenuInfo":function(){define("dojo/_base/declare dojo/_base/array dojo/_base/lang dojo/Deferred dojo/promise/all jimu/portalUrlUtils jimu/WidgetManager jimu/PanelManager esri/lang esri/graphicsUtils ./NlsStrings dijit/Dialog".split(" "),function(n,m,e,h,k,d,f,r,b,g,v,p){var q={},y=function(a){a=document.getElementById(window.chkSelectableLayer+a);null!=a&&1==a.checked&&(a.checked=
!1)},w=function(a,c,b,d){if(0<c.length){var e=new XMLHttpRequest;e.overrideMimeType("application/json");e.open("GET",c.pop(),!0);e.onreadystatechange=function(){if(4==e.readyState&&"200"==e.status)if(a(e.responseText,b))switch(d){case "eaDescription":if("eaDescription"in q){var f=new p({title:layer.name,style:"width: 300px"});f.show();f.set("content",q.eaDescription)}else alert("Map description is not available for this layer");break;case "eaMetadata":"eaMetadata"in q?"eaScale"in q&&"NATIONAL"==q.eaScale?
(metaDataID=window.nationalMetadataDic[q.eaMetadata],window.open(window.matadata+"?uuid\x3d%7B"+metaDataID+"%7D")):window.communitySelected==window.strAllCommunity?window.open(window.communityMetadataDic[q.eaMetadata][window.communitySelected]):(metaDataID=window.communityMetadataDic[q.eaMetadata][window.communitySelected],window.open(window.matadata+"?uuid\x3d%7B"+metaDataID+"%7D")):alert("Metadata is not available for this layer");break;case "eaDfsLink":"eaDfsLink"in q?window.open(window.dataFactSheet+
q.eaDfsLink):alert("Data fact sheet is not available for this layer")}else{switch(d){case "eaDescription":0!=c.length||"eaDescription"in q||alert("Map description is not available for this layer");break;case "eaMetadata":0!=c.length||"eaMetadata"in q||alert("Metadata is not available for this layer");break;case "eaDfsLink":0!=c.length||"eaDescription"in q||alert("Data fact sheet is not available for this layer")}w(t,c,b,d)}};e.send(null)}},t=function(a,b){var c="",d=!1;a=JSON.parse(a).layers.layer;
index=0;for(len=a.length;index<len;++index)if(layer=a[index],layer.hasOwnProperty("eaID")&&(0<=b.indexOf("http")&&layer.hasOwnProperty("eaLyrNum")&&(c=layer.url+"/"+layer.eaLyrNum.toString()),null!=c&&""!=c&&"/"==c.substr(c.length-1)&&(c=c.substr(0,c.length-2)),b===layer.eaID.toString()||b==c)){d=!0;layer.hasOwnProperty("eaDescription")&&(q.eaDescription=layer.eaDescription);layer.hasOwnProperty("eaMetadata")&&(q.eaMetadata=layer.eaMetadata);layer.hasOwnProperty("eaDfsLink")&&(q.eaDfsLink=layer.eaDfsLink);
layer.hasOwnProperty("eaScale")&&(q.eaScale=layer.eaScale);break}return d},u=function(a,c,b){if("eaDescription"==b){if("added_ClimateChange"==a){a=new p({title:"Change analysis layer",style:"width: 300px"});a.show();a.set("content","This map depicts the change in the selected climate variable (max temp, min temp, precipitation, potential evapotranspiration) between two time periods based on the selected RCP scenario (2.6, 4.0, 6.5 8.5) and the selected season.");return}if(a==window.timeSeriesLayerId){a=
new p({title:"Time series data",style:"width: 300px"});a.show();a.set("content","This map depicts historical or forecasted time series data for the selected climate variable (max temp, min temp, precipitation, potential evapotranspiration) based on the selected RCP scenario (2.6, 4.0, 6.5 8.5) and the selected season.");return}}q={};var d=a.replace(window.layerIdPrefix,"").replace(window.layerIdPBSPrefix,"").replace(window.layerIdBndrPrefix,""),e=[];0<=a.indexOf(window.layerIdPrefix)?(e.push("widgets/SimpleSearchFilter/config_layer.json"),
w(t,e,d,b)):(e.push("widgets/SimpleSearchFilter/config_layer.json"),w(t,e,c,b))},x=n([],{_candidateMenuItems:null,_displayItems:null,_layerInfo:null,_layerType:null,_appConfig:null,constructor:function(a,b,d,e){this.nls=v.value;this._layerInfo=a;this._layerType=d;q={};this.layerListWidget=e;this._initCandidateMenuItems();this._initDisplayItems(b)},_getATagLabel:function(){var a,b;this._layerInfo.isItemLayer&&this._layerInfo.isItemLayer();a=this._layerInfo.getUrl();(b=this._layerInfo.isItemLayer())?
(a=this._getItemDetailsPageUrl(b)||a,b=this.nls.itemShowItemDetails):!a||"CSVLayer"!==this._layerType&&"KMLLayer"!==this._layerType?(a=a&&"WMSLayer"===this._layerType?a+(-1<a.indexOf("?")?"\x26":"?")+"SERVICE\x3dWMS\x26REQUEST\x3dGetCapabilities":a&&"WFSLayer"===this._layerType?a+(-1<a.indexOf("?")?"\x26":"?")+"SERVICE\x3dWFS\x26REQUEST\x3dGetCapabilities":a?a:"",b=this.nls.itemDesc):b=this.nls.itemDownload;this._ATagLabelUrl=a;return'\x3ca class\x3d"menu-item-description" target\x3d"_blank" href\x3d"'+
a+'"\x3e'+b+"\x3c/a\x3e"},_getItemDetailsPageUrl:function(a){var b="";return b=d.getItemDetailsPageUrl(a.portalUrl,a.itemId)},_initCandidateMenuItems:function(){this._candidateMenuItems=[{key:"separator",label:""},{key:"empty",label:this.nls.empty},{key:"mapDescription",label:this.nls.itemMapDescription},{key:"dataFactSheet",label:this.nls.itemDataFactSheet},{key:"metadataDownload",label:this.nls.itemMetadataDownload},{key:"changeSymbology",label:this.nls.itemChangeSymbology},{key:"remove",label:this.nls.itemRemove},
{key:"movetotop",label:this.nls.itemMovetoTop},{key:"transparency",label:this.nls.itemTransparency},{key:"table",label:this.nls.itemToAttributeTable},{key:"controlPopup",label:this.nls.removePopup},{key:"controlLabels",label:this.nls.showLabels},{key:"url",label:this._getATagLabel()}]},_initDisplayItems:function(a){this._displayItems=[];m.forEach(a,function(a){m.forEach(this._candidateMenuItems,function(b){a.key===b.key&&(this._displayItems.push(e.clone(b)),a.onClick&&(this._displayItem.onClick=a.onClick))},
this)},this)},_isSupportedByAT:function(){return!0},_isSupportedByAT_bk:function(a,b){a=a.config;a=0===a.layerInfos.length?!0:m.some(a.layerInfos,function(a){if(a.id===this._layerInfo.id&&a.show)return!0},this);return b.isSupportedLayer&&b.isSupportQuery&&!b.otherReasonCanNotSupport&&a?!0:!1},getDeniedItems:function(){var a=new h,b=[];this.layerListWidget.layerListView.isFirstDisplayedLayerInfo(this._layerInfo)&&b.push({key:"moveup",denyType:"disable"});this.layerListWidget.layerListView.isLastDisplayedLayerInfo(this._layerInfo)&&
b.push({key:"movedown",denyType:"disable"});this._ATagLabelUrl||b.push({key:"url",denyType:"disable"});this._layerInfo.canShowLabel()||b.push({key:"controlLabels",denyType:"hidden"});this._layerInfo.originOperLayer.featureCollection?b.push({key:"setVisibilityRange",denyType:"hidden"}):this._layerInfo.isRootLayer()||"esri.layers.ArcGISTiledMapServiceLayer"!==this._layerInfo.getRootLayerInfo().layerObject.declaredClass?this._layerInfo.isRootLayer()||"esri.layers.ArcGISDynamicMapServiceLayer"!==this._layerInfo.getRootLayerInfo().layerObject.declaredClass||
this._layerInfo.getRootLayerInfo().layerObject.supportsDynamicLayers?this._layerInfo.isRootLayer()&&"esri.layers.ArcGISImageServiceLayer"===this._layerInfo.getRootLayerInfo().layerObject.declaredClass&&b.push({key:"changeSymbology",denyType:"hidden"}):b.push({key:"setVisibilityRange",denyType:"disable"}):b.push({key:"setVisibilityRange",denyType:"hidden"});var d=this._layerInfo.loadInfoTemplate(),f=this._layerInfo.getSupportTableInfo();k({infoTemplate:d,supportTableInfo:f}).then(e.hitch(this,function(c){c.infoTemplate||
b.push({key:"controlPopup",denyType:"disable"});c=c.supportTableInfo;var d=this.layerListWidget.appConfig.getConfigElementsByName("AttributeTable")[0];d&&d.visible?this._isSupportedByAT(d,c)||(this._layerInfo.parentLayerInfo&&this._layerInfo.parentLayerInfo.isMapNotesLayerInfo()?b.push({key:"table",denyType:"hidden"}):b.push({key:"table",denyType:"disable"})):b.push({key:"table",denyType:"hidden"});a.resolve(b)}),function(){a.resolve(b)});return a},getDisplayItems:function(){return this._displayItems},
onPopupMenuClick:function(a){var b={closeMenu:!0};switch(a.itemKey){case "zoomto":this._onItemZoomToClick(a);case "mapDescription":this._onItemMapDescriptionClick(a);break;case "dataFactSheet":this._onItemDataFactSheetClick(a);break;case "metadataDownload":this._onItemMetadataDownloadClick(a);break;case "changeSymbology":this._onItemChangeSymbologyClick(a);break;case "remove":this._onItemRemoveClick(a);break;case "movetotop":this._onMoveToTopClick(a);break;case "moveup":this._onMoveUpItemClick(a);
break;case "movedown":this._onMoveDownItemClick(a);break;case "table":this._onTableItemClick(a);break;case "transparencyChanged":this._onTransparencyChanged(a);b.closeMenu=!1;break;case "controlPopup":this._onControlPopup();break;case "controlLabels":this._onControlLabels()}return b},_onItemZoomToClick:function(a){this._layerInfo.zoomTo()},_onMoveToTopClick:function(a){lyr=this._layerInfo.map.getLayer(this._layerInfo.id);""!=window.topLayerID&&(a=document.getElementById(window.layerTitlePrefix+window.topLayerID),
null!=a&&(a.style["font-weight"]="400"));window.topLayerID=this._layerInfo.id;document.getElementById(window.layerTitlePrefix+this._layerInfo.id).style["font-weight"]="bold";isImageLayer=isTiledLayer=isDynamicLayer=!1;if(lyr){for(ii in window.dynamicLayerNumber)if(eachDynamicLyrId=window.layerIdPrefix+window.dynamicLayerNumber[ii],eachDynamicLyrId==this._layerInfo.id&&(isDynamicLayer=!0),eachDynamicLyr=this._layerInfo.map.getLayer(eachDynamicLyrId))dynamicLayerElem=document.getElementById("map_"+
eachDynamicLyrId),null!=dynamicLayerElem&&(dynamicLayerElem.style.zIndex="0");for(ii in window.tiledLayerNumber)if(eachTiledLyrId=window.layerIdPrefix+window.tiledLayerNumber[ii],eachTiledLyrId==this._layerInfo.id&&(isTiledLayer=!0),eachTiledLyr=this._layerInfo.map.getLayer(eachTiledLyrId))tiledLayerElem=document.getElementById("map_"+eachTiledLyrId),null!=tiledLayerElem&&(tiledLayerElem.style.zIndex="0");for(ii in window.imageLayerNumber)if(eachImageLyrId=window.layerIdPrefix+window.imageLayerNumber[ii],
eachImageLyrId==this._layerInfo.id&&(isImageLayer=!0),eachImageLyr=this._layerInfo.map.getLayer(eachImageLyrId))imageLayerElem=document.getElementById("map_"+eachImageLyrId),null!=imageLayerElem&&(imageLayerElem.style.zIndex="0");1==isDynamicLayer||1==isTiledLayer||1==isImageLayer?document.getElementById("map_"+this._layerInfo.id).style.zIndex="1":this._layerInfo.map.reorderLayer(lyr,300)}(lyrTiled=this._layerInfo.map.getLayer(window.layerIdTiledPrefix+this._layerInfo.id.replace(window.layerIdPrefix,
"")))&&this._layerInfo.map.reorderLayer(lyrTiled,300)},_isValidExtent:function(a){var c=!1;b.isDefined(a)&&b.isDefined(a.xmin)&&isFinite(a.xmin)&&b.isDefined(a.ymin)&&isFinite(a.ymin)&&b.isDefined(a.xmax)&&isFinite(a.xmax)&&b.isDefined(a.ymax)&&isFinite(a.ymax)&&(c=!0);return c},_onMoveUpItemClick:function(a){this._layerInfo.isFirst||a.layerListView.moveUpLayer(this._layerInfo)},_onMoveDownItemClick:function(a){this._layerInfo.isLast||a.layerListView.moveDownLayer(this._layerInfo)},_onTableItemClick:function(a){this._layerInfo.getSupportTableInfo().then(e.hitch(this,
function(b){var c=this.layerListWidget.appConfig.getConfigElementsByName("AttributeTable")[0];this._isSupportedByAT(c,b)&&(b=f.getInstance(),b.triggerWidgetOpen(c.id).then(e.hitch(this,function(){a.layerListWidget.publishData({target:"AttributeTable",layer:this._layerInfo})})))}))},_onItemMapDescriptionClick:function(a){layerId=this._layerInfo.id;u(layerId,this._layerInfo.layerObject.url,"eaDescription")},_onItemDataFactSheetClick:function(a){layerId=this._layerInfo.id;u(layerId,this._layerInfo.layerObject.url,
"eaDfsLink")},_onItemChangeSymbologyClick:function(a){layerId=this._layerInfo.id;-1<layerId.indexOf(window.layerIdPrefix)&&(lyrTiled=this._layerInfo.map.getLayer(layerId.replace(window.layerIdPrefix,window.layerIdTiledPrefix)))&&lyrTiled.setVisibility(!1);-1<layerId.indexOf(window.layerIdPBSPrefix)&&(lyrTiledPBS=this._layerInfo.map.getLayer(layerId.replace(window.layerIdPBSPrefix,window.layerIdTiledPrefix)))&&lyrTiledPBS.setVisibility(!1);this.layerListWidget.publishData({message:layerId},!0);a=this.layerListWidget.appConfig.getConfigElementsByName("DynamicSymbology");
var b=r.getInstance();a[0].visible&&b.closePanel(a[0].id+"_panel");b.showPanel(a[0]);console.log("Open Dynamic Symbology")},_onItemMetadataDownloadClick:function(a){layerId=this._layerInfo.id;u(layerId,this._layerInfo.layerObject.url,"eaMetadata")},_onItemRemoveClick:function(a){layerId=this._layerInfo.id;if(lyr=this._layerInfo.map.getLayer(layerId))this._layerInfo.map.removeLayer(lyr),y(layerId.replace(window.layerIdPrefix,"")),y(layerId.replace(window.layerIdBndrPrefix,"")),y(layerId.replace(window.layerIdPBSPrefix,
""));(lyrTiled=this._layerInfo.map.getLayer(layerId.replace(window.layerIdPrefix,window.layerIdTiledPrefix)))&&this._layerInfo.map.removeLayer(lyrTiled)},_onTransparencyChanged:function(a){this._layerInfo.setOpacity(1-a.extraData.newTransValue);layerId=this._layerInfo.id;(lyrTiled=this._layerInfo.map.getLayer(layerId.replace(window.layerIdPrefix,window.layerIdTiledPrefix)))&&lyrTiled.setOpacity(1-a.extraData.newTransValue)},_onControlPopup:function(a){this._layerInfo.controlPopupInfo.enablePopup?
this._layerInfo.disablePopup():this._layerInfo.enablePopup();this._layerInfo.map.infoWindow.hide()},_onControlLabels:function(a){this._layerInfo.canShowLabel()&&(this._layerInfo.isShowLabels()?this._layerInfo.hideLabels():this._layerInfo.showLabels())}});x.create=function(a,b){var c=new h,d=a.isRootLayer(),f={RootLayer:[{key:"zoomto"},{key:"transparency"},{key:"setVisibilityRange"},{key:"movetotop"},{key:"remove"},{key:"separator"},{key:"mapDescription"},{key:"dataFactSheet"},{key:"url"},{key:"metadataDownload"}],
RootLayerAndNonFeatureLayer:[{key:"transparency"},{key:"movetotop"},{key:"remove"},{key:"separator"},{key:"mapDescription"},{key:"dataFactSheet"},{key:"url"},{key:"metadataDownload"},{key:"separator"},{key:"table"}],RootLayerAndFeatureLayer:[{key:"zoomto"},{key:"transparency"},{key:"setVisibilityRange"},{key:"movetotop"},{key:"changeSymbology"},{key:"remove"},{key:"separator"},{key:"mapDescription"},{key:"dataFactSheet"},{key:"url"},{key:"metadataDownload"},{key:"separator"},{key:"controlLabels"},
{key:"separator"},{key:"table"}],FeatureLayer:[{key:"setVisibilityRange"},{key:"separator"},{key:"controlPopup"},{key:"separator"},{key:"table"},{key:"separator"},{key:"url"}],SublayerOfDynamicMapserviceLayer:[{key:"setVisibilityRange"},{key:"separator"},{key:"url"}],GroupLayer:[{key:"setVisibilityRange"},{key:"separator"},{key:"url"}],Table:[{key:"table"},{key:"separator"},{key:"url"}],BasemapLayer:[{key:"zoomto"},{key:"transparency"},{key:"separator"},{key:"url"}],"default":[{key:"url",onClick:null}]};
a.getLayerType().then(e.hitch(this,function(e){var g="",g=a.isBasemap()&&a.isRootLayer()?"BasemapLayer":a.isBasemap()?"default":!d||"FeatureLayer"!==e&&"CSVLayer"!==e&&"ArcGISImageServiceLayer"!==e&&"StreamLayer"!==e&&"ArcGISImageServiceVectorLayer"!==e?d?"RootLayer":"FeatureLayer"===e||"CSVLayer"===e?"FeatureLayer":a.isLeaf()&&a.getRootLayerInfo()&&a.getRootLayerInfo().layerObject&&"esri.layers.ArcGISDynamicMapServiceLayer"===a.getRootLayerInfo().layerObject.declaredClass?"SublayerOfDynamicMapserviceLayer":
"GroupLayer"===e?"GroupLayer":"Table"===e?"Table":"default":"RootLayerAndFeatureLayer";c.resolve(new x(a,f[g],e,b))}),e.hitch(this,function(){c.resolve(new x(a,[{key:"empty"}]))}));return c};return x})},"widgets/LayerList/LayerFilter":function(){define("dijit/_WidgetBase dojo/_base/declare dojo/_base/lang dijit/_TemplatedMixin dojo/text!./LayerFilter.html dojo/dom dojo/dom-class jimu/dijit/Search".split(" "),function(n,m,e,h,k,d,f,r){return m([n,h],{templateString:k,baseClass:"layer-filter",layerFilterInput:null,
isValid:!1,layerListWidget:null,layerInfoIsValidStatus:null,layerInfoIsExpandStatus:null,postMixInProperties:function(){this.inherited(arguments);this.nls=e.mixin(e.clone(this.layerListWidget.nls),window.jimuNls.common)},constructor:function(){this.layerInfoIsValidStatus={};this.layerInfoIsExpandStatus={}},startup:function(){this.layerFilterInput=(new r({placeholder:this.nls.typeAKeywork,onSearch:e.hitch(this,this._onFilter),searchWhenInput:!0})).placeAt(this.searchInputNode);d.setSelectable(this.cancelButton,
!1)},_updateLayerInfoStatus:function(b){this.layerInfoIsValidStatus={};this.layerInfoIsExpandStatus={};this.layerListWidget.operLayerInfos.traversalAll(e.hitch(this,function(d){if(b){var e;if(0<=d.title.toLowerCase().indexOf(b.toLowerCase()))for(e=d;e;)this.layerInfoIsValidStatus[e.id]=!0,(e=e.parentLayerInfo)&&(this.layerInfoIsExpandStatus[e.id]=!0);else for(e=d.parentLayerInfo;e;){if(0<=e.title.toLowerCase().indexOf(b.toLowerCase())){this.layerInfoIsValidStatus[d.id]=!0;break}e=e.parentLayerInfo}}else this.layerInfoIsValidStatus[d.id]=
!0}))},isValidLayerInfo:function(b){return!this.isValid||this.layerInfoIsValidStatus[b.id]},isExpanded:function(b){return this.isValid&&this.layerInfoIsExpandStatus[b.id]},cancelFilter:function(){this.isValid=!1;this.layerFilterInput.inputSearch.value&&(this.layerFilterInput.inputSearch.value="",this.layerListWidget._refresh());f.remove(this.searchButton,"invalid");f.add(this.searchInputNode,"invalid");f.add(this.cancelButton,"invalid")},_onFilter:function(b){b?f.remove(this.clearInputButton,"disable"):
f.add(this.clearInputButton,"disable");this._updateLayerInfoStatus(b);this.layerListWidget._refresh()},_onSearchBtnClick:function(){this.isValid=!0;f.add(this.searchButton,"invalid");f.remove(this.searchInputNode,"invalid");f.remove(this.cancelButton,"invalid");this.layerFilterInput.inputSearch.focus()},_onCancelBtnClick:function(){this.cancelFilter()},_onClearInputButton:function(){this.layerFilterInput.inputSearch.value&&(f.add(this.clearInputButton,"disable"),this.layerFilterInput.inputSearch.focus(),
this.layerFilterInput.inputSearch.value="",this._updateLayerInfoStatus(""),this.layerListWidget._refresh())}})})},"widgets/LayerList/_build-generate_module":function(){define(["dojo/text!./Widget.html","dojo/text!./css/style.css","dojo/i18n!./nls/strings","dojo/text!./config.json"],function(){})},"url:widgets/LayerList/PopupMenu.html":'\x3cdiv\x3e\r\n  \x3cdiv class\x3d"popup-menu-transparency-body" data-dojo-attach-point\x3d"transparencyDiv" data-dojo-attach-event\x3d"onclick:_onTransparencyDivClick" \x3e\r\n    \x3cdiv class\x3d"label"\x3e\r\n      \x3cdiv class\x3d"label-left jimu-float-leading"\x3e${nls.itemOpaque}\x3c/div\x3e\r\n      \x3cdiv class\x3d"label-right jimu-float-trailing"\x3e${nls.itemTransparent}\x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"transparencyBody"\x3e \r\n      \x3col data-dojo-attach-point\x3d"transparencyRule" class\x3d"transparency-rule"\x3e \x3c/ol\x3e\r\n    \x3c/div\x3e\r\n  \x3c/div\x3e\r\n  \x3cdiv class\x3d"popup-menu-visible-scale-range-body" data-dojo-attach-point\x3d"setVisibilityRangeNode" data-dojo-attach-event\x3d"onclick:_onSetVisibilityRangeNode"\x3e \r\n  \x3c/div\x3e\r\n\x3cdiv\x3e\r\n',
"url:esri/dijit/VisibleScaleRangeSlider/templates/ScaleMenu.html":'\x3cdiv\x3e\n  \x3cdiv class\x3d"${css.section}"\x3e\n    \x3cdiv class\x3d"${css.header}"\x3e${labels.current}\x3c/div\x3e\n    \x3cdiv class\x3d"${css.content}"\x3e\n      \x3cdiv data-dojo-attach-point\x3d"dap_currentScaleLabel" class\x3d"${css.item} ${css.current}"\x3e\x3c/div\x3e\n      \x3cdiv data-dojo-attach-point\x3d"dap_scaleInput" data-dojo-type\x3d"dijit/form/TextBox" class\x3d"${css.input}"\x3e\x3c/div\x3e\n    \x3c/div\x3e\n  \x3c/div\x3e\n  \x3cdiv class\x3d"${css.section}" data-dojo-attach-point\x3d"dap_recommendedScaleSection"\x3e\n    \x3cdiv class\x3d"${css.header}" data-dojo-attach-point\x3d"dap_scaleListHeader"\x3e\x3c/div\x3e\n    \x3cdiv class\x3d"${css.content}"\x3e\n      \x3col data-dojo-attach-point\x3d"dap_recommendedScales" class\x3d"${css.list}"\x3e\n        \x3cli data-dojo-attach-point\x3d"dap_mapScaleItem" class\x3d"${css.item} ${css.selectable}"\x3e\x3c/li\x3e\n        \x3c!--additional list items added dynamically--\x3e\n      \x3c/ol\x3e\n    \x3c/div\x3e\n  \x3c/div\x3e\n\x3c/div\x3e\n',
"url:esri/dijit/VisibleScaleRangeSlider/templates/ScalePreview.html":'\x3cdiv\x3e\n  \x3cdiv class\x3d"${css.header}"\x3e${labels.preview}\x3c/div\x3e\n  \x3cdiv data-dojo-attach-point\x3d"dap_scalePreviewThumbnail" class\x3d"${css.thumbnail}"\x3e\x3c/div\x3e\n\x3c/div\x3e\n',"url:dojox/form/resources/HorizontalRangeSlider.html":'\x3ctable class\x3d"dijit dijitReset dijitSlider dijitSliderH dojoxRangeSlider" cellspacing\x3d"0" cellpadding\x3d"0" border\x3d"0" rules\x3d"none" dojoAttachEvent\x3d"onkeypress:_onKeyPress,onkeyup:_onKeyUp" role\x3d"presentation"\n\t\x3e\x3ctr class\x3d"dijitReset"\n\t\t\x3e\x3ctd class\x3d"dijitReset" colspan\x3d"2"\x3e\x3c/td\n\t\t\x3e\x3ctd dojoAttachPoint\x3d"topDecoration" class\x3d"dijitReset dijitSliderDecoration dijitSliderDecorationT dijitSliderDecorationH"\x3e\x3c/td\n\t\t\x3e\x3ctd class\x3d"dijitReset" colspan\x3d"2"\x3e\x3c/td\n\t\x3e\x3c/tr\n\t\x3e\x3ctr class\x3d"dijitReset"\n\t\t\x3e\x3ctd class\x3d"dijitReset dijitSliderButtonContainer dijitSliderButtonContainerH"\n\t\t\t\x3e\x3cdiv class\x3d"dijitSliderDecrementIconH" tabIndex\x3d"-1" style\x3d"display:none" dojoAttachPoint\x3d"decrementButton"\x3e\x3cspan class\x3d"dijitSliderButtonInner"\x3e-\x3c/span\x3e\x3c/div\n\t\t\x3e\x3c/td\n\t\t\x3e\x3ctd class\x3d"dijitReset"\n\t\t\t\x3e\x3cdiv class\x3d"dijitSliderBar dijitSliderBumper dijitSliderBumperH dijitSliderLeftBumper" dojoAttachEvent\x3d"onmousedown:_onClkDecBumper"\x3e\x3c/div\n\t\t\x3e\x3c/td\n\t\t\x3e\x3ctd class\x3d"dijitReset"\n\t\t\t\x3e\x3cinput dojoAttachPoint\x3d"valueNode" type\x3d"hidden" ${!nameAttrSetting}\n\t\t\t/\x3e\x3cdiv role\x3d"presentation" class\x3d"dojoxRangeSliderBarContainer" dojoAttachPoint\x3d"sliderBarContainer"\n\t\t\t\t\x3e\x3cdiv class\x3d"dijitSliderMoveable dijitSliderMoveableH"\n\t\t\t\t\t\x3e\x3cdiv class\x3d"dijitSliderImageHandle dijitSliderImageHandleH" dojoAttachPoint\x3d"sliderHandle,focusNode" tabIndex\x3d"${tabIndex}" dojoAttachEvent\x3d"onmousedown:_onHandleClick" role\x3d"slider"\x3e\x3c/div\n\t\t\t\t\x3e\x3c/div\n\t\t\t\t\x3e\x3cdiv role\x3d"presentation" dojoAttachPoint\x3d"progressBar" class\x3d"dijitSliderBar dijitSliderBarH dijitSliderProgressBar dijitSliderProgressBarH" dojoAttachEvent\x3d"onmousedown:_onBarClick"\x3e\x3c/div\n\t\t\t\t\x3e\x3cdiv class\x3d"dijitSliderMoveable dijitSliderMoveableH"\n\t\t\t\t\t\x3e\x3cdiv class\x3d"dijitSliderImageHandle dijitSliderImageHandleH" dojoAttachPoint\x3d"sliderHandleMax" tabIndex\x3d"${tabIndex}" dojoAttachEvent\x3d"onmousedown:_onHandleClickMax" role\x3d"slider"\x3e\x3c/div\n\t\t\t\t\x3e\x3c/div\n\t\t\t\t\x3e\x3cdiv role\x3d"presentation" dojoAttachPoint\x3d"remainingBar" class\x3d"dijitSliderBar dijitSliderBarH dijitSliderRemainingBar dijitSliderRemainingBarH" dojoAttachEvent\x3d"onmousedown:_onRemainingBarClick"\x3e\x3c/div\n\t\t\t\x3e\x3c/div\n\t\t\x3e\x3c/td\n\t\t\x3e\x3ctd class\x3d"dijitReset"\n\t\t\t\x3e\x3cdiv class\x3d"dijitSliderBar dijitSliderBumper dijitSliderBumperH dijitSliderRightBumper" dojoAttachEvent\x3d"onmousedown:_onClkIncBumper"\x3e\x3c/div\n\t\t\x3e\x3c/td\n\t\t\x3e\x3ctd class\x3d"dijitReset dijitSliderButtonContainer dijitSliderButtonContainerH"\n\t\t\t\x3e\x3cdiv class\x3d"dijitSliderIncrementIconH" tabIndex\x3d"-1" style\x3d"display:none" dojoAttachPoint\x3d"incrementButton"\x3e\x3cspan class\x3d"dijitSliderButtonInner"\x3e+\x3c/span\x3e\x3c/div\n\t\t\x3e\x3c/td\n\t\x3e\x3c/tr\n\t\x3e\x3ctr class\x3d"dijitReset"\n\t\t\x3e\x3ctd class\x3d"dijitReset" colspan\x3d"2"\x3e\x3c/td\n\t\t\x3e\x3ctd dojoAttachPoint\x3d"containerNode,bottomDecoration" class\x3d"dijitReset dijitSliderDecoration dijitSliderDecorationB dijitSliderDecorationH"\x3e\x3c/td\n\t\t\x3e\x3ctd class\x3d"dijitReset" colspan\x3d"2"\x3e\x3c/td\n\t\x3e\x3c/tr\n\x3e\x3c/table\x3e\n',
"url:widgets/LayerList/LayerListView.html":'\x3cdiv\x3e\r\n  \x3cdiv class\x3d"layer-list-operations" data-dojo-attach-point\x3d"layerListOperations"\x3e\r\n    \x3c!--div class\x3d"setting-image jimu-icon jimu-icon-setting jimu-state-disabled"\x3e\x3c/div--\x3e\r\n  \x3c/div\x3e\r\n  \x3ctable class\x3d"layer-list-table"\x3e\r\n    \x3ctbody class\x3d"layers-list-body" data-dojo-attach-point\x3d"layerListTable"\x3e\r\n    \t\x3ctr class\x3d"hrClass" \x3e\r\n\t\t   \x3ctd class\x3d"" colspan\x3d"4"\x3e\r\n\t\t\t\t\x3chr/\x3e\r\n\t\t   \x3c/td\x3e\r\n\t\t\x3c/tr\x3e\r\n    \t\x3ctr class\x3d"hrClassNonGraphic" \x3e\r\n\t\t   \x3ctd class\x3d"" colspan\x3d"4"\x3e\r\n\t\t   \x3c/td\x3e\r\n\t\t\x3c/tr\x3e\t\t\r\n    \x3c/tbody\x3e\r\n    \x3ctbody class\x3d"layers-list-body" data-dojo-attach-point\x3d"tableListTable"\x3e\x3c/tbody\x3e       \r\n  \x3c/table\x3e\r\n\x3c/div\x3e\r\n',
"url:widgets/LayerList/LayerFilter.html":'\x3cdiv\x3e\r\n  \x3cdiv class\x3d"search-input-node invalid" data-dojo-attach-point\x3d"searchInputNode"\x3e\r\n    \x3cdiv class\x3d"clear-input-button disable" data-dojo-attach-point\x3d"clearInputButton" data-dojo-attach-event\x3d"click:_onClearInputButton"\x3e\x3c/div\x3e\r\n  \x3c/div\x3e\r\n  \x3cdiv class\x3d"search-button" data-dojo-attach-point\x3d"searchButton" data-dojo-attach-event\x3d"click:_onSearchBtnClick"\x3e\x3c/div\x3e\r\n  \x3cdiv class\x3d"cancel-button invalid" data-dojo-attach-point\x3d"cancelButton" data-dojo-attach-event\x3d"click:_onCancelBtnClick"\x3e${nls.cancel}\x3c/div\x3e\r\n\x3c/div\x3e\r\n',
"url:widgets/LayerList/Widget.html":'\x3cdiv id\x3d "LayerListTOC"\x3e\r\n\x3cdiv\x3e\r\n\t\t\x3cinput type\x3d"button" id\x3d"butRemoveAllLayers" value\x3d"Remove All" style\x3d"display:none" data-dojo-attach-event\x3d"onclick:_onRemoveLayersClick"\x3e\r\n\t\x3c/div\x3e\r\n  \x3cdiv class\x3d"layers-section" data-dojo-attach-point\x3d"layersSection"\x3e\r\n    \x3cdiv class\x3d"layer-list-title" data-dojo-attach-point\x3d"layerListTitle"\x3e${nls.layers}\x3c/div\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"openLegendButtonNode" id\x3d"openLegendDiv"\x3e\x3c/div\x3e\r\n    \x3cdiv class\x3d"layer-filter-node" data-dojo-attach-point\x3d"layerFilterNode"\x3e\x3c/div\x3e\r\n    \x3cdiv class\x3d"layer-list-body" data-dojo-attach-point\x3d"layerListBody"\x3e\r\n    \x3c/div\x3e\r\n  \x3c/div\x3e\r\n\x3c/div\x3e\r\n',
"url:widgets/LayerList/css/style.css":'.jimu-widget-layerList{position: relative;}.jimu-widget-layerList .jimu-hr{margin-top: 15px;}.jimu-widget-layerList .layers-section{margin-top: 0px; z-index: 0; position: relative;}.jimu-widget-layerList .layers-section .layers-list{width: 100%;}.jimu-widget-layerList .layers-section .layer-list-title{height: 16px; font-size: 14px; margin-bottom: 14px; font-family: "Avenir Heavy"; margin-left: 8px; margin-right: 8px;}.jimu-widget-layerList .layers-section .layer-list-title.disable{margin-bottom: 2px;}.jimu-widget-layerList .layer-list-body {}.jimu-widget-layerList .layer-list-table{width: 100%; border-spacing: 0px;}.jimu-widget-layerList .layers-list-body{border: 0px solid #999;}.jimu-widget-layerList .jimu-widget-row{}.jimu-widget-layerList .layer-row{height: 40px;}.jimu-widget-layerList .layer-row:hover{background-color: #e3ecf2;}.jimu-widget-layerList .layer-row-mouseover{background-color: #e3ecf2;}.jimu-widget-layerList .jimu-widget-row-selected{background-color: #d9dde0;}.jimu-widget-layerList .jimu-widget-row-active{background-color: #009cff;}.jimu-widget-layerList .jimu-widget-row-selected .col-layer-label{color: #333;}.jimu-widget-layerList .jimu-widget-row-active .col-layer-label{color: #fff;}.jimu-widget-layerList .col{border: 0px solid; border-bottom: 0px solid #ffffff;}.jimu-widget-layerList .col1{vertical-align: top;}.jimu-widget-layerList .col15{vertical-align: top; width: 22px;}.jimu-widget-layerList .layer-sub-node .col15{width: 0px;}.jimu-widget-layerList .col2{width: auto; word-break: break-word; cursor: pointer; position: relative; top: 2px;}.jimu-widget-layerList .col3{width: 24px;}.jimu-widget-layerList .begin-blank-div{width: 12px; height: 2px;}.jimu-widget-layerList .col-showLegend{width: 17px; text-align: center;}.jimu-widget-layerList .showLegend-div{width: 13px; height: 13px; cursor: pointer; margin-left: 3px; margin-top: 3px; background-image: url("../images/v_right.png"); background-repeat: no-repeat; background-position: center;}.jimu-rtl .jimu-widget-layerList .showLegend-div{background-image: url("../images/v_left.png"); margin-left: 0; margin-right: 3px;} .jimu-widget-layerList .showLegend-div.unfold{background-image: url("../images/v.png");}.jimu-widget-layerList .showLegend-div.hidden{background-image: none; cursor: auto;}.jimu-widget-layerList .layers-list-imageShowLegend-down{-moz-transform: scale(1) rotate(270deg) translateX(0px) translateY(0px) skewX(0deg) skewY(0deg); -webkit-transform: scale(1) rotate(270deg) translateX(0px) translateY(0px) skewX(0deg) skewY(0deg); -o-transform: scale(1) rotate(270deg) translateX(0px) translateY(0px) skewX(0deg) skewY(0deg); -ms-transform: scale(1) rotate(270deg) translateX(0px) translateY(0px) skewX(0deg) skewY(0deg); transform: scale(1) rotate(270deg) translateX(0px) translateY(0px) skewX(0deg) skewY(0deg);}.jimu-widget-layerList .layers-list-imageShowLegend-down-div{background-color: #d9dde0;}.jimu-widget-layerList .noLegend-div{width: 33px; text-align: right; display: none;}.jimu-widget-layerList .noLegend-image{display: block; margin: 0 auto;}.jimu-widget-layerList .col-blank{width:17px;}.jimu-widget-layerList .col-select{width: 17px;}.jimu-widget-layerList .col-reserve-blank{width: 25px;}.jimu-widget-layerList .col-content{color: #686868; font-size: 12px;}.jimu-widget-layerList .div-select{position: relative; font-size: 2px;}.jimu-widget-layerList .div-select .checkbox{cursor: auto;}.jimu-widget-layerList .image-group-div {width: 14px; height: 14px; background-image: url("../images/group_layer.svg"); background-repeat: no-repeat; background-position: center center; background-size: 14px; margin: 1px 0 0 2px; cursor: auto;}.jimu-rtl .jimu-widget-layerList .image-group-div {margin-left: 4px; margin-right: auto;}.jimu-widget-layerList .image-group-div.disable{display: none;}.jimu-widget-layerList .div-content{position: relative; font-size: 12px; top: 2px;}.jimu-widget-layerList .div-content.grayed-title{padding-bottom: 5px; opacity: 0.3;}.jimu-widget-layerList .col-popupMenu{width: 17px; text-align: center;}.jimu-widget-layerList .col-select .jimu-selection-box{margin-top: 7px;}.jimu-widget-layerList .layers-list-body .col-layer-label{color: #686868;}.jimu-widget-layerList .layer-sub-node{display: none; width:100%; border-spacing: 0px;}.jimu-widget-layerList .legend-node-td{}.jimu-widget-layerList .legend-div{overflow: hidden; font-size: 11px;}.jimu-widget-layerList .legend-symbol{}.jimu-widget-layerList .legend-label{margin-top: 4px; color: #686868; font-size: 11px;}.jimu-widget-layerList .esriLegendService {padding-bottom: 0;}.jimu-widget-layerList .esriLegendLayerLabel {padding-top: 0; height: 0; display: none;}.jimu-widget-layerList .esriLegendServiceLabel {display: none;}.jimu-widget-layerList .esriLegendLayer{font-size: 12px; position: relative; top: -8px;}.jimu-widget-layerList .esriLegendLayer \x3e tbody \x3e tr \x3e td:first-child {font-size: 0px;}.jimu-widget-layerList .esriLegendMsg{display: none;}.jimu-widget-layerList .layers-list-popupMenu-div{position: relative; width: 22px; cursor: pointer; border-radius: 2px; float: right; padding-top: 14px; background-image: url("../images/more_normal.svg"); background-repeat: no-repeat; background-position: 0px 2px;}.jimu-widget-layerList .layers-list-popupMenu-div:hover{background-image: url("../images/more_hover.svg");}.jimu-widget-layerList .layers-list-popupMenu-div .popup-menu-button{background: none;}.jimu-widget-layerList .layers-list-popupMenu-div .popup-menu-button:hover{background: none;}.jimu-widget-layerList .layers-list-popupMenu-div .loading-section {width: 17px; height: 17px; top: 14px; left: 2px; z-index: 1; margin: 0;} .jimu-rtl .jimu-widget-layerList .layers-list-popupMenu-div .loading-section {left: auto; right: 2px;}.jimu-widget-layerList .layers-list-popupMenu-div .popup-menu-loading{width: 17px; height: 17px; margin: -9px 0 0 2px; border-radius: 25px; background-image: url("../images/loading.gif"); background-repeat: no-repeat; background-position: center center; background-size: contain;}.jimu-rtl .jimu-widget-layerList .layers-list-popupMenu-div .popup-menu-loading{}.jimu-widget-layerList .layers-list-popupMenu-div-selected{width: 13px; height: 13px; background-color: #ffffff; border-radius: 2px;}.jimu-widget-layerList .layers-list-popupMenu-image{position: absolute; top: 5px; left: 3px;}.jimu-widget-layerList .popup-menu-transparency-body {position: absolute; background-color: #ffffff; box-shadow: 0px 0px 4px 2px rgba(177, 177, 177, 0.5); outline-width:1px; width: 220px; height:50px; padding-left: 2%; padding-right: 2%; color: #686868; z-index: 2; font-size: 12px; display: none;}.jimu-widget-layerList .popup-menu-transparency-body .dijitSliderImageHandleH{background: url(./images/slider-handle.png); width: 10px; border: none; height: 14px;}.jimu-widget-layerList .popup-menu-transparency-body .dijitSlider .dijitSliderBar {background: #ddd none; border-color: #999;}.jimu-widget-layerList .popup-menu-transparency-body .dijitSliderHover .dijitSliderBar {background: #ddd none; border-color: #999;}.jimu-widget-layerList .popup-menu-transparency-body .dijitSlider .dijitSliderDecrementIconH, .jimu-widget-layerList .popup-menu-transparency-body .dijitSlider .dijitSliderIncrementIconH {background-color: #ddd; border: solid 1px #b5bcc7;}.jimu-widget-layerList .popup-menu-transparency-body .dijitSliderHover .dijitSliderDecrementIconH,.jimu-widget-layerList .popup-menu-transparency-body .dijitSliderHover .dijitSliderIncrementIconH {background-color: #ddd; border: solid 1px #b5bcc7;}.jimu-widget-layerList .popup-menu-transparency-body .transparency-rule{}.jimu-widget-layerList .popup-menu-transparency-body .label {overflow: hidden; margin-top: 2px; margin-bottom: 1px;}.jimu-widget-layerList .popup-menu-visible-scale-range-body {position: absolute; background-color: #ffffff; box-shadow: 0px 0px 4px 2px rgba(177, 177, 177, 0.5); outline-width:1px; width: 290px; height:50px; padding-left: 5px; padding-right: 5px; color: #686868; z-index: 2; font-size: 12px; display: none;}.jimu-widget-layerList .popup-menu-visible-scale-range-body .esriVisibleScaleRangeSlider{margin-top: 15px;}.jimu-widget-layerList .jimu-dropmenu .popup-menu-button{width: 22px; height: 22px;}.jimu-widget-layerList .jimu-dropmenu .jimu-icon-btn{width: 22px; height: 22px; min-width: 13px; background-image: url("../images/more_normal.svg"); background-color: rgba(255, 255, 255, 0); border: 0 solid;}.jimu-widget-layerList .layers-list-popupMenu-div:hover .jimu-icon-btn{background-image: url("../images/more_hover.svg"); border: 0 solid; box-shadow: none;}.jimu-widget-layerList .jimu-dropmenu .jimu-icon-btn-selected{background-image: url("../images/more_hover.svg"); border: 0 solid; box-shadow: none;}.jimu-widget-layerList .jimu-dropmenu .drop-menu{min-width: 180px; max-width: 250px; outline-color:#ffffff; outline-style:solid; outline-width:1px; overflow:auto; font-size: 12px; z-index: 2; right: 0px; background-color: #ffffff; box-shadow: 0px 0px 4px 2px rgba(177, 177, 177, 0.5); outline-style: none;}.jimu-widget-layerList .jimu-dropmenu .drop-menu hr{border-bottom: 1px solid #d7dbde !important;}.jimu-widget-layerList .jimu-dropmenu .drop-menu.no-border{outline-style: none; border: none; box-shadow: none;}.jimu-rtl .jimu-widget-layerList .jimu-dropmenu .drop-menu{left: 0px;}.jimu-widget-layerList .jimu-dropmenu .menu-item{position: relative; height: 30px; line-height: 30px; white-space: nowrap; padding: 0px 12px; margin: 0 0; white-space: nowrap; overflow: hidden; text-overflow: ellipsis;}.menu-item-description{position: relative; height: 30px; line-height: 30px; white-space: nowrap; padding: 0px 12px; margin: 0 0; white-space: nowrap; overflow: hidden; text-overflow: ellipsis;}.jimu-widget-layerList .jimu-dropmenu .menu-item:hover{text-decoration: initial; background-color: #f3f3f3; font-family: "Avenir Medium";}.jimu-widget-layerList .jimu-dropmenu .menu-item-dissable{opacity: 0.4;}.jimu-widget-layerList .jimu-dropmenu .menu-item-hidden{display: none;}.jimu-widget-layerList .jimu-dropmenu .menu-item a{position: absolute; padding: 0 12px; width: 100%; left: 0;}.jimu-rtl .jimu-widget-layerList .jimu-dropmenu .menu-item a{right: auto; left: 0;}.jimu-widget-layerList .legends-loading-img{width: 45px;}.jimu-widget-layerList .jimu-dropmenu .menu-item .menu-item-description{text-decoration: none; color: inherit; display: block;}.jimu-widget-layerList .layer-list-operations{position: absolute; right: 0; top: 0;}.jimu-rtl .jimu-widget-layerList .layer-list-operations{right: auto; left: 0;}.jimu-widget-layerList .layer-list-operations .setting-image{position: relative; right: 11px; top: -1px;}.jimu-rtl .jimu-widget-layerList .layer-list-operations .setting-image{right: auto; left: 11px;}.jimu-widget-layerList .layer-list-operations .jimu-icon-btn{background-image: url("../images/operation_normal.svg"); background-color: rgba(255, 255, 255, 0);}.jimu-rtl .jimu-widget-layerList .layer-list-operations .jimu-icon-btn{left: auto; right: -8px;}.jimu-widget-layerList .layer-list-operations:hover .jimu-icon-btn{background-image: url("../images/operation_hover.svg"); border: 0 solid; box-shadow: none;}.jimu-widget-layerList .layer-list-operations .drop-menu{min-width:147px !important; top: 21px !important; right: 0 !important; left: auto !important; z-index: 1 !important; background-color: #ffffff; box-shadow: 0px 0px 4px 2px rgba(177, 177, 177, 0.5); outline-style: none !important;}.jimu-rtl .jimu-widget-layerList .layer-list-operations .drop-menu{right: auto !important; left: 0 !important;}.jimu-widget-layerList .layer-list-operations .drop-menu hr{border-bottom: 1px solid #d7dbde !important;}.jimu-widget-layerList .layer-list-operations .drop-menu .menu-item{margin: 0; padding: 0 7px; font-size: 12px; padding: 0 20px;}.jimu-widget-layerList .layer-list-operations .drop-menu .menu-item:hover{text-decoration: initial; background-color: #f3f3f3;}.layerlist-scale-icon {height: 16px; width: 16px; position: relative; top: 1px; border: 1px solid grey; border-radius: 2px;}#uniqName_10_0 {padding: 10px 5px 10px 5px;}.hrClass {}.jimu-widget-layerList .layer-list-operations .jimu-loading{font-size: 5px; top: 45px; left: 20px;}.jimu-rtl .jimu-widget-layerList .layer-list-operations .jimu-loading{left: auto; right: 20px;}.jimu-widget-layerList .layer-filter-node{position: absolute; width: 100%; top: 0;}.jimu-widget-layerList .layer-filter{position: relative;}.jimu-widget-layerList .layer-filter .search-input-node{position: absolute; top: -10px; left: 0; right: 74px;}.jimu-rtl .jimu-widget-layerList .layer-filter .search-input-node{left: 70px; right: 0;}.jimu-widget-layerList .layer-filter .search-input-node .jimu-search .jimu-input-wrapper{border: 1px solid #cccccc; background-color: #ffffff;}.jimu-widget-layerList .layer-filter .search-input-node .jimu-search .jimu-input{border: none; padding-left: 32px; padding-right: 30px;}.jimu-rtl .jimu-widget-layerList .layer-filter .search-input-node .jimu-search .jimu-input{padding-left: 30px; padding-right: 32px;}.jimu-widget-layerList .layer-filter .search-input-node .jimu-search .jimu-input:focus{box-shadow: none;}.jimu-widget-layerList .layer-filter .search-input-node .jimu-search .search-btn{left: 10px;}.jimu-rtl .jimu-widget-layerList .layer-filter .search-input-node .jimu-search .search-btn{right: 10px; left: auto;}.jimu-widget-layerList .layer-filter .search-input-node .jimu-search .search-btn:hover{cursor: auto; background-position: 0 -291px;}.jimu-widget-layerList .layer-filter .search-input-node.invalid{display: none;}.jimu-widget-layerList .layer-filter .search-button{width: 20px; height: 20px; position: absolute; top: -2px; right: 23px; background-image: url("../images/search_normal.svg"); background-repeat: no-repeat; background-position: center; cursor: pointer;}.jimu-rtl .jimu-widget-layerList .layer-filter .search-button{left: 23px; right: auto;}.jimu-widget-layerList .layer-filter .search-button:hover{background-image: url("../images/search_hover.svg");}.jimu-widget-layerList .layer-filter .search-button.invalid{display: none;}.jimu-widget-layerList .layers-section .openLegend-button{width: 22px; height: 22px; position: absolute; top: -2px; right: 47px; border:0; background-image: url("../images/open_legend_noHover.png"); background-repeat: no-repeat;}.jimu-widget-layerList .layers-section .openLegend-button:hover{background-image: url("../images/open_legend.png"); border:0;}.jimu-widget-layerList .layer-filter .cancel-button{width: 69px; height: 30px; line-height: 30px; border: 1px solid #cccccc; position: absolute; top: -5px; right: 0; z-index: 1; background-color: #ffffff; text-align: center; cursor: pointer; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; padding: 0 2px 0 2px;}.jimu-rtl .jimu-widget-layerList .layer-filter .cancel-button{left: 0; right: auto;}.jimu-widget-layerList .layer-filter .cancel-button.invalid{display: none;}.jimu-widget-layerList .layer-filter .search-input-node .clear-input-button{width: 15px; height: 25px; position: absolute; top: 7px; right: 10px; z-index: 1; background-image: url("../images/clear.svg"); background-repeat: no-repeat; background-position: center; background-size: 10px 10px;}.jimu-widget-layerList .layer-filter .search-input-node .clear-input-button.disable{display: none;}.jimu-widget-layerList .layer-filter .search-input-node .clear-input-button:hover{background-image: url("../images/clear_hover.svg");}.jimu-rtl .jimu-widget-layerList .layer-filter .search-input-node .clear-input-button{left: 10px; right: auto;}',
"url:widgets/LayerList/config.json":'{\r\n  "showTitle": true,\r\n  "showBasemap": false,\r\n  "showLegend": true,\r\n  "expandAllLayersByDefault": false,\r\n  "contextMenu": {\r\n\t"ZoomTo": true,\r\n\t"Transparency": true,\r\n\t"SetVisibilityRange": true,\r\n\t"EnableOrDisablePopup": true,\r\n        "ControlLabels": true,\r\n\t"MoveupOrMovedown": true,\r\n\t"OpenAttributeTable": true,\r\n\t"DescriptionOrShowItemDetailsOrDownload": true\r\n  }\r\n}\r\n',"*now":function(n){n(['dojo/i18n!*preload*widgets/LayerList/nls/Widget*["","ROOT"]'])}}});
define("jimu/BaseWidget jimu/PanelManager dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/html dojo/dom dojo/on dojo/query dijit/registry ./LayerListView ./LayerFilter ./NlsStrings jimu/LayerInfos/LayerInfos".split(" "),function(n,m,e,h,k,d,f,r,b,g,v,p,q,y){return e([n],{baseClass:"jimu-widget-layerList",name:"layerList",layerFilter:null,_denyLayerInfosReorderResponseOneTime:null,_denyLayerInfosIsVisibleChangedResponseOneTime:null,layerListView:null,operLayerInfos:null,postCreate:function(){!1===
this.config.showTitle&&(this.layerListTitle.innerHTML="",d.addClass(this.layerListTitle,"disable"))},startup:function(){this.inherited(arguments);var b=this;this._createLayerFilter();var d=document.getElementById("openLegendDiv");dojo.create("input",{type:"button","class":"openLegend-button",id:"button_openLegend"},d).addEventListener("click",function(d){d=b.appConfig.getConfigElementsByName("Legend");m.getInstance().showPanel(d[0])});q.value=this.nls;this._denyLayerInfosIsVisibleChangedResponseOneTime=
this._denyLayerInfosReorderResponseOneTime=!1;this.map.itemId?y.getInstance(this.map,this.map.itemInfo).then(h.hitch(this,function(b){this.operLayerInfos=b;this.showLayers();this.bindEvents();f.setSelectable(this.layerListBody,!1);f.setSelectable(this.layerListTitle,!1)})):(d=this._obtainMapLayers(),y.getInstance(this.map,d).then(h.hitch(this,function(b){this.operLayerInfos=b;this.showLayers();this.bindEvents();f.setSelectable(this.layerListBody,!1);f.setSelectable(this.layerListTitle,!1)})))},_createLayerFilter:function(){this.layerFilter=
(new p({layerListWidget:this})).placeAt(this.layerFilterNode)},destroy:function(){this._clearLayers();this.inherited(arguments)},_obtainMapLayers:function(){var b=[],d=[],e={itemData:{baseMap:{baseMapLayers:[]},operationalLayers:[]}};k.forEach(this.map.graphicsLayerIds,function(b){b=this.map.getLayer(b);b.isOperationalLayer&&d.push({layerObject:b,title:b.label||b.title||b.name||b.id||" ",id:b.id||" "})},this);k.forEach(this.map.layerIds,function(e){e=this.map.getLayer(e);e.isOperationalLayer?d.push({layerObject:e,
title:e.label||e.title||e.name||e.id||" ",id:e.id||" "}):b.push({layerObject:e,id:e.id||" "})},this);e.itemData.baseMap.baseMapLayers=b;e.itemData.operationalLayers=d;return e},showLayers:function(){this.layerListView=(new v({operLayerInfos:this.operLayerInfos,layerListWidget:this,layerFilter:this.layerFilter,config:this.config})).placeAt(this.layerListBody);this.config.expandAllLayersByDefault&&this.layerListView.foldOrUnfoldAllLayers(!1)},_clearLayers:function(){this.layerListView&&this.layerListView.destroyRecursive&&
this.layerListView.destroyRecursive()},_refresh:function(){this._clearLayers();this.showLayers()},bindEvents:function(){this.own(r(this.operLayerInfos,"layerInfosChanged",h.hitch(this,this._onLayerInfosChanged)));this.config.showBasemap&&this.own(r(this.operLayerInfos,"basemapLayerInfosChanged",h.hitch(this,this._onLayerInfosChanged)));this.own(r(this.operLayerInfos,"tableInfosChanged",h.hitch(this,this._onTableInfosChanged)));this.own(this.operLayerInfos.on("layerInfosIsVisibleChanged",h.hitch(this,
this._onLayerInfosIsVisibleChanged)));this.own(r(this.operLayerInfos,"updated",h.hitch(this,this._onLayerInfosObjUpdated)));this.own(r(this.operLayerInfos,"layerInfosReorder",h.hitch(this,this._onLayerInfosReorder)));this.own(r(this.map,"zoom-end",h.hitch(this,this._onZoomEnd)));this.own(r(this.operLayerInfos,"layerInfosRendererChanged",h.hitch(this,this._onLayerInfosRendererChanged)));this.own(r(this.operLayerInfos,"layerInfosOpacityChanged",h.hitch(this,this._onLayerInfosOpacityChanged)));this.own(r(this.operLayerInfos,
"layerInfosScaleRangeChanged",h.hitch(this,this._onLayerInfosScaleRangeChanged)))},_onLayerInfosChanged:function(b,d){this.layerListView.refresh()},_onTableInfosChanged:function(b,d){"added"===d?k.forEach(b,function(b){this.layerListView.drawListNode(b,0,this.layerListView.tableListTable)},this):k.forEach(b,function(b){this.layerListView.destroyLayerTrNode(b)},this)},_onLayerInfosIsVisibleChanged:function(d){this._denyLayerInfosIsVisibleChangedResponseOneTime?this._denyLayerInfosIsVisibleChangedResponseOneTime=
!1:k.forEach(d,function(d){b("[class~\x3d'visible-checkbox-"+d.id+"']",this.domNode).forEach(function(b){b=g.byNode(b);d.isVisible()?b.check():b.uncheck()},this)},this)},_onLayerInfosObjUpdated:function(){this._refresh()},_onZoomEnd:function(){var e=[];this.operLayerInfos.traversal(h.hitch(this,function(b){e.push(b)}));var f=this;setTimeout(function(){var g=e.shift();b("[class~\x3d'layer-title-div-"+g.id+"']",this.domNode).forEach(function(b){try{var a=g.id.replace(window.layerIdPrefix,"").replace(window.layerIdPBSPrefix,
"");g.isInScale()||null!=window.hashIDtoTileURL[a]?d.removeClass(b,"grayed-title"):d.addClass(b,"grayed-title")}catch(c){console.warn(c.message)}},f);0<e.length&&setTimeout(arguments.callee,30)},30)},_onLayerInfosReorder:function(){this._denyLayerInfosReorderResponseOneTime?this._denyLayerInfosReorderResponseOneTime=!1:this._refresh()},_onLayerInfosRendererChanged:function(b){try{k.forEach(b,function(b){this.layerListView.redrawLegends(b)},this)}catch(t){this._refresh()}},_onLayerInfosOpacityChanged:function(d){k.forEach(d,
function(d){var e=void 0===d.layerObject.opacity?1:d.layerObject.opacity;d=b("[layercontenttrnodeid\x3d'"+d.id+"']",this.domNode)[0];b(".legends-div.jimu-legends-div-flag img",d).style("opacity",e)},this)},_onLayerInfosScaleRangeChanged:function(e){k.forEach(e,function(e){var f=[];e.traversal(h.hitch(this,function(a){f.push(a)}));var g=this,a=0;setTimeout(function(){var c=f.slice(a,a+10);a+=10;k.forEach(c,function(a){b("[class~\x3d'layer-title-div-"+a.id+"']",this.domNode).forEach(function(b){try{a.isInScale()?
d.removeClass(b,"grayed-title"):d.addClass(b,"grayed-title")}catch(A){console.warn(A.message)}},g)});f.length>a&&setTimeout(arguments.callee,30)},30)},this)},onAppConfigChanged:function(b,d,e){this.appConfig=b},uncheckRelatedCheckbox:function(b){b=document.getElementById(window.chkSelectableLayer+b);null!=b&&1==b.checked&&b.click()},_onRemoveLayersClick:function(){for(var b=0,d=this.map.layerIds.length;b<d;b++){var e=this.map.getLayer(this.map.layerIds[b]);null!=e&&(-1<e.id.indexOf(window.addedLayerIdPrefix)&&
this.map.removeLayer(e),-1<e.id.indexOf(window.uploadedFeatLayerIdPrefix)&&this.map.removeLayer(e),-1<e.id.indexOf(window.layerIdTiledPrefix)&&this.map.removeLayer(e),-1<e.id.indexOf(window.layerIdPrefix)&&this.map.removeLayer(e),-1<e.id.indexOf(window.layerIdBndrPrefix)&&this.map.removeLayer(e),-1<e.id.indexOf(window.layerIdPBSPrefix)&&this.map.removeLayer(e),-1<e.id.indexOf(window.layerIdDemographPrefix)&&this.map.removeLayer(e))}for(i in window.allLayerNumber)simpleSearchFilterId="widgets_SimpleSearchFilter_Widget_37",
lyr=this.map.getLayer(window.layerIdPrefix+window.allLayerNumber[i]),null!=lyr&&(this.openWidgetById(simpleSearchFilterId),this.map.removeLayer(lyr),this.uncheckRelatedCheckbox(window.allLayerNumber[i])),lyr=this.map.getLayer(window.layerIdTiledPrefix+window.allLayerNumber[i]),null!=lyr&&this.map.removeLayer(lyr);for(i in window.layerID_Portal_WebMap)lyr=this.map.getLayer(window.layerID_Portal_WebMap[i]),null!=lyr&&this.map.removeLayer(lyr);for(i in window.layerID_Demographics)lyr=this.map.getLayer(window.layerID_Demographics[i]),
null!=lyr&&this.map.removeLayer(lyr);for(i in window.uploadedFileColl)lyr=this.map.getLayer(window.uploadedFileColl[i]),null!=lyr&&this.map.removeLayer(lyr);lyrCommunityBoundary=this.map.getLayer(window.idCommuBoundaryPoint);null!=lyrCommunityBoundary&&this.map.removeLayer(lyrCommunityBoundary)}})});